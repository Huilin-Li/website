<!DOCTYPE html>
<html lang="en-us" dir="ltr">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#343a40">
<meta name="color-scheme" content="light dark"><meta property="og:title" content="我的博客" />
<meta property="og:description" content="" />
<meta property="og:type" content="website" />
<meta property="og:url" content="http://localhost:1313/posts/" />

<title>我的博客 | Huilin Li</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/logo.png" >
<link rel="canonical" href="http://localhost:1313/posts/">
<link rel="stylesheet" href="/book.min.f3de075a26891530cb4ae6aeb9b647bcc541281bbd3ec57e8bf60cb157bc209f.css" integrity="sha256-894HWiaJFTDLSuauubZHvMVBKBu9PsV&#43;i/YMsVe8IJ8=" crossorigin="anonymous">
  <script defer src="/flexsearch.min.js"></script>
  <script defer src="/en.search.min.63b6564d7b3b31dd72b69135cc6c6b73c5ad27a2c8e9373f7ae6f091b7281354.js" integrity="sha256-Y7ZWTXs7Md1ytpE1zGxrc8WtJ6LI6Tc/eubwkbcoE1Q=" crossorigin="anonymous"></script>

  <script defer src="/sw.min.6f6f90fcb8eb1c49ec389838e6b801d0de19430b8e516902f8d75c3c8bd98739.js" integrity="sha256-b2&#43;Q/LjrHEnsOJg45rgB0N4ZQwuOUWkC&#43;NdcPIvZhzk=" crossorigin="anonymous"></script>
<link rel="alternate" type="application/rss+xml" href="http://localhost:1313/posts/index.xml" title="Huilin Li" />
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/"><img src="/logo.png" alt="Logo" /><span>Huilin Li</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>












  



  
  <ul>
    
      
        <li class="book-section-flat" >
          
  
  

  
    <a href="/docs/me/" class="">Keep Things Simple</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>Blog</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/blogs/bioworld/" class="">Biology World</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/blogs/bioworld/binderdesign/" class="">TP Binder Design</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/blogs/bioworld/proteinstruture/" class="">4 levels of protein structure</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/blogs/hugo/" class="">Hugo</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/blogs/hugo/hugobookgithubaction/" class="">HugoBook&#43;GithubAction</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/blogs/hugo/hugo/" class="">Hugo Commands</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/blogs/shell/" class="">Bash Scripts</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <span>literature</span>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <span>Plotly</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/blogs/plotly/examples/" class="">Visualization via plotly</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <a href="/docs/travel/" class="">World</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>











  
<ul>
  
  <li>
    <a href="/posts/"  >
        我的博客
      </a>
  </li>
  
  <li>
    <a href="https://github.com/Huilin-Li"  target="_blank" rel="noopener">
        Github
      </a>
  </li>
  
  <li>
    <a href="https://www.goodreads.com/review/list/177314441"  target="_blank" rel="noopener">
        goodreads
      </a>
  </li>
  
</ul>






</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>我的博客</strong>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  <nav>
  <ul>
  
    
    <li class="book-section-flat">
      <strong>Categories</strong>
      <ul>
      
      </ul>
    </li>
    
  
    
    <li class="book-section-flat">
      <strong>Tags</strong>
      <ul>
      
        <li class="flex justify-between">
          <a href="/tags/2023-05-07%E4%BB%8Ehalo%E5%8D%9A%E5%AE%A2%E8%BF%81%E7%A7%BB/">2023-05-07从halo博客迁移</a>
          <span>76</span>
        </li>
      
      </ul>
    </li>
    
  
  </ul>
</nav>


  </aside>
  
 
      </header>

      
      
  
  <article class="markdown book-post">
    <h2>
      <a href="/posts/history/es%E5%8F%82%E8%80%83%E6%96%87%E6%A1%A3/">Es参考文档</a>
    </h2>
    
  <h5>February 14, 2022</h5>



  

  
  <div>
    
      <a href="/tags/2023-05-07%E4%BB%8Ehalo%E5%8D%9A%E5%AE%A2%E8%BF%81%E7%A7%BB/">2023-05-07从halo博客迁移</a>
  </div>
  




    <p>https://www.tizi365.com/archives/590.html
    </p>
  </article>
  
  <article class="markdown book-post">
    <h2>
      <a href="/posts/history/%E6%9B%B4%E6%96%B0ideagit%E5%88%86%E6%94%AF%E4%BF%A1%E6%81%AF/">更新 ID Eagit分支信息</a>
    </h2>
    
  <h5>January 21, 2022</h5>



  

  
  <div>
    
      <a href="/tags/2023-05-07%E4%BB%8Ehalo%E5%8D%9A%E5%AE%A2%E8%BF%81%E7%A7%BB/">2023-05-07从halo博客迁移</a>
  </div>
  




    <p>IDEA 常常出现本地显示的分支信息与远程的分支信息不一致，使用以下命令更新远程分支信息到本地缓存中来。
git remote update origin --prune 
    </p>
  </article>
  
  <article class="markdown book-post">
    <h2>
      <a href="/posts/history/mysql%E4%B8%8D%E5%90%8C%E5%AD%97%E7%AC%A6%E9%9B%86%E8%A1%A8%E5%85%B3%E8%81%94%E5%AF%BC%E8%87%B4%E7%B4%A2%E5%BC%95%E5%A4%B1%E6%95%88/">Mysql不同字符集表关联导致索引失效</a>
    </h2>
    
  <h5>January 6, 2022</h5>



  

  
  <div>
    
      <a href="/tags/2023-05-07%E4%BB%8Ehalo%E5%8D%9A%E5%AE%A2%E8%BF%81%E7%A7%BB/">2023-05-07从halo博客迁移</a>
  </div>
  




    <p>背景： 在做业务初始化时，出现join表关联没有走索引的情况，原来只要执行半个小时的脚本，现在要执行几个小时，经排查，是两个表的字符集不一样，旧表的字符集是utf8，而新表的字符集都是utf8mb4，而导致关联时不走索引。
目前解决方案有两种： 1、修改旧表字符集成utf8mb4 2、在执行脚本时，转换字符集类型，从而让其走索引 convert(字段 using utf8mb4)
1方案要处理难度非一般，目前业务在线上跑，
    </p>
  </article>
  
  <article class="markdown book-post">
    <h2>
      <a href="/posts/history/redis%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81/">Redis分布式锁</a>
    </h2>
    
  <h5>December 29, 2021</h5>



  

  
  <div>
    
      <a href="/tags/2023-05-07%E4%BB%8Ehalo%E5%8D%9A%E5%AE%A2%E8%BF%81%E7%A7%BB/">2023-05-07从halo博客迁移</a>
  </div>
  




    <p>&lt;dependency&gt; &lt;groupId&gt;redis.clients&lt;/groupId&gt; &lt;artifactId&gt;jedis&lt;/artifactId&gt; &lt;version&gt;3.0.1&lt;/version&gt; &lt;/dependency&gt; LockUtil
public class LockUtil { private static final JedisPool JEDIS_POOL; /** 锁过期时间 */ private static final long INTERNAL_LOCK_LEASE_TIME = 5000; private final static long TIME_OUT = 20000; //获取锁的超时时间 private static final SetParams PARAMS = SetParams.setParams().nx().px(INTERNAL_LOCK_LEASE_TIME); static { JEDIS_POOL = new JedisPool(&#34;139.9.183.232&#34;, 6379); } private static Jedis getJedis() { Jedis resource = JEDIS_POOL.getResource(); resource.auth(&#34;yuanmoc&#34;); return resource; } public static boolean lock(String lockKey, String sessionId) { Jedis jedis = getJedis(); long start = System.
        <a href="/posts/history/redis%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81/">...</a>
      
    </p>
  </article>
  
  <article class="markdown book-post">
    <h2>
      <a href="/posts/history/hashmapkeyset%E8%B8%A9%E5%9D%91/">Hash Mapkey Set踩坑</a>
    </h2>
    
  <h5>November 6, 2021</h5>



  

  
  <div>
    
      <a href="/tags/2023-05-07%E4%BB%8Ehalo%E5%8D%9A%E5%AE%A2%E8%BF%81%E7%A7%BB/">2023-05-07从halo博客迁移</a>
  </div>
  




    <p>在HashMap中使用keySet获取一个Set对象，然后移除Set对象中的值，发现会把HashMap中的值也移除掉了。
查看源码发现，HashMap中keySet使用的也是HashMap中的对象，而不是重新创建一个对象，所以操作HashSet时，也就是操作了HashMap对象。
public Set&lt;K&gt; keySet() { Set&lt;K&gt; ks; return (ks = keySet) == null ? (keySet = new KeySet()) : ks; } final class KeySet extends AbstractSet&lt;K&gt; { public final int size() { return size; } public final void clear() { HashMap.this.clear(); } public final Iterator&lt;K&gt; iterator() { return new KeyIterator(); } public final boolean contains(Object o) { return containsKey(o); } public final boolean remove(Object key) { return removeNode(hash(key), key, null, false, true) !
        <a href="/posts/history/hashmapkeyset%E8%B8%A9%E5%9D%91/">...</a>
      
    </p>
  </article>
  
  <article class="markdown book-post">
    <h2>
      <a href="/posts/history/%E4%BD%BF%E7%94%A8jetcache@createcache%E5%88%9B%E5%BB%BA%E4%B8%A4%E4%B8%AA%E7%BC%93%E5%AD%98%E5%AF%B9%E8%B1%A1%E5%8F%91%E7%8E%B0%E9%85%8D%E7%BD%AE%E5%85%A8%E9%83%A8%E4%BD%BF%E7%94%A8%E4%BA%86%E7%AC%AC%E4%B8%80%E4%B8%AA/">使用jetcache@ Create Cache创建两个缓存对象，发现配置全部使用了第一个</a>
    </h2>
    
  <h5>October 28, 2021</h5>



  

  
  <div>
    
      <a href="/tags/2023-05-07%E4%BB%8Ehalo%E5%8D%9A%E5%AE%A2%E8%BF%81%E7%A7%BB/">2023-05-07从halo博客迁移</a>
  </div>
  




    <p>使用@CreateCache创建两个缓存对象，由于这两个缓存对象都使用的 area 和 name 是一样的，导致了创建的第二个缓存对象没有生效，而是使用了第一个缓存对象。
主要排查为什么会使用到了第一个缓存的对象。
/** 第一个缓存对象 */ @CreateCache(name = &#34;pre&#34;, cacheType = CacheType.REMOTE, expire = Integer.MAX_VALUE, timeUnit = TimeUnit.SECONDS) private Cache&lt;String, List&lt;PopupsVO&gt;&gt; popupsCache; /** 第二个缓存对象 */ @CreateCache(name = &#34;pre&#34;, cacheType = CacheType.REMOTE, expire = 60, timeUnit = TimeUnit.SECONDS) private Cache&lt;String, List&lt;Integer&gt;&gt; popupsCacheUserPopupsIds; 请求时，会先初始化缓存配置config，com.alicp.jetcache.anno.field.LazyInitCache#checkInit ,由于已经初始化过了，debug把 this.inited 改成false。重新进入初始化环节。
private void checkInit() { if (!this.inited) { synchronized(this) { if (!this.inited) { this.init(); this.inited = true; } } } } 在com.alicp.jetcache.anno.field.LazyInitCache#init 进行初始化，
        <a href="/posts/history/%E4%BD%BF%E7%94%A8jetcache@createcache%E5%88%9B%E5%BB%BA%E4%B8%A4%E4%B8%AA%E7%BC%93%E5%AD%98%E5%AF%B9%E8%B1%A1%E5%8F%91%E7%8E%B0%E9%85%8D%E7%BD%AE%E5%85%A8%E9%83%A8%E4%BD%BF%E7%94%A8%E4%BA%86%E7%AC%AC%E4%B8%80%E4%B8%AA/">...</a>
      
    </p>
  </article>
  
  <article class="markdown book-post">
    <h2>
      <a href="/posts/history/%E4%BD%BF%E7%94%A8js%E8%A7%A3%E7%A0%81gb18030%E7%BC%96%E7%A0%81%E7%9A%84base64%E5%AD%97%E7%AC%A6%E4%B8%B2/">使用js解码 Gb18030编码的 Base64字符串</a>
    </h2>
    
  <h5>October 14, 2021</h5>



  

  
  <div>
    
      <a href="/tags/2023-05-07%E4%BB%8Ehalo%E5%8D%9A%E5%AE%A2%E8%BF%81%E7%A7%BB/">2023-05-07从halo博客迁移</a>
  </div>
  




    <p>背景：后端使用GB18030字节编码加密成Base64后，在前端解码。
使用工具类进行解码 https://github.com/inexorabletash/text-encoding
1、先生成Uint8 字节buffer
var binary_string = window.atob(base64Cmd); var len = binary_string.length; var bytes = new Uint8Array(len); for (var i = 0; i &lt; len; i++) { bytes[i] = binary_string.charCodeAt(i); } buffer = bytes.buffer; 2、再使用Uint8 字节buffer生成对应的中文编码字符串
var str = new TextDecoder(&#39;gb18030&#39;).decode(buffer); 
    </p>
  </article>
  
  <article class="markdown book-post">
    <h2>
      <a href="/posts/history/cpcl%E6%8C%87%E4%BB%A4%E6%89%93%E5%8D%B0%E5%9B%BE%E7%89%87/">Cpcl指令打印图片</a>
    </h2>
    
  <h5>October 14, 2021</h5>



  

  
  <div>
    
      <a href="/tags/2023-05-07%E4%BB%8Ehalo%E5%8D%9A%E5%AE%A2%E8%BF%81%E7%A7%BB/">2023-05-07从halo博客迁移</a>
  </div>
  




    <p>public String graphics(int x0, int y0, int width, int height, BufferedImage bmp) { if (bmp != null) { //生成2进制字符串 int[] rgb = new int[3]; width = bmp.getWidth(); height = bmp.getHeight(); int wModByte = (width % 8) == 0 ? 0 : 8 - (width % 8); int pixelCount = (width + wModByte) * height; int wPrintByte = (width + wModByte) / 8; StringBuilder res = new StringBuilder(); for (int y = 0; y &lt; height; y++) { for (int x = 0; x &lt; width; x++) { int pixel = bmp.
        <a href="/posts/history/cpcl%E6%8C%87%E4%BB%A4%E6%89%93%E5%8D%B0%E5%9B%BE%E7%89%87/">...</a>
      
    </p>
  </article>
  
  <article class="markdown book-post">
    <h2>
      <a href="/posts/history/%E5%86%99%E4%B8%AApython%E8%84%9A%E6%9C%AC%E6%AF%8F%E5%A4%A9%E5%AE%9A%E6%97%B6%E7%99%BB%E5%BD%95/">写个python脚本，每天定时登录</a>
    </h2>
    
  <h5>September 13, 2021</h5>



  

  
  <div>
    
      <a href="/tags/2023-05-07%E4%BB%8Ehalo%E5%8D%9A%E5%AE%A2%E8%BF%81%E7%A7%BB/">2023-05-07从halo博客迁移</a>
  </div>
  




    <p>写一个脚本，每天登录获取积分。
使用的语法是python3，系统是centos7。
1、安装http请求需要的requests模块，直接使用pip3来安装
pip install requests 也可以到官网去下载源文件来安装 https://pypi.org/project/requests/
2、编写python脚本，文件名称：lmsLogin.py
#!/bin/python3 import re import requests from urllib import parse users = [ {&#39;user&#39;: &#39;xxx&#39;, &#39;pwd&#39;: &#39;xxx&#39;}, {&#39;user&#39;: &#39;xxx&#39;, &#39;pwd&#39;: &#39;xxx&#39;} ] for user in users: res = requests.get(url = &#39;https://lms.qinsilk.com/login&#39;) pattern = re.compile(r&#39;&lt;meta content=&#34;(.*)?&#34; name=&#34;csrf-token&#34;&#39;, re.M|re.I) token = pattern.findall(res.text, 0)[0] print(token) cookie = requests.utils.dict_from_cookiejar(res.cookies) print (cookie) url = r&#39;https://lms.qinsilk.com/login_check&#39; headers = { &#39;origin&#39;: &#39;https://lms.qinsilk.com&#39;, &#39;content-type&#39;: &#39;application/x-www-form-urlencoded&#39;, &#39;User-Agent&#39;: r&#39;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.
        <a href="/posts/history/%E5%86%99%E4%B8%AApython%E8%84%9A%E6%9C%AC%E6%AF%8F%E5%A4%A9%E5%AE%9A%E6%97%B6%E7%99%BB%E5%BD%95/">...</a>
      
    </p>
  </article>
  
  <article class="markdown book-post">
    <h2>
      <a href="/posts/history/oom%E5%A0%86%E6%A0%88%E4%BF%A1%E6%81%AF%E5%88%86%E6%9E%90/">Oom堆栈信息分析</a>
    </h2>
    
  <h5>August 22, 2021</h5>



  

  
  <div>
    
      <a href="/tags/2023-05-07%E4%BB%8Ehalo%E5%8D%9A%E5%AE%A2%E8%BF%81%E7%A7%BB/">2023-05-07从halo博客迁移</a>
  </div>
  




    <p>先把一台有问题的服务从微服务摘下来，其他服务重启，保证线上运行正常，然后在这台服务上进行分析原因。
1、打印GC日志
JAVA_OPTS=&#34;$JAVA_OPTS -server -Xms4096m -Xmx4096m -Xss1024k -XX:PermSize=256m -XX:MaxPermSize=256m -XX:+PrintGCDetails -Xloggc:/usr/local/gc.log -XX:+PrintGCTimeStamps&#34; 查看GC情况（Minor GC、Major GC、Full GC）
tail -n 50 gc.log 2、查看CPU占用情况
jps top -H -p [pid] 3、把堆栈信息导出来
jstack pid &gt; jst.txt jmap -dump:format=b,file=jdump.bin pid -dump: 生成Java堆转储快照 -heap：显示Java堆详细信息 -histo：显示堆中对象统计信息 同时也可以使用 jmap -histo &lt;PID&gt; | grep [过滤类] 查看一下有没有哪个类对象过多，如果有，可能就是这里的问题了。 分析堆栈信息：Memory Analyzer tools:AMT
overview -&gt; See stacktrace，可以看见栈信息
然后点击details，查看这个GC不掉的内存对象是谁，找到自己写的内存对象。
然后去分析代码，为什么会出现这种情况。
    </p>
  </article>
  

  
    <ul class="pagination pagination-default">
      <li class="page-item">
        <a href="/posts/" aria-label="First" class="page-link" role="button"><span aria-hidden="true">&laquo;&laquo;</span></a>
      </li>
      <li class="page-item">
        <a href="/posts/page/2/" aria-label="Previous" class="page-link" role="button"><span aria-hidden="true">&laquo;</span></a>
      </li>
      <li class="page-item">
        <a href="/posts/" aria-label="Page 1" class="page-link" role="button">1</a>
      </li>
      <li class="page-item">
        <a href="/posts/page/2/" aria-label="Page 2" class="page-link" role="button">2</a>
      </li>
      <li class="page-item active">
        <a aria-current="page" aria-label="Page 3" class="page-link" role="button">3</a>
      </li>
      <li class="page-item">
        <a href="/posts/page/4/" aria-label="Page 4" class="page-link" role="button">4</a>
      </li>
      <li class="page-item">
        <a href="/posts/page/5/" aria-label="Page 5" class="page-link" role="button">5</a>
      </li>
      <li class="page-item">
        <a href="/posts/page/4/" aria-label="Next" class="page-link" role="button"><span aria-hidden="true">&raquo;</span></a>
      </li>
      <li class="page-item">
        <a href="/posts/page/9/" aria-label="Last" class="page-link" role="button"><span aria-hidden="true">&raquo;&raquo;</span></a>
      </li>
    </ul>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">




  <div>
    <a class="flex align-center" href="https://github.com/alex-shpak/hugo-book/edit/main/exampleSite/content/posts/_index.md" target="_blank" rel="noopener">
      <img src="/svg/edit.svg" class="book-icon" alt="Edit" />
      <span>Edit this page</span>
    </a>
  </div>


</div>



  <script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script>


 
        
      </footer>

      
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  <nav>
  <ul>
  
    
    <li class="book-section-flat">
      <strong>Categories</strong>
      <ul>
      
      </ul>
    </li>
    
  
    
    <li class="book-section-flat">
      <strong>Tags</strong>
      <ul>
      
        <li class="flex justify-between">
          <a href="/tags/2023-05-07%E4%BB%8Ehalo%E5%8D%9A%E5%AE%A2%E8%BF%81%E7%A7%BB/">2023-05-07从halo博客迁移</a>
          <span>76</span>
        </li>
      
      </ul>
    </li>
    
  
  </ul>
</nav>

 
      </div>
    </aside>
    
  </main>

  
</body>
</html>












